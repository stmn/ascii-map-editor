var a1=Object.defineProperty;var u1=(e,i,r)=>i in e?a1(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r;var X=(e,i,r)=>(u1(e,typeof i!="symbol"?i+"":i,r),r);const l1=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const A of g.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&u(A)}).observe(document,{childList:!0,subtree:!0});function r(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerpolicy&&(g.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?g.credentials="include":c.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(c){if(c.ep)return;c.ep=!0;const g=r(c);fetch(c.href,g)}};l1();var Gl=Object.defineProperty,f1=(e,i,r)=>i in e?Gl(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,y=(e,i)=>Gl(e,"name",{value:i,configurable:!0}),c1=(e,i)=>{for(var r in i)Gl(e,r,{get:i[r],enumerable:!0})},nn=(e,i,r)=>(f1(e,typeof i!="symbol"?i+"":i,r),r),h1=(()=>{for(var e=new Uint8Array(128),i=0;i<64;i++)e[i<26?i+65:i<52?i+71:i<62?i-4:i*4-205]=i;return r=>{for(var u=r.length,c=new Uint8Array((u-(r[u-1]=="=")-(r[u-2]=="="))*3/4|0),g=0,A=0;g<u;){var p=e[r.charCodeAt(g++)],R=e[r.charCodeAt(g++)],I=e[r.charCodeAt(g++)],F=e[r.charCodeAt(g++)];c[A++]=p<<2|R>>4,c[A++]=R<<4|I>>2,c[A++]=I<<6|F}return c}})();function Pn(e){return e*Math.PI/180}y(Pn,"deg2rad");function qi(e){return e*180/Math.PI}y(qi,"rad2deg");function Sr(e,i,r){return i>r?Sr(e,r,i):Math.min(Math.max(e,i),r)}y(Sr,"clamp");function $n(e,i,r){if(typeof e=="number"&&typeof i=="number")return e+(i-e)*r;if(e instanceof G&&i instanceof G||e instanceof Et&&i instanceof Et)return e.lerp(i,r);throw new Error(`Bad value for lerp(): ${e}, ${i}. Only number, Vec2 and Color is supported.`)}y($n,"lerp");function $a(e,i,r,u,c){return u+(e-i)/(r-i)*(c-u)}y($a,"map");function Ch(e,i,r,u,c){return Sr($a(e,i,r,u,c),u,c)}y(Ch,"mapc");var Ue=class{constructor(e=0,i=e){X(this,"x",0);X(this,"y",0);this.x=e,this.y=i}static fromAngle(e){let i=Pn(e);return new Ue(Math.cos(i),Math.sin(i))}clone(){return new Ue(this.x,this.y)}add(...e){let i=Y(...e);return new Ue(this.x+i.x,this.y+i.y)}sub(...e){let i=Y(...e);return new Ue(this.x-i.x,this.y-i.y)}scale(...e){let i=Y(...e);return new Ue(this.x*i.x,this.y*i.y)}dist(...e){let i=Y(...e);return this.sub(i).len()}sdist(...e){let i=Y(...e);return this.sub(i).slen()}len(){return Math.sqrt(this.dot(this))}slen(){return this.dot(this)}unit(){let e=this.len();return e===0?new Ue(0):this.scale(1/e)}normal(){return new Ue(this.y,-this.x)}reflect(e){return this.sub(e.scale(2*this.dot(e)))}project(e){return e.scale(e.dot(this)/e.len())}reject(e){return this.sub(this.project(e))}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}angle(...e){let i=Y(...e);return qi(Math.atan2(this.y-i.y,this.x-i.x))}angleBetween(...e){let i=Y(...e);return qi(Math.atan2(this.cross(i),this.dot(i)))}lerp(e,i){return new Ue($n(this.x,e.x,i),$n(this.y,e.y,i))}slerp(e,i){let r=this.dot(e),u=this.cross(e),c=Math.atan2(u,r);return this.scale(Math.sin((1-i)*c)).add(e.scale(Math.sin(i*c))).scale(1/u)}isZero(){return this.x===0&&this.y===0}toFixed(e){return new Ue(Number(this.x.toFixed(e)),Number(this.y.toFixed(e)))}transform(e){return e.multVec2(this)}eq(e){return this.x===e.x&&this.y===e.y}bbox(){return new ue(this,0,0)}toString(){return`vec2(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`}},G=Ue;y(G,"Vec2"),nn(G,"LEFT",new Ue(-1,0)),nn(G,"RIGHT",new Ue(1,0)),nn(G,"UP",new Ue(0,-1)),nn(G,"DOWN",new Ue(0,1));function Y(...e){if(e.length===1){if(e[0]instanceof G)return new G(e[0].x,e[0].y);if(Array.isArray(e[0])&&e[0].length===2)return new G(...e[0])}return new G(...e)}y(Y,"vec2");var le=class{constructor(e,i,r){X(this,"r",255);X(this,"g",255);X(this,"b",255);this.r=Sr(e,0,255),this.g=Sr(i,0,255),this.b=Sr(r,0,255)}static fromArray(e){return new le(e[0],e[1],e[2])}static fromHex(e){if(typeof e=="number")return new le(e>>16&255,e>>8&255,e>>0&255);if(typeof e=="string"){let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return new le(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16))}else throw new Error("Invalid hex color format")}static fromHSL(e,i,r){if(i==0)return new le(255*r,255*r,255*r);let u=y((I,F,W)=>(W<0&&(W+=1),W>1&&(W-=1),W<1/6?I+(F-I)*6*W:W<1/2?F:W<2/3?I+(F-I)*(2/3-W)*6:I),"hue2rgb"),c=r<.5?r*(1+i):r+i-r*i,g=2*r-c,A=u(g,c,e+1/3),p=u(g,c,e),R=u(g,c,e-1/3);return new le(Math.round(A*255),Math.round(p*255),Math.round(R*255))}clone(){return new le(this.r,this.g,this.b)}lighten(e){return new le(this.r+e,this.g+e,this.b+e)}darken(e){return this.lighten(-e)}invert(){return new le(255-this.r,255-this.g,255-this.b)}mult(e){return new le(this.r*e.r/255,this.g*e.g/255,this.b*e.b/255)}lerp(e,i){return new le($n(this.r,e.r,i),$n(this.g,e.g,i),$n(this.b,e.b,i))}eq(e){return this.r===e.r&&this.g===e.g&&this.b===e.b}toString(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toHex(){return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)}},Et=le;y(Et,"Color"),nn(Et,"RED",new le(255,0,0)),nn(Et,"GREEN",new le(0,255,0)),nn(Et,"BLUE",new le(0,0,255)),nn(Et,"YELLOW",new le(255,255,0)),nn(Et,"MAGENTA",new le(255,0,255)),nn(Et,"CYAN",new le(0,255,255)),nn(Et,"WHITE",new le(255,255,255)),nn(Et,"BLACK",new le(0,0,0));function Bt(...e){if(e.length===0)return new Et(255,255,255);if(e.length===1){if(e[0]instanceof Et)return e[0].clone();if(typeof e[0]=="string")return Et.fromHex(e[0]);if(Array.isArray(e[0])&&e[0].length===3)return Et.fromArray(e[0])}return new Et(...e)}y(Bt,"rgb");var d1=y((e,i,r)=>Et.fromHSL(e,i,r),"hsl2rgb"),ae=class{constructor(e,i,r,u){X(this,"x",0);X(this,"y",0);X(this,"w",1);X(this,"h",1);this.x=e,this.y=i,this.w=r,this.h=u}scale(e){return new ae(this.x+this.w*e.x,this.y+this.h*e.y,this.w*e.w,this.h*e.h)}pos(){return new G(this.x,this.y)}clone(){return new ae(this.x,this.y,this.w,this.h)}eq(e){return this.x===e.x&&this.y===e.y&&this.w===e.w&&this.h===e.h}toString(){return`quad(${this.x}, ${this.y}, ${this.w}, ${this.h})`}};y(ae,"Quad");function ie(e,i,r,u){return new ae(e,i,r,u)}y(ie,"quad");var fe=class{constructor(e){X(this,"m",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);e&&(this.m=e)}static translate(e){return new fe([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,0,1])}static scale(e){return new fe([e.x,0,0,0,0,e.y,0,0,0,0,1,0,0,0,0,1])}static rotateX(e){e=Pn(-e);let i=Math.cos(e),r=Math.sin(e);return new fe([1,0,0,0,0,i,-r,0,0,r,i,0,0,0,0,1])}static rotateY(e){e=Pn(-e);let i=Math.cos(e),r=Math.sin(e);return new fe([i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1])}static rotateZ(e){e=Pn(-e);let i=Math.cos(e),r=Math.sin(e);return new fe([i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1])}translate(e){return this.m[12]+=this.m[0]*e.x+this.m[4]*e.y,this.m[13]+=this.m[1]*e.x+this.m[5]*e.y,this.m[14]+=this.m[2]*e.x+this.m[6]*e.y,this.m[15]+=this.m[3]*e.x+this.m[7]*e.y,this}scale(e){return this.m[0]*=e.x,this.m[4]*=e.y,this.m[1]*=e.x,this.m[5]*=e.y,this.m[2]*=e.x,this.m[6]*=e.y,this.m[3]*=e.x,this.m[7]*=e.y,this}rotate(e){e=Pn(-e);let i=Math.cos(e),r=Math.sin(e),u=this.m[0],c=this.m[1],g=this.m[4],A=this.m[5];return this.m[0]=u*i+c*r,this.m[1]=-u*r+c*i,this.m[4]=g*i+A*r,this.m[5]=-g*r+A*i,this}mult(e){let i=[];for(let r=0;r<4;r++)for(let u=0;u<4;u++)i[r*4+u]=this.m[0*4+u]*e.m[r*4+0]+this.m[1*4+u]*e.m[r*4+1]+this.m[2*4+u]*e.m[r*4+2]+this.m[3*4+u]*e.m[r*4+3];return new fe(i)}multVec2(e){return new G(e.x*this.m[0]+e.y*this.m[4]+this.m[12],e.x*this.m[1]+e.y*this.m[5]+this.m[13])}getTranslation(){return new G(this.m[12],this.m[13])}getScale(){if(this.m[0]!=0||this.m[1]!=0){let e=this.m[0]*this.m[5]-this.m[1]*this.m[4],i=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new G(i,e/i)}else if(this.m[4]!=0||this.m[5]!=0){let e=this.m[0]*this.m[5]-this.m[1]*this.m[4],i=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new G(e/i,i)}else return new G(0,0)}getRotation(){if(this.m[0]!=0||this.m[1]!=0){let e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return qi(this.m[1]>0?Math.acos(this.m[0]/e):-Math.acos(this.m[0]/e))}else if(this.m[4]!=0||this.m[5]!=0){let e=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return qi(Math.PI/2-(this.m[5]>0?Math.acos(-this.m[4]/e):-Math.acos(this.m[4]/e)))}else return 0}getSkew(){if(this.m[0]!=0||this.m[1]!=0){let e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new G(Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(e*e),0)}else if(this.m[4]!=0||this.m[5]!=0){let e=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new G(0,Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(e*e))}else return new G(0,0)}invert(){let e=[],i=this.m[10]*this.m[15]-this.m[14]*this.m[11],r=this.m[9]*this.m[15]-this.m[13]*this.m[11],u=this.m[9]*this.m[14]-this.m[13]*this.m[10],c=this.m[8]*this.m[15]-this.m[12]*this.m[11],g=this.m[8]*this.m[14]-this.m[12]*this.m[10],A=this.m[8]*this.m[13]-this.m[12]*this.m[9],p=this.m[6]*this.m[15]-this.m[14]*this.m[7],R=this.m[5]*this.m[15]-this.m[13]*this.m[7],I=this.m[5]*this.m[14]-this.m[13]*this.m[6],F=this.m[4]*this.m[15]-this.m[12]*this.m[7],W=this.m[4]*this.m[14]-this.m[12]*this.m[6],J=this.m[5]*this.m[15]-this.m[13]*this.m[7],H=this.m[4]*this.m[13]-this.m[12]*this.m[5],M=this.m[6]*this.m[11]-this.m[10]*this.m[7],Qt=this.m[5]*this.m[11]-this.m[9]*this.m[7],Q=this.m[5]*this.m[10]-this.m[9]*this.m[6],ht=this.m[4]*this.m[11]-this.m[8]*this.m[7],Mt=this.m[4]*this.m[10]-this.m[8]*this.m[6],St=this.m[4]*this.m[9]-this.m[8]*this.m[5];e[0]=this.m[5]*i-this.m[6]*r+this.m[7]*u,e[4]=-(this.m[4]*i-this.m[6]*c+this.m[7]*g),e[8]=this.m[4]*r-this.m[5]*c+this.m[7]*A,e[12]=-(this.m[4]*u-this.m[5]*g+this.m[6]*A),e[1]=-(this.m[1]*i-this.m[2]*r+this.m[3]*u),e[5]=this.m[0]*i-this.m[2]*c+this.m[3]*g,e[9]=-(this.m[0]*r-this.m[1]*c+this.m[3]*A),e[13]=this.m[0]*u-this.m[1]*g+this.m[2]*A,e[2]=this.m[1]*p-this.m[2]*R+this.m[3]*I,e[6]=-(this.m[0]*p-this.m[2]*F+this.m[3]*W),e[10]=this.m[0]*J-this.m[1]*F+this.m[3]*H,e[14]=-(this.m[0]*I-this.m[1]*W+this.m[2]*H),e[3]=-(this.m[1]*M-this.m[2]*Qt+this.m[3]*Q),e[7]=this.m[0]*M-this.m[2]*ht+this.m[3]*Mt,e[11]=-(this.m[0]*Qt-this.m[1]*ht+this.m[3]*St),e[15]=this.m[0]*Q-this.m[1]*Mt+this.m[2]*St;let Wt=this.m[0]*e[0]+this.m[1]*e[4]+this.m[2]*e[8]+this.m[3]*e[12];for(let kt=0;kt<4;kt++)for(let Zt=0;Zt<4;Zt++)e[kt*4+Zt]*=1/Wt;return new fe(e)}clone(){return new fe([...this.m])}toString(){return this.m.toString()}};y(fe,"Mat4");function Vl(e,i,r,u=Math.sin){return e+(u(r)+1)/2*(i-e)}y(Vl,"wave");var p1=1103515245,g1=12345,nh=2147483648,Yl=class{constructor(e){X(this,"seed");this.seed=e}gen(){return this.seed=(p1*this.seed+g1)%nh,this.seed/nh}genNumber(e,i){return e+this.gen()*(i-e)}genVec2(e,i){return new G(this.genNumber(e.x,i.x),this.genNumber(e.y,i.y))}genColor(e,i){return new Et(this.genNumber(e.r,i.r),this.genNumber(e.g,i.g),this.genNumber(e.b,i.b))}genAny(...e){if(e.length===0)return this.gen();if(e.length===1){if(typeof e[0]=="number")return this.genNumber(0,e[0]);if(e[0]instanceof G)return this.genVec2(Y(0,0),e[0]);if(e[0]instanceof Et)return this.genColor(Bt(0,0,0),e[0])}else if(e.length===2){if(typeof e[0]=="number"&&typeof e[1]=="number")return this.genNumber(e[0],e[1]);if(e[0]instanceof G&&e[1]instanceof G)return this.genVec2(e[0],e[1]);if(e[0]instanceof Et&&e[1]instanceof Et)return this.genColor(e[0],e[1])}}};y(Yl,"RNG");var Rl=new Yl(Date.now());function Ih(e){return e!=null&&(Rl.seed=e),Rl.seed}y(Ih,"randSeed");function ts(...e){return Rl.genAny(...e)}y(ts,"rand");function Jl(...e){return Math.floor(ts(...e))}y(Jl,"randi");function Ph(e){return ts()<=e}y(Ph,"chance");function Oh(e){return e[Jl(e.length)]}y(Oh,"choose");function Bh(e,i){return e.pos.x+e.width>i.pos.x&&e.pos.x<i.pos.x+i.width&&e.pos.y+e.height>i.pos.y&&e.pos.y<i.pos.y+i.height}y(Bh,"testRectRect");function Fh(e,i){if(e.p1.x===e.p2.x&&e.p1.y===e.p2.y||i.p1.x===i.p2.x&&i.p1.y===i.p2.y)return null;let r=(i.p2.y-i.p1.y)*(e.p2.x-e.p1.x)-(i.p2.x-i.p1.x)*(e.p2.y-e.p1.y);if(r===0)return null;let u=((i.p2.x-i.p1.x)*(e.p1.y-i.p1.y)-(i.p2.y-i.p1.y)*(e.p1.x-i.p1.x))/r,c=((e.p2.x-e.p1.x)*(e.p1.y-i.p1.y)-(e.p2.y-e.p1.y)*(e.p1.x-i.p1.x))/r;return u<0||u>1||c<0||c>1?null:u}y(Fh,"testLineLineT");function Ui(e,i){let r=Fh(e,i);return r?Y(e.p1.x+r*(e.p2.x-e.p1.x),e.p1.y+r*(e.p2.y-e.p1.y)):null}y(Ui,"testLineLine");function Lh(e,i){if(zi(e,i.p1)||zi(e,i.p2))return!0;let r=e.points();return!!Ui(i,new jn(r[0],r[1]))||!!Ui(i,new jn(r[1],r[2]))||!!Ui(i,new jn(r[2],r[3]))||!!Ui(i,new jn(r[3],r[0]))}y(Lh,"testRectLine");function zi(e,i){return i.x>e.pos.x&&i.x<e.pos.x+e.width&&i.y>e.pos.y&&i.y<e.pos.y+e.height}y(zi,"testRectPoint");function Dh(e,i){let r=i.sub(e.p1),u=e.p2.sub(e.p1);if(Math.abs(r.cross(u))>Number.EPSILON)return!1;let c=r.dot(u)/u.dot(u);return c>=0&&c<=1}y(Dh,"testLinePoint");function Ql(e,i){let r=e.p2.sub(e.p1),u=r.dot(r),c=e.p1.sub(i.center),g=2*r.dot(c),A=c.dot(c)-i.radius*i.radius,p=g*g-4*u*A;if(u<=Number.EPSILON||p<0)return!1;if(p==0){let R=-g/(2*u);if(R>=0&&R<=1)return!0}else{let R=(-g+Math.sqrt(p))/(2*u),I=(-g-Math.sqrt(p))/(2*u);if(R>=0&&R<=1||I>=0&&I<=1)return!0}return au(i,e.p1)}y(Ql,"testLineCircle");function au(e,i){return e.center.sdist(i)<e.radius*e.radius}y(au,"testCirclePoint");function Nh(e,i){let r=i.pts[i.pts.length-1];for(let u of i.pts){if(Ql(new jn(r,u),e))return!0;r=u}return au(e,i.pts[0])?!0:Zl(i,e.center)}y(Nh,"testCirclePolygon");function Zl(e,i){let r=!1,u=e.pts;for(let c=0,g=u.length-1;c<u.length;g=c++)u[c].y>i.y!=u[g].y>i.y&&i.x<(u[g].x-u[c].x)*(i.y-u[c].y)/(u[g].y-u[c].y)+u[c].x&&(r=!r);return r}y(Zl,"testPolygonPoint");var jn=class{constructor(e,i){X(this,"p1");X(this,"p2");this.p1=e.clone(),this.p2=i.clone()}transform(e){return new jn(e.multVec2(this.p1),e.multVec2(this.p2))}bbox(){return ue.fromPoints(this.p1,this.p2)}area(){return this.p1.dist(this.p2)}clone(){return new jn(this.p1,this.p2)}};y(jn,"Line");var ue=class{constructor(e,i,r){X(this,"pos");X(this,"width");X(this,"height");this.pos=e.clone(),this.width=i,this.height=r}static fromPoints(e,i){return new ue(e.clone(),i.x-e.x,i.y-e.y)}center(){return new G(this.pos.x+this.width/2,this.pos.y+this.height/2)}points(){return[this.pos,this.pos.add(this.width,0),this.pos.add(this.width,this.height),this.pos.add(0,this.height)]}transform(e){return new ri(this.points().map(i=>e.multVec2(i)))}bbox(){return this.clone()}area(){return this.width*this.height}clone(){return new ue(this.pos.clone(),this.width,this.height)}distToPoint(e){return Math.sqrt(this.sdistToPoint(e))}sdistToPoint(e){let i=this.pos,r=this.pos.add(this.width,this.height),u=Math.max(i.x-e.x,0,e.x-r.x),c=Math.max(i.y-e.y,0,e.y-r.y);return u*u+c*c}};y(ue,"Rect");var Qo=class{constructor(e,i){X(this,"center");X(this,"radius");this.center=e.clone(),this.radius=i}transform(e){return new tu(this.center,this.radius,this.radius).transform(e)}bbox(){return ue.fromPoints(this.center.sub(Y(this.radius)),this.center.add(Y(this.radius)))}area(){return this.radius*this.radius*Math.PI}clone(){return new Qo(this.center,this.radius)}};y(Qo,"Circle");var tu=class{constructor(e,i,r){X(this,"center");X(this,"radiusX");X(this,"radiusY");this.center=e.clone(),this.radiusX=i,this.radiusY=r}transform(e){return new tu(e.multVec2(this.center),e.m[0]*this.radiusX,e.m[5]*this.radiusY)}bbox(){return ue.fromPoints(this.center.sub(Y(this.radiusX,this.radiusY)),this.center.add(Y(this.radiusX,this.radiusY)))}area(){return this.radiusX*this.radiusY*Math.PI}clone(){return new tu(this.center,this.radiusX,this.radiusY)}};y(tu,"Ellipse");var ri=class{constructor(e){X(this,"pts");if(e.length<3)throw new Error("Polygons should have at least 3 vertices");this.pts=e}transform(e){return new ri(this.pts.map(i=>e.multVec2(i)))}bbox(){let e=Y(Number.MAX_VALUE),i=Y(-Number.MAX_VALUE);for(let r of this.pts)e.x=Math.min(e.x,r.x),i.x=Math.max(i.x,r.x),e.y=Math.min(e.y,r.y),i.y=Math.max(i.y,r.y);return ue.fromPoints(e,i)}area(){let e=0,i=this.pts.length;for(let r=0;r<i;r++){let u=this.pts[r],c=this.pts[(r+1)%i];e+=u.x*c.y*.5,e-=c.x*u.y*.5}return Math.abs(e)}clone(){return new ri(this.pts.map(e=>e.clone()))}};y(ri,"Polygon");function Uh(e,i){let r=Number.MAX_VALUE,u=Y(0);for(let c of[e,i])for(let g=0;g<c.pts.length;g++){let A=c.pts[g],p=c.pts[(g+1)%c.pts.length].sub(A).normal().unit(),R=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let H=0;H<e.pts.length;H++){let M=e.pts[H].dot(p);R=Math.min(R,M),I=Math.max(I,M)}let F=Number.MAX_VALUE,W=-Number.MAX_VALUE;for(let H=0;H<i.pts.length;H++){let M=i.pts[H].dot(p);F=Math.min(F,M),W=Math.max(W,M)}let J=Math.min(I,W)-Math.max(R,F);if(J<0)return null;if(J<Math.abs(r)){let H=W-R,M=F-I;r=Math.abs(H)<Math.abs(M)?H:M,u=p.scale(r)}}return u}y(Uh,"sat");var Wa=2.5949095,rh=1.70158+1,ih=2*Math.PI/3,oh=2*Math.PI/4.5,Ja={linear:e=>e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>rh*e*e*e-1.70158*e*e,easeOutBack:e=>1+rh*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((Wa+1)*2*e-Wa)/2:(Math.pow(2*e-2,2)*((Wa+1)*(e*2-2)+Wa)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*ih),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*ih)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*oh))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*oh)/2+1,easeInBounce:e=>1-Ja.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?(1-Ja.easeOutBounce(1-2*e))/2:(1+Ja.easeOutBounce(2*e-1))/2},Ka=Ja,eu=class extends Map{constructor(...i){super(...i);X(this,"lastID");this.lastID=0}push(i){let r=this.lastID;return this.set(r,i),this.lastID++,r}pushd(i){let r=this.push(i);return()=>this.delete(r)}};y(eu,"IDList");var _r=class{constructor(e){X(this,"paused",!1);X(this,"cancel");this.cancel=e}static join(e){let i=new _r(()=>e.forEach(r=>r.cancel()));return Object.defineProperty(i,"paused",{get:()=>e[0].paused,set:r=>e.forEach(u=>u.paused=r)}),i.paused=!1,i}};y(_r,"EventController");var en=class{constructor(){X(this,"handlers",new eu)}add(e){let i=this.handlers.pushd((...u)=>{r.paused||e(...u)}),r=new _r(i);return r}addOnce(e){let i=this.add((...r)=>{i.cancel(),e(...r)});return i}next(){return new Promise(e=>this.addOnce(e))}trigger(...e){this.handlers.forEach(i=>i(...e))}numListeners(){return this.handlers.size}};y(en,"Event");var $r=class{constructor(){X(this,"handlers",{})}on(e,i){return this.handlers[e]||(this.handlers[e]=new en),this.handlers[e].add(i)}onOnce(e,i){let r=this.on(e,(...u)=>{r.cancel(),i(...u)});return r}next(e){return new Promise(i=>{this.onOnce(e,(...r)=>i(r[0]))})}trigger(e,...i){this.handlers[e]&&this.handlers[e].trigger(...i)}remove(e){delete this.handlers[e]}clear(){this.handlers={}}numListeners(e){var i,r;return(r=(i=this.handlers[e])==null?void 0:i.numListeners())!=null?r:0}};y($r,"EventHandler");function Xl(e,i){let r=typeof e,u=typeof i;if(r!==u)return!1;if(r==="object"&&u==="object"&&e!==null&&i!==null){let c=Object.keys(e),g=Object.keys(i);if(c.length!==g.length)return!1;for(let A of c){let p=e[A],R=i[A];if(!(typeof p=="function"&&typeof R=="function")&&!Xl(p,R))return!1}return!0}return e===i}y(Xl,"deepEq");function zh(e){let i=window.atob(e),r=i.length,u=new Uint8Array(r);for(let c=0;c<r;c++)u[c]=i.charCodeAt(c);return u.buffer}y(zh,"base64ToArrayBuffer");function kh(e){return zh(e.split(",")[1])}y(kh,"dataURLToArrayBuffer");function uu(e,i){let r=document.createElement("a");r.href=i,r.download=e,r.click()}y(uu,"download");function jl(e,i){uu(e,"data:text/plain;charset=utf-8,"+i)}y(jl,"downloadText");function qh(e,i){jl(e,JSON.stringify(i))}y(qh,"downloadJSON");function Tl(e,i){let r=URL.createObjectURL(i);uu(e,r),URL.revokeObjectURL(r)}y(Tl,"downloadBlob");var sh=y(e=>e.match(/^data:\w+\/\w+;base64,.+/),"isDataURL"),m1=y(e=>e.split(".").pop(),"getExt"),w1=(()=>{let e=0;return()=>e++})(),Wh=class{constructor(e=(i,r)=>i<r){X(this,"_items");X(this,"_compareFn");this._compareFn=e,this._items=[]}insert(e){this._items.push(e),this.moveUp(this._items.length-1)}remove(){if(this._items.length===0)return null;let e=this._items[0],i=this._items.pop();return this._items.length!==0&&(this._items[0]=i,this.moveDown(0)),e}clear(){this._items.splice(0,this._items.length)}moveUp(e){for(;e>0;){let i=Math.floor((e-1)/2);if(!this._compareFn(this._items[e],this._items[i])&&this._items[e]>=this._items[i])break;this.swap(e,i),e=i}}moveDown(e){for(;e<Math.floor(this._items.length/2);){let i=2*e+1;if(i<this._items.length-1&&!this._compareFn(this._items[i],this._items[i+1])&&++i,this._compareFn(this._items[e],this._items[i]))break;this.swap(e,i),e=i}}swap(e,i){[this._items[e],this._items[i]]=[this._items[i],this._items[e]]}get length(){return this._items.length}};y(Wh,"BinaryHeap");var Kh=class{constructor(){X(this,"dts",[]);X(this,"timer",0);X(this,"fps",0)}tick(e){this.dts.push(e),this.timer+=e,this.timer>=1&&(this.timer=0,this.fps=Math.round(1/(this.dts.reduce((i,r)=>i+r)/this.dts.length)),this.dts=[])}};y(Kh,"FPSCounter");var Qa=class{constructor(e,i){X(this,"time");X(this,"action");X(this,"finished",!1);X(this,"paused",!1);this.time=e,this.action=i}tick(e){return this.finished||this.paused?!1:(this.time-=e,this.time<=0?(this.action(),this.finished=!0,this.time=0,!0):!1)}reset(e){this.time=e,this.finished=!1}};y(Qa,"Timer");var ah={"Joy-Con L+R (STANDARD GAMEPAD Vendor: 057e Product: 200e)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},"Joy-Con (L) (STANDARD GAMEPAD Vendor: 057e Product: 2006)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"select",10:"lstick",16:"start"},sticks:{left:{x:0,y:1}}},"Joy-Con (R) (STANDARD GAMEPAD Vendor: 057e Product: 2007)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"start",10:"lstick",16:"select"},sticks:{left:{x:0,y:1}}},"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},default:{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}}},v1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA1CAYAAADyMeOEAAAAAXNSR0IArs4c6QAAAoVJREFUaIHdm7txwkAQhheGAqACiCHzOKQDQrqgILpwSAeEDBnEUAF0gCMxZ7G72qce/mec2Lpf9+3unaS78wgSNZ8uX5729+d1FNWXUuGmXlBOUUEIMckEpeQJgBu6C+BSFngztBR2vd+ovY+7g+p6LbgaWgJrAeUkDYIUXgXdBBwNi6kpABJwMTQH3AZsXRR8GHTfgEth8E3gjdAUcNewpbTgY85sCMCUuOokozE0YM0YRzM9NGAAXd8+omAF5h4lnmBRvpSnZHyLoLEbaN+aKB9KWv/KWw0tAbbANnlG+UvB2dm77NxxdwgBpjrF/d7rW9cbmpvio2A5z8iAYpVU8pGZlo6/2+MSco2lHfd3rv9jAP038e1xef9o2mjvYb2OqpqKE81028/jeietlSEVO5FRWsxWsJit1G3aFpW8iWe5RwpiCZAk25QvV6nz6fIlynRGuTd5WqpJ4guAlDfVKBK87hXljflgv1ON6fV+4+5gVlA17SfeG0heKqQd4l4jI/wrmaA9N9R4ar+wpHJDZyrrfcH0nB66PqAzPi76pn+faSyJk/vzOorYhGurQrzj/P68jtBMawHaHBIR9xoD5O34dy0qQOSYHvqExq2TpT2nf76+w7y251OYF0CRaU+J920TwLUa6inx6OxE6g80lu2ux7Y2eJLF/rCXE6zEPdnenk9o+4ih9AEdnW2q81HXl5LuU6OTl2fXUhqganbXAGq3g6jJOWV/OnoesO6YqqEB/GdNsjf7uHtwj2DzmRNpp7iOZfm6D9oAxB6Yi1gC4oIYeo4MIPdopEQRB+cAko5J1tW386HpB2Kz1eop4Epdwls/kgZ1sh8gZsEjdcWkr//D8Qu3Z3l5Nl1NtAAAAABJRU5ErkJggg==",A1={};c1(A1,{default:()=>Hh});var Hh=h1("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L5QNSqT5iiySS9Ja2SV//5ME0ak//+4KgAAABgQBAADAMDgYCAEgCteQ0fZH6+ICXA357+MPfhR/+ywRf/U///LVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5JknQAFoWhGLm5gBClBmT3GiAAAAAGkHAAAIAAANIOAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),y1="data:image/png;base64,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",x1="data:image/png;base64,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",_1="3000.0.0-beta.2",uh={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"," ":"space"},E1=new Set([" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab"]),lh=["left","middle","right","back","forward"],fh=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",Ha="topleft",ch=64,S1="monospace",Ga="monospace",b1=36,hh=64,dh=256,ph=2048,gh=2048,mh=2048,wh=2048,vh=.1,V1=64,Ah="nearest",R1=1,Gh=[{name:"a_pos",size:2},{name:"a_uv",size:2},{name:"a_color",size:4}],Za=Gh.reduce((e,i)=>e+i.size,0),Yh=2048,yh=Yh*4*Za,xh=Yh*6,T1=`
attribute vec2 a_pos;
attribute vec2 a_uv;
attribute vec4 a_color;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

vec4 def_vert() {
	return vec4(a_pos, 0.0, 1.0);
}

{{user}}

void main() {
	vec4 pos = vert(a_pos, a_uv, a_color);
	v_pos = a_pos;
	v_uv = a_uv;
	v_color = a_color;
	gl_Position = pos;
}
`,M1=`
precision mediump float;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

uniform sampler2D u_tex;

vec4 def_frag() {
	return v_color * texture2D(u_tex, v_uv);
}

{{user}}

void main() {
	gl_FragColor = frag(v_pos, v_uv, v_color, u_tex);
	if (gl_FragColor.a == 0.0) {
		discard;
	}
}
`,vl=`
vec4 vert(vec2 pos, vec2 uv, vec4 color) {
	return def_vert();
}
`,Al=`
vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
	return def_frag();
}
`,C1=new Set(["id","require"]),I1=new Set(["add","update","draw","destroy","inspect","drawInspect"]);function Jh(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}y(Jh,"enterFullscreen");function Qh(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullScreen&&document.webkitExitFullScreen()}y(Qh,"exitFullscreen");function Zh(){return document.fullscreenElement||document.webkitFullscreenElement}y(Zh,"getFullscreenElement");function ti(e){switch(e){case"topleft":return new G(-1,-1);case"top":return new G(0,-1);case"topright":return new G(1,-1);case"left":return new G(-1,0);case"center":return new G(0,0);case"right":return new G(1,0);case"botleft":return new G(-1,1);case"bot":return new G(0,1);case"botright":return new G(1,1);default:return e}}y(ti,"anchorPt");function Xh(e){switch(e){case"left":return 0;case"center":return .5;case"right":return 1;default:return 0}}y(Xh,"alignPt");function jh(e){return e.createBuffer(1,1,44100)}y(jh,"createEmptyAudioBuffer");var xr=class{constructor(){X(this,"pressed",new Set([]));X(this,"pressedRepeat",new Set([]));X(this,"released",new Set([]));X(this,"down",new Set([]))}update(){this.pressed.clear(),this.released.clear(),this.pressedRepeat.clear()}press(e){this.pressed.add(e),this.pressedRepeat.add(e),this.down.add(e)}pressRepeat(e){this.pressedRepeat.add(e)}release(e){this.down.delete(e),this.pressed.delete(e),this.released.add(e)}};y(xr,"ButtonState");var P1=y((e={})=>{let i=[],r=(()=>{var tt,nt,gt;let o=(tt=e.root)!=null?tt:document.body;o===document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.margin="0px",document.documentElement.style.width="100%",document.documentElement.style.height="100%");let a=(nt=e.canvas)!=null?nt:(()=>{let Tt=document.createElement("canvas");return o.appendChild(Tt),Tt})(),f=(gt=e.scale)!=null?gt:1,m=e.width&&e.height&&!e.stretch&&!e.letterbox;m?(a.width=e.width*f,a.height=e.height*f):(a.width=a.parentElement.offsetWidth,a.height=a.parentElement.offsetHeight);let x=a.width,d=a.height,S=e.pixelDensity||window.devicePixelRatio;a.width*=S,a.height*=S;let P=["outline: none","cursor: default"];m?(P.push(`width: ${x}px`),P.push(`height: ${d}px`)):(P.push("width: 100%"),P.push("height: 100%")),e.crisp&&(P.push("image-rendering: pixelated"),P.push("image-rendering: crisp-edges")),a.style.cssText=P.join(";"),a.tabIndex=0;let _=document.createElement("canvas");_.width=dh,_.height=dh;let b=_.getContext("2d",{willReadFrequently:!0}),O=a.offsetWidth,k=a.offsetHeight;return new ResizeObserver(Tt=>{for(let Rt of Tt)if(Rt.target===a){if(O===a.offsetWidth&&k===a.offsetHeight)return;O=a.offsetWidth,k=a.offsetHeight,a.width=O*S,a.height=k*S,p.frameBuffer.free(),p.frameBuffer=new A(u.drawingBufferWidth,u.drawingBufferHeight),ao(),M.ev.onOnce("frameEnd",()=>{M.ev.trigger("resize")})}}).observe(a),{canvas:a,pixelDensity:S,fontCacheCanvas:_,fontCacheCtx:b,keyState:new xr,mouseState:new xr,virtualButtonState:new xr,gamepadButtonState:new xr,charInputted:[],isMouseMoved:!1,mouseStarted:!1,mousePos:new G(0,0),mouseDeltaPos:new G(0,0),time:0,realTime:0,skipTime:!1,dt:0,numFrames:0,isTouchScreen:"ontouchstart"in window||navigator.maxTouchPoints>0,loopID:null,stopped:!1,paused:!1,fpsCounter:new Kh}})(),u=r.canvas.getContext("webgl",{antialias:!0,depth:!0,stencil:!0,alpha:!0,preserveDrawingBuffer:!0});class c{constructor(a,f,m={}){X(this,"src",null);X(this,"glTex");X(this,"width");X(this,"height");this.glTex=u.createTexture(),i.push(()=>this.free()),this.bind(),a&&f&&u.texImage2D(u.TEXTURE_2D,0,u.RGBA,a,f,0,u.RGBA,u.UNSIGNED_BYTE,null),this.width=a,this.height=f;let x=(()=>{var S;switch((S=m.filter)!=null?S:e.texFilter){case"linear":return u.LINEAR;case"nearest":return u.NEAREST;default:return u.NEAREST}})(),d=(()=>{switch(m.wrap){case"repeat":return u.REPEAT;case"clampToEdge":return u.CLAMP_TO_EDGE;default:return u.CLAMP_TO_EDGE}})();u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,x),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,x),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,d),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,d),this.unbind()}static fromImage(a,f={}){let m=new c(0,0,f);return m.bind(),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a),m.width=a.width,m.height=a.height,m.unbind(),m.src=a,m}update(a,f=0,m=0){this.bind(),u.texSubImage2D(u.TEXTURE_2D,0,f,m,u.RGBA,u.UNSIGNED_BYTE,a),this.unbind()}bind(){u.bindTexture(u.TEXTURE_2D,this.glTex)}unbind(){u.bindTexture(u.TEXTURE_2D,null)}free(){u.deleteTexture(this.glTex)}}y(c,"Texture");class g{constructor(a,f){X(this,"tex");X(this,"canvas");X(this,"ctx");X(this,"x",0);X(this,"y",0);X(this,"curHeight",0);this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=f,this.tex=c.fromImage(this.canvas),this.ctx=this.canvas.getContext("2d")}add(a){if(a.width>this.canvas.width||a.height>this.canvas.height)throw new Error(`Texture size (${a.width} x ${a.height}) exceeds limit (${this.canvas.width} x ${this.canvas.height})`);this.x+a.width>this.canvas.width&&(this.x=0,this.y+=this.curHeight,this.curHeight=0),this.y+a.height>this.canvas.height&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tex=c.fromImage(this.canvas),this.x=0,this.y=0,this.curHeight=0);let f=new G(this.x,this.y);return this.x+=a.width,a.height>this.curHeight&&(this.curHeight=a.height),a instanceof ImageData?this.ctx.putImageData(a,f.x,f.y):this.ctx.drawImage(a,f.x,f.y),this.tex.update(this.canvas),[this.tex,new ae(f.x/this.canvas.width,f.y/this.canvas.height,a.width/this.canvas.width,a.height/this.canvas.height)]}}y(g,"TexPacker");class A{constructor(a,f,m={}){X(this,"tex");X(this,"glFrameBuffer");X(this,"glRenderBuffer");this.tex=new c(a,f,m),this.glFrameBuffer=u.createFramebuffer(),this.glRenderBuffer=u.createRenderbuffer(),i.push(()=>this.free()),this.bind(),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,a,f),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,this.tex.glTex,0),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,this.glRenderBuffer),this.unbind()}bind(){u.bindFramebuffer(u.FRAMEBUFFER,this.glFrameBuffer),u.bindRenderbuffer(u.RENDERBUFFER,this.glRenderBuffer)}unbind(){u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindRenderbuffer(u.RENDERBUFFER,null)}free(){u.deleteFramebuffer(this.glFrameBuffer),u.deleteRenderbuffer(this.glRenderBuffer)}}y(A,"FrameBuffer");let p=(()=>{var _;let o=Bn(vl,Al),a=c.fromImage(new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1)),f=new A(u.drawingBufferWidth,u.drawingBufferHeight),m=null,x=1;e.background&&(m=Et.fromArray(e.background),x=(_=e.background[3])!=null?_:1,u.clearColor(m.r/255,m.g/255,m.b/255,x)),u.enable(u.BLEND),u.enable(u.SCISSOR_TEST),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);let d=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,d),u.bufferData(u.ARRAY_BUFFER,yh*4,u.DYNAMIC_DRAW),Gh.reduce((b,O,k)=>(u.vertexAttribPointer(k,O.size,u.FLOAT,!1,Za*4,b),u.enableVertexAttribArray(k),b+O.size*4),0),u.bindBuffer(u.ARRAY_BUFFER,null);let S=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,S),u.bufferData(u.ELEMENT_ARRAY_BUFFER,xh*4,u.DYNAMIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null);let P=c.fromImage(new ImageData(new Uint8ClampedArray([128,128,128,255,190,190,190,255,190,190,190,255,128,128,128,255]),2,2),{wrap:"repeat",filter:"nearest"});return{drawCalls:0,lastDrawCalls:0,defShader:o,curShader:o,frameBuffer:f,postShader:null,postShaderUniform:null,defTex:a,curTex:a,curUniform:{},vbuf:d,ibuf:S,vqueue:[],iqueue:[],transform:new fe,transformStack:[],bgTex:P,bgColor:m,bgAlpha:x,width:e.width,height:e.height,viewport:{x:0,y:0,width:u.drawingBufferWidth,height:u.drawingBufferHeight}}})();class R{constructor(a,f,m={},x=null){X(this,"tex");X(this,"frames",[new ae(0,0,1,1)]);X(this,"anims",{});X(this,"slice9",null);this.tex=a,f&&(this.frames=f),this.anims=m,this.slice9=x}static from(a,f={}){return typeof a=="string"?R.fromURL(a,f):Promise.resolve(R.fromImage(a,f))}static fromImage(a,f={}){let[m,x]=H.packer.add(a),d=f.frames?f.frames.map(S=>new ae(x.x+S.x*x.w,x.y+S.y*x.h,S.w*x.w,S.h*x.h)):Qi(f.sliceX||1,f.sliceY||1,x.x,x.y,x.w,x.h);return new R(m,d,f.anims,f.slice9)}static fromURL(a,f={}){return Zt(a).then(m=>R.fromImage(m,f))}}y(R,"SpriteData");class I{constructor(a){X(this,"buf");this.buf=a}static fromArrayBuffer(a){return new Promise((f,m)=>F.ctx.decodeAudioData(a,f,m)).then(f=>new I(f))}static fromURL(a){return sh(a)?I.fromArrayBuffer(kh(a)):kt(a).then(f=>I.fromArrayBuffer(f))}}y(I,"SoundData");let F=(()=>{let o=new(window.AudioContext||window.webkitAudioContext),a=o.createGain();a.connect(o.destination);let f=new I(jh(o));return o.decodeAudioData(Hh.buffer.slice(0)).then(m=>{f.buf=m}).catch(m=>{console.error("Failed to load burp: ",m)}),{ctx:o,masterNode:a,burpSnd:f}})();class W{constructor(a){X(this,"loaded",!1);X(this,"data",null);X(this,"error",null);X(this,"onLoadEvents",new en);X(this,"onErrorEvents",new en);X(this,"onFinishEvents",new en);a.then(f=>{this.data=f,this.onLoadEvents.trigger(f)}).catch(f=>{if(this.error=f,this.onErrorEvents.numListeners()>0)this.onErrorEvents.trigger(f);else throw f}).finally(()=>{this.onFinishEvents.trigger(),this.loaded=!0})}static loaded(a){let f=new W(Promise.resolve(a));return f.data=a,f.loaded=!0,f}onLoad(a){return this.onLoadEvents.add(a),this}onError(a){return this.onErrorEvents.add(a),this}onFinish(a){return this.onFinishEvents.add(a),this}then(a){return this.onLoad(a)}catch(a){return this.onError(a)}finally(a){return this.onFinish(a)}}y(W,"Asset");class J{constructor(){X(this,"assets",new Map);X(this,"lastUID",0)}add(a,f){let m=a!=null?a:this.lastUID+++"",x=new W(f);return this.assets.set(m,x),x}addLoaded(a,f){let m=a!=null?a:this.lastUID+++"",x=W.loaded(f);return this.assets.set(m,x),x}get(a){return this.assets.get(a)}progress(){if(this.assets.size===0)return 1;let a=0;return this.assets.forEach(f=>{f.loaded&&a++}),a/this.assets.size}}y(J,"AssetBucket");let H={urlPrefix:"",sprites:new J,fonts:new J,bitmapFonts:new J,sounds:new J,shaders:new J,custom:new J,packer:new g(mh,wh),loaded:!1},M={ev:new $r,objEvents:new $r,root:Ur([]),gravity:0,scenes:{},logs:[],cam:{pos:null,scale:new G(1),angle:0,shake:0,transform:new fe}};function Qt(o){return H.custom.add(null,o)}y(Qt,"load");function Q(){let o=[H.sprites,H.sounds,H.shaders,H.fonts,H.bitmapFonts,H.custom];return o.reduce((a,f)=>a+f.progress(),0)/o.length}y(Q,"loadProgress");function ht(o){return o!==void 0&&(H.urlPrefix=o),H.urlPrefix}y(ht,"loadRoot");function Mt(o){let a=H.urlPrefix+o;return fetch(a).then(f=>{if(!f.ok)throw new Error(`Failed to fetch ${a}`);return f})}y(Mt,"fetchURL");function St(o){return Mt(o).then(a=>a.json())}y(St,"fetchJSON");function Wt(o){return Mt(o).then(a=>a.text())}y(Wt,"fetchText");function kt(o){return Mt(o).then(a=>a.arrayBuffer())}y(kt,"fetchArrayBuffer");function Zt(o){let a=new Image;return a.crossOrigin="anonymous",a.src=sh(o)?o:H.urlPrefix+o,new Promise((f,m)=>{a.onload=()=>f(a),a.onerror=()=>m(new Error(`Failed to load image from "${o}"`))})}y(Zt,"loadImg");class Se{constructor(a,f={}){X(this,"fontface");X(this,"outline");X(this,"filter");var m,x;this.fontface=a,this.outline=(m=f.outline)!=null?m:0,this.filter=(x=f.filter)!=null?x:Ah}}y(Se,"FontData");function tr(o,a,f={}){let m=new FontFace(o,typeof a=="string"?`url(${a})`:a);return document.fonts.add(m),H.fonts.add(o,m.load().catch(x=>{throw new Error(`Failed to load font from "${a}": ${x}`)}).then(x=>new Se(x,f)))}y(tr,"loadFont");function ai(o,a,f,m,x={}){return H.bitmapFonts.add(o,Zt(a).then(d=>{var S;return ro(c.fromImage(d,x),f,m,(S=x.chars)!=null?S:fh)}))}y(ai,"loadBitmapFont");function Qi(o=1,a=1,f=0,m=0,x=1,d=1){let S=[],P=x/o,_=d/a;for(let b=0;b<a;b++)for(let O=0;O<o;O++)S.push(new ae(f+O*P,m+b*_,P,_));return S}y(Qi,"slice");function Zi(o,a){return Qt(typeof a=="string"?new Promise((f,m)=>{St(a).then(x=>{Zi(o,x).then(f).catch(m)})}):R.from(o).then(f=>{let m={};for(let x in a){let d=a[x],S=f.frames[0],P=mh*S.w,_=wh*S.h,b=d.frames?d.frames.map(k=>new ae(S.x+(d.x+k.x)/P*S.w,S.y+(d.y+k.y)/_*S.h,k.w/P*S.w,k.h/_*S.h)):Qi(d.sliceX||1,d.sliceY||1,S.x+d.x/P*S.w,S.y+d.y/_*S.h,d.width/P*S.w,d.height/_*S.h),O=new R(f.tex,b,d.anims);H.sprites.addLoaded(x,O),m[x]=O}return m}))}y(Zi,"loadSpriteAtlas");function Xi(o,a={}){let f=document.createElement("canvas"),m=o[0].width,x=o[0].height;f.width=m*o.length,f.height=x;let d=f.getContext("2d");o.forEach((P,_)=>{P instanceof ImageData?d.putImageData(P,_*m,0):d.drawImage(P,_*m,0)});let S=d.getImageData(0,0,o.length*m,x);return R.fromImage(S,{...a,sliceX:o.length,sliceY:1})}y(Xi,"createSpriteSheet");function er(o,a,f={sliceX:1,sliceY:1,anims:{}}){return Array.isArray(a)?a.some(m=>typeof m=="string")?H.sprites.add(o,Promise.all(a.map(m=>typeof m=="string"?Zt(m):Promise.resolve(m))).then(m=>Xi(m,f))):H.sprites.addLoaded(o,Xi(a,f)):typeof a=="string"?H.sprites.add(o,R.from(a,f)):H.sprites.addLoaded(o,R.fromImage(a,f))}y(er,"loadSprite");function ji(o,a){return H.sprites.add(o,new Promise(async f=>{let m=typeof a=="string"?await St(a):a,x=await Promise.all(m.frames.map(Zt)),d=document.createElement("canvas");d.width=m.width,d.height=m.height*m.frames.length;let S=d.getContext("2d");x.forEach((_,b)=>{S.drawImage(_,0,b*m.height)});let P=await er(null,d,{sliceY:m.frames.length,anims:m.anims});f(P)}))}y(ji,"loadPedit");function as(o,a,f){typeof a=="string"&&!f&&(f=a.replace(new RegExp(`${m1(a)}$`),"json"));let m=typeof f=="string"?St(f):Promise.resolve(f);return H.sprites.add(o,m.then(x=>{let d=x.meta.size,S=x.frames.map(_=>new ae(_.frame.x/d.w,_.frame.y/d.h,_.frame.w/d.w,_.frame.h/d.h)),P={};for(let _ of x.meta.frameTags)_.from===_.to?P[_.name]=_.from:P[_.name]={from:_.from,to:_.to,speed:10,loop:!0,pingpong:_.direction==="pingpong"};return R.from(a,{frames:S,anims:P})}))}y(as,"loadAseprite");function us(o,a,f){return H.shaders.addLoaded(o,Bn(a,f))}y(us,"loadShader");function mn(o,a,f){let m=y(d=>d?Wt(d):Promise.resolve(null),"resolveUrl"),x=Promise.all([m(a),m(f)]).then(([d,S])=>Bn(d,S));return H.shaders.add(o,x)}y(mn,"loadShaderURL");function rn(o,a){return H.sounds.add(o,typeof a=="string"?I.fromURL(a):I.fromArrayBuffer(a))}y(rn,"loadSound");function ls(o="bean"){return er(o,v1)}y(ls,"loadBean");function nr(o){return H.sprites.get(o)}y(nr,"getSprite");function Pe(o){return H.sounds.get(o)}y(Pe,"getSound");function $i(o){return H.fonts.get(o)}y($i,"getFont");function to(o){return H.bitmapFonts.get(o)}y(to,"getBitmapFont");function eo(o){return H.shaders.get(o)}y(eo,"getShader");function wn(o){if(typeof o=="string"){let a=nr(o);if(a)return a;if(Q()<1)return null;throw new Error(`Sprite not found: ${o}`)}else{if(o instanceof R)return W.loaded(o);if(o instanceof W)return o;throw new Error(`Invalid sprite: ${o}`)}}y(wn,"resolveSprite");function Tr(o){var a;if(typeof o=="string"){let f=Pe(o);if(f)return(a=f.data)!=null?a:f;if(Q()<1)return null;throw new Error(`Sound not found: ${o}`)}else{if(o instanceof I)return o;if(o instanceof W)return o.data?o.data:o;throw new Error(`Invalid sound: ${o}`)}}y(Tr,"resolveSound");function fs(o){var a;if(!o)return p.defShader;if(typeof o=="string"){let f=eo(o);if(f)return(a=f.data)!=null?a:f;if(Q()<1)return null;throw new Error(`Shader not found: ${o}`)}else if(o instanceof W)return o.data?o.data:o;return o}y(fs,"resolveShader");function On(o){var a,f,m;if(!o)return On((a=e.font)!=null?a:S1);if(typeof o=="string"){let x=to(o),d=$i(o);if(x)return(f=x.data)!=null?f:x;if(d)return(m=d.data)!=null?m:d;if(document.fonts.check(`${hh}px ${o}`))return o;if(Q()<1)return null;throw new Error(`Font not found: ${o}`)}else if(o instanceof W)return o.data?o.data:o;return o}y(On,"resolveFont");function rr(o){return o!==void 0&&(F.masterNode.gain.value=o),F.masterNode.gain.value}y(rr,"volume");function no(o,a={}){var Tt,Rt,ne,Lt,Gt;let f=Tr(o),m=F.ctx,x=(Tt=a.paused)!=null?Tt:!1,d=m.createBufferSource(),S=new en,P=m.createGain(),_=(Rt=a.seek)!=null?Rt:0,b=0,O=0,k=!1;d.loop=Boolean(a.loop),d.detune.value=(ne=a.detune)!=null?ne:0,d.playbackRate.value=(Lt=a.speed)!=null?Lt:1,d.connect(P),d.onended=()=>{var it;nt()>=((it=d.buffer)==null?void 0:it.duration)&&S.trigger()},P.connect(F.masterNode),P.gain.value=(Gt=a.volume)!=null?Gt:1;let tt=y(it=>{d.buffer=it.buf,x||(b=m.currentTime,d.start(0,_),k=!0)},"start");f instanceof W?f.onLoad(tt):f instanceof I&&tt(f);let nt=y(()=>{if(!d.buffer)return 0;let it=x?O-b:m.currentTime-b,xt=d.buffer.duration;return d.loop?it%xt:Math.min(it,xt)},"getTime"),gt=y(it=>{let xt=m.createBufferSource();return xt.buffer=it.buffer,xt.loop=it.loop,xt.playbackRate.value=it.playbackRate.value,xt.detune.value=it.detune.value,xt.onended=it.onended,xt.connect(P),xt},"cloneNode");return{set paused(it){if(x!==it)if(x=it,it)k&&(d.stop(),k=!1),O=m.currentTime;else{d=gt(d);let xt=O-b;d.start(0,xt),k=!0,b=m.currentTime-xt,O=0}},get paused(){return x},play(it=0){this.seek(it),this.paused=!1},seek(it){var xt;(xt=d.buffer)!=null&&xt.duration&&(it>d.buffer.duration||(x?(d=gt(d),b=O-it):(d.stop(),d=gt(d),b=m.currentTime-it,d.start(0,it),k=!0,O=0)))},set speed(it){d.playbackRate.value=it},get speed(){return d.playbackRate.value},set detune(it){d.detune.value=it},get detune(){return d.detune.value},set volume(it){P.gain.value=it},get volume(){return P.gain.value},set loop(it){d.loop=it},get loop(){return d.loop},duration(){var it,xt;return(xt=(it=d.buffer)==null?void 0:it.duration)!=null?xt:0},time(){return nt()%this.duration()},onEnd(it){return S.add(it)},then(it){return this.onEnd(it)}}}y(no,"play");function ir(o){return no(F.burpSnd,o)}y(ir,"burp");function Bn(o=vl,a=Al){let f=T1.replace("{{user}}",o!=null?o:vl),m=M1.replace("{{user}}",a!=null?a:Al),x=u.createShader(u.VERTEX_SHADER),d=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(x,f),u.shaderSource(d,m),u.compileShader(x),u.compileShader(d);let S=u.createProgram();if(i.push(()=>u.deleteProgram(S)),u.attachShader(S,x),u.attachShader(S,d),u.bindAttribLocation(S,0,"a_pos"),u.bindAttribLocation(S,1,"a_uv"),u.bindAttribLocation(S,2,"a_color"),u.linkProgram(S),!u.getProgramParameter(S,u.LINK_STATUS)){let P=y(k=>{let tt=/^ERROR:\s0:(?<line>\d+):\s(?<msg>.+)/,nt=k.match(tt);return{line:Number(nt.groups.line),msg:nt.groups.msg.replace(/\n\0$/,"")}},"formatShaderError"),_=u.getShaderInfoLog(x),b=u.getShaderInfoLog(d),O="";if(_){let k=P(_);O+=`Vertex shader line ${k.line-14}: ${k.msg}`}if(b){let k=P(b);O+=`Fragment shader line ${k.line-14}: ${k.msg}`}throw new Error(O)}return u.deleteShader(x),u.deleteShader(d),{bind(){u.useProgram(S)},unbind(){u.useProgram(null)},free(){u.deleteProgram(S)},send(P){for(let _ in P){let b=P[_],O=u.getUniformLocation(S,_);typeof b=="number"?u.uniform1f(O,b):b instanceof fe?u.uniformMatrix4fv(O,!1,new Float32Array(b.m)):b instanceof Et?u.uniform3f(O,b.r,b.g,b.b):b instanceof G&&u.uniform2f(O,b.x,b.y)}}}}y(Bn,"makeShader");function ro(o,a,f,m){let x=o.width/a,d={},S=m.split("").entries();for(let[P,_]of S)d[_]=new ae(P%x*a,Math.floor(P/x)*f,a,f);return{tex:o,map:d,size:f}}y(ro,"makeFont");function Ae(o,a,f,m=p.defTex,x=p.defShader,d={}){let S=fs(x);if(!S||S instanceof W)return;(m!==p.curTex||S!==p.curShader||!Xl(p.curUniform,d)||p.vqueue.length+o.length*Za>yh||p.iqueue.length+a.length>xh)&&ye();let P=f?p.transform:M.cam.transform.mult(p.transform);for(let _ of o){let b=hs(P.multVec2(_.pos));p.vqueue.push(b.x,b.y,_.uv.x,_.uv.y,_.color.r/255,_.color.g/255,_.color.b/255,_.opacity)}for(let _ of a)p.iqueue.push(_+p.vqueue.length/Za-o.length);p.curTex=m,p.curShader=S,p.curUniform=d}y(Ae,"drawRaw");function ye(){!p.curTex||!p.curShader||p.vqueue.length===0||p.iqueue.length===0||(u.bindBuffer(u.ARRAY_BUFFER,p.vbuf),u.bufferSubData(u.ARRAY_BUFFER,0,new Float32Array(p.vqueue)),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,p.ibuf),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(p.iqueue)),p.curShader.bind(),p.curShader.send(p.curUniform),p.curTex.bind(),u.drawElements(u.TRIANGLES,p.iqueue.length,u.UNSIGNED_SHORT,0),p.curTex.unbind(),p.curShader.unbind(),u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null),p.vqueue.length=0,p.iqueue.length=0,p.drawCalls++)}y(ye,"flush");function cs(){u.clear(u.COLOR_BUFFER_BIT),p.frameBuffer.bind(),u.clear(u.COLOR_BUFFER_BIT),p.bgColor||Oe(()=>{Fn({width:ee(),height:zt(),quad:new ae(0,0,ee()/ch,zt()/ch),tex:p.bgTex,fixed:!0})}),p.drawCalls=0,p.transformStack.length=0,p.transform=new fe}y(cs,"frameStart");function He(o,a){p.postShader=o,p.postShaderUniform=a!=null?a:null}y(He,"usePostEffect");function io(){ye(),p.frameBuffer.unbind(),Oe(()=>{on({flipY:!0,tex:p.frameBuffer.tex,scale:new G(1/r.pixelDensity),shader:p.postShader,uniform:typeof p.postShaderUniform=="function"?p.postShaderUniform():p.postShaderUniform,fixed:!0})}),ye(),p.lastDrawCalls=p.drawCalls}y(io,"frameEnd");function hs(o){return new G(o.x/ee()*2-1,-o.y/zt()*2+1)}y(hs,"screen2ndc");function or(o){p.transform=o.clone()}y(or,"pushMatrix");function bt(...o){if(o[0]===void 0)return;let a=Y(...o);a.x===0&&a.y===0||p.transform.translate(a)}y(bt,"pushTranslate");function ze(...o){if(o[0]===void 0)return;let a=Y(...o);a.x===1&&a.y===1||p.transform.scale(a)}y(ze,"pushScale");function Ge(o){o&&p.transform.rotate(o)}y(Ge,"pushRotate");function be(){p.transformStack.push(p.transform.clone())}y(be,"pushTransform");function te(){p.transformStack.length>0&&(p.transform=p.transformStack.pop())}y(te,"popTransform");function Fn(o){var nt;if(o.width===void 0||o.height===void 0)throw new Error('drawUVQuad() requires property "width" and "height".');if(o.width<=0||o.height<=0)return;let a=o.width,f=o.height,m=ti(o.anchor||Ha).scale(new G(a,f).scale(-.5)),x=o.quad||new ae(0,0,1,1),d=o.color||Bt(255,255,255),S=(nt=o.opacity)!=null?nt:1,P=o.tex?vh/o.tex.width:0,_=o.tex?vh/o.tex.height:0,b=x.x+P,O=x.y+_,k=x.w-P*2,tt=x.h-_*2;be(),bt(o.pos),Ge(o.angle),ze(o.scale),bt(m),Ae([{pos:new G(-a/2,f/2),uv:new G(o.flipX?b+k:b,o.flipY?O:O+tt),color:d,opacity:S},{pos:new G(-a/2,-f/2),uv:new G(o.flipX?b+k:b,o.flipY?O+tt:O),color:d,opacity:S},{pos:new G(a/2,-f/2),uv:new G(o.flipX?b:b+k,o.flipY?O+tt:O),color:d,opacity:S},{pos:new G(a/2,f/2),uv:new G(o.flipX?b:b+k,o.flipY?O:O+tt),color:d,opacity:S}],[0,1,3,1,2,3],o.fixed,o.tex,o.shader,o.uniform),te()}y(Fn,"drawUVQuad");function on(o){var d;if(!o.tex)throw new Error('drawTexture() requires property "tex".');let a=(d=o.quad)!=null?d:new ae(0,0,1,1),f=o.tex.width*a.w,m=o.tex.height*a.h,x=new G(1);if(o.tiled){let S=Math.ceil((o.width||f)/f),P=Math.ceil((o.height||m)/m),_=ti(o.anchor||Ha).add(new G(1,1)).scale(.5).scale(S*f,P*m);for(let b=0;b<S;b++)for(let O=0;O<P;O++)Fn(Object.assign(o,{pos:(o.pos||new G(0)).add(new G(f*b,m*O)).sub(_),scale:x.scale(o.scale||new G(1)),tex:o.tex,quad:a,width:f,height:m,anchor:"topleft"}))}else o.width&&o.height?(x.x=o.width/f,x.y=o.height/m):o.width?(x.x=o.width/f,x.y=x.x):o.height&&(x.y=o.height/m,x.x=x.y),Fn(Object.assign(o,{scale:x.scale(o.scale||new G(1)),tex:o.tex,quad:a,width:f,height:m}))}y(on,"drawTexture");function Ln(o){var m,x,d;if(!o.sprite)throw new Error('drawSprite() requires property "sprite"');let a=wn(o.sprite);if(!a||!a.data)return;let f=a.data.frames[(m=o.frame)!=null?m:0];if(!f)throw new Error(`Frame not found: ${(x=o.frame)!=null?x:0}`);on(Object.assign(o,{tex:a.data.tex,quad:f.scale((d=o.quad)!=null?d:new ae(0,0,1,1))}))}y(Ln,"drawSprite");function vn(o,a,f,m,x,d=1){m=Pn(m%360),x=Pn(x%360),x<=m&&(x+=Math.PI*2);let S=[],P=Math.ceil((x-m)/Pn(8)*d),_=(x-m)/P;for(let b=m;b<x;b+=_)S.push(o.add(a*Math.cos(b),f*Math.sin(b)));return S.push(o.add(a*Math.cos(x),f*Math.sin(x))),S}y(vn,"getArcPts");function ce(o){if(o.width===void 0||o.height===void 0)throw new Error('drawRect() requires property "width" and "height".');if(o.width<=0||o.height<=0)return;let a=o.width,f=o.height,m=ti(o.anchor||Ha).add(1,1).scale(new G(a,f).scale(-.5)),x=[new G(0,0),new G(a,0),new G(a,f),new G(0,f)];if(o.radius){let d=Math.min(Math.min(a,f)/2,o.radius);x=[new G(d,0),new G(a-d,0),...vn(new G(a-d,d),d,d,270,360),new G(a,d),new G(a,f-d),...vn(new G(a-d,f-d),d,d,0,90),new G(a-d,f),new G(d,f),...vn(new G(d,f-d),d,d,90,180),new G(0,f-d),new G(0,d),...vn(new G(d,d),d,d,180,270)]}Je(Object.assign(o,{offset:m,pts:x,...o.gradient?{colors:o.horizontal?[o.gradient[0],o.gradient[1],o.gradient[1],o.gradient[0]]:[o.gradient[0],o.gradient[0],o.gradient[1],o.gradient[1]]}:{}}))}y(ce,"drawRect");function An(o){let{p1:a,p2:f}=o;if(!a||!f)throw new Error('drawLine() requires properties "p1" and "p2".');let m=o.width||1,x=f.sub(a).unit().normal().scale(m*.5),d=[a.sub(x),a.add(x),f.add(x),f.sub(x)].map(S=>{var P,_;return{pos:new G(S.x,S.y),uv:new G(0),color:(P=o.color)!=null?P:Et.WHITE,opacity:(_=o.opacity)!=null?_:1}});Ae(d,[0,1,3,1,2,3],o.fixed,p.defTex,o.shader,o.uniform)}y(An,"drawLine");function Mr(o){let a=o.pts;if(!a)throw new Error('drawLines() requires property "pts".');if(!(a.length<2))if(o.radius&&a.length>=3){let f=a[0].sdist(a[1]);for(let m=1;m<a.length-1;m++)f=Math.min(a[m].sdist(a[m+1]),f);Math.min(o.radius,Math.sqrt(f)/2),An(Object.assign(o,{p1:a[0],p2:a[1]}));for(let m=1;m<a.length-2;m++){let x=a[m],d=a[m+1];An(Object.assign(o,{p1:x,p2:d}))}An(Object.assign(o,{p1:a[a.length-2],p2:a[a.length-1]}))}else for(let f=0;f<a.length-1;f++)An(Object.assign(o,{p1:a[f],p2:a[f+1]})),o.join!=="none"&&Ye(Object.assign(o,{pos:a[f],radius:o.width/2}))}y(Mr,"drawLines");function Cr(o){if(!o.p1||!o.p2||!o.p3)throw new Error('drawPolygon() requires properties "p1", "p2" and "p3".');return Je(Object.assign(o,{pts:[o.p1,o.p2,o.p3]}))}y(Cr,"drawTriangle");function Ye(o){if(!o.radius)throw new Error('drawCircle() requires property "radius".');o.radius!==0&&Ir(Object.assign(o,{radiusX:o.radius,radiusY:o.radius,angle:0}))}y(Ye,"drawCircle");function Ir(o){var S,P,_;if(o.radiusX===void 0||o.radiusY===void 0)throw new Error('drawEllipse() requires properties "radiusX" and "radiusY".');if(o.radiusX===0||o.radiusY===0)return;let a=(S=o.start)!=null?S:0,f=(P=o.end)!=null?P:360,m=ti((_=o.anchor)!=null?_:"center").scale(new G(-o.radiusX,-o.radiusY)),x=vn(m,o.radiusX,o.radiusY,a,f,o.resolution);x.unshift(m);let d=Object.assign(o,{pts:x,radius:0,...o.gradient?{colors:[o.gradient[0],...Array(x.length-1).fill(o.gradient[1])]}:{}});if(f-a>=360&&o.outline){o.fill!==!1&&Je(Object.assign(d,{outline:null})),Je(Object.assign(d,{pts:x.slice(1),fill:!1}));return}Je(d)}y(Ir,"drawEllipse");function Je(o){var f,m;if(!o.pts)throw new Error('drawPolygon() requires property "pts".');let a=o.pts.length;if(!(a<3)){if(be(),bt(o.pos),ze(o.scale),Ge(o.angle),bt(o.offset),o.fill!==!1){let x=(f=o.color)!=null?f:Et.WHITE,d=o.pts.map((P,_)=>{var b,O;return{pos:new G(P.x,P.y),uv:new G(0,0),color:o.colors&&(b=o.colors[_])!=null?b:x,opacity:(O=o.opacity)!=null?O:1}}),S=[...Array(a-2).keys()].map(P=>[0,P+1,P+2]).flat();Ae(d,(m=o.indices)!=null?m:S,o.fixed,p.defTex,o.shader,o.uniform)}o.outline&&Mr({pts:[...o.pts,o.pts[0]],radius:o.radius,width:o.outline.width,color:o.outline.color,join:o.outline.join,uniform:o.uniform,fixed:o.fixed,opacity:o.opacity}),te()}}y(Je,"drawPolygon");function Pr(o,a,f){ye(),u.clear(u.STENCIL_BUFFER_BIT),u.enable(u.STENCIL_TEST),u.stencilFunc(u.NEVER,1,255),u.stencilOp(u.REPLACE,u.REPLACE,u.REPLACE),a(),ye(),u.stencilFunc(f,1,255),u.stencilOp(u.KEEP,u.KEEP,u.KEEP),o(),ye(),u.disable(u.STENCIL_TEST)}y(Pr,"drawStenciled");function ds(o,a){Pr(o,a,u.EQUAL)}y(ds,"drawMasked");function ps(o,a){Pr(o,a,u.NOTEQUAL)}y(ps,"drawSubtracted");function oo(){return(p.viewport.width+p.viewport.height)/(p.width+p.height)}y(oo,"getViewportScale");function Oe(o){ye();let a=p.width,f=p.height;p.width=p.viewport.width,p.height=p.viewport.height,o(),ye(),p.width=a,p.height=f}y(Oe,"drawUnscaled");function ui(o,a){a.pos&&(o.pos=o.pos.add(a.pos)),a.scale&&(o.scale=o.scale.scale(Y(a.scale))),a.angle&&(o.angle+=a.angle),a.color&&(o.color=o.color.mult(a.color)),a.opacity&&(o.opacity*=a.opacity)}y(ui,"applyCharTransform");let gs=/\[(?<style>\w+)\](?<text>.*?)\[\/\k<style>\]/g;function ms(o){let a={},f=o.replace(gs,"$2"),m=0;for(let x of o.matchAll(gs)){let d=x.index-m;for(let S=0;S<x.groups.text.length;S++)a[S+d]=[x.groups.style];m+=x[0].length-x.groups.text.length}return{charStyleMap:a,text:f}}y(ms,"compileStyledText");let so={};function yn(o){var Lt,Gt,it,xt,re,q,ot;if(o.text===void 0)throw new Error('formatText() requires property "text".');let a=On(o.font);if(o.text===""||a instanceof W||!a)return{width:0,height:0,chars:[],opt:o};let{charStyleMap:f,text:m}=ms(o.text+""),x=m.split("");if(a instanceof Se||typeof a=="string"){let j=a instanceof Se?a.fontface.family:a,st=a instanceof Se?{outline:a.outline,filter:a.filter}:{outline:0,filter:Ah},et=(Lt=so[j])!=null?Lt:{font:{tex:new c(ph,gh,{filter:st.filter}),map:{},size:hh},cursor:new G(0),outline:st.outline};so[j]||(so[j]=et),a=et.font;for(let pt of x)if(!et.font.map[pt]){let ct=r.fontCacheCtx;ct.clearRect(0,0,r.fontCacheCanvas.width,r.fontCacheCanvas.height),ct.font=`${a.size}px ${j}`,ct.textBaseline="top",ct.textAlign="left",ct.fillStyle="#ffffff";let Nt=ct.measureText(pt),Be=Math.ceil(Nt.width),_e=a.size;et.outline&&(ct.lineJoin="round",ct.lineWidth=et.outline*2,ct.strokeStyle="#000000",ct.strokeText(pt,et.outline,et.outline),Be+=et.outline*2,_e+=et.outline*3),ct.fillText(pt,et.outline,et.outline);let pr=ct.getImageData(0,0,Be,_e);if(et.cursor.x+Be>ph&&(et.cursor.x=0,et.cursor.y+=_e,et.cursor.y>gh))throw new Error("Font atlas exceeds character limit");a.tex.update(pr,et.cursor.x,et.cursor.y),a.map[pt]=new ae(et.cursor.x,et.cursor.y,Be,_e),et.cursor.x+=Be}}let d=o.size||a.size,S=Y((Gt=o.scale)!=null?Gt:1).scale(d/a.size),P=(it=o.lineSpacing)!=null?it:0,_=(xt=o.letterSpacing)!=null?xt:0,b=0,O=0,k=0,tt=[],nt=[],gt=0,Tt=null,Rt=null;for(;gt<x.length;){let j=x[gt];if(j===`
`)k+=d+P,tt.push({width:b-_,chars:nt}),Tt=null,Rt=null,b=0,nt=[];else{let st=a.map[j];if(st){let et=st.w*S.x;o.width&&b+et>o.width&&(k+=d+P,Tt!=null&&(gt-=nt.length-Tt,j=x[gt],st=a.map[j],et=st.w*S.x,nt=nt.slice(0,Tt-1),b=Rt),Tt=null,Rt=null,tt.push({width:b-_,chars:nt}),b=0,nt=[]),nt.push({tex:a.tex,width:st.w,height:st.h,quad:new ae(st.x/a.tex.width,st.y/a.tex.height,st.w/a.tex.width,st.h/a.tex.height),ch:j,pos:new G(b,k),opacity:(re=o.opacity)!=null?re:1,color:(q=o.color)!=null?q:Et.WHITE,scale:Y(S),angle:0}),j===" "&&(Tt=nt.length,Rt=b),b+=et,O=Math.max(O,b),b+=_}}gt++}tt.push({width:b-_,chars:nt}),k+=d,o.width&&(O=o.width);let ne=[];for(let j of tt){let st=(O-j.width)*Xh((ot=o.align)!=null?ot:"left");for(let et of j.chars){let pt=a.map[et.ch],ct=ne.length;if(et.pos=et.pos.add(st,0).add(pt.w*S.x*.5,pt.h*S.y*.5),o.transform){let Nt=typeof o.transform=="function"?o.transform(ct,et.ch):o.transform;Nt&&ui(et,Nt)}if(f[ct]){let Nt=f[ct];for(let Be of Nt){let _e=o.styles[Be],pr=typeof _e=="function"?_e(ct,et.ch):_e;pr&&ui(et,pr)}}ne.push(et)}}return{width:O,height:k,chars:ne,opt:o}}y(yn,"formatText");function sr(o){xn(yn(o))}y(sr,"drawText");function xn(o){var a;be(),bt(o.opt.pos),Ge(o.opt.angle),bt(ti((a=o.opt.anchor)!=null?a:"topleft").add(1,1).scale(o.width,o.height).scale(-.5)),o.chars.forEach(f=>{Fn({tex:f.tex,width:f.width,height:f.height,pos:f.pos,scale:f.scale,angle:f.angle,color:f.color,opacity:f.opacity,quad:f.quad,anchor:"center",uniform:o.opt.uniform,shader:o.opt.shader,fixed:o.opt.fixed})}),te()}y(xn,"drawFormattedText");function ao(){var x;let o=r.pixelDensity,a=u.drawingBufferWidth/o,f=u.drawingBufferHeight/o;if(ci()){let d=window.innerWidth,S=window.innerHeight,P=d/S,_=a/f;if(P>_){let b=window.innerHeight*_;p.viewport={x:(d-b)/2,y:0,width:b,height:S}}else{let b=window.innerWidth/_;p.viewport={x:0,y:(S-b)/2,width:d,height:b}}return}if(e.letterbox){if(!e.width||!e.height)throw new Error("Letterboxing requires width and height defined.");let d=a/f,S=e.width/e.height;if(d>S){e.stretch||(p.width=f*S,p.height=f);let P=f*S,_=f,b=(a-P)/2;u.scissor(b*o,0,P*o,_*o),u.viewport(b*o,0,P*o,f*o),p.viewport={x:b,y:0,width:P,height:f}}else{e.stretch||(p.width=a,p.height=a/S);let P=a,_=a/S,b=(f-_)/2;u.scissor(0,b*o,P*o,_*o),u.viewport(0,b*o,a*o,_*o),p.viewport={x:0,y:b,width:a,height:_}}return}if(e.stretch){if(!e.width||!e.height)throw new Error("Stretching requires width and height defined.");u.viewport(0,0,a*o,f*o),p.viewport={x:0,y:0,width:a,height:f};return}let m=(x=e.scale)!=null?x:1;p.width=a/m,p.height=f/m,u.viewport(0,0,a*o,f*o),p.viewport={x:0,y:0,width:a,height:f}}y(ao,"updateViewport");function ee(){return p.width}y(ee,"width");function zt(){return p.height}y(zt,"height");let ge={},Dn={},_n={};function ar(o){return new G((o.x-p.viewport.x)*ee()/p.viewport.width,(o.y-p.viewport.y)*zt()/p.viewport.height)}y(ar,"windowToContent");function ws(o){return new G(o.x*p.viewport.width/p.width,o.y*p.viewport.height/p.height)}y(ws,"contentToView");function li(o,a){let f=ar(new G(o,a));r.mousePos=f,r.mouseStarted=!0,r.isMouseMoved=!0}y(li,"setMousePos"),ge.mousemove=o=>{let[a,f]=[o.offsetX,o.offsetY],[m,x]=[o.movementX,o.movementY];M.ev.onOnce("input",()=>{li(a,f),r.mouseDeltaPos=Y(m,x),M.ev.trigger("mouseMove")})},ge.mousedown=o=>{M.ev.onOnce("input",()=>{let a=lh[o.button];a&&r.mouseState.press(a),M.ev.trigger("mousePress",a)})},ge.mouseup=o=>{M.ev.onOnce("input",()=>{let a=lh[o.button];a&&r.mouseState.release(a),M.ev.trigger("mouseRelease",a)})},ge.keydown=o=>{E1.has(o.key)&&o.preventDefault(),M.ev.onOnce("input",()=>{let a=uh[o.key]||o.key.toLowerCase();a.length===1?(M.ev.trigger("charInput",a),r.charInputted.push(a)):a==="space"&&(M.ev.trigger("charInput"," "),r.charInputted.push(" ")),o.repeat?(r.keyState.pressRepeat(a),M.ev.trigger("keyPressRepeat",a)):(r.keyState.press(a),M.ev.trigger("keyPressRepeat",a),M.ev.trigger("keyPress",a))})},ge.keyup=o=>{M.ev.onOnce("input",()=>{let a=uh[o.key]||o.key.toLowerCase();r.keyState.release(a),M.ev.trigger("keyRelease",a)})},ge.touchstart=o=>{o.preventDefault(),M.ev.onOnce("input",()=>{let a=[...o.changedTouches];a.forEach(f=>{M.ev.trigger("touchStart",ar(new G(f.clientX,f.clientY)),f)}),e.touchToMouse!==!1&&(li(a[0].clientX,a[0].clientY),r.mouseState.press("left"),M.ev.trigger("mousePress","left"))})},ge.touchmove=o=>{o.preventDefault(),M.ev.onOnce("input",()=>{let a=[...o.changedTouches];a.forEach(f=>{M.ev.trigger("touchMove",ar(new G(f.clientX,f.clientY)),f)}),e.touchToMouse!==!1&&(M.ev.trigger("mouseMove"),li(a[0].clientX,a[0].clientY))})},ge.touchend=o=>{M.ev.onOnce("input",()=>{[...o.changedTouches].forEach(a=>{M.ev.trigger("touchEnd",ar(new G(a.clientX,a.clientY)),a)}),e.touchToMouse!==!1&&(r.mouseState.release("left"),M.ev.trigger("mouseRelease","left"))})},ge.touchcancel=o=>{M.ev.onOnce("input",()=>{[...o.changedTouches].forEach(a=>{M.ev.trigger("touchEnd",ar(new G(a.clientX,a.clientY)),a)}),e.touchToMouse!==!1&&(r.mouseState.release("left"),M.ev.trigger("mouseRelease","left"))})},ge.wheel=o=>{o.preventDefault(),M.ev.onOnce("input",()=>{M.ev.trigger("scroll",new G(o.deltaX,o.deltaY))})},ge.contextmenu=o=>o.preventDefault(),Dn.visibilitychange=()=>{switch(document.visibilityState){case"visible":r.skipTime=!0,Dt.paused||F.ctx.resume();break;case"hidden":r.keyState=new xr,r.mouseState=new xr,r.virtualButtonState=new xr,e.backgroundAudio||F.ctx.suspend();break}},_n.error=o=>{o.error?ft(o.error):ft(new Error(o.message))},_n.gamepadconnected=o=>{M.ev.onOnce("input",()=>{M.ev.trigger("gamepadConnect",o.gamepad)})},_n.gamepaddisconnected=o=>{M.ev.onOnce("input",()=>{M.ev.trigger("gamepadDisconnect",o.gamepad)})},_n.unhandledrejection=o=>ft(o.reason);for(let o in ge)r.canvas.addEventListener(o,ge[o]);for(let o in Dn)document.addEventListener(o,Dn[o]);for(let o in _n)window.addEventListener(o,_n[o]);function Nn(){return r.mousePos.clone()}y(Nn,"mousePos");function uo(){return r.mouseDeltaPos.clone()}y(uo,"mouseDeltaPos");function Or(o="left"){return r.mouseState.pressed.has(o)}y(Or,"isMousePressed");function vs(o="left"){return r.mouseState.down.has(o)}y(vs,"isMouseDown");function Br(o="left"){return r.mouseState.released.has(o)}y(Br,"isMouseReleased");function As(){return r.isMouseMoved}y(As,"isMouseMoved");function ys(o){return o===void 0?r.keyState.pressed.size>0:r.keyState.pressed.has(o)}y(ys,"isKeyPressed");function xs(o){return o===void 0?r.keyState.pressedRepeat.size>0:r.keyState.pressedRepeat.has(o)}y(xs,"isKeyPressedRepeat");function _s(o){return o===void 0?r.keyState.down.size>0:r.keyState.down.has(o)}y(_s,"isKeyDown");function Es(o){return o===void 0?r.keyState.released.size>0:r.keyState.released.has(o)}y(Es,"isKeyReleased");function Ss(o){return r.virtualButtonState.pressed.has(o)}y(Ss,"isVirtualButtonPressed");function Fr(o){return r.virtualButtonState.down.has(o)}y(Fr,"isVirtualButtonDown");function bs(o){return r.virtualButtonState.released.has(o)}y(bs,"isVirtualButtonReleased");function Lr(o){return o===void 0?r.gamepadButtonState.pressed.size>0:r.gamepadButtonState.pressed.has(o)}y(Lr,"isGamepadButtonPressed");function Vs(o){return o===void 0?r.gamepadButtonState.down.size>0:r.gamepadButtonState.down.has(o)}y(Vs,"isGamepadButtonDown");function Rs(o){return o===void 0?r.gamepadButtonState.released.size>0:r.gamepadButtonState.released.has(o)}y(Rs,"isGamepadButtonReleased");function Ts(){return[...r.charInputted]}y(Ts,"charInputted");function Dr(){return r.time}y(Dr,"time");function lo(){return r.canvas.toDataURL()}y(lo,"screenshot");function fi(o){r.canvas.style.cursor=o}y(fi,"setCursor");function Ms(){return r.canvas.style.cursor}y(Ms,"getCursor");function Cs(o){if(o)try{let a=r.canvas.requestPointerLock();a.catch&&a.catch(f=>console.error(f))}catch(a){console.error(a)}else document.exitPointerLock()}y(Cs,"setCursorLocked");function Is(){return!!document.pointerLockElement}y(Is,"isCursorLocked");function Ps(o=!0){o?Jh(r.canvas):Qh()}y(Ps,"setFullscreen");function ci(){return Boolean(Zh())}y(ci,"isFullscreen");function hi(){return r.isTouchScreen}y(hi,"isTouchScreen");let Dt={inspect:!1,timeScale:1,showLog:!0,fps:()=>r.fpsCounter.fps,numFrames:()=>r.numFrames,stepFrame:Rn,drawCalls:()=>p.drawCalls,clearLog:()=>M.logs=[],log:o=>{var m;let a=(m=e.logMax)!=null?m:R1,f=o instanceof Error?"error":"info";M.logs.unshift(`${`[time]${Dr().toFixed(2)}[/time] `}[${f}]${o!=null&&o.toString?o.toString():o}[/${f}]`),M.logs.length>a&&(M.logs=M.logs.slice(0,a))},error:o=>Dt.log(new Error(o.toString?o.toString():o)),curRecording:null,get paused(){return r.paused},set paused(o){r.paused=o,o?F.ctx.suspend():F.ctx.resume()}};function me(){return r.dt*Dt.timeScale}y(me,"dt");function Os(...o){return o.length>0&&(M.cam.pos=Y(...o)),M.cam.pos?M.cam.pos.clone():fn()}y(Os,"camPos");function fo(...o){return o.length>0&&(M.cam.scale=Y(...o)),M.cam.scale.clone()}y(fo,"camScale");function Nr(o){return o!==void 0&&(M.cam.angle=o),M.cam.angle}y(Nr,"camRot");function co(o=12){M.cam.shake=o}y(co,"shake");function di(o){return M.cam.transform.multVec2(o)}y(di,"toScreen");function pi(o){return M.cam.transform.invert().multVec2(o)}y(pi,"toWorld");function ur(o){let a=new fe;return o.pos&&a.translate(o.pos),o.scale&&a.scale(o.scale),o.angle&&a.rotate(o.angle),o.parent?a.mult(o.parent.transform):a}y(ur,"calcTransform");function Ur(o){let a=new Map,f={},m=new $r,x={id:w1(),hidden:!1,paused:!1,transform:new fe,children:[],parent:null,add(d){let S=(()=>{if(Array.isArray(d))return Ur(d);if(d.parent)throw new Error("Cannot add a game obj that already has a parent.");return d})();return S.parent=this,S.transform=ur(S),this.children.push(S),S.trigger("add",S),M.ev.trigger("add",S),S},readd(d){let S=this.children.indexOf(d);return S!==-1&&(this.children.splice(S,1),this.children.push(d)),d},remove(d){let S=this.children.indexOf(d);S!==-1&&(d.trigger("destroy"),M.ev.trigger("destroy",d),d.parent=null,this.children.splice(S,1))},removeAll(d){this.get(d).forEach(S=>this.remove(S))},update(){this.paused||(this.children.sort((d,S)=>{var P,_;return((P=d.z)!=null?P:0)-((_=S.z)!=null?_:0)}).forEach(d=>d.update()),this.trigger("update"))},draw(){this.hidden||(be(),bt(this.pos),ze(this.scale),Ge(this.angle),this.trigger("draw"),this.children.sort((d,S)=>{var P,_;return((P=d.z)!=null?P:0)-((_=S.z)!=null?_:0)}).forEach(d=>d.draw()),te())},drawInspect(){this.hidden||(be(),bt(this.pos),ze(this.scale),Ge(this.angle),this.children.sort((d,S)=>{var P,_;return((P=d.z)!=null?P:0)-((_=S.z)!=null?_:0)}).forEach(d=>d.drawInspect()),this.trigger("drawInspect"),te())},use(d){if(!d)return;if(typeof d=="string")return this.use({id:d});let S=[];d.id&&(this.unuse(d.id),f[d.id]=[],S=f[d.id],a.set(d.id,d));for(let _ in d){if(C1.has(_))continue;let b=Object.getOwnPropertyDescriptor(d,_);if(typeof b.value=="function"&&(d[_]=d[_].bind(this)),b.set&&Object.defineProperty(d,_,{set:b.set.bind(this)}),b.get&&Object.defineProperty(d,_,{get:b.get.bind(this)}),I1.has(_))S.push(this.on(_,d[_]).cancel);else if(this[_]===void 0)Object.defineProperty(this,_,{get:()=>d[_],set:O=>d[_]=O,configurable:!0,enumerable:!0}),S.push(()=>delete this[_]);else throw new Error(`Duplicate component property: "${_}"`)}let P=y(()=>{if(d.require){for(let _ of d.require)if(!this.c(_))throw new Error(`Component "${d.id}" requires component "${_}"`)}},"checkDeps");d.destroy&&S.push(d.destroy.bind(this)),this.exists()?(P(),d.add&&d.add.call(this)):d.require&&S.push(this.on("add",P).cancel)},unuse(d){f[d]&&(f[d].forEach(S=>S()),delete f[d]),a.has(d)&&a.delete(d)},c(d){return a.get(d)},get(d,S={}){let P=S.recursive?this.children.flatMap(_=>[_,..._.children]):this.children;if(P=P.filter(_=>d?_.is(d):!0),S.liveUpdate){let _=y(b=>S.recursive?this.isAncestorOf(b):b.parent===this,"isChild");lr(b=>{_(b)&&b.is(d)&&P.push(b)}),En(b=>{if(_(b)&&b.is(d)){let O=P.findIndex(k=>k.id===b.id);O!==-1&&P.splice(O,1)}})}return P},isAncestorOf(d){return d.parent?d.parent===this||this.isAncestorOf(d.parent):!1},exists(){return M.root.isAncestorOf(this)},is(d){if(d==="*")return!0;if(Array.isArray(d)){for(let S of d)if(!this.c(S))return!1;return!0}else return this.c(d)!=null},on(d,S){return m.on(d,S.bind(this))},trigger(d,...S){m.trigger(d,...S),M.objEvents.trigger(d,this,...S)},destroy(){this.parent&&this.parent.remove(this)},inspect(){let d={};for(let[S,P]of a)d[S]=P.inspect?P.inspect():null;return d},onAdd(d){return this.on("add",d)},onUpdate(d){return this.on("update",d)},onDraw(d){return this.on("draw",d)},onDestroy(d){return this.on("destroy",d)},clearEvents(){m.clear()}};for(let d of o)x.use(d);return x}y(Ur,"make");function sn(o,a,f){return M.objEvents[o]||(M.objEvents[o]=new eu),M.objEvents.on(o,(m,...x)=>{m.is(a)&&f(m,...x)})}y(sn,"on");let gi=y((o,a)=>{if(typeof o=="function"&&a===void 0){let f=Qe([{update:o}]);return{get paused(){return f.paused},set paused(m){f.paused=m},cancel:()=>f.destroy()}}else if(typeof o=="string")return sn("update",o,a)},"onUpdate"),ho=y((o,a)=>{if(typeof o=="function"&&a===void 0){let f=Qe([{draw:o}]);return{get paused(){return f.hidden},set paused(m){f.hidden=m},cancel:()=>f.destroy()}}else if(typeof o=="string")return sn("draw",o,a)},"onDraw");function lr(o,a){if(typeof o=="function"&&a===void 0)return M.ev.on("add",o);if(typeof o=="string")return sn("add",o,a)}y(lr,"onAdd");function En(o,a){if(typeof o=="function"&&a===void 0)return M.ev.on("destroy",o);if(typeof o=="string")return sn("destroy",o,a)}y(En,"onDestroy");function po(o,a,f){return sn("collide",o,(m,x,d)=>x.is(a)&&f(m,x,d))}y(po,"onCollide");function go(o,a,f){return sn("collideUpdate",o,(m,x,d)=>x.is(a)&&f(m,x,d))}y(go,"onCollideUpdate");function Bs(o,a,f){return sn("collideEnd",o,(m,x,d)=>x.is(a)&&f(m,x,d))}y(Bs,"onCollideEnd");function fr(o,a){bi(o).forEach(a),lr(o,a)}y(fr,"forAllCurrentAndFuture");function mo(o,a){if(typeof o=="function")return kr(o);{let f=[];return fr(o,m=>{if(!m.area)throw new Error("onClick() requires the object to have area() component");f.push(m.onClick(()=>a(m)))}),_r.join(f)}}y(mo,"onClick");function wo(o,a){let f=[];return fr(o,m=>{if(!m.area)throw new Error("onHover() requires the object to have area() component");f.push(m.onHover(()=>a(m)))}),_r.join(f)}y(wo,"onHover");function vo(o,a){let f=[];return fr(o,m=>{if(!m.area)throw new Error("onHoverUpdate() requires the object to have area() component");f.push(m.onHoverUpdate(()=>a(m)))}),_r.join(f)}y(vo,"onHoverUpdate");function Fs(o,a){let f=[];return fr(o,m=>{if(!m.area)throw new Error("onHoverEnd() requires the object to have area() component");f.push(m.onHoverEnd(()=>a(m)))}),_r.join(f)}y(Fs,"onHoverEnd");function zr(o,a){let f=0,m=[];a&&m.push(a);let x=gi(()=>{f+=me(),f>=o&&(x.cancel(),m.forEach(d=>d()))});return{paused:x.paused,cancel:x.cancel,onEnd(d){m.push(d)},then(d){return this.onEnd(d),this}}}y(zr,"wait");function Ls(o,a){let f=null,m=y(()=>{f=zr(o,m),a()},"newAction");return f=zr(0,m),{get paused(){return f.paused},set paused(x){f.paused=x},cancel:()=>f.cancel()}}y(Ls,"loop");let Ds=y((o,a)=>{if(typeof o=="function")return M.ev.on("keyDown",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("keyDown",f=>f===o&&a(o))},"onKeyDown"),Sn=y((o,a)=>{if(typeof o=="function")return M.ev.on("keyPress",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("keyPress",f=>f===o&&a(o))},"onKeyPress"),xu=y((o,a)=>{if(typeof o=="function")return M.ev.on("keyPressRepeat",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("keyPressRepeat",f=>f===o&&a(o))},"onKeyPressRepeat"),_u=y((o,a)=>{if(typeof o=="function")return M.ev.on("keyRelease",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("keyRelease",f=>f===o&&a(o))},"onKeyRelease");function Ns(o,a){return typeof o=="function"?M.ev.on("mouseDown",f=>o(f)):M.ev.on("mouseDown",f=>f===o&&a(f))}y(Ns,"onMouseDown");function kr(o,a){return typeof o=="function"?M.ev.on("mousePress",f=>o(f)):M.ev.on("mousePress",f=>f===o&&a(f))}y(kr,"onMousePress");function Us(o,a){return typeof o=="function"?M.ev.on("mouseRelease",f=>o(f)):M.ev.on("mouseRelease",f=>f===o&&a(f))}y(Us,"onMouseRelease");function zs(o){return M.ev.on("mouseMove",()=>o(Nn(),uo()))}y(zs,"onMouseMove");function ks(o){return M.ev.on("charInput",o)}y(ks,"onCharInput");function qs(o){return M.ev.on("touchStart",o)}y(qs,"onTouchStart");function Ws(o){return M.ev.on("touchMove",o)}y(Ws,"onTouchMove");function Ft(o){return M.ev.on("touchEnd",o)}y(Ft,"onTouchEnd");function Pt(o){return M.ev.on("scroll",o)}y(Pt,"onScroll");function Ks(o,a){return M.ev.on("virtualButtonDown",f=>f===o&&a())}y(Ks,"onVirtualButtonDown");function Hs(o,a){return M.ev.on("virtualButtonPress",f=>f===o&&a())}y(Hs,"onVirtualButtonPress");function Gs(o,a){return M.ev.on("virtualButtonRelease",f=>f===o&&a())}y(Gs,"onVirtualButtonRelease");function Ys(o,a){if(typeof o=="function")return M.ev.on("gamepadButtonDown",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("gamepadButtonDown",f=>f===o&&a(o))}y(Ys,"onGamepadButtonDown");function Js(o,a){if(typeof o=="function")return M.ev.on("gamepadButtonPress",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("gamepadButtonPress",f=>f===o&&a(o))}y(Js,"onGamepadButtonPress");function Qs(o,a){if(typeof o=="function")return M.ev.on("gamepadButtonRelease",o);if(typeof o=="string"&&typeof a=="function")return M.ev.on("gamepadButtonRelease",f=>f===o&&a(o))}y(Qs,"onGamepadButtonRelease");function Ao(o,a){return M.ev.on("gamepadStick",(f,m)=>f===o&&a(m))}y(Ao,"onGamepadStick");function yo(){Sn("f1",()=>{Dt.inspect=!Dt.inspect}),Sn("f2",()=>{Dt.clearLog()}),Sn("f8",()=>{Dt.paused=!Dt.paused}),Sn("f7",()=>{Dt.timeScale=Un(Sr(Dt.timeScale-.2,0,2),1)}),Sn("f9",()=>{Dt.timeScale=Un(Sr(Dt.timeScale+.2,0,2),1)}),Sn("f10",()=>{Dt.stepFrame()})}y(yo,"enterDebugMode");function Xt(){Sn("b",()=>ir())}y(Xt,"enterBurpMode");function mi(o){M.gravity=o}y(mi,"setGravity");function bn(){return M.gravity}y(bn,"getGravity");function xo(...o){o.length===1||o.length===2?(p.bgColor=Bt(o[0]),o[1]&&(p.bgAlpha=o[1])):(o.length===3||o.length===4)&&(p.bgColor=Bt(o[0],o[1],o[2]),o[3]&&(p.bgAlpha=o[3])),u.clearColor(p.bgColor.r/255,p.bgColor.g/255,p.bgColor.b/255,p.bgAlpha)}y(xo,"setBackground");function wi(){return p.bgColor.clone()}y(wi,"getBackground");function Ve(){return navigator.getGamepads().filter(o=>o!==null)}y(Ve,"getGamepads");function cr(...o){return{id:"pos",pos:Y(...o),moveBy(...a){this.pos=this.pos.add(Y(...a))},move(...a){this.moveBy(Y(...a).scale(me()))},moveTo(...a){if(typeof a[0]=="number"&&typeof a[1]=="number")return this.moveTo(Y(a[0],a[1]),a[2]);let f=a[0],m=a[1];if(m===void 0){this.pos=Y(f);return}let x=f.sub(this.pos);if(x.len()<=m*me()){this.pos=Y(f);return}this.move(x.unit().scale(m))},worldPos(){return this.parent?this.parent.transform.multVec2(this.pos):this.pos},screenPos(){return this.fixed?this.pos:di(this.pos)},inspect(){return`(${Math.round(this.pos.x)}, ${Math.round(this.pos.y)})`},drawInspect(){Ye({color:Bt(255,0,0),radius:4/oo()})}}}y(cr,"pos");function hr(...o){return o.length===0?hr(1):{id:"scale",scale:Y(...o),scaleTo(...a){this.scale=Y(...a)},scaleBy(...a){this.scale.scale(Y(...a))},inspect(){return`(${Un(this.scale.x,2)}, ${Un(this.scale.y,2)})`}}}y(hr,"scale");function _o(o){return{id:"rotate",angle:o!=null?o:0,rotateBy(a){this.angle+=a},rotateTo(a){this.angle=a},inspect(){return`${Math.round(this.angle)}`}}}y(_o,"rotate");function Eo(...o){return{id:"color",color:Bt(...o),inspect(){return this.color.toString()}}}y(Eo,"color");function Un(o,a){return Number(o.toFixed(a))}y(Un,"toFixed");function So(o){return{id:"opacity",opacity:o!=null?o:1,inspect(){return`${Un(this.opacity,1)}`},fadeOut(a=1,f=Ka.linear){return dr(this.opacity,0,a,m=>this.opacity=m,f)}}}y(So,"opacity");function he(o){if(!o)throw new Error("Please define an anchor");return{id:"anchor",anchor:o,inspect(){return typeof this.anchor=="string"?this.anchor:this.anchor.toString()}}}y(he,"anchor");function Zs(o){return{id:"z",z:o,inspect(){return`${this.z}`}}}y(Zs,"z");function Re(o,a){return{id:"follow",require:["pos"],follow:{obj:o,offset:a!=null?a:Y(0)},add(){o.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))},update(){o.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))}}}y(Re,"follow");function Xs(o,a){let f=typeof o=="number"?G.fromAngle(o):o.unit();return{id:"move",require:["pos"],update(){this.move(f.scale(a))}}}y(Xs,"move");let js=200;function an(o={}){var m;let a=(m=o.distance)!=null?m:js,f=!1;return{id:"offscreen",require:["pos"],isOffScreen(){let x=di(this.pos),d=new ue(Y(0),ee(),zt());return!zi(d,x)&&d.sdistToPoint(x)>a*a},onExitScreen(x){return this.on("exitView",x)},onEnterScreen(x){return this.on("enterView",x)},update(){this.isOffScreen()?(f||(this.trigger("exitView"),f=!0),o.hide&&(this.hidden=!0),o.pause&&(this.paused=!0),o.destroy&&this.destroy()):(f&&(this.trigger("enterView"),f=!1),o.hide&&(this.hidden=!1),o.pause&&(this.paused=!1))}}}y(an,"offscreen");function qr(o={}){var x,d,S,P;let a=[],f={},m=new Set;return{id:"area",collisionIgnore:(x=o.collisionIgnore)!=null?x:[],add(){this.area.cursor&&a.push(this.onHover(()=>fi(this.area.cursor))),a.push(this.onCollideUpdate((_,b)=>{f[_.id]||this.trigger("collide",_,b),f[_.id]=b,m.add(_.id)}))},update(){for(let _ in f)m.has(Number(_))||(this.trigger("collideEnd",f[_].target),delete f[_]);m.clear()},drawInspect(){let _=this.localArea();be(),ze(this.area.scale),bt(this.area.offset);let b={outline:{width:4/oo(),color:Bt(0,0,255)},anchor:this.anchor,fill:!1,fixed:this.fixed};_ instanceof ue?ce({...b,pos:_.pos,width:_.width,height:_.height}):_ instanceof ri?Je({...b,pts:_.pts}):_ instanceof Qo&&Ye({...b,pos:_.center,radius:_.radius}),te()},destroy(){a.forEach(_=>_.cancel())},area:{shape:(d=o.shape)!=null?d:null,scale:o.scale?Y(o.scale):Y(1),offset:(S=o.offset)!=null?S:Y(0),cursor:(P=o.cursor)!=null?P:null},isClicked(){return Or()&&this.isHovering()},isHovering(){let _=this.fixed?Nn():pi(Nn());return this.hasPoint(_)},checkCollision(_){var b;return(b=f[_.id])!=null?b:null},getCollisions(){return Object.values(f)},isColliding(_){return Boolean(f[_.id])},isOverlapping(_){let b=f[_.id];return b&&b.hasOverlap()},onClick(_){return this.onUpdate(()=>{this.isClicked()&&_()})},onHover(_){let b=!1;return this.onUpdate(()=>{b?b=this.isHovering():this.isHovering()&&(b=!0,_())})},onHoverUpdate(_){return this.onUpdate(()=>{this.isHovering()&&_()})},onHoverEnd(_){let b=!1;return this.onUpdate(()=>{b?this.isHovering()||(b=!1,_()):b=this.isHovering()})},onCollide(_,b){if(typeof _=="function"&&b===void 0)return this.on("collide",_);if(typeof _=="string")return this.onCollide((O,k)=>{O.is(_)&&b(O,k)})},onCollideUpdate(_,b){if(typeof _=="function"&&b===void 0)return this.on("collideUpdate",_);if(typeof _=="string")return this.on("collideUpdate",(O,k)=>O.is(_)&&b(O,k))},onCollideEnd(_,b){if(typeof _=="function"&&b===void 0)return this.on("collideEnd",_);if(typeof _=="string")return this.on("collideEnd",O=>O.is(_)&&b(O))},hasPoint(_){return Zl(this.worldArea(),_)},resolveCollision(_){let b=this.checkCollision(_);b&&!b.resolved&&(this.pos=this.pos.add(b.displacement),b.resolved=!0)},localArea(){return this.area.shape?this.area.shape:this.renderArea()},worldArea(){var O;let _=this.localArea();if(!(_ instanceof ri||_ instanceof ue))throw new Error("Only support polygon and rect shapes for now");let b=this.transform.clone().scale(Y((O=this.area.scale)!=null?O:1)).translate(this.area.offset);if(_ instanceof ue){let k=ti(this.anchor||Ha).add(1,1).scale(-.5).scale(_.width,_.height);b.translate(k)}return _.transform(b)},screenArea(){let _=this.worldArea();return this.fixed?_:_.transform(M.cam.transform)}}}y(qr,"area");function un(o){return{color:o.color,opacity:o.opacity,anchor:o.anchor,outline:o.outline,fixed:o.fixed,shader:o.shader,uniform:o.uniform}}y(un,"getRenderProps");function Ot(o,a={}){var S,P,_;let f=null,m=null,x=new en;if(!o)throw new Error("Please pass the resource name or data to sprite()");let d=y((b,O,k,tt)=>{let nt=Y(1,1);return k&&tt?(nt.x=k/(b.width*O.w),nt.y=tt/(b.height*O.h)):k?(nt.x=k/(b.width*O.w),nt.y=nt.x):tt&&(nt.y=tt/(b.height*O.h),nt.x=nt.y),nt},"calcTexScale");return{id:"sprite",width:0,height:0,frame:a.frame||0,quad:a.quad||new ae(0,0,1,1),animSpeed:(S=a.animSpeed)!=null?S:1,flipX:(P=a.flipX)!=null?P:!1,flipY:(_=a.flipY)!=null?_:!1,draw(){var O,k;if(!f)return;let b=f.frames[(O=this.frame)!=null?O:0];if(!b)throw new Error(`Frame not found: ${(k=this.frame)!=null?k:0}`);if(f.slice9){let{left:tt,right:nt,top:gt,bottom:Tt}=f.slice9,Rt=f.tex.width*b.w,ne=f.tex.height*b.h,Lt=this.width-tt-nt,Gt=this.height-gt-Tt,it=tt/Rt,xt=nt/Rt,re=1-it-xt,q=gt/ne,ot=Tt/ne,j=1-q-ot,st=[ie(0,0,it,q),ie(it,0,re,q),ie(it+re,0,xt,q),ie(0,q,it,j),ie(it,q,re,j),ie(it+re,q,xt,j),ie(0,q+j,it,ot),ie(it,q+j,re,ot),ie(it+re,q+j,xt,ot),ie(0,0,tt,gt),ie(tt,0,Lt,gt),ie(tt+Lt,0,nt,gt),ie(0,gt,tt,Gt),ie(tt,gt,Lt,Gt),ie(tt+Lt,gt,nt,Gt),ie(0,gt+Gt,tt,Tt),ie(tt,gt+Gt,Lt,Tt),ie(tt+Lt,gt+Gt,nt,Tt)];for(let et=0;et<9;et++){let pt=st[et],ct=st[et+9];on(Object.assign(un(this),{pos:ct.pos(),tex:f.tex,quad:b.scale(pt),flipX:this.flipX,flipY:this.flipY,tiled:a.tiled,width:ct.w,height:ct.h}))}}else on(Object.assign(un(this),{tex:f.tex,quad:b,flipX:this.flipX,flipY:this.flipY,tiled:a.tiled,width:this.width,height:this.height}))},update(){if(!f){let O=wn(o);if(!O||!O.data)return;let k=O.data.frames[0].clone();a.quad&&(k=k.scale(a.quad));let tt=d(O.data.tex,k,a.width,a.height);this.width=O.data.tex.width*k.w*tt.x,this.height=O.data.tex.height*k.h*tt.y,a.anim&&this.play(a.anim),f=O.data,x.trigger(f)}if(!m)return;let b=f.anims[m.name];if(typeof b=="number"){this.frame=b;return}if(b.speed===0)throw new Error("Sprite anim speed cannot be 0");m.timer+=me()*this.animSpeed,m.timer>=1/m.speed&&(m.timer=0,b.from>b.to?(this.frame--,this.frame<b.to&&(m.loop?this.frame=b.from:(this.frame++,m.onEnd(),this.stop()))):(this.frame++,this.frame>b.to&&(m.loop?this.frame=b.from:(this.frame--,m.onEnd(),this.stop()))))},play(b,O={}){var tt,nt,gt,Tt,Rt,ne,Lt;if(!f){x.add(()=>this.play(b,O));return}let k=f.anims[b];if(!k)throw new Error(`Anim not found: ${b}`);m&&this.stop(),m=typeof k=="number"?{name:b,timer:0,loop:!1,pingpong:!1,speed:0,onEnd:()=>{}}:{name:b,timer:0,loop:(nt=(tt=O.loop)!=null?tt:k.loop)!=null?nt:!1,pingpong:(Tt=(gt=O.pingpong)!=null?gt:k.pingpong)!=null?Tt:!1,speed:(ne=(Rt=O.speed)!=null?Rt:k.speed)!=null?ne:10,onEnd:(Lt=O.onEnd)!=null?Lt:()=>{}},this.frame=typeof k=="number"?k:k.from,this.trigger("animStart",b)},stop(){if(!m)return;let b=m.name;m=null,this.trigger("animEnd",b)},numFrames(){var b;return(b=f==null?void 0:f.frames.length)!=null?b:0},curAnim(){return m==null?void 0:m.name},onAnimEnd(b){return this.on("animEnd",b)},onAnimStart(b){return this.on("animStart",b)},renderArea(){return new ue(Y(0),this.width,this.height)},inspect(){if(typeof o=="string")return`"${o}"`}}}y(Ot,"sprite");function ln(o,a={}){var m;function f(x){var S,P;let d=yn(Object.assign(un(x),{text:x.text+"",size:x.textSize,font:x.font,width:a.width&&x.width,align:x.align,letterSpacing:x.letterSpacing,lineSpacing:x.lineSpacing,transform:x.textTransform,styles:x.textStyles}));return a.width||(x.width=d.width/(((S=x.scale)==null?void 0:S.x)||1)),x.height=d.height/(((P=x.scale)==null?void 0:P.y)||1),d}return y(f,"update"),{id:"text",text:o,textSize:(m=a.size)!=null?m:b1,font:a.font,width:a.width,height:0,align:a.align,lineSpacing:a.lineSpacing,letterSpacing:a.letterSpacing,textTransform:a.transform,textStyles:a.styles,add(){Kr(()=>f(this))},draw(){xn(f(this))},renderArea(){return new ue(Y(0),this.width,this.height)}}}y(ln,"text");function vi(o,a,f={}){return{id:"rect",width:o,height:a,radius:f.radius||0,draw(){ce(Object.assign(un(this),{width:this.width,height:this.height,radius:this.radius}))},renderArea(){return new ue(Y(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}y(vi,"rect");function $s(o,a){return{id:"rect",width:o,height:a,draw(){Fn(Object.assign(un(this),{width:this.width,height:this.height}))},renderArea(){return new ue(Y(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}y($s,"uvquad");function Ai(o){return{id:"circle",radius:o,draw(){Ye(Object.assign(un(this),{radius:this.radius}))},renderArea(){return new ue(new G(this.anchor?0:-this.radius),this.radius*2,this.radius*2)},inspect(){return`${Math.ceil(this.radius)}`}}}y(Ai,"circle");function ta(o=1,a=Bt(0,0,0)){return{id:"outline",outline:{width:o,color:a}}}y(ta,"outline");function bo(o,a){let f=new eu;return o&&a&&f.pushd(new Qa(o,a)),{id:"timer",wait(m,x){let d=[x],S=new Qa(m,()=>d.forEach(_=>_())),P=f.pushd(S);return{get paused(){return S.paused},set paused(_){S.paused=_},cancel:P,onEnd(_){d.push(_)},then(_){return this.onEnd(_),this}}},update(){f.forEach((m,x)=>{m.tick(me())&&f.delete(x)})}}}y(bo,"timer");let Eu=640,ea=65536;function Wr(o={}){var S,P,_,b;let a=Y(0),f=null,m=null,x=!1,d=[];return{id:"body",require:["pos","area"],jumpForce:(S=o.jumpForce)!=null?S:Eu,gravityScale:(P=o.gravityScale)!=null?P:1,isStatic:(_=o.isStatic)!=null?_:!1,mass:(b=o.mass)!=null?b:1,add(){if(this.mass===0)throw new Error("Can't set body mass to 0");d.push(this.onCollideUpdate((O,k)=>{if(O.is("body")&&!k.resolved&&(this.trigger("beforePhysicsResolve",k),O.trigger("beforePhysicsResolve",k.reverse()),!k.resolved&&!(this.isStatic&&O.isStatic))){if(!this.isStatic&&!O.isStatic){let tt=this.mass+O.mass;this.pos=this.pos.add(k.displacement.scale(O.mass/tt)),O.pos=O.pos.add(k.displacement.scale(-this.mass/tt)),this.transform=ur(this),O.transform=ur(O)}else{let tt=!this.isStatic&&O.isStatic?k:k.reverse();tt.source.pos=tt.source.pos.add(tt.displacement),tt.source.transform=ur(tt.source)}k.resolved=!0,this.trigger("physicsResolve",k),O.trigger("physicsResolve",k.reverse())}})),d.push(this.onPhysicsResolve(O=>{M.gravity&&(O.isBottom()&&this.isFalling()?(a.y=0,f=O.target,m=O.target.pos,x?x=!1:this.trigger("ground",f)):O.isTop()&&this.isJumping()&&(a.y=0,this.trigger("headbutt",O.target)))}))},update(){var k;if(!M.gravity||this.isStatic)return;if(x&&(f=null,m=null,this.trigger("fallOff"),x=!1),f)if(!this.isColliding(f)||!f.exists()||!f.is("body"))x=!0;else{!f.pos.eq(m)&&o.stickToPlatform!==!1&&this.moveBy(f.pos.sub(m)),m=f.pos;return}let O=a.y;a.y+=M.gravity*this.gravityScale*me(),a.y=Math.min(a.y,(k=o.maxVelocity)!=null?k:ea),O<0&&a.y>=0&&this.trigger("fall"),this.move(a)},destroy(){d.forEach(O=>O.cancel())},onPhysicsResolve(O){return this.on("physicsResolve",O)},onBeforePhysicsResolve(O){return this.on("beforePhysicsResolve",O)},curPlatform(){return f},isGrounded(){return f!==null},isFalling(){return a.y>0},isJumping(){return a.y<0},jump(O){f=null,m=null,a.y=-O||-this.jumpForce},onGround(O){return this.on("ground",O)},onFall(O){return this.on("fall",O)},onFallOff(O){return this.on("fallOff",O)},onHeadbutt(O){return this.on("headbutt",O)}}}y(Wr,"body");function zn(o=2){let a=o,f=[];return{id:"doubleJump",require:["body"],numJumps:o,add(){f.push(this.onGround(()=>{a=this.numJumps}))},destroy(){f.forEach(m=>m.cancel())},doubleJump(m){a<=0||(a<this.numJumps&&this.trigger("doubleJump"),a--,this.jump(m))},onDoubleJump(m){return this.on("doubleJump",m)},inspect(){return`${a}`}}}y(zn,"doubleJump");function na(o,a){return{id:"shader",shader:o,...typeof a=="function"?{uniform:a(),update(){this.uniform=a()}}:{uniform:a}}}y(na,"shader");function Vo(){return{id:"fixed",fixed:!0}}y(Vo,"fixed");function yi(o){return{id:"stay",stay:!0,scenesToStay:o}}y(yi,"stay");function xi(o){if(o==null)throw new Error("health() requires the initial amount of hp");return{id:"health",hurt(a=1){this.setHP(o-a),this.trigger("hurt")},heal(a=1){this.setHP(o+a),this.trigger("heal")},hp(){return o},setHP(a){o=a,o<=0&&this.trigger("death")},onHurt(a){return this.on("hurt",a)},onHeal(a){return this.on("heal",a)},onDeath(a){return this.on("death",a)},inspect(){return`${o}`}}}y(xi,"health");function _i(o,a={}){var m;if(o==null)throw new Error("lifespan() requires time");let f=(m=a.fade)!=null?m:0;return{id:"lifespan",async add(){await zr(o),f>0&&this.opacity&&await dr(this.opacity,0,f,x=>this.opacity=x,Ka.linear),this.destroy()}}}y(_i,"lifespan");function Ro(o,a,f){if(!o)throw new Error("state() requires an initial state");let m={};function x(_){m[_]||(m[_]={enter:new en,end:new en,update:new en,draw:new en})}y(x,"initStateEvents");function d(_,b,O){return x(b),m[b][_].add(O)}y(d,"on");function S(_,b,...O){x(b),m[b][_].trigger(...O)}y(S,"trigger");let P=!1;return{id:"state",state:o,enterState(_,...b){if(P=!0,a&&!a.includes(_))throw new Error(`State not found: ${_}`);let O=this.state;if(f){if(!(f!=null&&f[O]))return;let k=typeof f[O]=="string"?[f[O]]:f[O];if(!k.includes(_))throw new Error(`Cannot transition state from "${O}" to "${_}". Available transitions: ${k.map(tt=>`"${tt}"`).join(", ")}`)}S("end",O,...b),this.state=_,S("enter",_,...b),S("enter",`${O} -> ${_}`,...b)},onStateTransition(_,b,O){return d("enter",`${_} -> ${b}`,O)},onStateEnter(_,b){return d("enter",_,b)},onStateUpdate(_,b){return d("update",_,b)},onStateDraw(_,b){return d("draw",_,b)},onStateEnd(_,b){return d("end",_,b)},update(){P||(S("enter",o),P=!0),S("update",this.state)},draw(){S("draw",this.state)},inspect(){return this.state}}}y(Ro,"state");function ra(o=1){let a=0,f=!1;return{require:["opacity"],add(){this.opacity=0},update(){f||(a+=me(),this.opacity=$a(a,0,o,0,1),a>=o&&(this.opacity=1,f=!0))}}}y(ra,"fadeIn");function Kr(o){H.loaded?o():M.ev.on("load",o)}y(Kr,"onLoad");function Ei(o,a){M.scenes[o]=a}y(Ei,"scene");function ia(o,...a){if(!M.scenes[o])throw new Error(`Scene not found: ${o}`);M.ev.onOnce("frameEnd",()=>{M.ev=new $r,M.objEvents=new $r,[...M.root.children].forEach(f=>{(!f.stay||f.scenesToStay&&!f.scenesToStay.includes(o))&&M.root.remove(f)}),M.root.clearEvents(),M.cam={pos:null,scale:Y(1),angle:0,shake:0,transform:new fe},M.scenes[o](...a),e.debug!==!1&&yo(),e.burp&&Xt()})}y(ia,"go");function To(o,a){try{return JSON.parse(window.localStorage[o])}catch{return a?(we(o,a),a):null}}y(To,"getData");function we(o,a){window.localStorage[o]=JSON.stringify(a)}y(we,"setData");function Hr(o){let a=o(se);for(let f in a)se[f]=a[f],e.global!==!1&&(window[f]=a[f]);return se}y(Hr,"plug");function fn(){return Y(ee()/2,zt()/2)}y(fn,"center");let oa;(o=>(o[o.None=0]="None",o[o.Left=1]="Left",o[o.Top=2]="Top",o[o.LeftTop=3]="LeftTop",o[o.Right=4]="Right",o[o.Horizontal=5]="Horizontal",o[o.RightTop=6]="RightTop",o[o.HorizontalTop=7]="HorizontalTop",o[o.Bottom=8]="Bottom",o[o.LeftBottom=9]="LeftBottom",o[o.Vertical=10]="Vertical",o[o.LeftVertical=11]="LeftVertical",o[o.RightBottom=12]="RightBottom",o[o.HorizontalBottom=13]="HorizontalBottom",o[o.RightVertical=14]="RightVertical",o[o.All=15]="All"))(oa||(oa={}));function Si(o={}){var P,_,b,O;let a=Y(0),f=(P=o.isObstacle)!=null?P:!1,m=(_=o.cost)!=null?_:0,x=(b=o.edges)!=null?b:[],d=y(()=>{let k={left:1,top:2,right:4,bottom:8};return x.map(tt=>k[tt]||0).reduce((tt,nt)=>tt|nt,0)},"getEdgeMask"),S=d();return{id:"tile",tilePosOffset:(O=o.offset)!=null?O:Y(0),set tilePos(k){let tt=this.getLevel();a=k.clone(),this.pos=Y(this.tilePos.x*tt.tileWidth(),this.tilePos.y*tt.tileHeight()).add(this.tilePosOffset)},get tilePos(){return a},set isObstacle(k){f!==k&&(f=k,this.getLevel().invalidateNavigationMap())},get isObstacle(){return f},set cost(k){m!==k&&(m=k,this.getLevel().invalidateNavigationMap())},get cost(){return m},set edges(k){x=k,S=d(),this.getLevel().invalidateNavigationMap()},get edges(){return x},get edgeMask(){return S},getLevel(){return this.parent},moveLeft(){this.tilePos=this.tilePos.add(Y(-1,0))},moveRight(){this.tilePos=this.tilePos.add(Y(1,0))},moveUp(){this.tilePos=this.tilePos.add(Y(0,-1))},moveDown(){this.tilePos=this.tilePos.add(Y(0,1))}}}y(Si,"tile");function sa(o,a){var re;if(!a.tileWidth||!a.tileHeight)throw new Error("Must provide tileWidth and tileHeight.");let f=Qe([cr((re=a.pos)!=null?re:Y(0))]),m=o.length,x=0,d=null,S=null,P=null,_=null,b=y(q=>q.x+q.y*x,"tile2Hash"),O=y(q=>Y(Math.floor(q%x),Math.floor(q/x)),"hash2Tile"),k=y(()=>{d=[];for(let q of f.children)tt(q)},"createSpatialMap"),tt=y(q=>{let ot=b(q.tilePos);d[ot]?d[ot].push(q):d[ot]=[q]},"insertIntoSpatialMap"),nt=y(q=>{let ot=b(q.tilePos);if(d[ot]){let j=d[ot].indexOf(q);j>=0&&d[ot].splice(j,1)}},"removeFromSpatialMap"),gt=y(()=>{let q=!1;for(let ot of f.children){let j=f.pos2Tile(ot.pos);(ot.tilePos.x!=j.x||ot.tilePos.y!=j.y)&&(q=!0,nt(ot),ot.tilePos.x=j.x,ot.tilePos.y=j.y,tt(ot))}q&&f.trigger("spatial_map_changed")},"updateSpatialMap"),Tt=y(()=>{let q=f.getSpatialMap(),ot=f.numRows()*f.numColumns();S?S.length=ot:S=new Array(ot),S.fill(1,0,ot);for(let j=0;j<q.length;j++){let st=q[j];if(st){let et=0;for(let pt of st)if(pt.isObstacle){et=1/0;break}else et+=pt.cost;S[j]=et||1}}},"createCostMap"),Rt=y(()=>{let q=f.getSpatialMap(),ot=f.numRows()*f.numColumns();P?P.length=ot:P=new Array(ot),P.fill(15,0,ot);for(let j=0;j<q.length;j++){let st=q[j];if(st){let et=st.length,pt=15;for(let ct=0;ct<et;ct++)pt|=st[ct].edgeMask;P[j]=pt}}},"createEdgeMap"),ne=y(()=>{let q=f.numRows()*f.numColumns(),ot=y((st,et)=>{let pt=[];for(pt.push(st);pt.length>0;){let ct=pt.pop();it(ct).forEach(Nt=>{_[Nt]<0&&(_[Nt]=et,pt.push(Nt))})}},"traverse");_?_.length=q:_=new Array(q),_.fill(-1,0,q);let j=0;for(let st=0;st<S.length;st++){if(_[st]>=0){j++;continue}ot(st,j),j++}},"createConnectivityMap"),Lt=y((q,ot)=>S[ot],"getCost"),Gt=y((q,ot)=>{let j=O(q),st=O(ot);return j.dist(st)},"getHeuristic"),it=y((q,ot)=>{let j=[],st=Math.floor(q%x),et=st>0&&P[q]&1&&S[q-1]!==1/0,pt=q>=x&&P[q]&2&&S[q-x]!==1/0,ct=st<x-1&&P[q]&4&&S[q+1]!==1/0,Nt=q<x*m-x-1&&P[q]&8&&S[q+x]!==1/0;return ot?(et&&(pt&&j.push(q-x-1),j.push(q-1),Nt&&j.push(q+x-1)),pt&&j.push(q-x),ct&&(pt&&j.push(q-x+1),j.push(q+1),Nt&&j.push(q+x+1)),Nt&&j.push(q+x)):(et&&j.push(q-1),pt&&j.push(q-x),ct&&j.push(q+1),Nt&&j.push(q+x)),j},"getNeighbours"),xt={id:"level",tileWidth(){return a.tileWidth},tileHeight(){return a.tileHeight},spawn(q,...ot){let j=Y(...ot),st=(()=>{if(typeof q=="string"){if(a.tiles[q]){if(typeof a.tiles[q]!="function")throw new Error("Level symbol def must be a function returning a component list");return a.tiles[q](j)}else if(a.wildcardTile)return a.wildcardTile(q,j)}else{if(Array.isArray(q))return q;throw new Error("Expected a symbol or a component list")}})();if(!st)return null;let et=!1,pt=!1;for(let Nt of st)Nt.id==="tile"&&(pt=!0),Nt.id==="pos"&&(et=!0);et||st.push(cr()),pt||st.push(Si());let ct=f.add(st);return et&&(ct.tilePosOffset=ct.pos.clone()),ct.tilePos=j,d&&(tt(ct),this.trigger("spatial_map_changed"),this.trigger("navigation_map_invalid")),ct},numColumns(){return x},numRows(){return m},levelWidth(){return x*this.tileWidth()},levelHeight(){return m*this.tileHeight()},tile2Pos(...q){return Y(...q).scale(this.tileWidth(),this.tileHeight())},pos2Tile(...q){let ot=Y(...q);return Y(Math.floor(ot.x/this.tileWidth()),Math.floor(ot.y/this.tileHeight()))},getSpatialMap(){return d||k(),d},onSpatialMapChanged(q){return this.on("spatial_map_changed",q)},onNavigationMapInvalid(q){return this.on("navigation_map_invalid",q)},getAt(q){d||k();let ot=b(q);return d[ot]||[]},update(){d&&gt()},invalidateNavigationMap(){S=null,P=null,_=null},onNavigationMapChanged(q){return this.on("navigation_map_changed",q)},getTilePath(q,ot,j={}){var Yt;if(S||Tt(),P||Rt(),_||ne(),q.x<0||q.x>=x||q.y<0||q.y>=m||ot.x<0||ot.x>=x||ot.y<0||ot.y>=m)return null;let st=b(q),et=b(ot);if(S[et]===1/0)return null;if(st===et)return[];if(_[st]!=-1&&_[st]!==_[et])return null;let pt=new Wh((Ut,Io)=>Ut.cost<Io.cost);pt.insert({cost:0,node:st});let ct=new Map;ct.set(st,st);let Nt=new Map;for(Nt.set(st,0);pt.length!==0;){let Ut=(Yt=pt.remove())==null?void 0:Yt.node;if(Ut===et)break;let Io=it(Ut,j.allowDiagonals);for(let qn of Io){let Mi=(Nt.get(Ut)||0)+Lt(Ut,qn)+Gt(qn,et);(!Nt.has(qn)||Mi<Nt.get(qn))&&(Nt.set(qn,Mi),pt.insert({cost:Mi,node:qn}),ct.set(qn,Ut))}}let Be=[],_e=et,pr=O(_e);for(Be.push(pr);_e!==st;){_e=ct.get(_e);let Ut=O(_e);Be.push(Ut)}return Be.reverse()},getPath(q,ot,j={}){let st=this.tileWidth(),et=this.tileHeight(),pt=this.getTilePath(this.pos2Tile(q),this.pos2Tile(ot),j);return pt?[q,...pt.slice(1,-1).map(ct=>ct.scale(st,et).add(st/2,et/2)),ot]:null}};return f.use(xt),f.onNavigationMapInvalid(()=>{f.invalidateNavigationMap(),f.trigger("navigation_map_changed")}),o.forEach((q,ot)=>{let j=q.split("");x=Math.max(j.length,x),j.forEach((st,et)=>{f.spawn(st,Y(et,ot))})}),f}y(sa,"addLevel");function aa(o={}){var d,S;let a=null,f=null,m=null,x=null;return{id:"agent",require:["pos","tile"],agentSpeed:(d=o.speed)!=null?d:100,allowDiagonals:(S=o.allowDiagonals)!=null?S:!0,getDistanceToTarget(){return a?this.pos.dist(a):0},getNextLocation(){return f&&m?f[m]:null},getPath(){return f?f.slice():null},getTarget(){return a},isNavigationFinished(){return f?m===null:!0},isTargetReachable(){return f!==null},isTargetReached(){return a?this.pos.eq(a):!0},setTarget(P){a=P,f=this.getLevel().getPath(this.pos,a,{allowDiagonals:this.allowDiagonals}),m=f?0:null,f?(x||(x=this.getLevel().onNavigationMapChanged(()=>{f&&m!==null&&(f=this.getLevel().getPath(this.pos,a,{allowDiagonals:this.allowDiagonals}),m=f?0:null,f?this.trigger("navigation-next",this,f[m]):this.trigger("navigation-ended",this))}),this.onDestroy(()=>x.cancel())),this.trigger("navigation-started",this),this.trigger("navigation-next",this,f[m])):this.trigger("navigation-ended",this)},update(){if(f&&m!==null){if(this.pos.sdist(f[m])<2)if(m===f.length-1){this.pos=a.clone(),m=null,this.trigger("navigation-ended",this),this.trigger("target-reached",this);return}else m++,this.trigger("navigation-next",this,f[m]);this.moveTo(f[m],this.agentSpeed)}},onNavigationStarted(P){return this.on("navigation-started",P)},onNavigationNext(P){return this.on("navigation-next",P)},onNavigationEnded(P){return this.on("navigation-ended",P)},onTargetReached(P){return this.on("target-reached",P)},inspect(){return JSON.stringify({target:JSON.stringify(a),path:JSON.stringify(f)})}}}y(aa,"agent");function ua(o){let a=r.canvas.captureStream(o),f=F.ctx.createMediaStreamDestination();F.masterNode.connect(f);let m=new MediaRecorder(a),x=[];return m.ondataavailable=d=>{d.data.size>0&&x.push(d.data)},m.onerror=()=>{F.masterNode.disconnect(f),a.getTracks().forEach(d=>d.stop())},m.start(),{resume(){m.resume()},pause(){m.pause()},stop(){return m.stop(),F.masterNode.disconnect(f),a.getTracks().forEach(d=>d.stop()),new Promise(d=>{m.onstop=()=>{d(new Blob(x,{type:"video/mp4"}))}})},download(d="kaboom.mp4"){this.stop().then(S=>Tl(d,S))}}}y(ua,"record");function la(){return document.activeElement===r.canvas}y(la,"isFocused");function fa(o){o.destroy()}y(fa,"destroy");let Qe=M.root.add.bind(M.root),Su=M.root.readd.bind(M.root),bu=M.root.removeAll.bind(M.root),bi=M.root.get.bind(M.root);function Vi(o=2,a=1){let f=0;return{id:"boom",require:["scale"],update(){let m=Math.sin(f*o)*a;m<0&&this.destroy(),this.scale=Y(m),f+=me()}}}y(Vi,"boom");let Vn=er(null,y1),Ri=er(null,x1);function ca(o,a={}){var S,P;let f=Qe([cr(o),yi()]),m=(a.speed||1)*5,x=a.scale||1;f.add([Ot(Ri),hr(0),he("center"),Vi(m,x),...(S=a.comps)!=null?S:[]]);let d=f.add([Ot(Vn),hr(0),he("center"),bo(.4/m,()=>d.use(Vi(m,x))),...(P=a.comps)!=null?P:[]]);return d.onDestroy(()=>f.destroy()),f}y(ca,"addKaboom");function ha(){var o,a,f;for(let m of navigator.getGamepads()){if(!m)continue;let x=(f=(a=((o=e.gamepads)!=null?o:{})[m.id])!=null?a:ah[m.id])!=null?f:ah.default;for(let d=0;d<m.buttons.length;d++)m.buttons[d].pressed?(r.gamepadButtonState.down.has(x.buttons[d])||(r.gamepadButtonState.press(x.buttons[d]),M.ev.trigger("gamepadButtonPress",x.buttons[d])),M.ev.trigger("gamepadButtonDown",x.buttons[d])):r.gamepadButtonState.down.has(x.buttons[d])&&(r.gamepadButtonState.release(x.buttons[d]),M.ev.trigger("gamepadButtonRelease",x.buttons[d]));for(let d in x.sticks){let S=x.sticks[d],P=m.axes[S.x],_=m.axes[S.y];M.ev.trigger("gamepadStick",d,new G(P,_))}}}y(ha,"processGamepad");function da(){M.ev.trigger("input"),r.keyState.down.forEach(o=>M.ev.trigger("keyDown",o)),r.mouseState.down.forEach(o=>M.ev.trigger("mouseDown",o)),r.virtualButtonState.down.forEach(o=>M.ev.trigger("virtualButtonDown",o)),ha()}y(da,"inputFrame");function Rn(){M.root.update()}y(Rn,"updateFrame");class xe{constructor(a,f,m,x=!1){X(this,"source");X(this,"target");X(this,"displacement");X(this,"resolved",!1);this.source=a,this.target=f,this.displacement=m,this.resolved=x}reverse(){return new xe(this.target,this.source,this.displacement.scale(-1),this.resolved)}hasOverlap(){return!this.displacement.isZero()}isLeft(){return this.displacement.x>0}isRight(){return this.displacement.x<0}isTop(){return this.displacement.y>0}isBottom(){return this.displacement.y<0}preventResolution(){this.resolved=!0}}y(xe,"Collision");function Mo(){let o={},a=e.hashGridSize||V1,f=new fe,m=[];function x(d){if(m.push(f.clone()),d.pos&&f.translate(d.pos),d.scale&&f.scale(d.scale),d.angle&&f.rotate(d.angle),d.transform=f.clone(),d.c("area")&&!d.paused){let S=d,P=S.worldArea().bbox(),_=Math.floor(P.pos.x/a),b=Math.floor(P.pos.y/a),O=Math.ceil((P.pos.x+P.width)/a),k=Math.ceil((P.pos.y+P.height)/a),tt=new Set;for(let nt=_;nt<=O;nt++)for(let gt=b;gt<=k;gt++)if(!o[nt])o[nt]={},o[nt][gt]=[S];else if(!o[nt][gt])o[nt][gt]=[S];else{let Tt=o[nt][gt];t:for(let Rt of Tt){if(!Rt.exists()||tt.has(Rt.id))continue;for(let Lt of S.collisionIgnore)if(Rt.is(Lt))continue t;for(let Lt of Rt.collisionIgnore)if(S.is(Lt))continue t;let ne=Uh(S.worldArea(),Rt.worldArea());if(ne){let Lt=new xe(S,Rt,ne);S.trigger("collideUpdate",Rt,Lt);let Gt=Lt.reverse();Gt.resolved=Lt.resolved,Rt.trigger("collideUpdate",S,Gt)}tt.add(Rt.id)}Tt.push(S)}}d.children.forEach(x),f=m.pop()}y(x,"checkObj"),x(M.root)}y(Mo,"checkFrame");function pa(){var f;let o=M.cam,a=G.fromAngle(ts(0,360)).scale(o.shake);o.shake=$n(o.shake,0,5*me()),o.transform=new fe().translate(fn()).scale(o.scale).rotate(o.angle).translate(((f=o.pos)!=null?f:fn()).scale(-1).add(a)),M.root.draw(),ye()}y(pa,"drawFrame");function ga(){let o=Q();M.ev.numListeners("loading")>0?M.ev.trigger("loading",o):Oe(()=>{let a=ee()/2,f=24,m=Y(ee()/2,zt()/2).sub(Y(a/2,f/2));ce({pos:Y(0),width:ee(),height:zt(),color:Bt(0,0,0)}),ce({pos:m,width:a,height:f,fill:!1,outline:{width:4}}),ce({pos:m,width:a*o,height:f})})}y(ga,"drawLoadScreen");function Co(o,a){Oe(()=>{let f=Y(8);be(),bt(o);let m=yn({text:a,font:Ga,size:16,pos:f,color:Bt(255,255,255),fixed:!0}),x=m.width+f.x*2,d=m.height+f.x*2;o.x+x>=ee()&&bt(Y(-x,0)),o.y+d>=zt()&&bt(Y(0,-d)),ce({width:x,height:d,color:Bt(0,0,0),radius:4,opacity:.8,fixed:!0}),xn(m),te()})}y(Co,"drawInspectText");function ma(){if(Dt.inspect){let o=null;for(let a of M.root.get("*",{recursive:!0}))if(a.c("area")&&a.isHovering()){o=a;break}if(M.root.drawInspect(),o){let a=[],f=o.inspect();for(let m in f)f[m]?a.push(`${m}: ${f[m]}`):a.push(`${m}`);Co(ws(Nn()),a.join(`
`))}Co(Y(8),`FPS: ${Dt.fps()}`)}Dt.paused&&Oe(()=>{be(),bt(ee(),0),bt(-8,8);let o=32;ce({width:o,height:o,anchor:"topright",color:Bt(0,0,0),opacity:.8,radius:4,fixed:!0});for(let a=1;a<=2;a++)ce({width:4,height:o*.6,anchor:"center",pos:Y(-o/3*a,o*.5),color:Bt(255,255,255),radius:2,fixed:!0});te()}),Dt.timeScale!==1&&Oe(()=>{be(),bt(ee(),zt()),bt(-8,-8);let o=8,a=yn({text:Dt.timeScale.toFixed(1),font:Ga,size:16,color:Bt(255,255,255),pos:Y(-o),anchor:"botright",fixed:!0});ce({width:a.width+o*2+o*4,height:a.height+o*2,anchor:"botright",color:Bt(0,0,0),opacity:.8,radius:4,fixed:!0});for(let f=0;f<2;f++){let m=Dt.timeScale<1;Cr({p1:Y(-a.width-o*(m?2:3.5),-o),p2:Y(-a.width-o*(m?2:3.5),-o-a.height),p3:Y(-a.width-o*(m?3.5:2),-o-a.height/2),pos:Y(-f*o*1+(m?-o*.5:0),0),color:Bt(255,255,255),fixed:!0})}xn(a),te()}),Dt.curRecording&&Oe(()=>{be(),bt(0,zt()),bt(24,-24),Ye({radius:12,color:Bt(255,0,0),opacity:Vl(0,1,Dr()*4),fixed:!0}),te()}),Dt.showLog&&M.logs.length>0&&Oe(()=>{be(),bt(0,zt()),bt(8,-8);let o=8,a=yn({text:M.logs.join(`
`),font:Ga,pos:Y(o,-o),anchor:"botleft",size:16,width:ee()*.6,lineSpacing:o/2,fixed:!0,styles:{time:{color:Bt(127,127,127)},info:{color:Bt(255,255,255)},error:{color:Bt(255,0,127)}}});ce({width:a.width+o*2,height:a.height+o*2,anchor:"botleft",color:Bt(0,0,0),radius:4,opacity:.8,fixed:!0}),xn(a),te()})}y(ma,"drawDebug");function wa(){let o=Nn(),a=y((m,x,d)=>{Ye({radius:80/2,pos:m,outline:{width:4,color:Bt(0,0,0)},opacity:.5,fixed:!0}),d&&sr({text:d,pos:m,color:Bt(0,0,0),size:40,anchor:"center",opacity:.5,fixed:!0}),Or("left")&&au(new Qo(m,80/2),o)&&M.ev.onOnce("input",()=>{r.virtualButtonState.press(x),M.ev.trigger("virtualButtonPress",x),r.keyState.press(x),M.ev.trigger("keyPress",x)}),Br("left")&&M.ev.onOnce("input",()=>{r.virtualButtonState.release(x),M.ev.trigger("virtualButtonRelease",x),r.keyState.release(x),M.ev.trigger("keyRelease",x)})},"drawCircleButton"),f=y((m,x,d)=>{ce({width:64,height:64,pos:m,outline:{width:4,color:Bt(0,0,0)},radius:4,anchor:"center",opacity:.5,fixed:!0}),d&&sr({text:d,pos:m,color:Bt(0,0,0),size:40,anchor:"center",opacity:.5,fixed:!0}),Or("left")&&zi(new ue(m.add(-64/2,-64/2),64,64),o)&&M.ev.onOnce("input",()=>{r.virtualButtonState.press(x),M.ev.trigger("virtualButtonPress",x),r.keyState.press(x),M.ev.trigger("keyPress",x)}),Br("left")&&M.ev.onOnce("input",()=>{r.virtualButtonState.release(x),M.ev.trigger("virtualButtonRelease",x),r.keyState.release(x),M.ev.trigger("keyRelease",x)})},"drawSquareButton");Oe(()=>{a(Y(ee()-80,zt()-160),"a"),a(Y(ee()-160,zt()-80),"b"),f(Y(60,zt()-124),"left"),f(Y(188,zt()-124),"right"),f(Y(124,zt()-188),"up"),f(Y(124,zt()-60),"down")})}y(wa,"drawVirtualControls"),e.debug!==!1&&yo(),e.burp&&Xt();function kn(o){M.ev.on("loading",o)}y(kn,"onLoading");function T(o){M.ev.on("resize",o)}y(T,"onResize");function L(o){M.ev.on("gamepadConnect",o)}y(L,"onGamepadConnect");function B(o){M.ev.on("gamepadDisconnect",o)}y(B,"onGamepadDisconnect");function $(o){M.ev.on("error",o)}y($,"onError");function ft(o){Kt(()=>{Oe(()=>{let a=ee(),f=zt(),m={size:36,width:a-32*2,letterSpacing:4,lineSpacing:4,font:Ga,fixed:!0};ce({width:a,height:f,color:Bt(0,0,255),fixed:!0});let x=yn({...m,text:o.name,pos:Y(32),color:Bt(255,128,0),fixed:!0});xn(x),sr({...m,text:o.message,pos:Y(32,32+x.height+16),fixed:!0}),te(),M.ev.trigger("error",o)})})}y(ft,"handleErr");function Vt(){r.keyState.update(),r.mouseState.update(),r.virtualButtonState.update(),r.gamepadButtonState.update(),r.charInputted=[],r.isMouseMoved=!1}y(Vt,"resetInputState");function Kt(o){r.loopID!==null&&cancelAnimationFrame(r.loopID);let a=y(f=>{if(r.stopped)return;if(document.visibilityState!=="visible"){r.loopID=requestAnimationFrame(a);return}let m=f/1e3,x=m-r.realTime;r.realTime=m,r.skipTime||(r.dt=x,r.time+=me(),r.fpsCounter.tick(r.dt)),r.skipTime=!1,r.numFrames++,cs(),o(),io(),Vt(),M.ev.trigger("frameEnd"),r.loopID=requestAnimationFrame(a)},"frame");a(0)}y(Kt,"run");function Ct(){M.ev.onOnce("frameEnd",()=>{r.stopped=!0,u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT);let o=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS);for(let a=0;a<o;a++)u.activeTexture(u.TEXTURE0+a),u.bindTexture(u.TEXTURE_2D,null),u.bindTexture(u.TEXTURE_CUBE_MAP,null);u.bindBuffer(u.ARRAY_BUFFER,null),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null),u.bindRenderbuffer(u.RENDERBUFFER,null),u.bindFramebuffer(u.FRAMEBUFFER,null),i.forEach(a=>a()),u.deleteBuffer(p.vbuf),u.deleteBuffer(p.ibuf);for(let a in ge)r.canvas.removeEventListener(a,ge[a]);for(let a in Dn)document.removeEventListener(a,Dn[a]);for(let a in _n)window.removeEventListener(a,_n[a])})}y(Ct,"quit");function dr(o,a,f,m,x=Ka.linear){let d=0,S=[],P=gi(()=>{d+=me();let _=Math.min(d/f,1);m($n(o,a,x(_))),_===1&&(P.cancel(),m(a),S.forEach(b=>b()))});return{get paused(){return P.paused},set paused(_){P.paused=_},onEnd(_){S.push(_)},then(_){return this.onEnd(_),this},cancel(){P.cancel()},finish(){P.cancel(),m(a),S.forEach(_=>_())}}}y(dr,"tween");let Ti=!0;Kt(()=>{H.loaded||Q()===1&&!Ti&&(H.loaded=!0,M.ev.trigger("load")),!H.loaded&&e.loadingScreen!==!1||Ti?ga():(da(),Dt.paused||Rn(),Mo(),pa(),e.debug!==!1&&ma(),e.virtualControls&&hi()&&wa()),Ti&&(Ti=!1)}),ao();let se={VERSION:_1,loadRoot:ht,loadProgress:Q,loadSprite:er,loadSpriteAtlas:Zi,loadSound:rn,loadBitmapFont:ai,loadFont:tr,loadShader:us,loadShaderURL:mn,loadAseprite:as,loadPedit:ji,loadBean:ls,load:Qt,getSprite:nr,getSound:Pe,getFont:$i,getBitmapFont:to,getShader:eo,Asset:W,SpriteData:R,SoundData:I,width:ee,height:zt,center:fn,dt:me,time:Dr,screenshot:lo,record:ua,isFocused:la,setCursor:fi,getCursor:Ms,setCursorLocked:Cs,isCursorLocked:Is,setFullscreen:Ps,isFullscreen:ci,isTouchScreen:hi,onLoad:Kr,onLoading:kn,onResize:T,onGamepadConnect:L,onGamepadDisconnect:B,onError:$,camPos:Os,camScale:fo,camRot:Nr,shake:co,toScreen:di,toWorld:pi,setGravity:mi,getGravity:bn,setBackground:xo,getBackground:wi,getGamepads:Ve,add:Qe,destroy:fa,destroyAll:bu,get:bi,readd:Su,pos:cr,scale:hr,rotate:_o,color:Eo,opacity:So,anchor:he,area:qr,sprite:Ot,text:ln,rect:vi,circle:Ai,uvquad:$s,outline:ta,body:Wr,doubleJump:zn,shader:na,timer:bo,fixed:Vo,stay:yi,health:xi,lifespan:_i,z:Zs,move:Xs,offscreen:an,follow:Re,state:Ro,fadeIn:ra,tile:Si,agent:aa,on:sn,onUpdate:gi,onDraw:ho,onAdd:lr,onDestroy:En,onClick:mo,onCollide:po,onCollideUpdate:go,onCollideEnd:Bs,onHover:wo,onHoverUpdate:vo,onHoverEnd:Fs,onKeyDown:Ds,onKeyPress:Sn,onKeyPressRepeat:xu,onKeyRelease:_u,onMouseDown:Ns,onMousePress:kr,onMouseRelease:Us,onMouseMove:zs,onCharInput:ks,onTouchStart:qs,onTouchMove:Ws,onTouchEnd:Ft,onScroll:Pt,onVirtualButtonPress:Hs,onVirtualButtonDown:Ks,onVirtualButtonRelease:Gs,onGamepadButtonDown:Ys,onGamepadButtonPress:Js,onGamepadButtonRelease:Qs,onGamepadStick:Ao,mousePos:Nn,mouseDeltaPos:uo,isKeyDown:_s,isKeyPressed:ys,isKeyPressedRepeat:xs,isKeyReleased:Es,isMouseDown:vs,isMousePressed:Or,isMouseReleased:Br,isMouseMoved:As,isVirtualButtonPressed:Ss,isVirtualButtonDown:Fr,isVirtualButtonReleased:bs,isGamepadButtonPressed:Lr,isGamepadButtonDown:Vs,isGamepadButtonReleased:Rs,charInputted:Ts,loop:Ls,wait:zr,play:no,volume:rr,burp:ir,audioCtx:F.ctx,Timer:Qa,Line:jn,Rect:ue,Circle:Qo,Polygon:ri,Vec2:G,Color:Et,Mat4:fe,Quad:ae,RNG:Yl,rand:ts,randi:Jl,randSeed:Ih,vec2:Y,rgb:Bt,hsl2rgb:d1,quad:ie,choose:Oh,chance:Ph,lerp:$n,tween:dr,easings:Ka,map:$a,mapc:Ch,wave:Vl,deg2rad:Pn,rad2deg:qi,testLineLine:Ui,testRectRect:Bh,testRectLine:Lh,testRectPoint:zi,testCirclePolygon:Nh,testLinePoint:Dh,testLineCircle:Ql,drawSprite:Ln,drawText:sr,formatText:yn,drawRect:ce,drawLine:An,drawLines:Mr,drawTriangle:Cr,drawCircle:Ye,drawEllipse:Ir,drawUVQuad:Fn,drawPolygon:Je,drawFormattedText:xn,drawMasked:ds,drawSubtracted:ps,pushTransform:be,popTransform:te,pushTranslate:bt,pushScale:ze,pushRotate:Ge,pushMatrix:or,usePostEffect:He,debug:Dt,scene:Ei,go:ia,addLevel:sa,getData:To,setData:we,download:uu,downloadJSON:qh,downloadText:jl,downloadBlob:Tl,plug:Hr,ASCII_CHARS:fh,canvas:r.canvas,addKaboom:ca,LEFT:G.LEFT,RIGHT:G.RIGHT,UP:G.UP,DOWN:G.DOWN,RED:Et.RED,GREEN:Et.GREEN,BLUE:Et.BLUE,YELLOW:Et.YELLOW,MAGENTA:Et.MAGENTA,CYAN:Et.CYAN,WHITE:Et.WHITE,BLACK:Et.BLACK,quit:Ct,Event:en,EventHandler:$r,EventController:_r};if(e.plugins&&e.plugins.forEach(Hr),e.global!==!1)for(let o in se)window[o]=se[o];return r.canvas.focus(),se},"default");const z=P1({canvas:document.querySelector("#app"),background:[100,91,80],pixelDensity:window.devicePixelRatio,font:"sinko"});z.loadSound("message-pop","assets/pop.wav");z.loadBitmapFont("sinko","assets/sinko.png",8,10);window.isTrackpad=!1;function $h(e){e.wheelDeltaY?e.wheelDeltaY===e.deltaY*-3&&(window.isTrackpad=!0):e.deltaMode===0&&(window.isTrackpad=!0)}window.addEventListener("mousewheel",$h,!1);window.addEventListener("DOMMouseScroll",$h,!1);let O1=location.hostname.indexOf("itch")!==-1,yl=window.innerHeight,xl=560;O1&&window.addEventListener("resize",()=>{(yl===xl&&window.innerHeight!==yl||yl!==xl&&window.innerHeight===xl)&&setTimeout(()=>{window.location.reload()},500)});var Ml=!1,Cl=!1,ii=[];function B1(e){F1(e)}function F1(e){ii.includes(e)||ii.push(e),L1()}function td(e){let i=ii.indexOf(e);i!==-1&&ii.splice(i,1)}function L1(){!Cl&&!Ml&&(Ml=!0,queueMicrotask(D1))}function D1(){Ml=!1,Cl=!0;for(let e=0;e<ii.length;e++)ii[e]();ii.length=0,Cl=!1}var Gi,Yi,ns,ed,Il=!0;function N1(e){Il=!1,e(),Il=!0}function U1(e){Gi=e.reactive,ns=e.release,Yi=i=>e.effect(i,{scheduler:r=>{Il?B1(r):r()}}),ed=e.raw}function _h(e){Yi=e}function z1(e){let i=()=>{};return[u=>{let c=Yi(u);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(g=>g())}),e._x_effects.add(c),i=()=>{c!==void 0&&(e._x_effects.delete(c),ns(c))},c},()=>{i()}]}var nd=[],rd=[],id=[];function k1(e){id.push(e)}function od(e,i){typeof i=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(i)):(i=e,rd.push(i))}function q1(e){nd.push(e)}function W1(e,i,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[i]||(e._x_attributeCleanups[i]=[]),e._x_attributeCleanups[i].push(r)}function sd(e,i){!e._x_attributeCleanups||Object.entries(e._x_attributeCleanups).forEach(([r,u])=>{(i===void 0||i.includes(r))&&(u.forEach(c=>c()),delete e._x_attributeCleanups[r])})}var $l=new MutationObserver(rf),tf=!1;function ef(){$l.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),tf=!0}function ad(){K1(),$l.disconnect(),tf=!1}var Zo=[],_l=!1;function K1(){Zo=Zo.concat($l.takeRecords()),Zo.length&&!_l&&(_l=!0,queueMicrotask(()=>{H1(),_l=!1}))}function H1(){rf(Zo),Zo.length=0}function pe(e){if(!tf)return e();ad();let i=e();return ef(),i}var nf=!1,nu=[];function G1(){nf=!0}function Y1(){nf=!1,rf(nu),nu=[]}function rf(e){if(nf){nu=nu.concat(e);return}let i=[],r=[],u=new Map,c=new Map;for(let g=0;g<e.length;g++)if(!e[g].target._x_ignoreMutationObserver&&(e[g].type==="childList"&&(e[g].addedNodes.forEach(A=>A.nodeType===1&&i.push(A)),e[g].removedNodes.forEach(A=>A.nodeType===1&&r.push(A))),e[g].type==="attributes")){let A=e[g].target,p=e[g].attributeName,R=e[g].oldValue,I=()=>{u.has(A)||u.set(A,[]),u.get(A).push({name:p,value:A.getAttribute(p)})},F=()=>{c.has(A)||c.set(A,[]),c.get(A).push(p)};A.hasAttribute(p)&&R===null?I():A.hasAttribute(p)?(F(),I()):F()}c.forEach((g,A)=>{sd(A,g)}),u.forEach((g,A)=>{nd.forEach(p=>p(A,g))});for(let g of r)if(!i.includes(g)&&(rd.forEach(A=>A(g)),g._x_cleanups))for(;g._x_cleanups.length;)g._x_cleanups.pop()();i.forEach(g=>{g._x_ignoreSelf=!0,g._x_ignore=!0});for(let g of i)r.includes(g)||!g.isConnected||(delete g._x_ignoreSelf,delete g._x_ignore,id.forEach(A=>A(g)),g._x_ignore=!0,g._x_ignoreSelf=!0);i.forEach(g=>{delete g._x_ignoreSelf,delete g._x_ignore}),i=null,r=null,u=null,c=null}function ud(e){return is(Wi(e))}function rs(e,i,r){return e._x_dataStack=[i,...Wi(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(u=>u!==i)}}function Eh(e,i){let r=e._x_dataStack[0];Object.entries(i).forEach(([u,c])=>{r[u]=c})}function Wi(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Wi(e.host):e.parentNode?Wi(e.parentNode):[]}function is(e){let i=new Proxy({},{ownKeys:()=>Array.from(new Set(e.flatMap(r=>Object.keys(r)))),has:(r,u)=>e.some(c=>c.hasOwnProperty(u)),get:(r,u)=>(e.find(c=>{if(c.hasOwnProperty(u)){let g=Object.getOwnPropertyDescriptor(c,u);if(g.get&&g.get._x_alreadyBound||g.set&&g.set._x_alreadyBound)return!0;if((g.get||g.set)&&g.enumerable){let A=g.get,p=g.set,R=g;A=A&&A.bind(i),p=p&&p.bind(i),A&&(A._x_alreadyBound=!0),p&&(p._x_alreadyBound=!0),Object.defineProperty(c,u,{...R,get:A,set:p})}return!0}return!1})||{})[u],set:(r,u,c)=>{let g=e.find(A=>A.hasOwnProperty(u));return g?g[u]=c:e[e.length-1][u]=c,!0}});return i}function ld(e){let i=u=>typeof u=="object"&&!Array.isArray(u)&&u!==null,r=(u,c="")=>{Object.entries(Object.getOwnPropertyDescriptors(u)).forEach(([g,{value:A,enumerable:p}])=>{if(p===!1||A===void 0)return;let R=c===""?g:`${c}.${g}`;typeof A=="object"&&A!==null&&A._x_interceptor?u[g]=A.initialize(e,R,g):i(A)&&A!==u&&!(A instanceof Element)&&r(A,R)})};return r(e)}function fd(e,i=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(u,c,g){return e(this.initialValue,()=>J1(u,c),A=>Pl(u,c,A),c,g)}};return i(r),u=>{if(typeof u=="object"&&u!==null&&u._x_interceptor){let c=r.initialize.bind(r);r.initialize=(g,A,p)=>{let R=u.initialize(g,A,p);return r.initialValue=R,c(g,A,p)}}else r.initialValue=u;return r}}function J1(e,i){return i.split(".").reduce((r,u)=>r[u],e)}function Pl(e,i,r){if(typeof i=="string"&&(i=i.split(".")),i.length===1)e[i[0]]=r;else{if(i.length===0)throw error;return e[i[0]]||(e[i[0]]={}),Pl(e[i[0]],i.slice(1),r)}}var cd={};function gn(e,i){cd[e]=i}function Ol(e,i){return Object.entries(cd).forEach(([r,u])=>{Object.defineProperty(e,`$${r}`,{get(){let[c,g]=md(i);return c={interceptor:fd,...c},od(i,g),u(i,c)},enumerable:!1})}),e}function Q1(e,i,r,...u){try{return r(...u)}catch(c){es(c,e,i)}}function es(e,i,r=void 0){Object.assign(e,{el:i,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,i),setTimeout(()=>{throw e},0)}var Xa=!0;function Z1(e){let i=Xa;Xa=!1,e(),Xa=i}function ki(e,i,r={}){let u;return Ie(e,i)(c=>u=c,r),u}function Ie(...e){return hd(...e)}var hd=dd;function X1(e){hd=e}function dd(e,i){let r={};Ol(r,e);let u=[r,...Wi(e)];if(typeof i=="function")return j1(u,i);let c=tA(u,i,e);return Q1.bind(null,e,i,c)}function j1(e,i){return(r=()=>{},{scope:u={},params:c=[]}={})=>{let g=i.apply(is([u,...e]),c);ru(r,g)}}var El={};function $1(e,i){if(El[e])return El[e];let r=Object.getPrototypeOf(async function(){}).constructor,u=/^[\n\s]*if.*\(.*\)/.test(e)||/^(let|const)\s/.test(e)?`(async()=>{ ${e} })()`:e,g=(()=>{try{return new r(["__self","scope"],`with (scope) { __self.result = ${u} }; __self.finished = true; return __self.result;`)}catch(A){return es(A,i,e),Promise.resolve()}})();return El[e]=g,g}function tA(e,i,r){let u=$1(i,r);return(c=()=>{},{scope:g={},params:A=[]}={})=>{u.result=void 0,u.finished=!1;let p=is([g,...e]);if(typeof u=="function"){let R=u(u,p).catch(I=>es(I,r,i));u.finished?(ru(c,u.result,p,A,r),u.result=void 0):R.then(I=>{ru(c,I,p,A,r)}).catch(I=>es(I,r,i)).finally(()=>u.result=void 0)}}}function ru(e,i,r,u,c){if(Xa&&typeof i=="function"){let g=i.apply(r,u);g instanceof Promise?g.then(A=>ru(e,A,r,u)).catch(A=>es(A,c,i)):e(g)}else typeof i=="object"&&i instanceof Promise?i.then(g=>e(g)):e(i)}var of="x-";function Ji(e=""){return of+e}function eA(e){of=e}var Bl={};function oe(e,i){return Bl[e]=i,{before(r){var c;if(!Bl[r]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const u=(c=ni.indexOf(r))!=null?c:ni.indexOf("DEFAULT");u>=0&&ni.splice(u,0,e)}}}function sf(e,i,r){if(i=Array.from(i),e._x_virtualDirectives){let g=Object.entries(e._x_virtualDirectives).map(([p,R])=>({name:p,value:R})),A=pd(g);g=g.map(p=>A.find(R=>R.name===p.name)?{name:`x-bind:${p.name}`,value:`"${p.value}"`}:p),i=i.concat(g)}let u={};return i.map(Ad((g,A)=>u[g]=A)).filter(xd).map(iA(u,r)).sort(oA).map(g=>rA(e,g))}function pd(e){return Array.from(e).map(Ad()).filter(i=>!xd(i))}var Fl=!1,Jo=new Map,gd=Symbol();function nA(e){Fl=!0;let i=Symbol();gd=i,Jo.set(i,[]);let r=()=>{for(;Jo.get(i).length;)Jo.get(i).shift()();Jo.delete(i)},u=()=>{Fl=!1,r()};e(r),u()}function md(e){let i=[],r=p=>i.push(p),[u,c]=z1(e);return i.push(c),[{Alpine:ss,effect:u,cleanup:r,evaluateLater:Ie.bind(Ie,e),evaluate:ki.bind(ki,e)},()=>i.forEach(p=>p())]}function rA(e,i){let r=()=>{},u=Bl[i.type]||r,[c,g]=md(e);W1(e,i.original,g);let A=()=>{e._x_ignore||e._x_ignoreSelf||(u.inline&&u.inline(e,i,c),u=u.bind(u,e,i,c),Fl?Jo.get(gd).push(u):u())};return A.runCleanups=g,A}var wd=(e,i)=>({name:r,value:u})=>(r.startsWith(e)&&(r=r.replace(e,i)),{name:r,value:u}),vd=e=>e;function Ad(e=()=>{}){return({name:i,value:r})=>{let{name:u,value:c}=yd.reduce((g,A)=>A(g),{name:i,value:r});return u!==i&&e(u,i),{name:u,value:c}}}var yd=[];function af(e){yd.push(e)}function xd({name:e}){return _d().test(e)}var _d=()=>new RegExp(`^${of}([^:^.]+)\\b`);function iA(e,i){return({name:r,value:u})=>{let c=r.match(_d()),g=r.match(/:([a-zA-Z0-9\-:]+)/),A=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],p=i||e[r]||r;return{type:c?c[1]:null,value:g?g[1]:null,modifiers:A.map(R=>R.replace(".","")),expression:u,original:p}}}var Ll="DEFAULT",ni=["ignore","ref","data","id","radio","tabs","switch","disclosure","menu","listbox","combobox","bind","init","for","mask","model","modelable","transition","show","if",Ll,"teleport"];function oA(e,i){let r=ni.indexOf(e.type)===-1?Ll:e.type,u=ni.indexOf(i.type)===-1?Ll:i.type;return ni.indexOf(r)-ni.indexOf(u)}function Xo(e,i,r={}){e.dispatchEvent(new CustomEvent(i,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function br(e,i){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(c=>br(c,i));return}let r=!1;if(i(e,()=>r=!0),r)return;let u=e.firstElementChild;for(;u;)br(u,i),u=u.nextElementSibling}function Ki(e,...i){console.warn(`Alpine Warning: ${e}`,...i)}function sA(){document.body||Ki("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Xo(document,"alpine:init"),Xo(document,"alpine:initializing"),ef(),k1(i=>Vr(i,br)),od(i=>Md(i)),q1((i,r)=>{sf(i,r).forEach(u=>u())});let e=i=>!lu(i.parentElement,!0);Array.from(document.querySelectorAll(bd())).filter(e).forEach(i=>{Vr(i)}),Xo(document,"alpine:initialized")}var uf=[],Ed=[];function Sd(){return uf.map(e=>e())}function bd(){return uf.concat(Ed).map(e=>e())}function Vd(e){uf.push(e)}function Rd(e){Ed.push(e)}function lu(e,i=!1){return fu(e,r=>{if((i?bd():Sd()).some(c=>r.matches(c)))return!0})}function fu(e,i){if(!!e){if(i(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return fu(e.parentElement,i)}}function aA(e){return Sd().some(i=>e.matches(i))}var Td=[];function uA(e){Td.push(e)}function Vr(e,i=br,r=()=>{}){nA(()=>{i(e,(u,c)=>{r(u,c),Td.forEach(g=>g(u,c)),sf(u,u.attributes).forEach(g=>g()),u._x_ignore&&c()})})}function Md(e){br(e,i=>sd(i))}var Dl=[],lf=!1;function ff(e=()=>{}){return queueMicrotask(()=>{lf||setTimeout(()=>{Nl()})}),new Promise(i=>{Dl.push(()=>{e(),i()})})}function Nl(){for(lf=!1;Dl.length;)Dl.shift()()}function lA(){lf=!0}function cf(e,i){return Array.isArray(i)?Sh(e,i.join(" ")):typeof i=="object"&&i!==null?fA(e,i):typeof i=="function"?cf(e,i()):Sh(e,i)}function Sh(e,i){let r=c=>c.split(" ").filter(g=>!e.classList.contains(g)).filter(Boolean),u=c=>(e.classList.add(...c),()=>{e.classList.remove(...c)});return i=i===!0?i="":i||"",u(r(i))}function fA(e,i){let r=p=>p.split(" ").filter(Boolean),u=Object.entries(i).flatMap(([p,R])=>R?r(p):!1).filter(Boolean),c=Object.entries(i).flatMap(([p,R])=>R?!1:r(p)).filter(Boolean),g=[],A=[];return c.forEach(p=>{e.classList.contains(p)&&(e.classList.remove(p),A.push(p))}),u.forEach(p=>{e.classList.contains(p)||(e.classList.add(p),g.push(p))}),()=>{A.forEach(p=>e.classList.add(p)),g.forEach(p=>e.classList.remove(p))}}function cu(e,i){return typeof i=="object"&&i!==null?cA(e,i):hA(e,i)}function cA(e,i){let r={};return Object.entries(i).forEach(([u,c])=>{r[u]=e.style[u],u.startsWith("--")||(u=dA(u)),e.style.setProperty(u,c)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{cu(e,r)}}function hA(e,i){let r=e.getAttribute("style",i);return e.setAttribute("style",i),()=>{e.setAttribute("style",r||"")}}function dA(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ul(e,i=()=>{}){let r=!1;return function(){r?i.apply(this,arguments):(r=!0,e.apply(this,arguments))}}oe("transition",(e,{value:i,modifiers:r,expression:u},{evaluate:c})=>{typeof u=="function"&&(u=c(u)),u?pA(e,u,i):gA(e,r,i)});function pA(e,i,r){Cd(e,cf,""),{enter:c=>{e._x_transition.enter.during=c},"enter-start":c=>{e._x_transition.enter.start=c},"enter-end":c=>{e._x_transition.enter.end=c},leave:c=>{e._x_transition.leave.during=c},"leave-start":c=>{e._x_transition.leave.start=c},"leave-end":c=>{e._x_transition.leave.end=c}}[r](i)}function gA(e,i,r){Cd(e,cu);let u=!i.includes("in")&&!i.includes("out")&&!r,c=u||i.includes("in")||["enter"].includes(r),g=u||i.includes("out")||["leave"].includes(r);i.includes("in")&&!u&&(i=i.filter((ht,Mt)=>Mt<i.indexOf("out"))),i.includes("out")&&!u&&(i=i.filter((ht,Mt)=>Mt>i.indexOf("out")));let A=!i.includes("opacity")&&!i.includes("scale"),p=A||i.includes("opacity"),R=A||i.includes("scale"),I=p?0:1,F=R?Ho(i,"scale",95)/100:1,W=Ho(i,"delay",0),J=Ho(i,"origin","center"),H="opacity, transform",M=Ho(i,"duration",150)/1e3,Qt=Ho(i,"duration",75)/1e3,Q="cubic-bezier(0.4, 0.0, 0.2, 1)";c&&(e._x_transition.enter.during={transformOrigin:J,transitionDelay:W,transitionProperty:H,transitionDuration:`${M}s`,transitionTimingFunction:Q},e._x_transition.enter.start={opacity:I,transform:`scale(${F})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),g&&(e._x_transition.leave.during={transformOrigin:J,transitionDelay:W,transitionProperty:H,transitionDuration:`${Qt}s`,transitionTimingFunction:Q},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:I,transform:`scale(${F})`})}function Cd(e,i,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(u=()=>{},c=()=>{}){zl(e,i,{during:this.enter.during,start:this.enter.start,end:this.enter.end},u,c)},out(u=()=>{},c=()=>{}){zl(e,i,{during:this.leave.during,start:this.leave.start,end:this.leave.end},u,c)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,i,r,u){const c=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let g=()=>c(r);if(i){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):g():e._x_transition?e._x_transition.in(r):g();return}e._x_hidePromise=e._x_transition?new Promise((A,p)=>{e._x_transition.out(()=>{},()=>A(u)),e._x_transitioning.beforeCancel(()=>p({isFromCancelledTransition:!0}))}):Promise.resolve(u),queueMicrotask(()=>{let A=Id(e);A?(A._x_hideChildren||(A._x_hideChildren=[]),A._x_hideChildren.push(e)):c(()=>{let p=R=>{let I=Promise.all([R._x_hidePromise,...(R._x_hideChildren||[]).map(p)]).then(([F])=>F());return delete R._x_hidePromise,delete R._x_hideChildren,I};p(e).catch(R=>{if(!R.isFromCancelledTransition)throw R})})})};function Id(e){let i=e.parentNode;if(!!i)return i._x_hidePromise?i:Id(i)}function zl(e,i,{during:r,start:u,end:c}={},g=()=>{},A=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(u).length===0&&Object.keys(c).length===0){g(),A();return}let p,R,I;mA(e,{start(){p=i(e,u)},during(){R=i(e,r)},before:g,end(){p(),I=i(e,c)},after:A,cleanup(){R(),I()}})}function mA(e,i){let r,u,c,g=Ul(()=>{pe(()=>{r=!0,u||i.before(),c||(i.end(),Nl()),i.after(),e.isConnected&&i.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(A){this.beforeCancels.push(A)},cancel:Ul(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();g()}),finish:g},pe(()=>{i.start(),i.during()}),lA(),requestAnimationFrame(()=>{if(r)return;let A=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,p=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;A===0&&(A=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),pe(()=>{i.before()}),u=!0,requestAnimationFrame(()=>{r||(pe(()=>{i.end()}),Nl(),setTimeout(e._x_transitioning.finish,A+p),c=!0)})})}function Ho(e,i,r){if(e.indexOf(i)===-1)return r;const u=e[e.indexOf(i)+1];if(!u||i==="scale"&&isNaN(u))return r;if(i==="duration"){let c=u.match(/([0-9]+)ms/);if(c)return c[1]}return i==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(i)+2])?[u,e[e.indexOf(i)+2]].join(" "):u}var iu=!1;function os(e,i=()=>{}){return(...r)=>iu?i(...r):e(...r)}function wA(e){return(...i)=>iu&&e(...i)}function vA(e,i){i._x_dataStack||(i._x_dataStack=e._x_dataStack),iu=!0,yA(()=>{AA(i)}),iu=!1}function AA(e){let i=!1;Vr(e,(u,c)=>{br(u,(g,A)=>{if(i&&aA(g))return A();i=!0,c(g,A)})})}function yA(e){let i=Yi;_h((r,u)=>{let c=i(r);return ns(c),()=>{}}),e(),_h(i)}function Pd(e,i,r,u=[]){switch(e._x_bindings||(e._x_bindings=Gi({})),e._x_bindings[i]=r,i=u.includes("camel")?RA(i):i,i){case"value":xA(e,r);break;case"style":EA(e,r);break;case"class":_A(e,r);break;default:SA(e,i,r);break}}function xA(e,i){if(e.type==="radio")e.attributes.value===void 0&&(e.value=i),window.fromModel&&(e.checked=bh(e.value,i));else if(e.type==="checkbox")Number.isInteger(i)?e.value=i:!Number.isInteger(i)&&!Array.isArray(i)&&typeof i!="boolean"&&![null,void 0].includes(i)?e.value=String(i):Array.isArray(i)?e.checked=i.some(r=>bh(r,e.value)):e.checked=!!i;else if(e.tagName==="SELECT")VA(e,i);else{if(e.value===i)return;e.value=i}}function _A(e,i){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=cf(e,i)}function EA(e,i){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=cu(e,i)}function SA(e,i,r){[null,void 0,!1].includes(r)&&TA(i)?e.removeAttribute(i):(Od(i)&&(r=i),bA(e,i,r))}function bA(e,i,r){e.getAttribute(i)!=r&&e.setAttribute(i,r)}function VA(e,i){const r=[].concat(i).map(u=>u+"");Array.from(e.options).forEach(u=>{u.selected=r.includes(u.value)})}function RA(e){return e.toLowerCase().replace(/-(\w)/g,(i,r)=>r.toUpperCase())}function bh(e,i){return e==i}function Od(e){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(e)}function TA(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function MA(e,i,r){if(e._x_bindings&&e._x_bindings[i]!==void 0)return e._x_bindings[i];let u=e.getAttribute(i);return u===null?typeof r=="function"?r():r:u===""?!0:Od(i)?!![i,"true"].includes(u):u}function Bd(e,i){var r;return function(){var u=this,c=arguments,g=function(){r=null,e.apply(u,c)};clearTimeout(r),r=setTimeout(g,i)}}function Fd(e,i){let r;return function(){let u=this,c=arguments;r||(e.apply(u,c),r=!0,setTimeout(()=>r=!1,i))}}function CA(e){e(ss)}var ei={},Vh=!1;function IA(e,i){if(Vh||(ei=Gi(ei),Vh=!0),i===void 0)return ei[e];ei[e]=i,typeof i=="object"&&i!==null&&i.hasOwnProperty("init")&&typeof i.init=="function"&&ei[e].init(),ld(ei[e])}function PA(){return ei}var Ld={};function OA(e,i){let r=typeof i!="function"?()=>i:i;e instanceof Element?Dd(e,r()):Ld[e]=r}function BA(e){return Object.entries(Ld).forEach(([i,r])=>{Object.defineProperty(e,i,{get(){return(...u)=>r(...u)}})}),e}function Dd(e,i,r){let u=[];for(;u.length;)u.pop()();let c=Object.entries(i).map(([A,p])=>({name:A,value:p})),g=pd(c);c=c.map(A=>g.find(p=>p.name===A.name)?{name:`x-bind:${A.name}`,value:`"${A.value}"`}:A),sf(e,c,r).map(A=>{u.push(A.runCleanups),A()})}var Nd={};function FA(e,i){Nd[e]=i}function LA(e,i){return Object.entries(Nd).forEach(([r,u])=>{Object.defineProperty(e,r,{get(){return(...c)=>u.bind(i)(...c)},enumerable:!1})}),e}var DA={get reactive(){return Gi},get release(){return ns},get effect(){return Yi},get raw(){return ed},version:"3.11.1",flushAndStopDeferringMutations:Y1,dontAutoEvaluateFunctions:Z1,disableEffectScheduling:N1,startObservingMutations:ef,stopObservingMutations:ad,setReactivityEngine:U1,closestDataStack:Wi,skipDuringClone:os,onlyDuringClone:wA,addRootSelector:Vd,addInitSelector:Rd,addScopeToNode:rs,deferMutations:G1,mapAttributes:af,evaluateLater:Ie,interceptInit:uA,setEvaluator:X1,mergeProxies:is,findClosest:fu,closestRoot:lu,destroyTree:Md,interceptor:fd,transition:zl,setStyles:cu,mutateDom:pe,directive:oe,throttle:Fd,debounce:Bd,evaluate:ki,initTree:Vr,nextTick:ff,prefixed:Ji,prefix:eA,plugin:CA,magic:gn,store:IA,start:sA,clone:vA,bound:MA,$data:ud,walk:br,data:FA,bind:OA},ss=DA;function NA(e,i){const r=Object.create(null),u=e.split(",");for(let c=0;c<u.length;c++)r[u[c]]=!0;return i?c=>!!r[c.toLowerCase()]:c=>!!r[c]}var UA=Object.freeze({});Object.freeze([]);var Ud=Object.assign,zA=Object.prototype.hasOwnProperty,hu=(e,i)=>zA.call(e,i),oi=Array.isArray,jo=e=>zd(e)==="[object Map]",kA=e=>typeof e=="string",hf=e=>typeof e=="symbol",du=e=>e!==null&&typeof e=="object",qA=Object.prototype.toString,zd=e=>qA.call(e),kd=e=>zd(e).slice(8,-1),df=e=>kA(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,WA=e=>{const i=Object.create(null);return r=>i[r]||(i[r]=e(r))},KA=WA(e=>e.charAt(0).toUpperCase()+e.slice(1)),qd=(e,i)=>e!==i&&(e===e||i===i),kl=new WeakMap,Go=[],In,si=Symbol("iterate"),ql=Symbol("Map key iterate");function HA(e){return e&&e._isEffect===!0}function GA(e,i=UA){HA(e)&&(e=e.raw);const r=QA(e,i);return i.lazy||r(),r}function YA(e){e.active&&(Wd(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var JA=0;function QA(e,i){const r=function(){if(!r.active)return e();if(!Go.includes(r)){Wd(r);try{return XA(),Go.push(r),In=r,e()}finally{Go.pop(),Kd(),In=Go[Go.length-1]}}};return r.id=JA++,r.allowRecurse=!!i.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=i,r}function Wd(e){const{deps:i}=e;if(i.length){for(let r=0;r<i.length;r++)i[r].delete(e);i.length=0}}var Hi=!0,pf=[];function ZA(){pf.push(Hi),Hi=!1}function XA(){pf.push(Hi),Hi=!0}function Kd(){const e=pf.pop();Hi=e===void 0?!0:e}function pn(e,i,r){if(!Hi||In===void 0)return;let u=kl.get(e);u||kl.set(e,u=new Map);let c=u.get(r);c||u.set(r,c=new Set),c.has(In)||(c.add(In),In.deps.push(c),In.options.onTrack&&In.options.onTrack({effect:In,target:e,type:i,key:r}))}function Rr(e,i,r,u,c,g){const A=kl.get(e);if(!A)return;const p=new Set,R=F=>{F&&F.forEach(W=>{(W!==In||W.allowRecurse)&&p.add(W)})};if(i==="clear")A.forEach(R);else if(r==="length"&&oi(e))A.forEach((F,W)=>{(W==="length"||W>=u)&&R(F)});else switch(r!==void 0&&R(A.get(r)),i){case"add":oi(e)?df(r)&&R(A.get("length")):(R(A.get(si)),jo(e)&&R(A.get(ql)));break;case"delete":oi(e)||(R(A.get(si)),jo(e)&&R(A.get(ql)));break;case"set":jo(e)&&R(A.get(si));break}const I=F=>{F.options.onTrigger&&F.options.onTrigger({effect:F,target:e,key:r,type:i,newValue:u,oldValue:c,oldTarget:g}),F.options.scheduler?F.options.scheduler(F):F()};p.forEach(I)}var jA=NA("__proto__,__v_isRef,__isVue"),Hd=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(hf)),$A=pu(),ty=pu(!1,!0),ey=pu(!0),ny=pu(!0,!0),ou={};["includes","indexOf","lastIndexOf"].forEach(e=>{const i=Array.prototype[e];ou[e]=function(...r){const u=qt(this);for(let g=0,A=this.length;g<A;g++)pn(u,"get",g+"");const c=i.apply(u,r);return c===-1||c===!1?i.apply(u,r.map(qt)):c}});["push","pop","shift","unshift","splice"].forEach(e=>{const i=Array.prototype[e];ou[e]=function(...r){ZA();const u=i.apply(this,r);return Kd(),u}});function pu(e=!1,i=!1){return function(u,c,g){if(c==="__v_isReactive")return!e;if(c==="__v_isReadonly")return e;if(c==="__v_raw"&&g===(e?i?hy:sp:i?cy:op).get(u))return u;const A=oi(u);if(!e&&A&&hu(ou,c))return Reflect.get(ou,c,g);const p=Reflect.get(u,c,g);return(hf(c)?Hd.has(c):jA(c))||(e||pn(u,"get",c),i)?p:Wl(p)?!A||!df(c)?p.value:p:du(p)?e?ap(p):vf(p):p}}var ry=Gd(),iy=Gd(!0);function Gd(e=!1){return function(r,u,c,g){let A=r[u];if(!e&&(c=qt(c),A=qt(A),!oi(r)&&Wl(A)&&!Wl(c)))return A.value=c,!0;const p=oi(r)&&df(u)?Number(u)<r.length:hu(r,u),R=Reflect.set(r,u,c,g);return r===qt(g)&&(p?qd(c,A)&&Rr(r,"set",u,c,A):Rr(r,"add",u,c)),R}}function oy(e,i){const r=hu(e,i),u=e[i],c=Reflect.deleteProperty(e,i);return c&&r&&Rr(e,"delete",i,void 0,u),c}function sy(e,i){const r=Reflect.has(e,i);return(!hf(i)||!Hd.has(i))&&pn(e,"has",i),r}function ay(e){return pn(e,"iterate",oi(e)?"length":si),Reflect.ownKeys(e)}var Yd={get:$A,set:ry,deleteProperty:oy,has:sy,ownKeys:ay},Jd={get:ey,set(e,i){return console.warn(`Set operation on key "${String(i)}" failed: target is readonly.`,e),!0},deleteProperty(e,i){return console.warn(`Delete operation on key "${String(i)}" failed: target is readonly.`,e),!0}};Ud({},Yd,{get:ty,set:iy});Ud({},Jd,{get:ny});var gf=e=>du(e)?vf(e):e,mf=e=>du(e)?ap(e):e,wf=e=>e,gu=e=>Reflect.getPrototypeOf(e);function mu(e,i,r=!1,u=!1){e=e.__v_raw;const c=qt(e),g=qt(i);i!==g&&!r&&pn(c,"get",i),!r&&pn(c,"get",g);const{has:A}=gu(c),p=u?wf:r?mf:gf;if(A.call(c,i))return p(e.get(i));if(A.call(c,g))return p(e.get(g));e!==c&&e.get(i)}function wu(e,i=!1){const r=this.__v_raw,u=qt(r),c=qt(e);return e!==c&&!i&&pn(u,"has",e),!i&&pn(u,"has",c),e===c?r.has(e):r.has(e)||r.has(c)}function vu(e,i=!1){return e=e.__v_raw,!i&&pn(qt(e),"iterate",si),Reflect.get(e,"size",e)}function Qd(e){e=qt(e);const i=qt(this);return gu(i).has.call(i,e)||(i.add(e),Rr(i,"add",e,e)),this}function Zd(e,i){i=qt(i);const r=qt(this),{has:u,get:c}=gu(r);let g=u.call(r,e);g?ip(r,u,e):(e=qt(e),g=u.call(r,e));const A=c.call(r,e);return r.set(e,i),g?qd(i,A)&&Rr(r,"set",e,i,A):Rr(r,"add",e,i),this}function Xd(e){const i=qt(this),{has:r,get:u}=gu(i);let c=r.call(i,e);c?ip(i,r,e):(e=qt(e),c=r.call(i,e));const g=u?u.call(i,e):void 0,A=i.delete(e);return c&&Rr(i,"delete",e,void 0,g),A}function jd(){const e=qt(this),i=e.size!==0,r=jo(e)?new Map(e):new Set(e),u=e.clear();return i&&Rr(e,"clear",void 0,void 0,r),u}function Au(e,i){return function(u,c){const g=this,A=g.__v_raw,p=qt(A),R=i?wf:e?mf:gf;return!e&&pn(p,"iterate",si),A.forEach((I,F)=>u.call(c,R(I),R(F),g))}}function Ya(e,i,r){return function(...u){const c=this.__v_raw,g=qt(c),A=jo(g),p=e==="entries"||e===Symbol.iterator&&A,R=e==="keys"&&A,I=c[e](...u),F=r?wf:i?mf:gf;return!i&&pn(g,"iterate",R?ql:si),{next(){const{value:W,done:J}=I.next();return J?{value:W,done:J}:{value:p?[F(W[0]),F(W[1])]:F(W),done:J}},[Symbol.iterator](){return this}}}}function Er(e){return function(...i){{const r=i[0]?`on key "${i[0]}" `:"";console.warn(`${KA(e)} operation ${r}failed: target is readonly.`,qt(this))}return e==="delete"?!1:this}}var $d={get(e){return mu(this,e)},get size(){return vu(this)},has:wu,add:Qd,set:Zd,delete:Xd,clear:jd,forEach:Au(!1,!1)},tp={get(e){return mu(this,e,!1,!0)},get size(){return vu(this)},has:wu,add:Qd,set:Zd,delete:Xd,clear:jd,forEach:Au(!1,!0)},ep={get(e){return mu(this,e,!0)},get size(){return vu(this,!0)},has(e){return wu.call(this,e,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:Au(!0,!1)},np={get(e){return mu(this,e,!0,!0)},get size(){return vu(this,!0)},has(e){return wu.call(this,e,!0)},add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear"),forEach:Au(!0,!0)},uy=["keys","values","entries",Symbol.iterator];uy.forEach(e=>{$d[e]=Ya(e,!1,!1),ep[e]=Ya(e,!0,!1),tp[e]=Ya(e,!1,!0),np[e]=Ya(e,!0,!0)});function rp(e,i){const r=i?e?np:tp:e?ep:$d;return(u,c,g)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?u:Reflect.get(hu(r,c)&&c in u?r:u,c,g)}var ly={get:rp(!1,!1)},fy={get:rp(!0,!1)};function ip(e,i,r){const u=qt(r);if(u!==r&&i.call(e,u)){const c=kd(e);console.warn(`Reactive ${c} contains both the raw and reactive versions of the same object${c==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var op=new WeakMap,cy=new WeakMap,sp=new WeakMap,hy=new WeakMap;function dy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function py(e){return e.__v_skip||!Object.isExtensible(e)?0:dy(kd(e))}function vf(e){return e&&e.__v_isReadonly?e:up(e,!1,Yd,ly,op)}function ap(e){return up(e,!0,Jd,fy,sp)}function up(e,i,r,u,c){if(!du(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(i&&e.__v_isReactive))return e;const g=c.get(e);if(g)return g;const A=py(e);if(A===0)return e;const p=new Proxy(e,A===2?u:r);return c.set(e,p),p}function qt(e){return e&&qt(e.__v_raw)||e}function Wl(e){return Boolean(e&&e.__v_isRef===!0)}gn("nextTick",()=>ff);gn("dispatch",e=>Xo.bind(Xo,e));gn("watch",(e,{evaluateLater:i,effect:r})=>(u,c)=>{let g=i(u),A=!0,p,R=r(()=>g(I=>{JSON.stringify(I),A?p=I:queueMicrotask(()=>{c(I,p),p=I}),A=!1}));e._x_effects.delete(R)});gn("store",PA);gn("data",e=>ud(e));gn("root",e=>lu(e));gn("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=is(gy(e))),e._x_refs_proxy));function gy(e){let i=[],r=e;for(;r;)r._x_refs&&i.push(r._x_refs),r=r.parentNode;return i}var Sl={};function lp(e){return Sl[e]||(Sl[e]=0),++Sl[e]}function my(e,i){return fu(e,r=>{if(r._x_ids&&r._x_ids[i])return!0})}function wy(e,i){e._x_ids||(e._x_ids={}),e._x_ids[i]||(e._x_ids[i]=lp(i))}gn("id",e=>(i,r=null)=>{let u=my(e,i),c=u?u._x_ids[i]:lp(i);return r?`${i}-${c}-${r}`:`${i}-${c}`});gn("el",e=>e);fp("Focus","focus","focus");fp("Persist","persist","persist");function fp(e,i,r){gn(i,u=>Ki(`You can't use [$${directiveName}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,u))}function vy({get:e,set:i},{get:r,set:u}){let c=!0,g,A,p=Yi(()=>{let R,I;c?(R=e(),u(R),I=r(),c=!1):(R=e(),I=r(),A=JSON.stringify(R),JSON.stringify(I),A!==g?(I=r(),u(R),I=R):(i(I),R=I)),g=JSON.stringify(R),JSON.stringify(I)});return()=>{ns(p)}}oe("modelable",(e,{expression:i},{effect:r,evaluateLater:u,cleanup:c})=>{let g=u(i),A=()=>{let F;return g(W=>F=W),F},p=u(`${i} = __placeholder`),R=F=>p(()=>{},{scope:{__placeholder:F}}),I=A();R(I),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let F=e._x_model.get,W=e._x_model.set,J=vy({get(){return F()},set(H){W(H)}},{get(){return A()},set(H){R(H)}});c(J)})});var Ay=document.createElement("div");oe("teleport",(e,{modifiers:i,expression:r},{cleanup:u})=>{e.tagName.toLowerCase()!=="template"&&Ki("x-teleport can only be used on a <template> tag",e);let c=os(()=>document.querySelector(r),()=>Ay)();c||Ki(`Cannot find x-teleport element for selector: "${r}"`);let g=e.content.cloneNode(!0).firstElementChild;e._x_teleport=g,g._x_teleportBack=e,e._x_forwardEvents&&e._x_forwardEvents.forEach(A=>{g.addEventListener(A,p=>{p.stopPropagation(),e.dispatchEvent(new p.constructor(p.type,p))})}),rs(g,{},e),pe(()=>{i.includes("prepend")?c.parentNode.insertBefore(g,c):i.includes("append")?c.parentNode.insertBefore(g,c.nextSibling):c.appendChild(g),Vr(g),g._x_ignore=!0}),u(()=>g.remove())});var cp=()=>{};cp.inline=(e,{modifiers:i},{cleanup:r})=>{i.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{i.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};oe("ignore",cp);oe("effect",(e,{expression:i},{effect:r})=>r(Ie(e,i)));function Kl(e,i,r,u){let c=e,g=R=>u(R),A={},p=(R,I)=>F=>I(R,F);if(r.includes("dot")&&(i=yy(i)),r.includes("camel")&&(i=xy(i)),r.includes("passive")&&(A.passive=!0),r.includes("capture")&&(A.capture=!0),r.includes("window")&&(c=window),r.includes("document")&&(c=document),r.includes("prevent")&&(g=p(g,(R,I)=>{I.preventDefault(),R(I)})),r.includes("stop")&&(g=p(g,(R,I)=>{I.stopPropagation(),R(I)})),r.includes("self")&&(g=p(g,(R,I)=>{I.target===e&&R(I)})),(r.includes("away")||r.includes("outside"))&&(c=document,g=p(g,(R,I)=>{e.contains(I.target)||I.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&R(I))})),r.includes("once")&&(g=p(g,(R,I)=>{R(I),c.removeEventListener(i,g,A)})),g=p(g,(R,I)=>{Ey(i)&&Sy(I,r)||R(I)}),r.includes("debounce")){let R=r[r.indexOf("debounce")+1]||"invalid-wait",I=su(R.split("ms")[0])?Number(R.split("ms")[0]):250;g=Bd(g,I)}if(r.includes("throttle")){let R=r[r.indexOf("throttle")+1]||"invalid-wait",I=su(R.split("ms")[0])?Number(R.split("ms")[0]):250;g=Fd(g,I)}return c.addEventListener(i,g,A),()=>{c.removeEventListener(i,g,A)}}function yy(e){return e.replace(/-/g,".")}function xy(e){return e.toLowerCase().replace(/-(\w)/g,(i,r)=>r.toUpperCase())}function su(e){return!Array.isArray(e)&&!isNaN(e)}function _y(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ey(e){return["keydown","keyup"].includes(e)}function Sy(e,i){let r=i.filter(g=>!["window","document","prevent","stop","once"].includes(g));if(r.includes("debounce")){let g=r.indexOf("debounce");r.splice(g,su((r[g+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let g=r.indexOf("throttle");r.splice(g,su((r[g+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&Rh(e.key).includes(r[0]))return!1;const c=["ctrl","shift","alt","meta","cmd","super"].filter(g=>r.includes(g));return r=r.filter(g=>!c.includes(g)),!(c.length>0&&c.filter(A=>((A==="cmd"||A==="super")&&(A="meta"),e[`${A}Key`])).length===c.length&&Rh(e.key).includes(r[0]))}function Rh(e){if(!e)return[];e=_y(e);let i={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return i[e]=e,Object.keys(i).map(r=>{if(i[r]===e)return r}).filter(r=>r)}oe("model",(e,{modifiers:i,expression:r},{effect:u,cleanup:c})=>{let g=e;i.includes("parent")&&(g=e.parentNode);let A=Ie(g,r),p;typeof r=="string"?p=Ie(g,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?p=Ie(g,`${r()} = __placeholder`):p=()=>{};let R=()=>{let J;return A(H=>J=H),Th(J)?J.get():J},I=J=>{let H;A(M=>H=M),Th(H)?H.set(J):p(()=>{},{scope:{__placeholder:J}})};typeof r=="string"&&e.type==="radio"&&pe(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});var F=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||i.includes("lazy")?"change":"input";let W=Kl(e,F,i,J=>{I(by(e,i,J,R()))});if(e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=W,c(()=>e._x_removeModelListeners.default()),e.form){let J=Kl(e.form,"reset",[],H=>{ff(()=>e._x_model&&e._x_model.set(e.value))});c(()=>J())}e._x_model={get(){return R()},set(J){I(J)}},e._x_forceModelUpdate=J=>{J=J===void 0?R():J,J===void 0&&typeof r=="string"&&r.match(/\./)&&(J=""),window.fromModel=!0,pe(()=>Pd(e,"value",J)),delete window.fromModel},u(()=>{let J=R();i.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(J)})});function by(e,i,r,u){return pe(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return typeof r.detail!="undefined"?r.detail:r.target.value;if(e.type==="checkbox")if(Array.isArray(u)){let c=i.includes("number")?bl(r.target.value):r.target.value;return r.target.checked?u.concat([c]):u.filter(g=>!Vy(g,c))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return i.includes("number")?Array.from(r.target.selectedOptions).map(c=>{let g=c.value||c.text;return bl(g)}):Array.from(r.target.selectedOptions).map(c=>c.value||c.text);{let c=r.target.value;return i.includes("number")?bl(c):i.includes("trim")?c.trim():c}}})}function bl(e){let i=e?parseFloat(e):null;return Ry(i)?i:e}function Vy(e,i){return e==i}function Ry(e){return!Array.isArray(e)&&!isNaN(e)}function Th(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}oe("cloak",e=>queueMicrotask(()=>pe(()=>e.removeAttribute(Ji("cloak")))));Rd(()=>`[${Ji("init")}]`);oe("init",os((e,{expression:i},{evaluate:r})=>typeof i=="string"?!!i.trim()&&r(i,{},!1):r(i,{},!1)));oe("text",(e,{expression:i},{effect:r,evaluateLater:u})=>{let c=u(i);r(()=>{c(g=>{pe(()=>{e.textContent=g})})})});oe("html",(e,{expression:i},{effect:r,evaluateLater:u})=>{let c=u(i);r(()=>{c(g=>{pe(()=>{e.innerHTML=g,e._x_ignoreSelf=!0,Vr(e),delete e._x_ignoreSelf})})})});af(wd(":",vd(Ji("bind:"))));oe("bind",(e,{value:i,modifiers:r,expression:u,original:c},{effect:g})=>{if(!i){let p={};BA(p),Ie(e,u)(I=>{Dd(e,I,c)},{scope:p});return}if(i==="key")return Ty(e,u);let A=Ie(e,u);g(()=>A(p=>{p===void 0&&typeof u=="string"&&u.match(/\./)&&(p=""),pe(()=>Pd(e,i,p,r))}))});function Ty(e,i){e._x_keyExpression=i}Vd(()=>`[${Ji("data")}]`);oe("data",os((e,{expression:i},{cleanup:r})=>{i=i===""?"{}":i;let u={};Ol(u,e);let c={};LA(c,u);let g=ki(e,i,{scope:c});g===void 0&&(g={}),Ol(g,e);let A=Gi(g);ld(A);let p=rs(e,A);A.init&&ki(e,A.init),r(()=>{A.destroy&&ki(e,A.destroy),p()})}));oe("show",(e,{modifiers:i,expression:r},{effect:u})=>{let c=Ie(e,r);e._x_doHide||(e._x_doHide=()=>{pe(()=>{e.style.setProperty("display","none",i.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{pe(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let g=()=>{e._x_doHide(),e._x_isShown=!1},A=()=>{e._x_doShow(),e._x_isShown=!0},p=()=>setTimeout(A),R=Ul(W=>W?A():g(),W=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,W,A,g):W?p():g()}),I,F=!0;u(()=>c(W=>{!F&&W===I||(i.includes("immediate")&&(W?p():g()),R(W),I=W,F=!1)}))});oe("for",(e,{expression:i},{effect:r,cleanup:u})=>{let c=Cy(i),g=Ie(e,c.items),A=Ie(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>My(e,c,g,A)),u(()=>{Object.values(e._x_lookup).forEach(p=>p.remove()),delete e._x_prevKeys,delete e._x_lookup})});function My(e,i,r,u){let c=A=>typeof A=="object"&&!Array.isArray(A),g=e;r(A=>{Iy(A)&&A>=0&&(A=Array.from(Array(A).keys(),Q=>Q+1)),A===void 0&&(A=[]);let p=e._x_lookup,R=e._x_prevKeys,I=[],F=[];if(c(A))A=Object.entries(A).map(([Q,ht])=>{let Mt=Mh(i,ht,Q,A);u(St=>F.push(St),{scope:{index:Q,...Mt}}),I.push(Mt)});else for(let Q=0;Q<A.length;Q++){let ht=Mh(i,A[Q],Q,A);u(Mt=>F.push(Mt),{scope:{index:Q,...ht}}),I.push(ht)}let W=[],J=[],H=[],M=[];for(let Q=0;Q<R.length;Q++){let ht=R[Q];F.indexOf(ht)===-1&&H.push(ht)}R=R.filter(Q=>!H.includes(Q));let Qt="template";for(let Q=0;Q<F.length;Q++){let ht=F[Q],Mt=R.indexOf(ht);if(Mt===-1)R.splice(Q,0,ht),W.push([Qt,Q]);else if(Mt!==Q){let St=R.splice(Q,1)[0],Wt=R.splice(Mt-1,1)[0];R.splice(Q,0,Wt),R.splice(Mt,0,St),J.push([St,Wt])}else M.push(ht);Qt=ht}for(let Q=0;Q<H.length;Q++){let ht=H[Q];p[ht]._x_effects&&p[ht]._x_effects.forEach(td),p[ht].remove(),p[ht]=null,delete p[ht]}for(let Q=0;Q<J.length;Q++){let[ht,Mt]=J[Q],St=p[ht],Wt=p[Mt],kt=document.createElement("div");pe(()=>{Wt.after(kt),St.after(Wt),Wt._x_currentIfEl&&Wt.after(Wt._x_currentIfEl),kt.before(St),St._x_currentIfEl&&St.after(St._x_currentIfEl),kt.remove()}),Eh(Wt,I[F.indexOf(Mt)])}for(let Q=0;Q<W.length;Q++){let[ht,Mt]=W[Q],St=ht==="template"?g:p[ht];St._x_currentIfEl&&(St=St._x_currentIfEl);let Wt=I[Mt],kt=F[Mt],Zt=document.importNode(g.content,!0).firstElementChild;rs(Zt,Gi(Wt),g),pe(()=>{St.after(Zt),Vr(Zt)}),typeof kt=="object"&&Ki("x-for key cannot be an object, it must be a string or an integer",g),p[kt]=Zt}for(let Q=0;Q<M.length;Q++)Eh(p[M[Q]],I[F.indexOf(M[Q])]);g._x_prevKeys=F})}function Cy(e){let i=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,u=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,c=e.match(u);if(!c)return;let g={};g.items=c[2].trim();let A=c[1].replace(r,"").trim(),p=A.match(i);return p?(g.item=A.replace(i,"").trim(),g.index=p[1].trim(),p[2]&&(g.collection=p[2].trim())):g.item=A,g}function Mh(e,i,r,u){let c={};return/^\[.*\]$/.test(e.item)&&Array.isArray(i)?e.item.replace("[","").replace("]","").split(",").map(A=>A.trim()).forEach((A,p)=>{c[A]=i[p]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(i)&&typeof i=="object"?e.item.replace("{","").replace("}","").split(",").map(A=>A.trim()).forEach(A=>{c[A]=i[A]}):c[e.item]=i,e.index&&(c[e.index]=r),e.collection&&(c[e.collection]=u),c}function Iy(e){return!Array.isArray(e)&&!isNaN(e)}function hp(){}hp.inline=(e,{expression:i},{cleanup:r})=>{let u=lu(e);u._x_refs||(u._x_refs={}),u._x_refs[i]=e,r(()=>delete u._x_refs[i])};oe("ref",hp);oe("if",(e,{expression:i},{effect:r,cleanup:u})=>{let c=Ie(e,i),g=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let p=e.content.cloneNode(!0).firstElementChild;return rs(p,{},e),pe(()=>{e.after(p),Vr(p)}),e._x_currentIfEl=p,e._x_undoIf=()=>{br(p,R=>{R._x_effects&&R._x_effects.forEach(td)}),p.remove(),delete e._x_currentIfEl},p},A=()=>{!e._x_undoIf||(e._x_undoIf(),delete e._x_undoIf)};r(()=>c(p=>{p?g():A()})),u(()=>e._x_undoIf&&e._x_undoIf())});oe("id",(e,{expression:i},{evaluate:r})=>{r(i).forEach(c=>wy(e,c))});af(wd("@",vd(Ji("on:"))));oe("on",os((e,{value:i,modifiers:r,expression:u},{cleanup:c})=>{let g=u?Ie(e,u):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(i)||e._x_forwardEvents.push(i));let A=Kl(e,i,r,p=>{g(()=>{},{scope:{$event:p},params:[p]})});c(()=>A())}));yu("Collapse","collapse","collapse");yu("Intersect","intersect","intersect");yu("Focus","trap","focus");yu("Mask","mask","mask");function yu(e,i,r){oe(i,u=>Ki(`You can't use [x-${i}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,u))}ss.setEvaluator(dd);ss.setReactivityEngine({reactive:vf,effect:GA,release:YA,raw:qt});var Py=ss,Af=Py;class Oy{constructor(i,r){this.width=Math.floor(i/2),this.height=Math.floor(r/2),this.cols=2*this.width+1,this.rows=2*this.height+1,this.maze=this.initArray([]),this.maze.forEach((u,c)=>{if(u.forEach((g,A)=>{switch(c){case 0:case this.rows-1:this.maze[c][A]=["wall"];break;default:c%2==1?(A==0||A==this.cols-1)&&(this.maze[c][A]=["wall"]):A%2==0&&(this.maze[c][A]=["wall"])}}),c==0){let g=this.posToSpace(this.rand(1,this.width));this.maze[c][g]=["door","exit"]}if(c==this.rows-1){let g=this.posToSpace(this.rand(1,this.width));this.maze[c][g]=["door","entrance"]}}),this.partition(1,this.height-1,1,this.width-1)}initArray(i){return new Array(this.rows).fill().map(()=>new Array(this.cols).fill(i))}rand(i,r){return i+Math.floor(Math.random()*(1+r-i))}posToSpace(i){return 2*(i-1)+1}posToWall(i){return 2*i}inBounds(i,r){return!(typeof this.maze[i]=="undefined"||typeof this.maze[i][r]=="undefined")}shuffle(i){for(let r=i.length-1;r>0;r--){const u=Math.floor(Math.random()*(r+1));[i[r],i[u]]=[i[u],i[r]]}return i}partition(i,r,u,c){let g,A,p,R,I,F;if(r<i||c<u)return!1;i==r?g=i:(p=i+1,R=r-1,I=Math.round(p+(R-p)/4),F=Math.round(p+3*(R-p)/4),g=this.rand(I,F)),u==c?A=u:(p=u+1,R=c-1,I=Math.round(p+(R-p)/3),F=Math.round(p+2*(R-p)/3),A=this.rand(I,F));for(let J=this.posToWall(i)-1;J<=this.posToWall(r)+1;J++)for(let H=this.posToWall(u)-1;H<=this.posToWall(c)+1;H++)(J==this.posToWall(g)||H==this.posToWall(A))&&(this.maze[J][H]=["wall"]);let W=this.shuffle([!0,!0,!0,!1]);if(W[0]){let J=this.rand(u,A);this.maze[this.posToWall(g)][this.posToSpace(J)]=[]}if(W[1]){let J=this.rand(A+1,c+1);this.maze[this.posToWall(g)][this.posToSpace(J)]=[]}if(W[2]){let J=this.rand(i,g);this.maze[this.posToSpace(J)][this.posToWall(A)]=[]}if(W[3]){let J=this.rand(g+1,r+1);this.maze[this.posToSpace(J)][this.posToWall(A)]=[]}this.partition(i,g-1,u,A-1),this.partition(g+1,r,u,A-1),this.partition(i,g-1,A+1,c),this.partition(g+1,r,A+1,c)}isGap(...i){return i.every(r=>{let u,c;return[u,c]=r,!(this.maze[u][c].length>0&&!this.maze[u][c].includes("door"))})}countSteps(i,r,u,c,g){if(!this.inBounds(r,u)||i[r][u]<=c||!this.isGap([r,u]))return!1;if(i[r][u]=c,this.maze[r][u].includes(g))return!0;this.countSteps(i,r-1,u,c+1,g),this.countSteps(i,r,u+1,c+1,g),this.countSteps(i,r+1,u,c+1,g),this.countSteps(i,r,u-1,c+1,g)}getKeyLocation(){let i=this.initArray(),r=this.initArray();this.totalSteps=-1;for(let g=1;g<this.cols-1;g++)this.maze[this.rows-1][g].includes("entrance")&&this.countSteps(i,this.rows-1,g,0,"exit"),this.maze[0][g].includes("exit")&&this.countSteps(r,0,g,0,"entrance");let u=-1,c=-1;return this.maze.forEach((g,A)=>{g.forEach((p,R)=>{if(typeof i[A][R]=="undefined")return;let I=i[A][R]+r[A][R];I>this.totalSteps&&(c=A,u=R,this.totalSteps=I)})}),[c,u]}placeKey(){let i,r;[i,r]=this.getKeyLocation(),this.maze[i][r]=["key"]}display(i){if(this.parentDiv=document.getElementById(i),!this.parentDiv)return alert('Cannot initialise maze - no element found with id "'+i+'"'),!1;for(;this.parentDiv.firstChild;)this.parentDiv.removeChild(this.parentDiv.firstChild);const r=document.createElement("div");return r.id="maze",r.dataset.steps=this.totalSteps,this.maze.forEach(u=>{let c=document.createElement("div");u.forEach(g=>{let A=document.createElement("div");g&&(A.className=g.join(" ")),c.appendChild(A)}),r.appendChild(c)}),this.parentDiv.appendChild(r),!0}}const Ni="VERTICAL",dp="HORIZONTAL",ja=(e,i)=>Math.floor(Math.random()*(i-e+1)+e);function By(e=[Ni,dp]){if(e.length===0)return"";const i=e.length-1;return e[ja(0,i)]}function Fy(e){const i=e.length-1,r=e[0].length-1;return e.map((u,c)=>u.map((g,A)=>c===0||c===i||A===0||A===r?1:g))}const Ly=e=>(console.log("logging settings",e),e?{width:e.width||50,height:e.height||50,minRoomSize:e.minRoomSize||5,maxRoomSize:e.maxRoomSize||20}:{width:50,height:50,minRoomSize:5,maxRoomSize:20}),Dy=e=>{const r=Object.create({init(p,R,I,F){this.minRoomSize=I,this.maxRoomSize=F,this.counter=1,this.tree={level:Array.apply(null,{length:R}).map(()=>Array.apply(null,{length:p}))},this.split(this.tree),this.connectRooms(this.tree)},split(p){if(p.level.length>this.maxRoomSize||p.level[0].length>this.maxRoomSize){const R=By(this.getSplitOptions(p.level.length,p.level[0].length)),I=this.getIndexToSplit(R,p.level[0].length,p.level.length);let F=p.leftNode={},W=p.rightNode={};p.splitDirection=R,p.splitIndex=I,R===Ni?(F.level=p.level.map(J=>J.slice(0,I)),W.level=p.level.map(J=>J.slice(I,J.length))):(F.level=p.level.slice(0,I),W.level=p.level.slice(I,p.level.length)),this.split(F),this.split(W)}else this.counter+=1,p.level=p.level.map(R=>R.map(()=>this.counter)),p.level=Fy(p.level)},getSplitOptions(p,R){const I=[];return p>this.maxRoomSize&&I.push(dp),R>this.maxRoomSize&&I.push(Ni),I},getIndexToSplit(p,R,I){const F=this.minRoomSize,W=p===Ni?R-F:I-F;return ja(F,W)},connectRooms(p){if(p.leftNode)this.connectRooms(p.leftNode);else return;if(p.rightNode)this.connectRooms(p.rightNode);else return;const R=p.leftNode.level,I=p.rightNode.level;if(p.splitDirection===Ni){const F=ja(1,R.length-2);p.corridorIndex=F,R[F][R[0].length-1]=0,R[F][R[0].length-2]=0,I[F][0]=0,I[F][1]=0}else{const F=ja(1,R[0].length-2);p.corridorIndex=F,R[R.length-1][F]=0,R[R.length-2][F]=0,I[0][F]=0,I[1][F]=0}p.level=[],p.splitDirection===Ni?p.level=R.reduce((F,W,J)=>{const H=[];return H.push(...R[J]),H.push(...I[J]),F.push(H),F},[]):(p.level.push(...R),p.level.push(...I))}}),{width:u,height:c,minRoomSize:g,maxRoomSize:A}=Ly(e);return r.init(u,c,g,A),r.tree.level};var Yo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Hl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,i){(function(){var r,u="4.17.21",c=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",A="Expected a function",p="Invalid `variable` option passed into `_.template`",R="__lodash_hash_undefined__",I=500,F="__lodash_placeholder__",W=1,J=2,H=4,M=1,Qt=2,Q=1,ht=2,Mt=4,St=8,Wt=16,kt=32,Zt=64,Se=128,tr=256,ai=512,Qi=30,Zi="...",Xi=800,er=16,ji=1,as=2,us=3,mn=1/0,rn=9007199254740991,ls=17976931348623157e292,nr=0/0,Pe=4294967295,$i=Pe-1,to=Pe>>>1,eo=[["ary",Se],["bind",Q],["bindKey",ht],["curry",St],["curryRight",Wt],["flip",ai],["partial",kt],["partialRight",Zt],["rearg",tr]],wn="[object Arguments]",Tr="[object Array]",fs="[object AsyncFunction]",On="[object Boolean]",rr="[object Date]",no="[object DOMException]",ir="[object Error]",Bn="[object Function]",ro="[object GeneratorFunction]",Ae="[object Map]",ye="[object Number]",cs="[object Null]",He="[object Object]",io="[object Promise]",hs="[object Proxy]",or="[object RegExp]",bt="[object Set]",ze="[object String]",Ge="[object Symbol]",be="[object Undefined]",te="[object WeakMap]",Fn="[object WeakSet]",on="[object ArrayBuffer]",Ln="[object DataView]",vn="[object Float32Array]",ce="[object Float64Array]",An="[object Int8Array]",Mr="[object Int16Array]",Cr="[object Int32Array]",Ye="[object Uint8Array]",Ir="[object Uint8ClampedArray]",Je="[object Uint16Array]",Pr="[object Uint32Array]",ds=/\b__p \+= '';/g,ps=/\b(__p \+=) '' \+/g,oo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oe=/&(?:amp|lt|gt|quot|#39);/g,ui=/[&<>"']/g,gs=RegExp(Oe.source),ms=RegExp(ui.source),so=/<%-([\s\S]+?)%>/g,yn=/<%([\s\S]+?)%>/g,sr=/<%=([\s\S]+?)%>/g,xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ao=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zt=/[\\^$.*+?()[\]{}|]/g,ge=RegExp(zt.source),Dn=/^\s+/,_n=/\s/,ar=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ws=/\{\n\/\* \[wrapped with (.+)\] \*/,li=/,? & /,Nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uo=/[()=,{}\[\]\/\s]/,Or=/\\(\\)?/g,vs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Br=/\w*$/,As=/^[-+]0x[0-9a-f]+$/i,ys=/^0b[01]+$/i,xs=/^\[object .+?Constructor\]$/,_s=/^0o[0-7]+$/i,Es=/^(?:0|[1-9]\d*)$/,Ss=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fr=/($^)/,bs=/['\n\r\u2028\u2029\\]/g,Lr="\\ud800-\\udfff",Vs="\\u0300-\\u036f",Rs="\\ufe20-\\ufe2f",Ts="\\u20d0-\\u20ff",Dr=Vs+Rs+Ts,lo="\\u2700-\\u27bf",fi="a-z\\xdf-\\xf6\\xf8-\\xff",Ms="\\xac\\xb1\\xd7\\xf7",Cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Is="\\u2000-\\u206f",Ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ci="A-Z\\xc0-\\xd6\\xd8-\\xde",hi="\\ufe0e\\ufe0f",Dt=Ms+Cs+Is+Ps,me="['\u2019]",Os="["+Lr+"]",fo="["+Dt+"]",Nr="["+Dr+"]",co="\\d+",di="["+lo+"]",pi="["+fi+"]",ur="[^"+Lr+Dt+co+lo+fi+ci+"]",Ur="\\ud83c[\\udffb-\\udfff]",sn="(?:"+Nr+"|"+Ur+")",gi="[^"+Lr+"]",ho="(?:\\ud83c[\\udde6-\\uddff]){2}",lr="[\\ud800-\\udbff][\\udc00-\\udfff]",En="["+ci+"]",po="\\u200d",go="(?:"+pi+"|"+ur+")",Bs="(?:"+En+"|"+ur+")",fr="(?:"+me+"(?:d|ll|m|re|s|t|ve))?",mo="(?:"+me+"(?:D|LL|M|RE|S|T|VE))?",wo=sn+"?",vo="["+hi+"]?",Fs="(?:"+po+"(?:"+[gi,ho,lr].join("|")+")"+vo+wo+")*",zr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ls="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ds=vo+wo+Fs,Sn="(?:"+[di,ho,lr].join("|")+")"+Ds,xu="(?:"+[gi+Nr+"?",Nr,ho,lr,Os].join("|")+")",_u=RegExp(me,"g"),Ns=RegExp(Nr,"g"),kr=RegExp(Ur+"(?="+Ur+")|"+xu+Ds,"g"),Us=RegExp([En+"?"+pi+"+"+fr+"(?="+[fo,En,"$"].join("|")+")",Bs+"+"+mo+"(?="+[fo,En+go,"$"].join("|")+")",En+"?"+go+"+"+fr,En+"+"+mo,Ls,zr,co,Sn].join("|"),"g"),zs=RegExp("["+po+Lr+Dr+hi+"]"),ks=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ws=-1,Ft={};Ft[vn]=Ft[ce]=Ft[An]=Ft[Mr]=Ft[Cr]=Ft[Ye]=Ft[Ir]=Ft[Je]=Ft[Pr]=!0,Ft[wn]=Ft[Tr]=Ft[on]=Ft[On]=Ft[Ln]=Ft[rr]=Ft[ir]=Ft[Bn]=Ft[Ae]=Ft[ye]=Ft[He]=Ft[or]=Ft[bt]=Ft[ze]=Ft[te]=!1;var Pt={};Pt[wn]=Pt[Tr]=Pt[on]=Pt[Ln]=Pt[On]=Pt[rr]=Pt[vn]=Pt[ce]=Pt[An]=Pt[Mr]=Pt[Cr]=Pt[Ae]=Pt[ye]=Pt[He]=Pt[or]=Pt[bt]=Pt[ze]=Pt[Ge]=Pt[Ye]=Pt[Ir]=Pt[Je]=Pt[Pr]=!0,Pt[ir]=Pt[Bn]=Pt[te]=!1;var Ks={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Hs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ys={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Js=parseFloat,Qs=parseInt,Ao=typeof Yo=="object"&&Yo&&Yo.Object===Object&&Yo,yo=typeof self=="object"&&self&&self.Object===Object&&self,Xt=Ao||yo||Function("return this")(),mi=i&&!i.nodeType&&i,bn=mi&&!0&&e&&!e.nodeType&&e,xo=bn&&bn.exports===mi,wi=xo&&Ao.process,Ve=function(){try{var T=bn&&bn.require&&bn.require("util").types;return T||wi&&wi.binding&&wi.binding("util")}catch{}}(),cr=Ve&&Ve.isArrayBuffer,hr=Ve&&Ve.isDate,_o=Ve&&Ve.isMap,Eo=Ve&&Ve.isRegExp,Un=Ve&&Ve.isSet,So=Ve&&Ve.isTypedArray;function he(T,L,B){switch(B.length){case 0:return T.call(L);case 1:return T.call(L,B[0]);case 2:return T.call(L,B[0],B[1]);case 3:return T.call(L,B[0],B[1],B[2])}return T.apply(L,B)}function Zs(T,L,B,$){for(var ft=-1,Vt=T==null?0:T.length;++ft<Vt;){var Kt=T[ft];L($,Kt,B(Kt),T)}return $}function Re(T,L){for(var B=-1,$=T==null?0:T.length;++B<$&&L(T[B],B,T)!==!1;);return T}function Xs(T,L){for(var B=T==null?0:T.length;B--&&L(T[B],B,T)!==!1;);return T}function js(T,L){for(var B=-1,$=T==null?0:T.length;++B<$;)if(!L(T[B],B,T))return!1;return!0}function an(T,L){for(var B=-1,$=T==null?0:T.length,ft=0,Vt=[];++B<$;){var Kt=T[B];L(Kt,B,T)&&(Vt[ft++]=Kt)}return Vt}function qr(T,L){var B=T==null?0:T.length;return!!B&&zn(T,L,0)>-1}function un(T,L,B){for(var $=-1,ft=T==null?0:T.length;++$<ft;)if(B(L,T[$]))return!0;return!1}function Ot(T,L){for(var B=-1,$=T==null?0:T.length,ft=Array($);++B<$;)ft[B]=L(T[B],B,T);return ft}function ln(T,L){for(var B=-1,$=L.length,ft=T.length;++B<$;)T[ft+B]=L[B];return T}function vi(T,L,B,$){var ft=-1,Vt=T==null?0:T.length;for($&&Vt&&(B=T[++ft]);++ft<Vt;)B=L(B,T[ft],ft,T);return B}function $s(T,L,B,$){var ft=T==null?0:T.length;for($&&ft&&(B=T[--ft]);ft--;)B=L(B,T[ft],ft,T);return B}function Ai(T,L){for(var B=-1,$=T==null?0:T.length;++B<$;)if(L(T[B],B,T))return!0;return!1}var ta=xi("length");function bo(T){return T.split("")}function Eu(T){return T.match(Nn)||[]}function ea(T,L,B){var $;return B(T,function(ft,Vt,Kt){if(L(ft,Vt,Kt))return $=Vt,!1}),$}function Wr(T,L,B,$){for(var ft=T.length,Vt=B+($?1:-1);$?Vt--:++Vt<ft;)if(L(T[Vt],Vt,T))return Vt;return-1}function zn(T,L,B){return L===L?ha(T,L,B):Wr(T,Vo,B)}function na(T,L,B,$){for(var ft=B-1,Vt=T.length;++ft<Vt;)if($(T[ft],L))return ft;return-1}function Vo(T){return T!==T}function yi(T,L){var B=T==null?0:T.length;return B?Kr(T,L)/B:nr}function xi(T){return function(L){return L==null?r:L[T]}}function _i(T){return function(L){return T==null?r:T[L]}}function Ro(T,L,B,$,ft){return ft(T,function(Vt,Kt,Ct){B=$?($=!1,Vt):L(B,Vt,Kt,Ct)}),B}function ra(T,L){var B=T.length;for(T.sort(L);B--;)T[B]=T[B].value;return T}function Kr(T,L){for(var B,$=-1,ft=T.length;++$<ft;){var Vt=L(T[$]);Vt!==r&&(B=B===r?Vt:B+Vt)}return B}function Ei(T,L){for(var B=-1,$=Array(T);++B<T;)$[B]=L(B);return $}function ia(T,L){return Ot(L,function(B){return[B,T[B]]})}function To(T){return T&&T.slice(0,Mo(T)+1).replace(Dn,"")}function we(T){return function(L){return T(L)}}function Hr(T,L){return Ot(L,function(B){return T[B]})}function fn(T,L){return T.has(L)}function oa(T,L){for(var B=-1,$=T.length;++B<$&&zn(L,T[B],0)>-1;);return B}function Si(T,L){for(var B=T.length;B--&&zn(L,T[B],0)>-1;);return B}function sa(T,L){for(var B=T.length,$=0;B--;)T[B]===L&&++$;return $}var aa=_i(Ks),ua=_i(Hs);function la(T){return"\\"+Ys[T]}function fa(T,L){return T==null?r:T[L]}function Qe(T){return zs.test(T)}function Su(T){return ks.test(T)}function bu(T){for(var L,B=[];!(L=T.next()).done;)B.push(L.value);return B}function bi(T){var L=-1,B=Array(T.size);return T.forEach(function($,ft){B[++L]=[ft,$]}),B}function Vi(T,L){return function(B){return T(L(B))}}function Vn(T,L){for(var B=-1,$=T.length,ft=0,Vt=[];++B<$;){var Kt=T[B];(Kt===L||Kt===F)&&(T[B]=F,Vt[ft++]=B)}return Vt}function Ri(T){var L=-1,B=Array(T.size);return T.forEach(function($){B[++L]=$}),B}function ca(T){var L=-1,B=Array(T.size);return T.forEach(function($){B[++L]=[$,$]}),B}function ha(T,L,B){for(var $=B-1,ft=T.length;++$<ft;)if(T[$]===L)return $;return-1}function da(T,L,B){for(var $=B+1;$--;)if(T[$]===L)return $;return $}function Rn(T){return Qe(T)?ga(T):ta(T)}function xe(T){return Qe(T)?Co(T):bo(T)}function Mo(T){for(var L=T.length;L--&&_n.test(T.charAt(L)););return L}var pa=_i(Gs);function ga(T){for(var L=kr.lastIndex=0;kr.test(T);)++L;return L}function Co(T){return T.match(kr)||[]}function ma(T){return T.match(Us)||[]}var wa=function T(L){L=L==null?Xt:kn.defaults(Xt.Object(),L,kn.pick(Xt,qs));var B=L.Array,$=L.Date,ft=L.Error,Vt=L.Function,Kt=L.Math,Ct=L.Object,dr=L.RegExp,Ti=L.String,se=L.TypeError,o=B.prototype,a=Vt.prototype,f=Ct.prototype,m=L["__core-js_shared__"],x=a.toString,d=f.hasOwnProperty,S=0,P=function(){var t=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_=f.toString,b=x.call(Ct),O=Xt._,k=dr("^"+x.call(d).replace(zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=xo?L.Buffer:r,nt=L.Symbol,gt=L.Uint8Array,Tt=tt?tt.allocUnsafe:r,Rt=Vi(Ct.getPrototypeOf,Ct),ne=Ct.create,Lt=f.propertyIsEnumerable,Gt=o.splice,it=nt?nt.isConcatSpreadable:r,xt=nt?nt.iterator:r,re=nt?nt.toStringTag:r,q=function(){try{var t=Zr(Ct,"defineProperty");return t({},"",{}),t}catch{}}(),ot=L.clearTimeout!==Xt.clearTimeout&&L.clearTimeout,j=$&&$.now!==Xt.Date.now&&$.now,st=L.setTimeout!==Xt.setTimeout&&L.setTimeout,et=Kt.ceil,pt=Kt.floor,ct=Ct.getOwnPropertySymbols,Nt=tt?tt.isBuffer:r,Be=L.isFinite,_e=o.join,pr=Vi(Ct.keys,Ct),Yt=Kt.max,Ut=Kt.min,Io=$.now,qn=L.parseInt,Mi=Kt.random,pp=o.reverse,Vu=Zr(L,"DataView"),Po=Zr(L,"Map"),Ru=Zr(L,"Promise"),Ci=Zr(L,"Set"),Oo=Zr(L,"WeakMap"),Bo=Zr(Ct,"create"),va=Oo&&new Oo,Ii={},gp=Xr(Vu),mp=Xr(Po),wp=Xr(Ru),vp=Xr(Ci),Ap=Xr(Oo),Aa=nt?nt.prototype:r,Fo=Aa?Aa.valueOf:r,yf=Aa?Aa.toString:r;function w(t){if(Jt(t)&&!dt(t)&&!(t instanceof yt)){if(t instanceof Ze)return t;if(d.call(t,"__wrapped__"))return xc(t)}return new Ze(t)}var Pi=function(){function t(){}return function(n){if(!Ht(n))return{};if(ne)return ne(n);t.prototype=n;var s=new t;return t.prototype=r,s}}();function ya(){}function Ze(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}w.templateSettings={escape:so,evaluate:yn,interpolate:sr,variable:"",imports:{_:w}},w.prototype=ya.prototype,w.prototype.constructor=w,Ze.prototype=Pi(ya.prototype),Ze.prototype.constructor=Ze;function yt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pe,this.__views__=[]}function yp(){var t=new yt(this.__wrapped__);return t.__actions__=Fe(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Fe(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Fe(this.__views__),t}function xp(){if(this.__filtered__){var t=new yt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function _p(){var t=this.__wrapped__.value(),n=this.__dir__,s=dt(t),l=n<0,h=s?t.length:0,v=Bg(0,h,this.__views__),E=v.start,V=v.end,C=V-E,N=l?V:E-1,U=this.__iteratees__,K=U.length,Z=0,rt=Ut(C,this.__takeCount__);if(!s||!l&&h==C&&rt==C)return Kf(t,this.__actions__);var ut=[];t:for(;C--&&Z<rt;){N+=n;for(var wt=-1,lt=t[N];++wt<K;){var At=U[wt],_t=At.iteratee,We=At.type,Ce=_t(lt);if(We==as)lt=Ce;else if(!Ce){if(We==ji)continue t;break t}}ut[Z++]=lt}return ut}yt.prototype=Pi(ya.prototype),yt.prototype.constructor=yt;function Gr(t){var n=-1,s=t==null?0:t.length;for(this.clear();++n<s;){var l=t[n];this.set(l[0],l[1])}}function Ep(){this.__data__=Bo?Bo(null):{},this.size=0}function Sp(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function bp(t){var n=this.__data__;if(Bo){var s=n[t];return s===R?r:s}return d.call(n,t)?n[t]:r}function Vp(t){var n=this.__data__;return Bo?n[t]!==r:d.call(n,t)}function Rp(t,n){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=Bo&&n===r?R:n,this}Gr.prototype.clear=Ep,Gr.prototype.delete=Sp,Gr.prototype.get=bp,Gr.prototype.has=Vp,Gr.prototype.set=Rp;function Wn(t){var n=-1,s=t==null?0:t.length;for(this.clear();++n<s;){var l=t[n];this.set(l[0],l[1])}}function Tp(){this.__data__=[],this.size=0}function Mp(t){var n=this.__data__,s=xa(n,t);if(s<0)return!1;var l=n.length-1;return s==l?n.pop():Gt.call(n,s,1),--this.size,!0}function Cp(t){var n=this.__data__,s=xa(n,t);return s<0?r:n[s][1]}function Ip(t){return xa(this.__data__,t)>-1}function Pp(t,n){var s=this.__data__,l=xa(s,t);return l<0?(++this.size,s.push([t,n])):s[l][1]=n,this}Wn.prototype.clear=Tp,Wn.prototype.delete=Mp,Wn.prototype.get=Cp,Wn.prototype.has=Ip,Wn.prototype.set=Pp;function Kn(t){var n=-1,s=t==null?0:t.length;for(this.clear();++n<s;){var l=t[n];this.set(l[0],l[1])}}function Op(){this.size=0,this.__data__={hash:new Gr,map:new(Po||Wn),string:new Gr}}function Bp(t){var n=Oa(this,t).delete(t);return this.size-=n?1:0,n}function Fp(t){return Oa(this,t).get(t)}function Lp(t){return Oa(this,t).has(t)}function Dp(t,n){var s=Oa(this,t),l=s.size;return s.set(t,n),this.size+=s.size==l?0:1,this}Kn.prototype.clear=Op,Kn.prototype.delete=Bp,Kn.prototype.get=Fp,Kn.prototype.has=Lp,Kn.prototype.set=Dp;function Yr(t){var n=-1,s=t==null?0:t.length;for(this.__data__=new Kn;++n<s;)this.add(t[n])}function Np(t){return this.__data__.set(t,R),this}function Up(t){return this.__data__.has(t)}Yr.prototype.add=Yr.prototype.push=Np,Yr.prototype.has=Up;function cn(t){var n=this.__data__=new Wn(t);this.size=n.size}function zp(){this.__data__=new Wn,this.size=0}function kp(t){var n=this.__data__,s=n.delete(t);return this.size=n.size,s}function qp(t){return this.__data__.get(t)}function Wp(t){return this.__data__.has(t)}function Kp(t,n){var s=this.__data__;if(s instanceof Wn){var l=s.__data__;if(!Po||l.length<c-1)return l.push([t,n]),this.size=++s.size,this;s=this.__data__=new Kn(l)}return s.set(t,n),this.size=s.size,this}cn.prototype.clear=zp,cn.prototype.delete=kp,cn.prototype.get=qp,cn.prototype.has=Wp,cn.prototype.set=Kp;function xf(t,n){var s=dt(t),l=!s&&jr(t),h=!s&&!l&&Ar(t),v=!s&&!l&&!h&&Li(t),E=s||l||h||v,V=E?Ei(t.length,Ti):[],C=V.length;for(var N in t)(n||d.call(t,N))&&!(E&&(N=="length"||h&&(N=="offset"||N=="parent")||v&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||Jn(N,C)))&&V.push(N);return V}function _f(t){var n=t.length;return n?t[Nu(0,n-1)]:r}function Hp(t,n){return Ba(Fe(t),Jr(n,0,t.length))}function Gp(t){return Ba(Fe(t))}function Tu(t,n,s){(s!==r&&!hn(t[n],s)||s===r&&!(n in t))&&Hn(t,n,s)}function Lo(t,n,s){var l=t[n];(!(d.call(t,n)&&hn(l,s))||s===r&&!(n in t))&&Hn(t,n,s)}function xa(t,n){for(var s=t.length;s--;)if(hn(t[s][0],n))return s;return-1}function Yp(t,n,s,l){return gr(t,function(h,v,E){n(l,h,s(h),E)}),l}function Ef(t,n){return t&&Mn(n,de(n),t)}function Jp(t,n){return t&&Mn(n,De(n),t)}function Hn(t,n,s){n=="__proto__"&&q?q(t,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[n]=s}function Mu(t,n){for(var s=-1,l=n.length,h=B(l),v=t==null;++s<l;)h[s]=v?r:ll(t,n[s]);return h}function Jr(t,n,s){return t===t&&(s!==r&&(t=t<=s?t:s),n!==r&&(t=t>=n?t:n)),t}function Xe(t,n,s,l,h,v){var E,V=n&W,C=n&J,N=n&H;if(s&&(E=h?s(t,l,h,v):s(t)),E!==r)return E;if(!Ht(t))return t;var U=dt(t);if(U){if(E=Lg(t),!V)return Fe(t,E)}else{var K=Ee(t),Z=K==Bn||K==ro;if(Ar(t))return Yf(t,V);if(K==He||K==wn||Z&&!h){if(E=C||Z?{}:hc(t),!V)return C?bg(t,Jp(E,t)):Sg(t,Ef(E,t))}else{if(!Pt[K])return h?t:{};E=Dg(t,K,V)}}v||(v=new cn);var rt=v.get(t);if(rt)return rt;v.set(t,E),kc(t)?t.forEach(function(lt){E.add(Xe(lt,n,s,lt,t,v))}):Uc(t)&&t.forEach(function(lt,At){E.set(At,Xe(lt,n,s,At,t,v))});var ut=N?C?Qu:Ju:C?De:de,wt=U?r:ut(t);return Re(wt||t,function(lt,At){wt&&(At=lt,lt=t[At]),Lo(E,At,Xe(lt,n,s,At,t,v))}),E}function Qp(t){var n=de(t);return function(s){return Sf(s,t,n)}}function Sf(t,n,s){var l=s.length;if(t==null)return!l;for(t=Ct(t);l--;){var h=s[l],v=n[h],E=t[h];if(E===r&&!(h in t)||!v(E))return!1}return!0}function bf(t,n,s){if(typeof t!="function")throw new se(A);return Wo(function(){t.apply(r,s)},n)}function Do(t,n,s,l){var h=-1,v=qr,E=!0,V=t.length,C=[],N=n.length;if(!V)return C;s&&(n=Ot(n,we(s))),l?(v=un,E=!1):n.length>=c&&(v=fn,E=!1,n=new Yr(n));t:for(;++h<V;){var U=t[h],K=s==null?U:s(U);if(U=l||U!==0?U:0,E&&K===K){for(var Z=N;Z--;)if(n[Z]===K)continue t;C.push(U)}else v(n,K,l)||C.push(U)}return C}var gr=jf(Tn),Vf=jf(Iu,!0);function Zp(t,n){var s=!0;return gr(t,function(l,h,v){return s=!!n(l,h,v),s}),s}function _a(t,n,s){for(var l=-1,h=t.length;++l<h;){var v=t[l],E=n(v);if(E!=null&&(V===r?E===E&&!qe(E):s(E,V)))var V=E,C=v}return C}function Xp(t,n,s,l){var h=t.length;for(s=mt(s),s<0&&(s=-s>h?0:h+s),l=l===r||l>h?h:mt(l),l<0&&(l+=h),l=s>l?0:Wc(l);s<l;)t[s++]=n;return t}function Rf(t,n){var s=[];return gr(t,function(l,h,v){n(l,h,v)&&s.push(l)}),s}function ve(t,n,s,l,h){var v=-1,E=t.length;for(s||(s=Ug),h||(h=[]);++v<E;){var V=t[v];n>0&&s(V)?n>1?ve(V,n-1,s,l,h):ln(h,V):l||(h[h.length]=V)}return h}var Cu=$f(),Tf=$f(!0);function Tn(t,n){return t&&Cu(t,n,de)}function Iu(t,n){return t&&Tf(t,n,de)}function Ea(t,n){return an(n,function(s){return Qn(t[s])})}function Qr(t,n){n=wr(n,t);for(var s=0,l=n.length;t!=null&&s<l;)t=t[Cn(n[s++])];return s&&s==l?t:r}function Mf(t,n,s){var l=n(t);return dt(t)?l:ln(l,s(t))}function Te(t){return t==null?t===r?be:cs:re&&re in Ct(t)?Og(t):Gg(t)}function Pu(t,n){return t>n}function jp(t,n){return t!=null&&d.call(t,n)}function $p(t,n){return t!=null&&n in Ct(t)}function tg(t,n,s){return t>=Ut(n,s)&&t<Yt(n,s)}function Ou(t,n,s){for(var l=s?un:qr,h=t[0].length,v=t.length,E=v,V=B(v),C=1/0,N=[];E--;){var U=t[E];E&&n&&(U=Ot(U,we(n))),C=Ut(U.length,C),V[E]=!s&&(n||h>=120&&U.length>=120)?new Yr(E&&U):r}U=t[0];var K=-1,Z=V[0];t:for(;++K<h&&N.length<C;){var rt=U[K],ut=n?n(rt):rt;if(rt=s||rt!==0?rt:0,!(Z?fn(Z,ut):l(N,ut,s))){for(E=v;--E;){var wt=V[E];if(!(wt?fn(wt,ut):l(t[E],ut,s)))continue t}Z&&Z.push(ut),N.push(rt)}}return N}function eg(t,n,s,l){return Tn(t,function(h,v,E){n(l,s(h),v,E)}),l}function No(t,n,s){n=wr(n,t),t=mc(t,n);var l=t==null?t:t[Cn($e(n))];return l==null?r:he(l,t,s)}function Cf(t){return Jt(t)&&Te(t)==wn}function ng(t){return Jt(t)&&Te(t)==on}function rg(t){return Jt(t)&&Te(t)==rr}function Uo(t,n,s,l,h){return t===n?!0:t==null||n==null||!Jt(t)&&!Jt(n)?t!==t&&n!==n:ig(t,n,s,l,Uo,h)}function ig(t,n,s,l,h,v){var E=dt(t),V=dt(n),C=E?Tr:Ee(t),N=V?Tr:Ee(n);C=C==wn?He:C,N=N==wn?He:N;var U=C==He,K=N==He,Z=C==N;if(Z&&Ar(t)){if(!Ar(n))return!1;E=!0,U=!1}if(Z&&!U)return v||(v=new cn),E||Li(t)?lc(t,n,s,l,h,v):Ig(t,n,C,s,l,h,v);if(!(s&M)){var rt=U&&d.call(t,"__wrapped__"),ut=K&&d.call(n,"__wrapped__");if(rt||ut){var wt=rt?t.value():t,lt=ut?n.value():n;return v||(v=new cn),h(wt,lt,s,l,v)}}return Z?(v||(v=new cn),Pg(t,n,s,l,h,v)):!1}function og(t){return Jt(t)&&Ee(t)==Ae}function Bu(t,n,s,l){var h=s.length,v=h,E=!l;if(t==null)return!v;for(t=Ct(t);h--;){var V=s[h];if(E&&V[2]?V[1]!==t[V[0]]:!(V[0]in t))return!1}for(;++h<v;){V=s[h];var C=V[0],N=t[C],U=V[1];if(E&&V[2]){if(N===r&&!(C in t))return!1}else{var K=new cn;if(l)var Z=l(N,U,C,t,n,K);if(!(Z===r?Uo(U,N,M|Qt,l,K):Z))return!1}}return!0}function If(t){if(!Ht(t)||kg(t))return!1;var n=Qn(t)?k:xs;return n.test(Xr(t))}function sg(t){return Jt(t)&&Te(t)==or}function ag(t){return Jt(t)&&Ee(t)==bt}function ug(t){return Jt(t)&&za(t.length)&&!!Ft[Te(t)]}function Pf(t){return typeof t=="function"?t:t==null?Ne:typeof t=="object"?dt(t)?Ff(t[0],t[1]):Bf(t):th(t)}function Fu(t){if(!qo(t))return pr(t);var n=[];for(var s in Ct(t))d.call(t,s)&&s!="constructor"&&n.push(s);return n}function lg(t){if(!Ht(t))return Hg(t);var n=qo(t),s=[];for(var l in t)l=="constructor"&&(n||!d.call(t,l))||s.push(l);return s}function Lu(t,n){return t<n}function Of(t,n){var s=-1,l=Le(t)?B(t.length):[];return gr(t,function(h,v,E){l[++s]=n(h,v,E)}),l}function Bf(t){var n=Xu(t);return n.length==1&&n[0][2]?pc(n[0][0],n[0][1]):function(s){return s===t||Bu(s,t,n)}}function Ff(t,n){return $u(t)&&dc(n)?pc(Cn(t),n):function(s){var l=ll(s,t);return l===r&&l===n?fl(s,t):Uo(n,l,M|Qt)}}function Sa(t,n,s,l,h){t!==n&&Cu(n,function(v,E){if(h||(h=new cn),Ht(v))fg(t,n,E,s,Sa,l,h);else{var V=l?l(el(t,E),v,E+"",t,n,h):r;V===r&&(V=v),Tu(t,E,V)}},De)}function fg(t,n,s,l,h,v,E){var V=el(t,s),C=el(n,s),N=E.get(C);if(N){Tu(t,s,N);return}var U=v?v(V,C,s+"",t,n,E):r,K=U===r;if(K){var Z=dt(C),rt=!Z&&Ar(C),ut=!Z&&!rt&&Li(C);U=C,Z||rt||ut?dt(V)?U=V:jt(V)?U=Fe(V):rt?(K=!1,U=Yf(C,!0)):ut?(K=!1,U=Jf(C,!0)):U=[]:Ko(C)||jr(C)?(U=V,jr(V)?U=Kc(V):(!Ht(V)||Qn(V))&&(U=hc(C))):K=!1}K&&(E.set(C,U),h(U,C,l,v,E),E.delete(C)),Tu(t,s,U)}function Lf(t,n){var s=t.length;if(!!s)return n+=n<0?s:0,Jn(n,s)?t[n]:r}function Df(t,n,s){n.length?n=Ot(n,function(v){return dt(v)?function(E){return Qr(E,v.length===1?v[0]:v)}:v}):n=[Ne];var l=-1;n=Ot(n,we(at()));var h=Of(t,function(v,E,V){var C=Ot(n,function(N){return N(v)});return{criteria:C,index:++l,value:v}});return ra(h,function(v,E){return Eg(v,E,s)})}function cg(t,n){return Nf(t,n,function(s,l){return fl(t,l)})}function Nf(t,n,s){for(var l=-1,h=n.length,v={};++l<h;){var E=n[l],V=Qr(t,E);s(V,E)&&zo(v,wr(E,t),V)}return v}function hg(t){return function(n){return Qr(n,t)}}function Du(t,n,s,l){var h=l?na:zn,v=-1,E=n.length,V=t;for(t===n&&(n=Fe(n)),s&&(V=Ot(t,we(s)));++v<E;)for(var C=0,N=n[v],U=s?s(N):N;(C=h(V,U,C,l))>-1;)V!==t&&Gt.call(V,C,1),Gt.call(t,C,1);return t}function Uf(t,n){for(var s=t?n.length:0,l=s-1;s--;){var h=n[s];if(s==l||h!==v){var v=h;Jn(h)?Gt.call(t,h,1):ku(t,h)}}return t}function Nu(t,n){return t+pt(Mi()*(n-t+1))}function dg(t,n,s,l){for(var h=-1,v=Yt(et((n-t)/(s||1)),0),E=B(v);v--;)E[l?v:++h]=t,t+=s;return E}function Uu(t,n){var s="";if(!t||n<1||n>rn)return s;do n%2&&(s+=t),n=pt(n/2),n&&(t+=t);while(n);return s}function vt(t,n){return nl(gc(t,n,Ne),t+"")}function pg(t){return _f(Di(t))}function gg(t,n){var s=Di(t);return Ba(s,Jr(n,0,s.length))}function zo(t,n,s,l){if(!Ht(t))return t;n=wr(n,t);for(var h=-1,v=n.length,E=v-1,V=t;V!=null&&++h<v;){var C=Cn(n[h]),N=s;if(C==="__proto__"||C==="constructor"||C==="prototype")return t;if(h!=E){var U=V[C];N=l?l(U,C,V):r,N===r&&(N=Ht(U)?U:Jn(n[h+1])?[]:{})}Lo(V,C,N),V=V[C]}return t}var zf=va?function(t,n){return va.set(t,n),t}:Ne,mg=q?function(t,n){return q(t,"toString",{configurable:!0,enumerable:!1,value:hl(n),writable:!0})}:Ne;function wg(t){return Ba(Di(t))}function je(t,n,s){var l=-1,h=t.length;n<0&&(n=-n>h?0:h+n),s=s>h?h:s,s<0&&(s+=h),h=n>s?0:s-n>>>0,n>>>=0;for(var v=B(h);++l<h;)v[l]=t[l+n];return v}function vg(t,n){var s;return gr(t,function(l,h,v){return s=n(l,h,v),!s}),!!s}function ba(t,n,s){var l=0,h=t==null?l:t.length;if(typeof n=="number"&&n===n&&h<=to){for(;l<h;){var v=l+h>>>1,E=t[v];E!==null&&!qe(E)&&(s?E<=n:E<n)?l=v+1:h=v}return h}return zu(t,n,Ne,s)}function zu(t,n,s,l){var h=0,v=t==null?0:t.length;if(v===0)return 0;n=s(n);for(var E=n!==n,V=n===null,C=qe(n),N=n===r;h<v;){var U=pt((h+v)/2),K=s(t[U]),Z=K!==r,rt=K===null,ut=K===K,wt=qe(K);if(E)var lt=l||ut;else N?lt=ut&&(l||Z):V?lt=ut&&Z&&(l||!rt):C?lt=ut&&Z&&!rt&&(l||!wt):rt||wt?lt=!1:lt=l?K<=n:K<n;lt?h=U+1:v=U}return Ut(v,$i)}function kf(t,n){for(var s=-1,l=t.length,h=0,v=[];++s<l;){var E=t[s],V=n?n(E):E;if(!s||!hn(V,C)){var C=V;v[h++]=E===0?0:E}}return v}function qf(t){return typeof t=="number"?t:qe(t)?nr:+t}function ke(t){if(typeof t=="string")return t;if(dt(t))return Ot(t,ke)+"";if(qe(t))return yf?yf.call(t):"";var n=t+"";return n=="0"&&1/t==-mn?"-0":n}function mr(t,n,s){var l=-1,h=qr,v=t.length,E=!0,V=[],C=V;if(s)E=!1,h=un;else if(v>=c){var N=n?null:Mg(t);if(N)return Ri(N);E=!1,h=fn,C=new Yr}else C=n?[]:V;t:for(;++l<v;){var U=t[l],K=n?n(U):U;if(U=s||U!==0?U:0,E&&K===K){for(var Z=C.length;Z--;)if(C[Z]===K)continue t;n&&C.push(K),V.push(U)}else h(C,K,s)||(C!==V&&C.push(K),V.push(U))}return V}function ku(t,n){return n=wr(n,t),t=mc(t,n),t==null||delete t[Cn($e(n))]}function Wf(t,n,s,l){return zo(t,n,s(Qr(t,n)),l)}function Va(t,n,s,l){for(var h=t.length,v=l?h:-1;(l?v--:++v<h)&&n(t[v],v,t););return s?je(t,l?0:v,l?v+1:h):je(t,l?v+1:0,l?h:v)}function Kf(t,n){var s=t;return s instanceof yt&&(s=s.value()),vi(n,function(l,h){return h.func.apply(h.thisArg,ln([l],h.args))},s)}function qu(t,n,s){var l=t.length;if(l<2)return l?mr(t[0]):[];for(var h=-1,v=B(l);++h<l;)for(var E=t[h],V=-1;++V<l;)V!=h&&(v[h]=Do(v[h]||E,t[V],n,s));return mr(ve(v,1),n,s)}function Hf(t,n,s){for(var l=-1,h=t.length,v=n.length,E={};++l<h;){var V=l<v?n[l]:r;s(E,t[l],V)}return E}function Wu(t){return jt(t)?t:[]}function Ku(t){return typeof t=="function"?t:Ne}function wr(t,n){return dt(t)?t:$u(t,n)?[t]:yc(It(t))}var Ag=vt;function vr(t,n,s){var l=t.length;return s=s===r?l:s,!n&&s>=l?t:je(t,n,s)}var Gf=ot||function(t){return Xt.clearTimeout(t)};function Yf(t,n){if(n)return t.slice();var s=t.length,l=Tt?Tt(s):new t.constructor(s);return t.copy(l),l}function Hu(t){var n=new t.constructor(t.byteLength);return new gt(n).set(new gt(t)),n}function yg(t,n){var s=n?Hu(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}function xg(t){var n=new t.constructor(t.source,Br.exec(t));return n.lastIndex=t.lastIndex,n}function _g(t){return Fo?Ct(Fo.call(t)):{}}function Jf(t,n){var s=n?Hu(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}function Qf(t,n){if(t!==n){var s=t!==r,l=t===null,h=t===t,v=qe(t),E=n!==r,V=n===null,C=n===n,N=qe(n);if(!V&&!N&&!v&&t>n||v&&E&&C&&!V&&!N||l&&E&&C||!s&&C||!h)return 1;if(!l&&!v&&!N&&t<n||N&&s&&h&&!l&&!v||V&&s&&h||!E&&h||!C)return-1}return 0}function Eg(t,n,s){for(var l=-1,h=t.criteria,v=n.criteria,E=h.length,V=s.length;++l<E;){var C=Qf(h[l],v[l]);if(C){if(l>=V)return C;var N=s[l];return C*(N=="desc"?-1:1)}}return t.index-n.index}function Zf(t,n,s,l){for(var h=-1,v=t.length,E=s.length,V=-1,C=n.length,N=Yt(v-E,0),U=B(C+N),K=!l;++V<C;)U[V]=n[V];for(;++h<E;)(K||h<v)&&(U[s[h]]=t[h]);for(;N--;)U[V++]=t[h++];return U}function Xf(t,n,s,l){for(var h=-1,v=t.length,E=-1,V=s.length,C=-1,N=n.length,U=Yt(v-V,0),K=B(U+N),Z=!l;++h<U;)K[h]=t[h];for(var rt=h;++C<N;)K[rt+C]=n[C];for(;++E<V;)(Z||h<v)&&(K[rt+s[E]]=t[h++]);return K}function Fe(t,n){var s=-1,l=t.length;for(n||(n=B(l));++s<l;)n[s]=t[s];return n}function Mn(t,n,s,l){var h=!s;s||(s={});for(var v=-1,E=n.length;++v<E;){var V=n[v],C=l?l(s[V],t[V],V,s,t):r;C===r&&(C=t[V]),h?Hn(s,V,C):Lo(s,V,C)}return s}function Sg(t,n){return Mn(t,ju(t),n)}function bg(t,n){return Mn(t,fc(t),n)}function Ra(t,n){return function(s,l){var h=dt(s)?Zs:Yp,v=n?n():{};return h(s,t,at(l,2),v)}}function Oi(t){return vt(function(n,s){var l=-1,h=s.length,v=h>1?s[h-1]:r,E=h>2?s[2]:r;for(v=t.length>3&&typeof v=="function"?(h--,v):r,E&&Me(s[0],s[1],E)&&(v=h<3?r:v,h=1),n=Ct(n);++l<h;){var V=s[l];V&&t(n,V,l,v)}return n})}function jf(t,n){return function(s,l){if(s==null)return s;if(!Le(s))return t(s,l);for(var h=s.length,v=n?h:-1,E=Ct(s);(n?v--:++v<h)&&l(E[v],v,E)!==!1;);return s}}function $f(t){return function(n,s,l){for(var h=-1,v=Ct(n),E=l(n),V=E.length;V--;){var C=E[t?V:++h];if(s(v[C],C,v)===!1)break}return n}}function Vg(t,n,s){var l=n&Q,h=ko(t);function v(){var E=this&&this!==Xt&&this instanceof v?h:t;return E.apply(l?s:this,arguments)}return v}function tc(t){return function(n){n=It(n);var s=Qe(n)?xe(n):r,l=s?s[0]:n.charAt(0),h=s?vr(s,1).join(""):n.slice(1);return l[t]()+h}}function Bi(t){return function(n){return vi(jc(Xc(n).replace(_u,"")),t,"")}}function ko(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var s=Pi(t.prototype),l=t.apply(s,n);return Ht(l)?l:s}}function Rg(t,n,s){var l=ko(t);function h(){for(var v=arguments.length,E=B(v),V=v,C=Fi(h);V--;)E[V]=arguments[V];var N=v<3&&E[0]!==C&&E[v-1]!==C?[]:Vn(E,C);if(v-=N.length,v<s)return oc(t,n,Ta,h.placeholder,r,E,N,r,r,s-v);var U=this&&this!==Xt&&this instanceof h?l:t;return he(U,this,E)}return h}function ec(t){return function(n,s,l){var h=Ct(n);if(!Le(n)){var v=at(s,3);n=de(n),s=function(V){return v(h[V],V,h)}}var E=t(n,s,l);return E>-1?h[v?n[E]:E]:r}}function nc(t){return Yn(function(n){var s=n.length,l=s,h=Ze.prototype.thru;for(t&&n.reverse();l--;){var v=n[l];if(typeof v!="function")throw new se(A);if(h&&!E&&Pa(v)=="wrapper")var E=new Ze([],!0)}for(l=E?l:s;++l<s;){v=n[l];var V=Pa(v),C=V=="wrapper"?Zu(v):r;C&&tl(C[0])&&C[1]==(Se|St|kt|tr)&&!C[4].length&&C[9]==1?E=E[Pa(C[0])].apply(E,C[3]):E=v.length==1&&tl(v)?E[V]():E.thru(v)}return function(){var N=arguments,U=N[0];if(E&&N.length==1&&dt(U))return E.plant(U).value();for(var K=0,Z=s?n[K].apply(this,N):U;++K<s;)Z=n[K].call(this,Z);return Z}})}function Ta(t,n,s,l,h,v,E,V,C,N){var U=n&Se,K=n&Q,Z=n&ht,rt=n&(St|Wt),ut=n&ai,wt=Z?r:ko(t);function lt(){for(var At=arguments.length,_t=B(At),We=At;We--;)_t[We]=arguments[We];if(rt)var Ce=Fi(lt),Ke=sa(_t,Ce);if(l&&(_t=Zf(_t,l,h,rt)),v&&(_t=Xf(_t,v,E,rt)),At-=Ke,rt&&At<N){var $t=Vn(_t,Ce);return oc(t,n,Ta,lt.placeholder,s,_t,$t,V,C,N-At)}var dn=K?s:this,Xn=Z?dn[t]:t;return At=_t.length,V?_t=Yg(_t,V):ut&&At>1&&_t.reverse(),U&&C<At&&(_t.length=C),this&&this!==Xt&&this instanceof lt&&(Xn=wt||ko(Xn)),Xn.apply(dn,_t)}return lt}function rc(t,n){return function(s,l){return eg(s,t,n(l),{})}}function Ma(t,n){return function(s,l){var h;if(s===r&&l===r)return n;if(s!==r&&(h=s),l!==r){if(h===r)return l;typeof s=="string"||typeof l=="string"?(s=ke(s),l=ke(l)):(s=qf(s),l=qf(l)),h=t(s,l)}return h}}function Gu(t){return Yn(function(n){return n=Ot(n,we(at())),vt(function(s){var l=this;return t(n,function(h){return he(h,l,s)})})})}function Ca(t,n){n=n===r?" ":ke(n);var s=n.length;if(s<2)return s?Uu(n,t):n;var l=Uu(n,et(t/Rn(n)));return Qe(n)?vr(xe(l),0,t).join(""):l.slice(0,t)}function Tg(t,n,s,l){var h=n&Q,v=ko(t);function E(){for(var V=-1,C=arguments.length,N=-1,U=l.length,K=B(U+C),Z=this&&this!==Xt&&this instanceof E?v:t;++N<U;)K[N]=l[N];for(;C--;)K[N++]=arguments[++V];return he(Z,h?s:this,K)}return E}function ic(t){return function(n,s,l){return l&&typeof l!="number"&&Me(n,s,l)&&(s=l=r),n=Zn(n),s===r?(s=n,n=0):s=Zn(s),l=l===r?n<s?1:-1:Zn(l),dg(n,s,l,t)}}function Ia(t){return function(n,s){return typeof n=="string"&&typeof s=="string"||(n=tn(n),s=tn(s)),t(n,s)}}function oc(t,n,s,l,h,v,E,V,C,N){var U=n&St,K=U?E:r,Z=U?r:E,rt=U?v:r,ut=U?r:v;n|=U?kt:Zt,n&=~(U?Zt:kt),n&Mt||(n&=~(Q|ht));var wt=[t,n,h,rt,K,ut,Z,V,C,N],lt=s.apply(r,wt);return tl(t)&&wc(lt,wt),lt.placeholder=l,vc(lt,t,n)}function Yu(t){var n=Kt[t];return function(s,l){if(s=tn(s),l=l==null?0:Ut(mt(l),292),l&&Be(s)){var h=(It(s)+"e").split("e"),v=n(h[0]+"e"+(+h[1]+l));return h=(It(v)+"e").split("e"),+(h[0]+"e"+(+h[1]-l))}return n(s)}}var Mg=Ci&&1/Ri(new Ci([,-0]))[1]==mn?function(t){return new Ci(t)}:gl;function sc(t){return function(n){var s=Ee(n);return s==Ae?bi(n):s==bt?ca(n):ia(n,t(n))}}function Gn(t,n,s,l,h,v,E,V){var C=n&ht;if(!C&&typeof t!="function")throw new se(A);var N=l?l.length:0;if(N||(n&=~(kt|Zt),l=h=r),E=E===r?E:Yt(mt(E),0),V=V===r?V:mt(V),N-=h?h.length:0,n&Zt){var U=l,K=h;l=h=r}var Z=C?r:Zu(t),rt=[t,n,s,l,h,U,K,v,E,V];if(Z&&Kg(rt,Z),t=rt[0],n=rt[1],s=rt[2],l=rt[3],h=rt[4],V=rt[9]=rt[9]===r?C?0:t.length:Yt(rt[9]-N,0),!V&&n&(St|Wt)&&(n&=~(St|Wt)),!n||n==Q)var ut=Vg(t,n,s);else n==St||n==Wt?ut=Rg(t,n,V):(n==kt||n==(Q|kt))&&!h.length?ut=Tg(t,n,s,l):ut=Ta.apply(r,rt);var wt=Z?zf:wc;return vc(wt(ut,rt),t,n)}function ac(t,n,s,l){return t===r||hn(t,f[s])&&!d.call(l,s)?n:t}function uc(t,n,s,l,h,v){return Ht(t)&&Ht(n)&&(v.set(n,t),Sa(t,n,r,uc,v),v.delete(n)),t}function Cg(t){return Ko(t)?r:t}function lc(t,n,s,l,h,v){var E=s&M,V=t.length,C=n.length;if(V!=C&&!(E&&C>V))return!1;var N=v.get(t),U=v.get(n);if(N&&U)return N==n&&U==t;var K=-1,Z=!0,rt=s&Qt?new Yr:r;for(v.set(t,n),v.set(n,t);++K<V;){var ut=t[K],wt=n[K];if(l)var lt=E?l(wt,ut,K,n,t,v):l(ut,wt,K,t,n,v);if(lt!==r){if(lt)continue;Z=!1;break}if(rt){if(!Ai(n,function(At,_t){if(!fn(rt,_t)&&(ut===At||h(ut,At,s,l,v)))return rt.push(_t)})){Z=!1;break}}else if(!(ut===wt||h(ut,wt,s,l,v))){Z=!1;break}}return v.delete(t),v.delete(n),Z}function Ig(t,n,s,l,h,v,E){switch(s){case Ln:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case on:return!(t.byteLength!=n.byteLength||!v(new gt(t),new gt(n)));case On:case rr:case ye:return hn(+t,+n);case ir:return t.name==n.name&&t.message==n.message;case or:case ze:return t==n+"";case Ae:var V=bi;case bt:var C=l&M;if(V||(V=Ri),t.size!=n.size&&!C)return!1;var N=E.get(t);if(N)return N==n;l|=Qt,E.set(t,n);var U=lc(V(t),V(n),l,h,v,E);return E.delete(t),U;case Ge:if(Fo)return Fo.call(t)==Fo.call(n)}return!1}function Pg(t,n,s,l,h,v){var E=s&M,V=Ju(t),C=V.length,N=Ju(n),U=N.length;if(C!=U&&!E)return!1;for(var K=C;K--;){var Z=V[K];if(!(E?Z in n:d.call(n,Z)))return!1}var rt=v.get(t),ut=v.get(n);if(rt&&ut)return rt==n&&ut==t;var wt=!0;v.set(t,n),v.set(n,t);for(var lt=E;++K<C;){Z=V[K];var At=t[Z],_t=n[Z];if(l)var We=E?l(_t,At,Z,n,t,v):l(At,_t,Z,t,n,v);if(!(We===r?At===_t||h(At,_t,s,l,v):We)){wt=!1;break}lt||(lt=Z=="constructor")}if(wt&&!lt){var Ce=t.constructor,Ke=n.constructor;Ce!=Ke&&"constructor"in t&&"constructor"in n&&!(typeof Ce=="function"&&Ce instanceof Ce&&typeof Ke=="function"&&Ke instanceof Ke)&&(wt=!1)}return v.delete(t),v.delete(n),wt}function Yn(t){return nl(gc(t,r,Sc),t+"")}function Ju(t){return Mf(t,de,ju)}function Qu(t){return Mf(t,De,fc)}var Zu=va?function(t){return va.get(t)}:gl;function Pa(t){for(var n=t.name+"",s=Ii[n],l=d.call(Ii,n)?s.length:0;l--;){var h=s[l],v=h.func;if(v==null||v==t)return h.name}return n}function Fi(t){var n=d.call(w,"placeholder")?w:t;return n.placeholder}function at(){var t=w.iteratee||dl;return t=t===dl?Pf:t,arguments.length?t(arguments[0],arguments[1]):t}function Oa(t,n){var s=t.__data__;return zg(n)?s[typeof n=="string"?"string":"hash"]:s.map}function Xu(t){for(var n=de(t),s=n.length;s--;){var l=n[s],h=t[l];n[s]=[l,h,dc(h)]}return n}function Zr(t,n){var s=fa(t,n);return If(s)?s:r}function Og(t){var n=d.call(t,re),s=t[re];try{t[re]=r;var l=!0}catch{}var h=_.call(t);return l&&(n?t[re]=s:delete t[re]),h}var ju=ct?function(t){return t==null?[]:(t=Ct(t),an(ct(t),function(n){return Lt.call(t,n)}))}:ml,fc=ct?function(t){for(var n=[];t;)ln(n,ju(t)),t=Rt(t);return n}:ml,Ee=Te;(Vu&&Ee(new Vu(new ArrayBuffer(1)))!=Ln||Po&&Ee(new Po)!=Ae||Ru&&Ee(Ru.resolve())!=io||Ci&&Ee(new Ci)!=bt||Oo&&Ee(new Oo)!=te)&&(Ee=function(t){var n=Te(t),s=n==He?t.constructor:r,l=s?Xr(s):"";if(l)switch(l){case gp:return Ln;case mp:return Ae;case wp:return io;case vp:return bt;case Ap:return te}return n});function Bg(t,n,s){for(var l=-1,h=s.length;++l<h;){var v=s[l],E=v.size;switch(v.type){case"drop":t+=E;break;case"dropRight":n-=E;break;case"take":n=Ut(n,t+E);break;case"takeRight":t=Yt(t,n-E);break}}return{start:t,end:n}}function Fg(t){var n=t.match(ws);return n?n[1].split(li):[]}function cc(t,n,s){n=wr(n,t);for(var l=-1,h=n.length,v=!1;++l<h;){var E=Cn(n[l]);if(!(v=t!=null&&s(t,E)))break;t=t[E]}return v||++l!=h?v:(h=t==null?0:t.length,!!h&&za(h)&&Jn(E,h)&&(dt(t)||jr(t)))}function Lg(t){var n=t.length,s=new t.constructor(n);return n&&typeof t[0]=="string"&&d.call(t,"index")&&(s.index=t.index,s.input=t.input),s}function hc(t){return typeof t.constructor=="function"&&!qo(t)?Pi(Rt(t)):{}}function Dg(t,n,s){var l=t.constructor;switch(n){case on:return Hu(t);case On:case rr:return new l(+t);case Ln:return yg(t,s);case vn:case ce:case An:case Mr:case Cr:case Ye:case Ir:case Je:case Pr:return Jf(t,s);case Ae:return new l;case ye:case ze:return new l(t);case or:return xg(t);case bt:return new l;case Ge:return _g(t)}}function Ng(t,n){var s=n.length;if(!s)return t;var l=s-1;return n[l]=(s>1?"& ":"")+n[l],n=n.join(s>2?", ":" "),t.replace(ar,`{
/* [wrapped with `+n+`] */
`)}function Ug(t){return dt(t)||jr(t)||!!(it&&t&&t[it])}function Jn(t,n){var s=typeof t;return n=n==null?rn:n,!!n&&(s=="number"||s!="symbol"&&Es.test(t))&&t>-1&&t%1==0&&t<n}function Me(t,n,s){if(!Ht(s))return!1;var l=typeof n;return(l=="number"?Le(s)&&Jn(n,s.length):l=="string"&&n in s)?hn(s[n],t):!1}function $u(t,n){if(dt(t))return!1;var s=typeof t;return s=="number"||s=="symbol"||s=="boolean"||t==null||qe(t)?!0:ao.test(t)||!xn.test(t)||n!=null&&t in Ct(n)}function zg(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function tl(t){var n=Pa(t),s=w[n];if(typeof s!="function"||!(n in yt.prototype))return!1;if(t===s)return!0;var l=Zu(s);return!!l&&t===l[0]}function kg(t){return!!P&&P in t}var qg=m?Qn:wl;function qo(t){var n=t&&t.constructor,s=typeof n=="function"&&n.prototype||f;return t===s}function dc(t){return t===t&&!Ht(t)}function pc(t,n){return function(s){return s==null?!1:s[t]===n&&(n!==r||t in Ct(s))}}function Wg(t){var n=Na(t,function(l){return s.size===I&&s.clear(),l}),s=n.cache;return n}function Kg(t,n){var s=t[1],l=n[1],h=s|l,v=h<(Q|ht|Se),E=l==Se&&s==St||l==Se&&s==tr&&t[7].length<=n[8]||l==(Se|tr)&&n[7].length<=n[8]&&s==St;if(!(v||E))return t;l&Q&&(t[2]=n[2],h|=s&Q?0:Mt);var V=n[3];if(V){var C=t[3];t[3]=C?Zf(C,V,n[4]):V,t[4]=C?Vn(t[3],F):n[4]}return V=n[5],V&&(C=t[5],t[5]=C?Xf(C,V,n[6]):V,t[6]=C?Vn(t[5],F):n[6]),V=n[7],V&&(t[7]=V),l&Se&&(t[8]=t[8]==null?n[8]:Ut(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=h,t}function Hg(t){var n=[];if(t!=null)for(var s in Ct(t))n.push(s);return n}function Gg(t){return _.call(t)}function gc(t,n,s){return n=Yt(n===r?t.length-1:n,0),function(){for(var l=arguments,h=-1,v=Yt(l.length-n,0),E=B(v);++h<v;)E[h]=l[n+h];h=-1;for(var V=B(n+1);++h<n;)V[h]=l[h];return V[n]=s(E),he(t,this,V)}}function mc(t,n){return n.length<2?t:Qr(t,je(n,0,-1))}function Yg(t,n){for(var s=t.length,l=Ut(n.length,s),h=Fe(t);l--;){var v=n[l];t[l]=Jn(v,s)?h[v]:r}return t}function el(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var wc=Ac(zf),Wo=st||function(t,n){return Xt.setTimeout(t,n)},nl=Ac(mg);function vc(t,n,s){var l=n+"";return nl(t,Ng(l,Jg(Fg(l),s)))}function Ac(t){var n=0,s=0;return function(){var l=Io(),h=er-(l-s);if(s=l,h>0){if(++n>=Xi)return arguments[0]}else n=0;return t.apply(r,arguments)}}function Ba(t,n){var s=-1,l=t.length,h=l-1;for(n=n===r?l:n;++s<n;){var v=Nu(s,h),E=t[v];t[v]=t[s],t[s]=E}return t.length=n,t}var yc=Wg(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(ee,function(s,l,h,v){n.push(h?v.replace(Or,"$1"):l||s)}),n});function Cn(t){if(typeof t=="string"||qe(t))return t;var n=t+"";return n=="0"&&1/t==-mn?"-0":n}function Xr(t){if(t!=null){try{return x.call(t)}catch{}try{return t+""}catch{}}return""}function Jg(t,n){return Re(eo,function(s){var l="_."+s[0];n&s[1]&&!qr(t,l)&&t.push(l)}),t.sort()}function xc(t){if(t instanceof yt)return t.clone();var n=new Ze(t.__wrapped__,t.__chain__);return n.__actions__=Fe(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Qg(t,n,s){(s?Me(t,n,s):n===r)?n=1:n=Yt(mt(n),0);var l=t==null?0:t.length;if(!l||n<1)return[];for(var h=0,v=0,E=B(et(l/n));h<l;)E[v++]=je(t,h,h+=n);return E}function Zg(t){for(var n=-1,s=t==null?0:t.length,l=0,h=[];++n<s;){var v=t[n];v&&(h[l++]=v)}return h}function Xg(){var t=arguments.length;if(!t)return[];for(var n=B(t-1),s=arguments[0],l=t;l--;)n[l-1]=arguments[l];return ln(dt(s)?Fe(s):[s],ve(n,1))}var jg=vt(function(t,n){return jt(t)?Do(t,ve(n,1,jt,!0)):[]}),$g=vt(function(t,n){var s=$e(n);return jt(s)&&(s=r),jt(t)?Do(t,ve(n,1,jt,!0),at(s,2)):[]}),tm=vt(function(t,n){var s=$e(n);return jt(s)&&(s=r),jt(t)?Do(t,ve(n,1,jt,!0),r,s):[]});function em(t,n,s){var l=t==null?0:t.length;return l?(n=s||n===r?1:mt(n),je(t,n<0?0:n,l)):[]}function nm(t,n,s){var l=t==null?0:t.length;return l?(n=s||n===r?1:mt(n),n=l-n,je(t,0,n<0?0:n)):[]}function rm(t,n){return t&&t.length?Va(t,at(n,3),!0,!0):[]}function im(t,n){return t&&t.length?Va(t,at(n,3),!0):[]}function om(t,n,s,l){var h=t==null?0:t.length;return h?(s&&typeof s!="number"&&Me(t,n,s)&&(s=0,l=h),Xp(t,n,s,l)):[]}function _c(t,n,s){var l=t==null?0:t.length;if(!l)return-1;var h=s==null?0:mt(s);return h<0&&(h=Yt(l+h,0)),Wr(t,at(n,3),h)}function Ec(t,n,s){var l=t==null?0:t.length;if(!l)return-1;var h=l-1;return s!==r&&(h=mt(s),h=s<0?Yt(l+h,0):Ut(h,l-1)),Wr(t,at(n,3),h,!0)}function Sc(t){var n=t==null?0:t.length;return n?ve(t,1):[]}function sm(t){var n=t==null?0:t.length;return n?ve(t,mn):[]}function am(t,n){var s=t==null?0:t.length;return s?(n=n===r?1:mt(n),ve(t,n)):[]}function um(t){for(var n=-1,s=t==null?0:t.length,l={};++n<s;){var h=t[n];l[h[0]]=h[1]}return l}function bc(t){return t&&t.length?t[0]:r}function lm(t,n,s){var l=t==null?0:t.length;if(!l)return-1;var h=s==null?0:mt(s);return h<0&&(h=Yt(l+h,0)),zn(t,n,h)}function fm(t){var n=t==null?0:t.length;return n?je(t,0,-1):[]}var cm=vt(function(t){var n=Ot(t,Wu);return n.length&&n[0]===t[0]?Ou(n):[]}),hm=vt(function(t){var n=$e(t),s=Ot(t,Wu);return n===$e(s)?n=r:s.pop(),s.length&&s[0]===t[0]?Ou(s,at(n,2)):[]}),dm=vt(function(t){var n=$e(t),s=Ot(t,Wu);return n=typeof n=="function"?n:r,n&&s.pop(),s.length&&s[0]===t[0]?Ou(s,r,n):[]});function pm(t,n){return t==null?"":_e.call(t,n)}function $e(t){var n=t==null?0:t.length;return n?t[n-1]:r}function gm(t,n,s){var l=t==null?0:t.length;if(!l)return-1;var h=l;return s!==r&&(h=mt(s),h=h<0?Yt(l+h,0):Ut(h,l-1)),n===n?da(t,n,h):Wr(t,Vo,h,!0)}function mm(t,n){return t&&t.length?Lf(t,mt(n)):r}var wm=vt(Vc);function Vc(t,n){return t&&t.length&&n&&n.length?Du(t,n):t}function vm(t,n,s){return t&&t.length&&n&&n.length?Du(t,n,at(s,2)):t}function Am(t,n,s){return t&&t.length&&n&&n.length?Du(t,n,r,s):t}var ym=Yn(function(t,n){var s=t==null?0:t.length,l=Mu(t,n);return Uf(t,Ot(n,function(h){return Jn(h,s)?+h:h}).sort(Qf)),l});function xm(t,n){var s=[];if(!(t&&t.length))return s;var l=-1,h=[],v=t.length;for(n=at(n,3);++l<v;){var E=t[l];n(E,l,t)&&(s.push(E),h.push(l))}return Uf(t,h),s}function rl(t){return t==null?t:pp.call(t)}function _m(t,n,s){var l=t==null?0:t.length;return l?(s&&typeof s!="number"&&Me(t,n,s)?(n=0,s=l):(n=n==null?0:mt(n),s=s===r?l:mt(s)),je(t,n,s)):[]}function Em(t,n){return ba(t,n)}function Sm(t,n,s){return zu(t,n,at(s,2))}function bm(t,n){var s=t==null?0:t.length;if(s){var l=ba(t,n);if(l<s&&hn(t[l],n))return l}return-1}function Vm(t,n){return ba(t,n,!0)}function Rm(t,n,s){return zu(t,n,at(s,2),!0)}function Tm(t,n){var s=t==null?0:t.length;if(s){var l=ba(t,n,!0)-1;if(hn(t[l],n))return l}return-1}function Mm(t){return t&&t.length?kf(t):[]}function Cm(t,n){return t&&t.length?kf(t,at(n,2)):[]}function Im(t){var n=t==null?0:t.length;return n?je(t,1,n):[]}function Pm(t,n,s){return t&&t.length?(n=s||n===r?1:mt(n),je(t,0,n<0?0:n)):[]}function Om(t,n,s){var l=t==null?0:t.length;return l?(n=s||n===r?1:mt(n),n=l-n,je(t,n<0?0:n,l)):[]}function Bm(t,n){return t&&t.length?Va(t,at(n,3),!1,!0):[]}function Fm(t,n){return t&&t.length?Va(t,at(n,3)):[]}var Lm=vt(function(t){return mr(ve(t,1,jt,!0))}),Dm=vt(function(t){var n=$e(t);return jt(n)&&(n=r),mr(ve(t,1,jt,!0),at(n,2))}),Nm=vt(function(t){var n=$e(t);return n=typeof n=="function"?n:r,mr(ve(t,1,jt,!0),r,n)});function Um(t){return t&&t.length?mr(t):[]}function zm(t,n){return t&&t.length?mr(t,at(n,2)):[]}function km(t,n){return n=typeof n=="function"?n:r,t&&t.length?mr(t,r,n):[]}function il(t){if(!(t&&t.length))return[];var n=0;return t=an(t,function(s){if(jt(s))return n=Yt(s.length,n),!0}),Ei(n,function(s){return Ot(t,xi(s))})}function Rc(t,n){if(!(t&&t.length))return[];var s=il(t);return n==null?s:Ot(s,function(l){return he(n,r,l)})}var qm=vt(function(t,n){return jt(t)?Do(t,n):[]}),Wm=vt(function(t){return qu(an(t,jt))}),Km=vt(function(t){var n=$e(t);return jt(n)&&(n=r),qu(an(t,jt),at(n,2))}),Hm=vt(function(t){var n=$e(t);return n=typeof n=="function"?n:r,qu(an(t,jt),r,n)}),Gm=vt(il);function Ym(t,n){return Hf(t||[],n||[],Lo)}function Jm(t,n){return Hf(t||[],n||[],zo)}var Qm=vt(function(t){var n=t.length,s=n>1?t[n-1]:r;return s=typeof s=="function"?(t.pop(),s):r,Rc(t,s)});function Tc(t){var n=w(t);return n.__chain__=!0,n}function Zm(t,n){return n(t),t}function Fa(t,n){return n(t)}var Xm=Yn(function(t){var n=t.length,s=n?t[0]:0,l=this.__wrapped__,h=function(v){return Mu(v,t)};return n>1||this.__actions__.length||!(l instanceof yt)||!Jn(s)?this.thru(h):(l=l.slice(s,+s+(n?1:0)),l.__actions__.push({func:Fa,args:[h],thisArg:r}),new Ze(l,this.__chain__).thru(function(v){return n&&!v.length&&v.push(r),v}))});function jm(){return Tc(this)}function $m(){return new Ze(this.value(),this.__chain__)}function t0(){this.__values__===r&&(this.__values__=qc(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function e0(){return this}function n0(t){for(var n,s=this;s instanceof ya;){var l=xc(s);l.__index__=0,l.__values__=r,n?h.__wrapped__=l:n=l;var h=l;s=s.__wrapped__}return h.__wrapped__=t,n}function r0(){var t=this.__wrapped__;if(t instanceof yt){var n=t;return this.__actions__.length&&(n=new yt(this)),n=n.reverse(),n.__actions__.push({func:Fa,args:[rl],thisArg:r}),new Ze(n,this.__chain__)}return this.thru(rl)}function i0(){return Kf(this.__wrapped__,this.__actions__)}var o0=Ra(function(t,n,s){d.call(t,s)?++t[s]:Hn(t,s,1)});function s0(t,n,s){var l=dt(t)?js:Zp;return s&&Me(t,n,s)&&(n=r),l(t,at(n,3))}function a0(t,n){var s=dt(t)?an:Rf;return s(t,at(n,3))}var u0=ec(_c),l0=ec(Ec);function f0(t,n){return ve(La(t,n),1)}function c0(t,n){return ve(La(t,n),mn)}function h0(t,n,s){return s=s===r?1:mt(s),ve(La(t,n),s)}function Mc(t,n){var s=dt(t)?Re:gr;return s(t,at(n,3))}function Cc(t,n){var s=dt(t)?Xs:Vf;return s(t,at(n,3))}var d0=Ra(function(t,n,s){d.call(t,s)?t[s].push(n):Hn(t,s,[n])});function p0(t,n,s,l){t=Le(t)?t:Di(t),s=s&&!l?mt(s):0;var h=t.length;return s<0&&(s=Yt(h+s,0)),ka(t)?s<=h&&t.indexOf(n,s)>-1:!!h&&zn(t,n,s)>-1}var g0=vt(function(t,n,s){var l=-1,h=typeof n=="function",v=Le(t)?B(t.length):[];return gr(t,function(E){v[++l]=h?he(n,E,s):No(E,n,s)}),v}),m0=Ra(function(t,n,s){Hn(t,s,n)});function La(t,n){var s=dt(t)?Ot:Of;return s(t,at(n,3))}function w0(t,n,s,l){return t==null?[]:(dt(n)||(n=n==null?[]:[n]),s=l?r:s,dt(s)||(s=s==null?[]:[s]),Df(t,n,s))}var v0=Ra(function(t,n,s){t[s?0:1].push(n)},function(){return[[],[]]});function A0(t,n,s){var l=dt(t)?vi:Ro,h=arguments.length<3;return l(t,at(n,4),s,h,gr)}function y0(t,n,s){var l=dt(t)?$s:Ro,h=arguments.length<3;return l(t,at(n,4),s,h,Vf)}function x0(t,n){var s=dt(t)?an:Rf;return s(t,Ua(at(n,3)))}function _0(t){var n=dt(t)?_f:pg;return n(t)}function E0(t,n,s){(s?Me(t,n,s):n===r)?n=1:n=mt(n);var l=dt(t)?Hp:gg;return l(t,n)}function S0(t){var n=dt(t)?Gp:wg;return n(t)}function b0(t){if(t==null)return 0;if(Le(t))return ka(t)?Rn(t):t.length;var n=Ee(t);return n==Ae||n==bt?t.size:Fu(t).length}function V0(t,n,s){var l=dt(t)?Ai:vg;return s&&Me(t,n,s)&&(n=r),l(t,at(n,3))}var R0=vt(function(t,n){if(t==null)return[];var s=n.length;return s>1&&Me(t,n[0],n[1])?n=[]:s>2&&Me(n[0],n[1],n[2])&&(n=[n[0]]),Df(t,ve(n,1),[])}),Da=j||function(){return Xt.Date.now()};function T0(t,n){if(typeof n!="function")throw new se(A);return t=mt(t),function(){if(--t<1)return n.apply(this,arguments)}}function Ic(t,n,s){return n=s?r:n,n=t&&n==null?t.length:n,Gn(t,Se,r,r,r,r,n)}function Pc(t,n){var s;if(typeof n!="function")throw new se(A);return t=mt(t),function(){return--t>0&&(s=n.apply(this,arguments)),t<=1&&(n=r),s}}var ol=vt(function(t,n,s){var l=Q;if(s.length){var h=Vn(s,Fi(ol));l|=kt}return Gn(t,l,n,s,h)}),Oc=vt(function(t,n,s){var l=Q|ht;if(s.length){var h=Vn(s,Fi(Oc));l|=kt}return Gn(n,l,t,s,h)});function Bc(t,n,s){n=s?r:n;var l=Gn(t,St,r,r,r,r,r,n);return l.placeholder=Bc.placeholder,l}function Fc(t,n,s){n=s?r:n;var l=Gn(t,Wt,r,r,r,r,r,n);return l.placeholder=Fc.placeholder,l}function Lc(t,n,s){var l,h,v,E,V,C,N=0,U=!1,K=!1,Z=!0;if(typeof t!="function")throw new se(A);n=tn(n)||0,Ht(s)&&(U=!!s.leading,K="maxWait"in s,v=K?Yt(tn(s.maxWait)||0,n):v,Z="trailing"in s?!!s.trailing:Z);function rt($t){var dn=l,Xn=h;return l=h=r,N=$t,E=t.apply(Xn,dn),E}function ut($t){return N=$t,V=Wo(At,n),U?rt($t):E}function wt($t){var dn=$t-C,Xn=$t-N,eh=n-dn;return K?Ut(eh,v-Xn):eh}function lt($t){var dn=$t-C,Xn=$t-N;return C===r||dn>=n||dn<0||K&&Xn>=v}function At(){var $t=Da();if(lt($t))return _t($t);V=Wo(At,wt($t))}function _t($t){return V=r,Z&&l?rt($t):(l=h=r,E)}function We(){V!==r&&Gf(V),N=0,l=C=h=V=r}function Ce(){return V===r?E:_t(Da())}function Ke(){var $t=Da(),dn=lt($t);if(l=arguments,h=this,C=$t,dn){if(V===r)return ut(C);if(K)return Gf(V),V=Wo(At,n),rt(C)}return V===r&&(V=Wo(At,n)),E}return Ke.cancel=We,Ke.flush=Ce,Ke}var M0=vt(function(t,n){return bf(t,1,n)}),C0=vt(function(t,n,s){return bf(t,tn(n)||0,s)});function I0(t){return Gn(t,ai)}function Na(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new se(A);var s=function(){var l=arguments,h=n?n.apply(this,l):l[0],v=s.cache;if(v.has(h))return v.get(h);var E=t.apply(this,l);return s.cache=v.set(h,E)||v,E};return s.cache=new(Na.Cache||Kn),s}Na.Cache=Kn;function Ua(t){if(typeof t!="function")throw new se(A);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function P0(t){return Pc(2,t)}var O0=Ag(function(t,n){n=n.length==1&&dt(n[0])?Ot(n[0],we(at())):Ot(ve(n,1),we(at()));var s=n.length;return vt(function(l){for(var h=-1,v=Ut(l.length,s);++h<v;)l[h]=n[h].call(this,l[h]);return he(t,this,l)})}),sl=vt(function(t,n){var s=Vn(n,Fi(sl));return Gn(t,kt,r,n,s)}),Dc=vt(function(t,n){var s=Vn(n,Fi(Dc));return Gn(t,Zt,r,n,s)}),B0=Yn(function(t,n){return Gn(t,tr,r,r,r,n)});function F0(t,n){if(typeof t!="function")throw new se(A);return n=n===r?n:mt(n),vt(t,n)}function L0(t,n){if(typeof t!="function")throw new se(A);return n=n==null?0:Yt(mt(n),0),vt(function(s){var l=s[n],h=vr(s,0,n);return l&&ln(h,l),he(t,this,h)})}function D0(t,n,s){var l=!0,h=!0;if(typeof t!="function")throw new se(A);return Ht(s)&&(l="leading"in s?!!s.leading:l,h="trailing"in s?!!s.trailing:h),Lc(t,n,{leading:l,maxWait:n,trailing:h})}function N0(t){return Ic(t,1)}function U0(t,n){return sl(Ku(n),t)}function z0(){if(!arguments.length)return[];var t=arguments[0];return dt(t)?t:[t]}function k0(t){return Xe(t,H)}function q0(t,n){return n=typeof n=="function"?n:r,Xe(t,H,n)}function W0(t){return Xe(t,W|H)}function K0(t,n){return n=typeof n=="function"?n:r,Xe(t,W|H,n)}function H0(t,n){return n==null||Sf(t,n,de(n))}function hn(t,n){return t===n||t!==t&&n!==n}var G0=Ia(Pu),Y0=Ia(function(t,n){return t>=n}),jr=Cf(function(){return arguments}())?Cf:function(t){return Jt(t)&&d.call(t,"callee")&&!Lt.call(t,"callee")},dt=B.isArray,J0=cr?we(cr):ng;function Le(t){return t!=null&&za(t.length)&&!Qn(t)}function jt(t){return Jt(t)&&Le(t)}function Q0(t){return t===!0||t===!1||Jt(t)&&Te(t)==On}var Ar=Nt||wl,Z0=hr?we(hr):rg;function X0(t){return Jt(t)&&t.nodeType===1&&!Ko(t)}function j0(t){if(t==null)return!0;if(Le(t)&&(dt(t)||typeof t=="string"||typeof t.splice=="function"||Ar(t)||Li(t)||jr(t)))return!t.length;var n=Ee(t);if(n==Ae||n==bt)return!t.size;if(qo(t))return!Fu(t).length;for(var s in t)if(d.call(t,s))return!1;return!0}function $0(t,n){return Uo(t,n)}function tw(t,n,s){s=typeof s=="function"?s:r;var l=s?s(t,n):r;return l===r?Uo(t,n,r,s):!!l}function al(t){if(!Jt(t))return!1;var n=Te(t);return n==ir||n==no||typeof t.message=="string"&&typeof t.name=="string"&&!Ko(t)}function ew(t){return typeof t=="number"&&Be(t)}function Qn(t){if(!Ht(t))return!1;var n=Te(t);return n==Bn||n==ro||n==fs||n==hs}function Nc(t){return typeof t=="number"&&t==mt(t)}function za(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rn}function Ht(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Jt(t){return t!=null&&typeof t=="object"}var Uc=_o?we(_o):og;function nw(t,n){return t===n||Bu(t,n,Xu(n))}function rw(t,n,s){return s=typeof s=="function"?s:r,Bu(t,n,Xu(n),s)}function iw(t){return zc(t)&&t!=+t}function ow(t){if(qg(t))throw new ft(g);return If(t)}function sw(t){return t===null}function aw(t){return t==null}function zc(t){return typeof t=="number"||Jt(t)&&Te(t)==ye}function Ko(t){if(!Jt(t)||Te(t)!=He)return!1;var n=Rt(t);if(n===null)return!0;var s=d.call(n,"constructor")&&n.constructor;return typeof s=="function"&&s instanceof s&&x.call(s)==b}var ul=Eo?we(Eo):sg;function uw(t){return Nc(t)&&t>=-rn&&t<=rn}var kc=Un?we(Un):ag;function ka(t){return typeof t=="string"||!dt(t)&&Jt(t)&&Te(t)==ze}function qe(t){return typeof t=="symbol"||Jt(t)&&Te(t)==Ge}var Li=So?we(So):ug;function lw(t){return t===r}function fw(t){return Jt(t)&&Ee(t)==te}function cw(t){return Jt(t)&&Te(t)==Fn}var hw=Ia(Lu),dw=Ia(function(t,n){return t<=n});function qc(t){if(!t)return[];if(Le(t))return ka(t)?xe(t):Fe(t);if(xt&&t[xt])return bu(t[xt]());var n=Ee(t),s=n==Ae?bi:n==bt?Ri:Di;return s(t)}function Zn(t){if(!t)return t===0?t:0;if(t=tn(t),t===mn||t===-mn){var n=t<0?-1:1;return n*ls}return t===t?t:0}function mt(t){var n=Zn(t),s=n%1;return n===n?s?n-s:n:0}function Wc(t){return t?Jr(mt(t),0,Pe):0}function tn(t){if(typeof t=="number")return t;if(qe(t))return nr;if(Ht(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Ht(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=To(t);var s=ys.test(t);return s||_s.test(t)?Qs(t.slice(2),s?2:8):As.test(t)?nr:+t}function Kc(t){return Mn(t,De(t))}function pw(t){return t?Jr(mt(t),-rn,rn):t===0?t:0}function It(t){return t==null?"":ke(t)}var gw=Oi(function(t,n){if(qo(n)||Le(n)){Mn(n,de(n),t);return}for(var s in n)d.call(n,s)&&Lo(t,s,n[s])}),Hc=Oi(function(t,n){Mn(n,De(n),t)}),qa=Oi(function(t,n,s,l){Mn(n,De(n),t,l)}),mw=Oi(function(t,n,s,l){Mn(n,de(n),t,l)}),ww=Yn(Mu);function vw(t,n){var s=Pi(t);return n==null?s:Ef(s,n)}var Aw=vt(function(t,n){t=Ct(t);var s=-1,l=n.length,h=l>2?n[2]:r;for(h&&Me(n[0],n[1],h)&&(l=1);++s<l;)for(var v=n[s],E=De(v),V=-1,C=E.length;++V<C;){var N=E[V],U=t[N];(U===r||hn(U,f[N])&&!d.call(t,N))&&(t[N]=v[N])}return t}),yw=vt(function(t){return t.push(r,uc),he(Gc,r,t)});function xw(t,n){return ea(t,at(n,3),Tn)}function _w(t,n){return ea(t,at(n,3),Iu)}function Ew(t,n){return t==null?t:Cu(t,at(n,3),De)}function Sw(t,n){return t==null?t:Tf(t,at(n,3),De)}function bw(t,n){return t&&Tn(t,at(n,3))}function Vw(t,n){return t&&Iu(t,at(n,3))}function Rw(t){return t==null?[]:Ea(t,de(t))}function Tw(t){return t==null?[]:Ea(t,De(t))}function ll(t,n,s){var l=t==null?r:Qr(t,n);return l===r?s:l}function Mw(t,n){return t!=null&&cc(t,n,jp)}function fl(t,n){return t!=null&&cc(t,n,$p)}var Cw=rc(function(t,n,s){n!=null&&typeof n.toString!="function"&&(n=_.call(n)),t[n]=s},hl(Ne)),Iw=rc(function(t,n,s){n!=null&&typeof n.toString!="function"&&(n=_.call(n)),d.call(t,n)?t[n].push(s):t[n]=[s]},at),Pw=vt(No);function de(t){return Le(t)?xf(t):Fu(t)}function De(t){return Le(t)?xf(t,!0):lg(t)}function Ow(t,n){var s={};return n=at(n,3),Tn(t,function(l,h,v){Hn(s,n(l,h,v),l)}),s}function Bw(t,n){var s={};return n=at(n,3),Tn(t,function(l,h,v){Hn(s,h,n(l,h,v))}),s}var Fw=Oi(function(t,n,s){Sa(t,n,s)}),Gc=Oi(function(t,n,s,l){Sa(t,n,s,l)}),Lw=Yn(function(t,n){var s={};if(t==null)return s;var l=!1;n=Ot(n,function(v){return v=wr(v,t),l||(l=v.length>1),v}),Mn(t,Qu(t),s),l&&(s=Xe(s,W|J|H,Cg));for(var h=n.length;h--;)ku(s,n[h]);return s});function Dw(t,n){return Yc(t,Ua(at(n)))}var Nw=Yn(function(t,n){return t==null?{}:cg(t,n)});function Yc(t,n){if(t==null)return{};var s=Ot(Qu(t),function(l){return[l]});return n=at(n),Nf(t,s,function(l,h){return n(l,h[0])})}function Uw(t,n,s){n=wr(n,t);var l=-1,h=n.length;for(h||(h=1,t=r);++l<h;){var v=t==null?r:t[Cn(n[l])];v===r&&(l=h,v=s),t=Qn(v)?v.call(t):v}return t}function zw(t,n,s){return t==null?t:zo(t,n,s)}function kw(t,n,s,l){return l=typeof l=="function"?l:r,t==null?t:zo(t,n,s,l)}var Jc=sc(de),Qc=sc(De);function qw(t,n,s){var l=dt(t),h=l||Ar(t)||Li(t);if(n=at(n,4),s==null){var v=t&&t.constructor;h?s=l?new v:[]:Ht(t)?s=Qn(v)?Pi(Rt(t)):{}:s={}}return(h?Re:Tn)(t,function(E,V,C){return n(s,E,V,C)}),s}function Ww(t,n){return t==null?!0:ku(t,n)}function Kw(t,n,s){return t==null?t:Wf(t,n,Ku(s))}function Hw(t,n,s,l){return l=typeof l=="function"?l:r,t==null?t:Wf(t,n,Ku(s),l)}function Di(t){return t==null?[]:Hr(t,de(t))}function Gw(t){return t==null?[]:Hr(t,De(t))}function Yw(t,n,s){return s===r&&(s=n,n=r),s!==r&&(s=tn(s),s=s===s?s:0),n!==r&&(n=tn(n),n=n===n?n:0),Jr(tn(t),n,s)}function Jw(t,n,s){return n=Zn(n),s===r?(s=n,n=0):s=Zn(s),t=tn(t),tg(t,n,s)}function Qw(t,n,s){if(s&&typeof s!="boolean"&&Me(t,n,s)&&(n=s=r),s===r&&(typeof n=="boolean"?(s=n,n=r):typeof t=="boolean"&&(s=t,t=r)),t===r&&n===r?(t=0,n=1):(t=Zn(t),n===r?(n=t,t=0):n=Zn(n)),t>n){var l=t;t=n,n=l}if(s||t%1||n%1){var h=Mi();return Ut(t+h*(n-t+Js("1e-"+((h+"").length-1))),n)}return Nu(t,n)}var Zw=Bi(function(t,n,s){return n=n.toLowerCase(),t+(s?Zc(n):n)});function Zc(t){return cl(It(t).toLowerCase())}function Xc(t){return t=It(t),t&&t.replace(Ss,aa).replace(Ns,"")}function Xw(t,n,s){t=It(t),n=ke(n);var l=t.length;s=s===r?l:Jr(mt(s),0,l);var h=s;return s-=n.length,s>=0&&t.slice(s,h)==n}function jw(t){return t=It(t),t&&ms.test(t)?t.replace(ui,ua):t}function $w(t){return t=It(t),t&&ge.test(t)?t.replace(zt,"\\$&"):t}var tv=Bi(function(t,n,s){return t+(s?"-":"")+n.toLowerCase()}),ev=Bi(function(t,n,s){return t+(s?" ":"")+n.toLowerCase()}),nv=tc("toLowerCase");function rv(t,n,s){t=It(t),n=mt(n);var l=n?Rn(t):0;if(!n||l>=n)return t;var h=(n-l)/2;return Ca(pt(h),s)+t+Ca(et(h),s)}function iv(t,n,s){t=It(t),n=mt(n);var l=n?Rn(t):0;return n&&l<n?t+Ca(n-l,s):t}function ov(t,n,s){t=It(t),n=mt(n);var l=n?Rn(t):0;return n&&l<n?Ca(n-l,s)+t:t}function sv(t,n,s){return s||n==null?n=0:n&&(n=+n),qn(It(t).replace(Dn,""),n||0)}function av(t,n,s){return(s?Me(t,n,s):n===r)?n=1:n=mt(n),Uu(It(t),n)}function uv(){var t=arguments,n=It(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var lv=Bi(function(t,n,s){return t+(s?"_":"")+n.toLowerCase()});function fv(t,n,s){return s&&typeof s!="number"&&Me(t,n,s)&&(n=s=r),s=s===r?Pe:s>>>0,s?(t=It(t),t&&(typeof n=="string"||n!=null&&!ul(n))&&(n=ke(n),!n&&Qe(t))?vr(xe(t),0,s):t.split(n,s)):[]}var cv=Bi(function(t,n,s){return t+(s?" ":"")+cl(n)});function hv(t,n,s){return t=It(t),s=s==null?0:Jr(mt(s),0,t.length),n=ke(n),t.slice(s,s+n.length)==n}function dv(t,n,s){var l=w.templateSettings;s&&Me(t,n,s)&&(n=r),t=It(t),n=qa({},n,l,ac);var h=qa({},n.imports,l.imports,ac),v=de(h),E=Hr(h,v),V,C,N=0,U=n.interpolate||Fr,K="__p += '",Z=dr((n.escape||Fr).source+"|"+U.source+"|"+(U===sr?vs:Fr).source+"|"+(n.evaluate||Fr).source+"|$","g"),rt="//# sourceURL="+(d.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ws+"]")+`
`;t.replace(Z,function(lt,At,_t,We,Ce,Ke){return _t||(_t=We),K+=t.slice(N,Ke).replace(bs,la),At&&(V=!0,K+=`' +
__e(`+At+`) +
'`),Ce&&(C=!0,K+=`';
`+Ce+`;
__p += '`),_t&&(K+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),N=Ke+lt.length,lt}),K+=`';
`;var ut=d.call(n,"variable")&&n.variable;if(!ut)K=`with (obj) {
`+K+`
}
`;else if(uo.test(ut))throw new ft(p);K=(C?K.replace(ds,""):K).replace(ps,"$1").replace(oo,"$1;"),K="function("+(ut||"obj")+`) {
`+(ut?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+K+`return __p
}`;var wt=$c(function(){return Vt(v,rt+"return "+K).apply(r,E)});if(wt.source=K,al(wt))throw wt;return wt}function pv(t){return It(t).toLowerCase()}function gv(t){return It(t).toUpperCase()}function mv(t,n,s){if(t=It(t),t&&(s||n===r))return To(t);if(!t||!(n=ke(n)))return t;var l=xe(t),h=xe(n),v=oa(l,h),E=Si(l,h)+1;return vr(l,v,E).join("")}function wv(t,n,s){if(t=It(t),t&&(s||n===r))return t.slice(0,Mo(t)+1);if(!t||!(n=ke(n)))return t;var l=xe(t),h=Si(l,xe(n))+1;return vr(l,0,h).join("")}function vv(t,n,s){if(t=It(t),t&&(s||n===r))return t.replace(Dn,"");if(!t||!(n=ke(n)))return t;var l=xe(t),h=oa(l,xe(n));return vr(l,h).join("")}function Av(t,n){var s=Qi,l=Zi;if(Ht(n)){var h="separator"in n?n.separator:h;s="length"in n?mt(n.length):s,l="omission"in n?ke(n.omission):l}t=It(t);var v=t.length;if(Qe(t)){var E=xe(t);v=E.length}if(s>=v)return t;var V=s-Rn(l);if(V<1)return l;var C=E?vr(E,0,V).join(""):t.slice(0,V);if(h===r)return C+l;if(E&&(V+=C.length-V),ul(h)){if(t.slice(V).search(h)){var N,U=C;for(h.global||(h=dr(h.source,It(Br.exec(h))+"g")),h.lastIndex=0;N=h.exec(U);)var K=N.index;C=C.slice(0,K===r?V:K)}}else if(t.indexOf(ke(h),V)!=V){var Z=C.lastIndexOf(h);Z>-1&&(C=C.slice(0,Z))}return C+l}function yv(t){return t=It(t),t&&gs.test(t)?t.replace(Oe,pa):t}var xv=Bi(function(t,n,s){return t+(s?" ":"")+n.toUpperCase()}),cl=tc("toUpperCase");function jc(t,n,s){return t=It(t),n=s?r:n,n===r?Su(t)?ma(t):Eu(t):t.match(n)||[]}var $c=vt(function(t,n){try{return he(t,r,n)}catch(s){return al(s)?s:new ft(s)}}),_v=Yn(function(t,n){return Re(n,function(s){s=Cn(s),Hn(t,s,ol(t[s],t))}),t});function Ev(t){var n=t==null?0:t.length,s=at();return t=n?Ot(t,function(l){if(typeof l[1]!="function")throw new se(A);return[s(l[0]),l[1]]}):[],vt(function(l){for(var h=-1;++h<n;){var v=t[h];if(he(v[0],this,l))return he(v[1],this,l)}})}function Sv(t){return Qp(Xe(t,W))}function hl(t){return function(){return t}}function bv(t,n){return t==null||t!==t?n:t}var Vv=nc(),Rv=nc(!0);function Ne(t){return t}function dl(t){return Pf(typeof t=="function"?t:Xe(t,W))}function Tv(t){return Bf(Xe(t,W))}function Mv(t,n){return Ff(t,Xe(n,W))}var Cv=vt(function(t,n){return function(s){return No(s,t,n)}}),Iv=vt(function(t,n){return function(s){return No(t,s,n)}});function pl(t,n,s){var l=de(n),h=Ea(n,l);s==null&&!(Ht(n)&&(h.length||!l.length))&&(s=n,n=t,t=this,h=Ea(n,de(n)));var v=!(Ht(s)&&"chain"in s)||!!s.chain,E=Qn(t);return Re(h,function(V){var C=n[V];t[V]=C,E&&(t.prototype[V]=function(){var N=this.__chain__;if(v||N){var U=t(this.__wrapped__),K=U.__actions__=Fe(this.__actions__);return K.push({func:C,args:arguments,thisArg:t}),U.__chain__=N,U}return C.apply(t,ln([this.value()],arguments))})}),t}function Pv(){return Xt._===this&&(Xt._=O),this}function gl(){}function Ov(t){return t=mt(t),vt(function(n){return Lf(n,t)})}var Bv=Gu(Ot),Fv=Gu(js),Lv=Gu(Ai);function th(t){return $u(t)?xi(Cn(t)):hg(t)}function Dv(t){return function(n){return t==null?r:Qr(t,n)}}var Nv=ic(),Uv=ic(!0);function ml(){return[]}function wl(){return!1}function zv(){return{}}function kv(){return""}function qv(){return!0}function Wv(t,n){if(t=mt(t),t<1||t>rn)return[];var s=Pe,l=Ut(t,Pe);n=at(n),t-=Pe;for(var h=Ei(l,n);++s<t;)n(s);return h}function Kv(t){return dt(t)?Ot(t,Cn):qe(t)?[t]:Fe(yc(It(t)))}function Hv(t){var n=++S;return It(t)+n}var Gv=Ma(function(t,n){return t+n},0),Yv=Yu("ceil"),Jv=Ma(function(t,n){return t/n},1),Qv=Yu("floor");function Zv(t){return t&&t.length?_a(t,Ne,Pu):r}function Xv(t,n){return t&&t.length?_a(t,at(n,2),Pu):r}function jv(t){return yi(t,Ne)}function $v(t,n){return yi(t,at(n,2))}function t1(t){return t&&t.length?_a(t,Ne,Lu):r}function e1(t,n){return t&&t.length?_a(t,at(n,2),Lu):r}var n1=Ma(function(t,n){return t*n},1),r1=Yu("round"),i1=Ma(function(t,n){return t-n},0);function o1(t){return t&&t.length?Kr(t,Ne):0}function s1(t,n){return t&&t.length?Kr(t,at(n,2)):0}return w.after=T0,w.ary=Ic,w.assign=gw,w.assignIn=Hc,w.assignInWith=qa,w.assignWith=mw,w.at=ww,w.before=Pc,w.bind=ol,w.bindAll=_v,w.bindKey=Oc,w.castArray=z0,w.chain=Tc,w.chunk=Qg,w.compact=Zg,w.concat=Xg,w.cond=Ev,w.conforms=Sv,w.constant=hl,w.countBy=o0,w.create=vw,w.curry=Bc,w.curryRight=Fc,w.debounce=Lc,w.defaults=Aw,w.defaultsDeep=yw,w.defer=M0,w.delay=C0,w.difference=jg,w.differenceBy=$g,w.differenceWith=tm,w.drop=em,w.dropRight=nm,w.dropRightWhile=rm,w.dropWhile=im,w.fill=om,w.filter=a0,w.flatMap=f0,w.flatMapDeep=c0,w.flatMapDepth=h0,w.flatten=Sc,w.flattenDeep=sm,w.flattenDepth=am,w.flip=I0,w.flow=Vv,w.flowRight=Rv,w.fromPairs=um,w.functions=Rw,w.functionsIn=Tw,w.groupBy=d0,w.initial=fm,w.intersection=cm,w.intersectionBy=hm,w.intersectionWith=dm,w.invert=Cw,w.invertBy=Iw,w.invokeMap=g0,w.iteratee=dl,w.keyBy=m0,w.keys=de,w.keysIn=De,w.map=La,w.mapKeys=Ow,w.mapValues=Bw,w.matches=Tv,w.matchesProperty=Mv,w.memoize=Na,w.merge=Fw,w.mergeWith=Gc,w.method=Cv,w.methodOf=Iv,w.mixin=pl,w.negate=Ua,w.nthArg=Ov,w.omit=Lw,w.omitBy=Dw,w.once=P0,w.orderBy=w0,w.over=Bv,w.overArgs=O0,w.overEvery=Fv,w.overSome=Lv,w.partial=sl,w.partialRight=Dc,w.partition=v0,w.pick=Nw,w.pickBy=Yc,w.property=th,w.propertyOf=Dv,w.pull=wm,w.pullAll=Vc,w.pullAllBy=vm,w.pullAllWith=Am,w.pullAt=ym,w.range=Nv,w.rangeRight=Uv,w.rearg=B0,w.reject=x0,w.remove=xm,w.rest=F0,w.reverse=rl,w.sampleSize=E0,w.set=zw,w.setWith=kw,w.shuffle=S0,w.slice=_m,w.sortBy=R0,w.sortedUniq=Mm,w.sortedUniqBy=Cm,w.split=fv,w.spread=L0,w.tail=Im,w.take=Pm,w.takeRight=Om,w.takeRightWhile=Bm,w.takeWhile=Fm,w.tap=Zm,w.throttle=D0,w.thru=Fa,w.toArray=qc,w.toPairs=Jc,w.toPairsIn=Qc,w.toPath=Kv,w.toPlainObject=Kc,w.transform=qw,w.unary=N0,w.union=Lm,w.unionBy=Dm,w.unionWith=Nm,w.uniq=Um,w.uniqBy=zm,w.uniqWith=km,w.unset=Ww,w.unzip=il,w.unzipWith=Rc,w.update=Kw,w.updateWith=Hw,w.values=Di,w.valuesIn=Gw,w.without=qm,w.words=jc,w.wrap=U0,w.xor=Wm,w.xorBy=Km,w.xorWith=Hm,w.zip=Gm,w.zipObject=Ym,w.zipObjectDeep=Jm,w.zipWith=Qm,w.entries=Jc,w.entriesIn=Qc,w.extend=Hc,w.extendWith=qa,pl(w,w),w.add=Gv,w.attempt=$c,w.camelCase=Zw,w.capitalize=Zc,w.ceil=Yv,w.clamp=Yw,w.clone=k0,w.cloneDeep=W0,w.cloneDeepWith=K0,w.cloneWith=q0,w.conformsTo=H0,w.deburr=Xc,w.defaultTo=bv,w.divide=Jv,w.endsWith=Xw,w.eq=hn,w.escape=jw,w.escapeRegExp=$w,w.every=s0,w.find=u0,w.findIndex=_c,w.findKey=xw,w.findLast=l0,w.findLastIndex=Ec,w.findLastKey=_w,w.floor=Qv,w.forEach=Mc,w.forEachRight=Cc,w.forIn=Ew,w.forInRight=Sw,w.forOwn=bw,w.forOwnRight=Vw,w.get=ll,w.gt=G0,w.gte=Y0,w.has=Mw,w.hasIn=fl,w.head=bc,w.identity=Ne,w.includes=p0,w.indexOf=lm,w.inRange=Jw,w.invoke=Pw,w.isArguments=jr,w.isArray=dt,w.isArrayBuffer=J0,w.isArrayLike=Le,w.isArrayLikeObject=jt,w.isBoolean=Q0,w.isBuffer=Ar,w.isDate=Z0,w.isElement=X0,w.isEmpty=j0,w.isEqual=$0,w.isEqualWith=tw,w.isError=al,w.isFinite=ew,w.isFunction=Qn,w.isInteger=Nc,w.isLength=za,w.isMap=Uc,w.isMatch=nw,w.isMatchWith=rw,w.isNaN=iw,w.isNative=ow,w.isNil=aw,w.isNull=sw,w.isNumber=zc,w.isObject=Ht,w.isObjectLike=Jt,w.isPlainObject=Ko,w.isRegExp=ul,w.isSafeInteger=uw,w.isSet=kc,w.isString=ka,w.isSymbol=qe,w.isTypedArray=Li,w.isUndefined=lw,w.isWeakMap=fw,w.isWeakSet=cw,w.join=pm,w.kebabCase=tv,w.last=$e,w.lastIndexOf=gm,w.lowerCase=ev,w.lowerFirst=nv,w.lt=hw,w.lte=dw,w.max=Zv,w.maxBy=Xv,w.mean=jv,w.meanBy=$v,w.min=t1,w.minBy=e1,w.stubArray=ml,w.stubFalse=wl,w.stubObject=zv,w.stubString=kv,w.stubTrue=qv,w.multiply=n1,w.nth=mm,w.noConflict=Pv,w.noop=gl,w.now=Da,w.pad=rv,w.padEnd=iv,w.padStart=ov,w.parseInt=sv,w.random=Qw,w.reduce=A0,w.reduceRight=y0,w.repeat=av,w.replace=uv,w.result=Uw,w.round=r1,w.runInContext=T,w.sample=_0,w.size=b0,w.snakeCase=lv,w.some=V0,w.sortedIndex=Em,w.sortedIndexBy=Sm,w.sortedIndexOf=bm,w.sortedLastIndex=Vm,w.sortedLastIndexBy=Rm,w.sortedLastIndexOf=Tm,w.startCase=cv,w.startsWith=hv,w.subtract=i1,w.sum=o1,w.sumBy=s1,w.template=dv,w.times=Wv,w.toFinite=Zn,w.toInteger=mt,w.toLength=Wc,w.toLower=pv,w.toNumber=tn,w.toSafeInteger=pw,w.toString=It,w.toUpper=gv,w.trim=mv,w.trimEnd=wv,w.trimStart=vv,w.truncate=Av,w.unescape=yv,w.uniqueId=Hv,w.upperCase=xv,w.upperFirst=cl,w.each=Mc,w.eachRight=Cc,w.first=bc,pl(w,function(){var t={};return Tn(w,function(n,s){d.call(w.prototype,s)||(t[s]=n)}),t}(),{chain:!1}),w.VERSION=u,Re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){w[t].placeholder=w}),Re(["drop","take"],function(t,n){yt.prototype[t]=function(s){s=s===r?1:Yt(mt(s),0);var l=this.__filtered__&&!n?new yt(this):this.clone();return l.__filtered__?l.__takeCount__=Ut(s,l.__takeCount__):l.__views__.push({size:Ut(s,Pe),type:t+(l.__dir__<0?"Right":"")}),l},yt.prototype[t+"Right"]=function(s){return this.reverse()[t](s).reverse()}}),Re(["filter","map","takeWhile"],function(t,n){var s=n+1,l=s==ji||s==us;yt.prototype[t]=function(h){var v=this.clone();return v.__iteratees__.push({iteratee:at(h,3),type:s}),v.__filtered__=v.__filtered__||l,v}}),Re(["head","last"],function(t,n){var s="take"+(n?"Right":"");yt.prototype[t]=function(){return this[s](1).value()[0]}}),Re(["initial","tail"],function(t,n){var s="drop"+(n?"":"Right");yt.prototype[t]=function(){return this.__filtered__?new yt(this):this[s](1)}}),yt.prototype.compact=function(){return this.filter(Ne)},yt.prototype.find=function(t){return this.filter(t).head()},yt.prototype.findLast=function(t){return this.reverse().find(t)},yt.prototype.invokeMap=vt(function(t,n){return typeof t=="function"?new yt(this):this.map(function(s){return No(s,t,n)})}),yt.prototype.reject=function(t){return this.filter(Ua(at(t)))},yt.prototype.slice=function(t,n){t=mt(t);var s=this;return s.__filtered__&&(t>0||n<0)?new yt(s):(t<0?s=s.takeRight(-t):t&&(s=s.drop(t)),n!==r&&(n=mt(n),s=n<0?s.dropRight(-n):s.take(n-t)),s)},yt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},yt.prototype.toArray=function(){return this.take(Pe)},Tn(yt.prototype,function(t,n){var s=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),h=w[l?"take"+(n=="last"?"Right":""):n],v=l||/^find/.test(n);!h||(w.prototype[n]=function(){var E=this.__wrapped__,V=l?[1]:arguments,C=E instanceof yt,N=V[0],U=C||dt(E),K=function(At){var _t=h.apply(w,ln([At],V));return l&&Z?_t[0]:_t};U&&s&&typeof N=="function"&&N.length!=1&&(C=U=!1);var Z=this.__chain__,rt=!!this.__actions__.length,ut=v&&!Z,wt=C&&!rt;if(!v&&U){E=wt?E:new yt(this);var lt=t.apply(E,V);return lt.__actions__.push({func:Fa,args:[K],thisArg:r}),new Ze(lt,Z)}return ut&&wt?t.apply(this,V):(lt=this.thru(K),ut?l?lt.value()[0]:lt.value():lt)})}),Re(["pop","push","shift","sort","splice","unshift"],function(t){var n=o[t],s=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",l=/^(?:pop|shift)$/.test(t);w.prototype[t]=function(){var h=arguments;if(l&&!this.__chain__){var v=this.value();return n.apply(dt(v)?v:[],h)}return this[s](function(E){return n.apply(dt(E)?E:[],h)})}}),Tn(yt.prototype,function(t,n){var s=w[n];if(s){var l=s.name+"";d.call(Ii,l)||(Ii[l]=[]),Ii[l].push({name:n,func:s})}}),Ii[Ta(r,ht).name]=[{name:"wrapper",func:r}],yt.prototype.clone=yp,yt.prototype.reverse=xp,yt.prototype.value=_p,w.prototype.at=Xm,w.prototype.chain=jm,w.prototype.commit=$m,w.prototype.next=t0,w.prototype.plant=n0,w.prototype.reverse=r0,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=i0,w.prototype.first=w.prototype.head,xt&&(w.prototype[xt]=e0),w},kn=wa();bn?((bn.exports=kn)._=kn,mi._=kn):Xt._=kn}).call(Yo)})(Hl,Hl.exports);function D(e="map",i){return Af.store(e,i)}const Ny=Hl.exports.debounce(function(){try{const e=D().mapToString(!1),i=Uy(e);console.info(`Saving map...
Map size: ${i}kb`),i<5e3?localStorage.setItem("mapString",e):console.error(`Map size is too big to save! (${i}kb)`)}catch(e){console.error(e)}},500);Af.store("map",{width:14,height:12,tileSize:32,character:"X",format:"array-text",grid_enabled:!0,colors_enabled:!0,features_enabled:!1,colors:{},map:[],mapString:"",empty:" ",info:"",extra:{minRoomSize:4,maxRoomSize:8},initialized:!1,init(){D().initialized||(D().initialized=!0,localStorage.getItem("mapString")&&(D().load(localStorage.getItem("mapString"),!0,!1),D().width=Math.max(3,D().width),D().height=Math.max(3,D().height),D().format=localStorage.getItem("format")?localStorage.getItem("format"):"array-text",D().updateMapString(!1)))},save(){Ny()},setMapPoint(e,i,r){let u=D().map;u[i]||(u[i]=[]),u[i][e]=r,D().save()},switchFormat(){D().format==="text"?D().format="array-text":D().format==="array-text"?D().format="array-array":D().format="text",localStorage.setItem("format",D().format),D().updateMapString()},clear(){D().map=[],D().updateMapString(),z.play("message-pop")},load(e=!1,i=!0,r=!0){function u(c){let g=0,A=0;return c.forEach(p=>{p&&p.length>g&&(g=p.length),A++}),{width:g,height:A}}if(typeof e!="object"){const c=e||D().mapString,g=D().detectMapFormat(c);D().map=D().convertToArrayArray(g,c),D().centerCamera()}else D().map=e;if(i){const{width:c,height:g}=u(D().map);D().width=c,D().height=g,r&&D().save()}},centerCamera(){var e;(e=z.get("map")[0])==null||e.centerCamera(),z.play("message-pop")},toClipboard(){try{const e=document.createElement("textarea");e.value=D().mapToString(!1),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),z.play("message-pop")}catch(e){console.error(e)}},mapToString(e=!0){var A,p,R;const{width:i,height:r,format:u,map:c,empty:g}=D();if(e&&i*r>5e4)return"Map has been hidden due to its size but you can still export it. Current format is "+u+".";if(u==="array-array"){let I=[];for(let F=0;F<r;F++){let W=[];for(let J=0;J<i;J++)W.push(((A=c==null?void 0:c[F])==null?void 0:A[J])||g);I.push(W)}return JSON.stringify(I)}else if(u==="array-text"){let I=[];for(let F=0;F<r;F++){let W="";for(let J=0;J<i;J++)W+=((p=c==null?void 0:c[F])==null?void 0:p[J])||g;I.push(W)}return JSON.stringify(I,null,"  ")}else{let I="";for(let F=0;F<r;F++){for(let W=0;W<i;W++)I+=((R=c==null?void 0:c[F])==null?void 0:R[W])||g;I+=F<r?`
`:""}return I}},updateMapString(e=!0){D().mapString=D().mapToString(),e&&D().save()},getColor(e){return this.colors_enabled?(this.colors[e]||(this.colors[e]=[z.randi(255),z.randi(255),z.randi(255)]),this.colors[e]):[120,120,120]},detectMapFormat(e){try{let i=JSON.parse(e);if(typeof i=="object"&&i.length>0&&typeof i[0]=="object")return"array-array";if(typeof i=="object"&&i.length>0&&typeof i[0]=="string")return"array-text"}catch{return"text"}},convertToArrayArray(e,i){if(e==="array-text"){let r=[],u=JSON.parse(i);for(let c of u)r.push(c.split(""));return r}else if(e==="text"){let r=[],u=i.split(`
`);for(let c of u)r.push(c.split(""));return r[r.length-1].length===0&&r.pop(),r}return JSON.parse(i)},generateDungeon(){try{const{width:e,height:i,character:r,extra:u,empty:c}=D();let g=[];const A=Dy({width:e,height:i,minRoomSize:parseInt(u.minRoomSize),maxRoomSize:parseInt(u.maxRoomSize)});for(let p=0;p<A.length;p++){let R=[];for(let I=0;I<A[p].length;I++)A[p][I]===1?R.push(r):R.push(c);g.push(R)}z.play("message-pop"),D().load(g),D().updateMapString()}catch(e){console.error(e)}},generateMaze(){try{const{width:e,height:i,character:r,empty:u}=D();let c=[],A=new Oy(e,i).maze;for(let p=0;p<A.length;p++){let R=[];for(let I=0;I<A[p].length;I++)A[p][I].includes("door")?R.push("D"):A[p][I].includes("wall")?R.push(r):R.push(u);c[p]=R}z.play("message-pop"),D().load(c),D().updateMapString()}catch(e){console.error(e)}}});Af.start();function $o(e=z.mousePos()){return{x:Math.floor(z.toWorld(e).x/D().tileSize),y:Math.floor(z.toWorld(e).y/D().tileSize)}}function Uy(e){return(e.length/1024).toFixed(2)}function zy(){let e={x:-1,y:-1};z.onMouseDown(u=>{if(u==="left"){const{x:c,y:g}=$o(),{width:A,height:p,character:R}=D();if(e.x===c&&e.y===g)return;if(c>=A||g>=p||c<0||g<0)return;const I=z.isKeyDown("alt")||z.isKeyDown("control")||z.isKeyDown("meta");D().setMapPoint(c,g,I?" ":R),e={x:c,y:g}}}),z.onMouseRelease(u=>{u==="left"&&D().updateMapString()}),document.addEventListener("keydown",u=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;const c=u.key;c.length===1&&(D().character=c)}),z.onScroll(({x:u,y:c})=>{if(window.isTrackpad&&parseInt(u)===u&&parseInt(c)===c&&window.isTrackpad){z.camPos(z.camPos().x+u*.3,z.camPos().y+c*.3);return}const A=c<0?1:-1,p=.1;z.camScale(Math.min(2,Math.max(.7,z.camScale().x+A*p)),Math.min(2,Math.max(.7,z.camScale().y+A*p)))});let i={x:0,y:0};z.onMouseMove(({x:u,y:c})=>{z.isMouseDown("right")&&z.camPos(z.camPos().x+(i.x-u),z.camPos().y+(i.y-c)),i={x:u,y:c}});const r=5;z.onUpdate(()=>{if(z.isKeyDown("right")||z.isKeyDown("left")||z.isKeyDown("up")||z.isKeyDown("down")){let u=z.camPos();z.isKeyDown("right")&&(u.x+=r*(z.isKeyDown("shift")?3:1)),z.isKeyDown("left")&&(u.x-=r*(z.isKeyDown("shift")?3:1)),z.isKeyDown("up")&&(u.y-=r*(z.isKeyDown("shift")?3:1)),z.isKeyDown("down")&&(u.y+=r*(z.isKeyDown("shift")?3:1)),z.camPos(u.x,u.y)}})}function yr(e){return[z.text(e.text,{size:40}),z.area(),z.anchor("center"),{update(){this.isClicked()&&D("resizer")[e.action](),!D().info&&this.isHovering()?D().info=e.info:D().info===e.info&&!this.isHovering()&&(D().info=""),this.color=this.isHovering()?z.rgb(120,120,120):z.rgb(255,255,255)}}]}function ky(e){D("resizer",{extendFromTop(){const i=D().map;i.unshift([]),D().map=i,D().height+=1,D().updateMapString()},extendFromBottom(){const i=D().map;i.push([]),D().map=i,D().height+=1,D().updateMapString(),z.camPos(z.camPos().x,z.camPos().y+D().tileSize)},extendFromLeft(){const i=D().map;for(let r=0;r<i.length;r++)i[r]&&i[r].unshift(" ");D().map=i,D().width+=1,D().updateMapString()},extendFromRight(){const i=D().map;for(let r=0;r<i.length;r++)i[r]&&i[r].push(" ");D().map=i,D().width+=1,D().updateMapString(),z.camPos(z.camPos().x+D().tileSize,z.camPos().y)},shortenFromTop(){if(D().height<=3)return;const i=D().map;i.shift(),D().map=i,D().height-=1,D().updateMapString()},shortenFromBottom(){if(D().height<=3)return;D().map.pop(),D().height-=1,D().updateMapString(),z.camPos(z.camPos().x,z.camPos().y-D().tileSize)},shortenFromLeft(){var r;if(D().width<=3)return;const i=D().map;for(let u=0;u<i.length;u++)(r=i[u])==null||r.shift();D().map=i,D().width-=1,D().updateMapString()},shortenFromRight(){var r;if(D().width<=3)return;const i=D().map;for(let u=0;u<i.length;u++)(r=i[u])==null||r.pop();D().width-=1,D().updateMapString(),z.camPos(z.camPos().x-D().tileSize,z.camPos().y)}}),e.add([...yr({text:"+",info:"Extend your map from top",action:"extendFromTop"}),{update(){const{x:i,y:r}=e.worldPos();this.pos=z.vec2(i+D().width*D().tileSize/2-25,r-35)}}]),e.add([...yr({text:"-",info:"Shorten your map from top",action:"shortenFromTop"}),{update(){const{x:i,y:r}=e.worldPos();this.pos=z.vec2(i+D().width*D().tileSize/2+25,r-35)}}]),e.add([...yr({text:"+",info:"Extend your map from left",action:"extendFromLeft"}),{update(){const{x:i,y:r}=e.worldPos();this.pos=z.vec2(i-40,r+D().height*D().tileSize/2-15)}}]),e.add([...yr({text:"-",info:"Shorten your map from left",action:"shortenFromLeft"}),{update(){const{x:i,y:r}=e.worldPos();this.pos=z.vec2(i-40,r+D().height*D().tileSize/2+25)}}]),e.add([...yr({text:"+",info:"Extend your map from bottom",action:"extendFromBottom"}),{update(){const{x:i}=e.worldPos();this.pos=z.vec2(i+D().width*D().tileSize/2-25,D().height*D().tileSize+40)}}]),e.add([...yr({text:"-",info:"Shorten your map from bottom",action:"shortenFromBottom"}),{update(){const{x:i}=e.worldPos();this.pos=z.vec2(i+D().width*D().tileSize/2+25,D().height*D().tileSize+40)}}]),e.add([...yr({text:"+",info:"Extend your map from right",action:"extendFromRight"}),{update(){const{y:i}=e.worldPos();this.pos=z.vec2(D().width*D().tileSize+50,i+D().height*D().tileSize/2-15)}}]),e.add([...yr({text:"-",info:"Shorten your map from right",action:"shortenFromRight"}),{update(){const{y:i}=e.worldPos();this.pos=z.vec2(D().width*D().tileSize+50,i+D().height*D().tileSize/2+25)}}])}function qy({map:e}){ky(e),z.add(["info",z.text("",{size:20}),z.fixed(),z.color(190,190,190),z.pos(10,10),{update(){this.text=D().info}}]),z.add(["coords",z.text("",{size:20}),z.fixed(),z.color(190,190,190),z.pos(10,z.height()-30),{update(){this.text="";const{x:i,y:r}=$o();i>=0&&r>=0&&i<D().width&&r<D().height&&(this.text=i+"x"+r)}}])}function Wy(){return z.add(["map",z.pos(0,0),z.rect(0,0),z.outline(4),z.color(240,234,210),{add(){this.centerCamera()},centerCamera(){z.camPos(this.worldPos().x+D().width*D().tileSize/2+140,this.worldPos().y+D().height*D().tileSize/2)},update(){const{width:e,height:i,tileSize:r}=D();this.width=e*r,this.height=i*r},draw(){const{map:e,tileSize:i,height:r,width:u,grid_enabled:c,empty:g}=D(),{x:A,y:p}=$o(),I=new Rect(z.vec2(0),z.width(),z.height()).bbox(),F=$o(I.pos),W=$o({x:I.pos.x+I.width,y:I.pos.y+I.height});for(let H=F.y+1;H<Math.min(r,W.y);H++){const M=e[H];if(!!M)for(let Qt=F.x+1;Qt<Math.min(u,W.x);Qt++){const Q=M[Qt];if(Q&&Q!==g){const ht=D().getColor(Q);z.drawText({text:Q,size:i/1.2,width:i,height:i,pos:z.vec2(Qt*i+5,H*i+3),color:z.rgb(ht[0],ht[1],ht[2])})}}}if(c){for(let H=Math.max(1,F.x+1);H<Math.min(u,W.x+1);H++)z.drawLine({p1:z.vec2(H*i,Math.max(4,F.y*i+4)),p2:z.vec2(H*i,this.height-4),color:z.rgb(173,193,120),width:2});for(let H=Math.max(1,F.y+1);H<Math.min(r,W.y+1);H++)z.drawLine({p1:z.vec2(Math.max(4,F.x*i-i+4),H*i),p2:z.vec2(this.width-4,H*i),color:z.rgb(173,193,120),width:2})}const J=z.isKeyDown("alt")||z.isKeyDown("control")||z.isKeyDown("meta");A>=0&&A<u&&p>=0&&p<r&&z.drawRect({width:i,height:i,pos:z.vec2(A*i,p*i),color:J?z.rgb(250,50,50):z.rgb(173,193,120),opacity:.5})}}])}const Ky=Wy();qy({map:Ky});zy();
