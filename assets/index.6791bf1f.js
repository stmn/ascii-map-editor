var x1=Object.defineProperty;var _1=(e,r,i)=>r in e?x1(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i;var X=(e,r,i)=>(_1(e,typeof r!="symbol"?r+"":r,i),i);const E1=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}};E1();var Sf=Object.defineProperty,S1=(e,r,i)=>r in e?Sf(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i,y=(e,r)=>Sf(e,"name",{value:r,configurable:!0}),b1=(e,r)=>{for(var i in r)Sf(e,i,{get:r[i],enumerable:!0})},on=(e,r,i)=>(S1(e,typeof r!="symbol"?r+"":r,i),i),R1=(()=>{for(var e=new Uint8Array(128),r=0;r<64;r++)e[r<26?r+65:r<52?r+71:r<62?r-4:r*4-205]=r;return i=>{for(var a=i.length,l=new Uint8Array((a-(i[a-1]=="=")-(i[a-2]=="="))*3/4|0),h=0,p=0;h<a;){var d=e[i.charCodeAt(h++)],E=e[i.charCodeAt(h++)],S=e[i.charCodeAt(h++)],C=e[i.charCodeAt(h++)];l[p++]=d<<2|E>>4,l[p++]=E<<4|S>>2,l[p++]=S<<6|C}return l}})();function Fn(e){return e*Math.PI/180}y(Fn,"deg2rad");function Qi(e){return e*180/Math.PI}y(Qi,"rad2deg");function Or(e,r,i){return r>i?Or(e,i,r):Math.min(Math.max(e,r),i)}y(Or,"clamp");function rr(e,r,i){if(typeof e=="number"&&typeof r=="number")return e+(r-e)*i;if(e instanceof J&&r instanceof J||e instanceof Ve&&r instanceof Ve)return e.lerp(r,i);throw new Error(`Bad value for lerp(): ${e}, ${r}. Only number, Vec2 and Color is supported.`)}y(rr,"lerp");function wu(e,r,i,a,l){return a+(e-r)/(i-r)*(l-a)}y(wu,"map");function Sd(e,r,i,a,l){return Or(wu(e,r,i,a,l),a,l)}y(Sd,"mapc");var qt=class{constructor(e=0,r=e){X(this,"x",0);X(this,"y",0);this.x=e,this.y=r}static fromAngle(e){let r=Fn(e);return new qt(Math.cos(r),Math.sin(r))}clone(){return new qt(this.x,this.y)}add(...e){let r=j(...e);return new qt(this.x+r.x,this.y+r.y)}sub(...e){let r=j(...e);return new qt(this.x-r.x,this.y-r.y)}scale(...e){let r=j(...e);return new qt(this.x*r.x,this.y*r.y)}dist(...e){let r=j(...e);return this.sub(r).len()}sdist(...e){let r=j(...e);return this.sub(r).slen()}len(){return Math.sqrt(this.dot(this))}slen(){return this.dot(this)}unit(){let e=this.len();return e===0?new qt(0):this.scale(1/e)}normal(){return new qt(this.y,-this.x)}reflect(e){return this.sub(e.scale(2*this.dot(e)))}project(e){return e.scale(e.dot(this)/e.len())}reject(e){return this.sub(this.project(e))}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}angle(...e){let r=j(...e);return Qi(Math.atan2(this.y-r.y,this.x-r.x))}angleBetween(...e){let r=j(...e);return Qi(Math.atan2(this.cross(r),this.dot(r)))}lerp(e,r){return new qt(rr(this.x,e.x,r),rr(this.y,e.y,r))}slerp(e,r){let i=this.dot(e),a=this.cross(e),l=Math.atan2(a,i);return this.scale(Math.sin((1-r)*l)).add(e.scale(Math.sin(r*l))).scale(1/a)}isZero(){return this.x===0&&this.y===0}toFixed(e){return new qt(Number(this.x.toFixed(e)),Number(this.y.toFixed(e)))}transform(e){return e.multVec2(this)}eq(e){return this.x===e.x&&this.y===e.y}bbox(){return new ft(this,0,0)}toString(){return`vec2(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`}},J=qt;y(J,"Vec2"),on(J,"LEFT",new qt(-1,0)),on(J,"RIGHT",new qt(1,0)),on(J,"UP",new qt(0,-1)),on(J,"DOWN",new qt(0,1));function j(...e){if(e.length===1){if(e[0]instanceof J)return new J(e[0].x,e[0].y);if(Array.isArray(e[0])&&e[0].length===2)return new J(...e[0])}return new J(...e)}y(j,"vec2");var ct=class{constructor(e,r,i){X(this,"r",255);X(this,"g",255);X(this,"b",255);this.r=Or(e,0,255),this.g=Or(r,0,255),this.b=Or(i,0,255)}static fromArray(e){return new ct(e[0],e[1],e[2])}static fromHex(e){if(typeof e=="number")return new ct(e>>16&255,e>>8&255,e>>0&255);if(typeof e=="string"){let r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return new ct(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16))}else throw new Error("Invalid hex color format")}static fromHSL(e,r,i){if(r==0)return new ct(255*i,255*i,255*i);let a=y((S,C,L)=>(L<0&&(L+=1),L>1&&(L-=1),L<1/6?S+(C-S)*6*L:L<1/2?C:L<2/3?S+(C-S)*(2/3-L)*6:S),"hue2rgb"),l=i<.5?i*(1+r):i+r-i*r,h=2*i-l,p=a(h,l,e+1/3),d=a(h,l,e),E=a(h,l,e-1/3);return new ct(Math.round(p*255),Math.round(d*255),Math.round(E*255))}clone(){return new ct(this.r,this.g,this.b)}lighten(e){return new ct(this.r+e,this.g+e,this.b+e)}darken(e){return this.lighten(-e)}invert(){return new ct(255-this.r,255-this.g,255-this.b)}mult(e){return new ct(this.r*e.r/255,this.g*e.g/255,this.b*e.b/255)}lerp(e,r){return new ct(rr(this.r,e.r,r),rr(this.g,e.g,r),rr(this.b,e.b,r))}eq(e){return this.r===e.r&&this.g===e.g&&this.b===e.b}toString(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toHex(){return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)}},Ve=ct;y(Ve,"Color"),on(Ve,"RED",new ct(255,0,0)),on(Ve,"GREEN",new ct(0,255,0)),on(Ve,"BLUE",new ct(0,0,255)),on(Ve,"YELLOW",new ct(255,255,0)),on(Ve,"MAGENTA",new ct(255,0,255)),on(Ve,"CYAN",new ct(0,255,255)),on(Ve,"WHITE",new ct(255,255,255)),on(Ve,"BLACK",new ct(0,0,0));function De(...e){if(e.length===0)return new Ve(255,255,255);if(e.length===1){if(e[0]instanceof Ve)return e[0].clone();if(typeof e[0]=="string")return Ve.fromHex(e[0]);if(Array.isArray(e[0])&&e[0].length===3)return Ve.fromArray(e[0])}return new Ve(...e)}y(De,"rgb");var V1=y((e,r,i)=>Ve.fromHSL(e,r,i),"hsl2rgb"),lt=class{constructor(e,r,i,a){X(this,"x",0);X(this,"y",0);X(this,"w",1);X(this,"h",1);this.x=e,this.y=r,this.w=i,this.h=a}scale(e){return new lt(this.x+this.w*e.x,this.y+this.h*e.y,this.w*e.w,this.h*e.h)}pos(){return new J(this.x,this.y)}clone(){return new lt(this.x,this.y,this.w,this.h)}eq(e){return this.x===e.x&&this.y===e.y&&this.w===e.w&&this.h===e.h}toString(){return`quad(${this.x}, ${this.y}, ${this.w}, ${this.h})`}};y(lt,"Quad");function ot(e,r,i,a){return new lt(e,r,i,a)}y(ot,"quad");var ht=class{constructor(e){X(this,"m",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);e&&(this.m=e)}static translate(e){return new ht([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,0,1])}static scale(e){return new ht([e.x,0,0,0,0,e.y,0,0,0,0,1,0,0,0,0,1])}static rotateX(e){e=Fn(-e);let r=Math.cos(e),i=Math.sin(e);return new ht([1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1])}static rotateY(e){e=Fn(-e);let r=Math.cos(e),i=Math.sin(e);return new ht([r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1])}static rotateZ(e){e=Fn(-e);let r=Math.cos(e),i=Math.sin(e);return new ht([r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1])}translate(e){return this.m[12]+=this.m[0]*e.x+this.m[4]*e.y,this.m[13]+=this.m[1]*e.x+this.m[5]*e.y,this.m[14]+=this.m[2]*e.x+this.m[6]*e.y,this.m[15]+=this.m[3]*e.x+this.m[7]*e.y,this}scale(e){return this.m[0]*=e.x,this.m[4]*=e.y,this.m[1]*=e.x,this.m[5]*=e.y,this.m[2]*=e.x,this.m[6]*=e.y,this.m[3]*=e.x,this.m[7]*=e.y,this}rotate(e){e=Fn(-e);let r=Math.cos(e),i=Math.sin(e),a=this.m[0],l=this.m[1],h=this.m[4],p=this.m[5];return this.m[0]=a*r+l*i,this.m[1]=-a*i+l*r,this.m[4]=h*r+p*i,this.m[5]=-h*i+p*r,this}mult(e){let r=[];for(let i=0;i<4;i++)for(let a=0;a<4;a++)r[i*4+a]=this.m[0*4+a]*e.m[i*4+0]+this.m[1*4+a]*e.m[i*4+1]+this.m[2*4+a]*e.m[i*4+2]+this.m[3*4+a]*e.m[i*4+3];return new ht(r)}multVec2(e){return new J(e.x*this.m[0]+e.y*this.m[4]+this.m[12],e.x*this.m[1]+e.y*this.m[5]+this.m[13])}getTranslation(){return new J(this.m[12],this.m[13])}getScale(){if(this.m[0]!=0||this.m[1]!=0){let e=this.m[0]*this.m[5]-this.m[1]*this.m[4],r=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new J(r,e/r)}else if(this.m[4]!=0||this.m[5]!=0){let e=this.m[0]*this.m[5]-this.m[1]*this.m[4],r=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new J(e/r,r)}else return new J(0,0)}getRotation(){if(this.m[0]!=0||this.m[1]!=0){let e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return Qi(this.m[1]>0?Math.acos(this.m[0]/e):-Math.acos(this.m[0]/e))}else if(this.m[4]!=0||this.m[5]!=0){let e=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return Qi(Math.PI/2-(this.m[5]>0?Math.acos(-this.m[4]/e):-Math.acos(this.m[4]/e)))}else return 0}getSkew(){if(this.m[0]!=0||this.m[1]!=0){let e=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new J(Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(e*e),0)}else if(this.m[4]!=0||this.m[5]!=0){let e=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new J(0,Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(e*e))}else return new J(0,0)}invert(){let e=[],r=this.m[10]*this.m[15]-this.m[14]*this.m[11],i=this.m[9]*this.m[15]-this.m[13]*this.m[11],a=this.m[9]*this.m[14]-this.m[13]*this.m[10],l=this.m[8]*this.m[15]-this.m[12]*this.m[11],h=this.m[8]*this.m[14]-this.m[12]*this.m[10],p=this.m[8]*this.m[13]-this.m[12]*this.m[9],d=this.m[6]*this.m[15]-this.m[14]*this.m[7],E=this.m[5]*this.m[15]-this.m[13]*this.m[7],S=this.m[5]*this.m[14]-this.m[13]*this.m[6],C=this.m[4]*this.m[15]-this.m[12]*this.m[7],L=this.m[4]*this.m[14]-this.m[12]*this.m[6],z=this.m[5]*this.m[15]-this.m[13]*this.m[7],H=this.m[4]*this.m[13]-this.m[12]*this.m[5],R=this.m[6]*this.m[11]-this.m[10]*this.m[7],ue=this.m[5]*this.m[11]-this.m[9]*this.m[7],Q=this.m[5]*this.m[10]-this.m[9]*this.m[6],le=this.m[4]*this.m[11]-this.m[8]*this.m[7],_e=this.m[4]*this.m[10]-this.m[8]*this.m[6],ye=this.m[4]*this.m[9]-this.m[8]*this.m[5];e[0]=this.m[5]*r-this.m[6]*i+this.m[7]*a,e[4]=-(this.m[4]*r-this.m[6]*l+this.m[7]*h),e[8]=this.m[4]*i-this.m[5]*l+this.m[7]*p,e[12]=-(this.m[4]*a-this.m[5]*h+this.m[6]*p),e[1]=-(this.m[1]*r-this.m[2]*i+this.m[3]*a),e[5]=this.m[0]*r-this.m[2]*l+this.m[3]*h,e[9]=-(this.m[0]*i-this.m[1]*l+this.m[3]*p),e[13]=this.m[0]*a-this.m[1]*h+this.m[2]*p,e[2]=this.m[1]*d-this.m[2]*E+this.m[3]*S,e[6]=-(this.m[0]*d-this.m[2]*C+this.m[3]*L),e[10]=this.m[0]*z-this.m[1]*C+this.m[3]*H,e[14]=-(this.m[0]*S-this.m[1]*L+this.m[2]*H),e[3]=-(this.m[1]*R-this.m[2]*ue+this.m[3]*Q),e[7]=this.m[0]*R-this.m[2]*le+this.m[3]*_e,e[11]=-(this.m[0]*ue-this.m[1]*le+this.m[3]*ye),e[15]=this.m[0]*Q-this.m[1]*_e+this.m[2]*ye;let He=this.m[0]*e[0]+this.m[1]*e[4]+this.m[2]*e[8]+this.m[3]*e[12];for(let Ke=0;Ke<4;Ke++)for(let Xe=0;Xe<4;Xe++)e[Ke*4+Xe]*=1/He;return new ht(e)}clone(){return new ht([...this.m])}toString(){return this.m.toString()}};y(ht,"Mat4");function $l(e,r,i,a=Math.sin){return e+(a(i)+1)/2*(r-e)}y($l,"wave");var T1=1103515245,M1=12345,kh=2147483648,bf=class{constructor(e){X(this,"seed");this.seed=e}gen(){return this.seed=(T1*this.seed+M1)%kh,this.seed/kh}genNumber(e,r){return e+this.gen()*(r-e)}genVec2(e,r){return new J(this.genNumber(e.x,r.x),this.genNumber(e.y,r.y))}genColor(e,r){return new Ve(this.genNumber(e.r,r.r),this.genNumber(e.g,r.g),this.genNumber(e.b,r.b))}genAny(...e){if(e.length===0)return this.gen();if(e.length===1){if(typeof e[0]=="number")return this.genNumber(0,e[0]);if(e[0]instanceof J)return this.genVec2(j(0,0),e[0]);if(e[0]instanceof Ve)return this.genColor(De(0,0,0),e[0])}else if(e.length===2){if(typeof e[0]=="number"&&typeof e[1]=="number")return this.genNumber(e[0],e[1]);if(e[0]instanceof J&&e[1]instanceof J)return this.genVec2(e[0],e[1]);if(e[0]instanceof Ve&&e[1]instanceof Ve)return this.genColor(e[0],e[1])}}};y(bf,"RNG");var ef=new bf(Date.now());function bd(e){return e!=null&&(ef.seed=e),ef.seed}y(bd,"randSeed");function fo(...e){return ef.genAny(...e)}y(fo,"rand");function Rf(...e){return Math.floor(fo(...e))}y(Rf,"randi");function Rd(e){return fo()<=e}y(Rd,"chance");function Vd(e){return e[Rf(e.length)]}y(Vd,"choose");function Td(e,r){return e.pos.x+e.width>r.pos.x&&e.pos.x<r.pos.x+r.width&&e.pos.y+e.height>r.pos.y&&e.pos.y<r.pos.y+r.height}y(Td,"testRectRect");function Md(e,r){if(e.p1.x===e.p2.x&&e.p1.y===e.p2.y||r.p1.x===r.p2.x&&r.p1.y===r.p2.y)return null;let i=(r.p2.y-r.p1.y)*(e.p2.x-e.p1.x)-(r.p2.x-r.p1.x)*(e.p2.y-e.p1.y);if(i===0)return null;let a=((r.p2.x-r.p1.x)*(e.p1.y-r.p1.y)-(r.p2.y-r.p1.y)*(e.p1.x-r.p1.x))/i,l=((e.p2.x-e.p1.x)*(e.p1.y-r.p1.y)-(e.p2.y-e.p1.y)*(e.p1.x-r.p1.x))/i;return a<0||a>1||l<0||l>1?null:a}y(Md,"testLineLineT");function Yi(e,r){let i=Md(e,r);return i?j(e.p1.x+i*(e.p2.x-e.p1.x),e.p1.y+i*(e.p2.y-e.p1.y)):null}y(Yi,"testLineLine");function Cd(e,r){if(Ji(e,r.p1)||Ji(e,r.p2))return!0;let i=e.points();return!!Yi(r,new nr(i[0],i[1]))||!!Yi(r,new nr(i[1],i[2]))||!!Yi(r,new nr(i[2],i[3]))||!!Yi(r,new nr(i[3],i[0]))}y(Cd,"testRectLine");function Ji(e,r){return r.x>e.pos.x&&r.x<e.pos.x+e.width&&r.y>e.pos.y&&r.y<e.pos.y+e.height}y(Ji,"testRectPoint");function Od(e,r){let i=r.sub(e.p1),a=e.p2.sub(e.p1);if(Math.abs(i.cross(a))>Number.EPSILON)return!1;let l=i.dot(a)/a.dot(a);return l>=0&&l<=1}y(Od,"testLinePoint");function Vf(e,r){let i=e.p2.sub(e.p1),a=i.dot(i),l=e.p1.sub(r.center),h=2*i.dot(l),p=l.dot(l)-r.radius*r.radius,d=h*h-4*a*p;if(a<=Number.EPSILON||d<0)return!1;if(d==0){let E=-h/(2*a);if(E>=0&&E<=1)return!0}else{let E=(-h+Math.sqrt(d))/(2*a),S=(-h-Math.sqrt(d))/(2*a);if(E>=0&&E<=1||S>=0&&S<=1)return!0}return Ru(r,e.p1)}y(Vf,"testLineCircle");function Ru(e,r){return e.center.sdist(r)<e.radius*e.radius}y(Ru,"testCirclePoint");function Pd(e,r){let i=r.pts[r.pts.length-1];for(let a of r.pts){if(Vf(new nr(i,a),e))return!0;i=a}return Ru(e,r.pts[0])?!0:Tf(r,e.center)}y(Pd,"testCirclePolygon");function Tf(e,r){let i=!1,a=e.pts;for(let l=0,h=a.length-1;l<a.length;h=l++)a[l].y>r.y!=a[h].y>r.y&&r.x<(a[h].x-a[l].x)*(r.y-a[l].y)/(a[h].y-a[l].y)+a[l].x&&(i=!i);return i}y(Tf,"testPolygonPoint");var nr=class{constructor(e,r){X(this,"p1");X(this,"p2");this.p1=e.clone(),this.p2=r.clone()}transform(e){return new nr(e.multVec2(this.p1),e.multVec2(this.p2))}bbox(){return ft.fromPoints(this.p1,this.p2)}area(){return this.p1.dist(this.p2)}clone(){return new nr(this.p1,this.p2)}};y(nr,"Line");var ft=class{constructor(e,r,i){X(this,"pos");X(this,"width");X(this,"height");this.pos=e.clone(),this.width=r,this.height=i}static fromPoints(e,r){return new ft(e.clone(),r.x-e.x,r.y-e.y)}center(){return new J(this.pos.x+this.width/2,this.pos.y+this.height/2)}points(){return[this.pos,this.pos.add(this.width,0),this.pos.add(this.width,this.height),this.pos.add(0,this.height)]}transform(e){return new ci(this.points().map(r=>e.multVec2(r)))}bbox(){return this.clone()}area(){return this.width*this.height}clone(){return new ft(this.pos.clone(),this.width,this.height)}distToPoint(e){return Math.sqrt(this.sdistToPoint(e))}sdistToPoint(e){let r=this.pos,i=this.pos.add(this.width,this.height),a=Math.max(r.x-e.x,0,e.x-i.x),l=Math.max(r.y-e.y,0,e.y-i.y);return a*a+l*l}};y(ft,"Rect");var so=class{constructor(e,r){X(this,"center");X(this,"radius");this.center=e.clone(),this.radius=r}transform(e){return new vu(this.center,this.radius,this.radius).transform(e)}bbox(){return ft.fromPoints(this.center.sub(j(this.radius)),this.center.add(j(this.radius)))}area(){return this.radius*this.radius*Math.PI}clone(){return new so(this.center,this.radius)}};y(so,"Circle");var vu=class{constructor(e,r,i){X(this,"center");X(this,"radiusX");X(this,"radiusY");this.center=e.clone(),this.radiusX=r,this.radiusY=i}transform(e){return new vu(e.multVec2(this.center),e.m[0]*this.radiusX,e.m[5]*this.radiusY)}bbox(){return ft.fromPoints(this.center.sub(j(this.radiusX,this.radiusY)),this.center.add(j(this.radiusX,this.radiusY)))}area(){return this.radiusX*this.radiusY*Math.PI}clone(){return new vu(this.center,this.radiusX,this.radiusY)}};y(vu,"Ellipse");var ci=class{constructor(e){X(this,"pts");if(e.length<3)throw new Error("Polygons should have at least 3 vertices");this.pts=e}transform(e){return new ci(this.pts.map(r=>e.multVec2(r)))}bbox(){let e=j(Number.MAX_VALUE),r=j(-Number.MAX_VALUE);for(let i of this.pts)e.x=Math.min(e.x,i.x),r.x=Math.max(r.x,i.x),e.y=Math.min(e.y,i.y),r.y=Math.max(r.y,i.y);return ft.fromPoints(e,r)}area(){let e=0,r=this.pts.length;for(let i=0;i<r;i++){let a=this.pts[i],l=this.pts[(i+1)%r];e+=a.x*l.y*.5,e-=l.x*a.y*.5}return Math.abs(e)}clone(){return new ci(this.pts.map(e=>e.clone()))}};y(ci,"Polygon");function Id(e,r){let i=Number.MAX_VALUE,a=j(0);for(let l of[e,r])for(let h=0;h<l.pts.length;h++){let p=l.pts[h],d=l.pts[(h+1)%l.pts.length].sub(p).normal().unit(),E=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let H=0;H<e.pts.length;H++){let R=e.pts[H].dot(d);E=Math.min(E,R),S=Math.max(S,R)}let C=Number.MAX_VALUE,L=-Number.MAX_VALUE;for(let H=0;H<r.pts.length;H++){let R=r.pts[H].dot(d);C=Math.min(C,R),L=Math.max(L,R)}let z=Math.min(S,L)-Math.max(E,C);if(z<0)return null;if(z<Math.abs(i)){let H=L-E,R=C-S;i=Math.abs(H)<Math.abs(R)?H:R,a=d.scale(i)}}return a}y(Id,"sat");var ru=2.5949095,zh=1.70158+1,qh=2*Math.PI/3,Hh=2*Math.PI/4.5,uu={linear:e=>e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>zh*e*e*e-1.70158*e*e,easeOutBack:e=>1+zh*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((ru+1)*2*e-ru)/2:(Math.pow(2*e-2,2)*((ru+1)*(e*2-2)+ru)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*qh),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*qh)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Hh))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Hh)/2+1,easeInBounce:e=>1-uu.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?(1-uu.easeOutBounce(1-2*e))/2:(1+uu.easeOutBounce(2*e-1))/2},iu=uu,Au=class extends Map{constructor(...r){super(...r);X(this,"lastID");this.lastID=0}push(r){let i=this.lastID;return this.set(i,r),this.lastID++,i}pushd(r){let i=this.push(r);return()=>this.delete(i)}};y(Au,"IDList");var Mr=class{constructor(e){X(this,"paused",!1);X(this,"cancel");this.cancel=e}static join(e){let r=new Mr(()=>e.forEach(i=>i.cancel()));return Object.defineProperty(r,"paused",{get:()=>e[0].paused,set:i=>e.forEach(a=>a.paused=i)}),r.paused=!1,r}};y(Mr,"EventController");var sn=class{constructor(){X(this,"handlers",new Au)}add(e){let r=this.handlers.pushd((...a)=>{i.paused||e(...a)}),i=new Mr(r);return i}addOnce(e){let r=this.add((...i)=>{r.cancel(),e(...i)});return r}next(){return new Promise(e=>this.addOnce(e))}trigger(...e){this.handlers.forEach(r=>r(...e))}numListeners(){return this.handlers.size}};y(sn,"Event");var ai=class{constructor(){X(this,"handlers",{})}on(e,r){return this.handlers[e]||(this.handlers[e]=new sn),this.handlers[e].add(r)}onOnce(e,r){let i=this.on(e,(...a)=>{i.cancel(),r(...a)});return i}next(e){return new Promise(r=>{this.onOnce(e,(...i)=>r(i[0]))})}trigger(e,...r){this.handlers[e]&&this.handlers[e].trigger(...r)}remove(e){delete this.handlers[e]}clear(){this.handlers={}}numListeners(e){var r,i;return(i=(r=this.handlers[e])==null?void 0:r.numListeners())!=null?i:0}};y(ai,"EventHandler");function Mf(e,r){let i=typeof e,a=typeof r;if(i!==a)return!1;if(i==="object"&&a==="object"&&e!==null&&r!==null){let l=Object.keys(e),h=Object.keys(r);if(l.length!==h.length)return!1;for(let p of l){let d=e[p],E=r[p];if(!(typeof d=="function"&&typeof E=="function")&&!Mf(d,E))return!1}return!0}return e===r}y(Mf,"deepEq");function Bd(e){let r=window.atob(e),i=r.length,a=new Uint8Array(i);for(let l=0;l<i;l++)a[l]=r.charCodeAt(l);return a.buffer}y(Bd,"base64ToArrayBuffer");function Fd(e){return Bd(e.split(",")[1])}y(Fd,"dataURLToArrayBuffer");function Vu(e,r){let i=document.createElement("a");i.href=r,i.download=e,i.click()}y(Vu,"download");function Cf(e,r){Vu(e,"data:text/plain;charset=utf-8,"+r)}y(Cf,"downloadText");function Ld(e,r){Cf(e,JSON.stringify(r))}y(Ld,"downloadJSON");function tf(e,r){let i=URL.createObjectURL(r);Vu(e,i),URL.revokeObjectURL(i)}y(tf,"downloadBlob");var Wh=y(e=>e.match(/^data:\w+\/\w+;base64,.+/),"isDataURL"),C1=y(e=>e.split(".").pop(),"getExt"),O1=(()=>{let e=0;return()=>e++})(),Dd=class{constructor(e=(r,i)=>r<i){X(this,"_items");X(this,"_compareFn");this._compareFn=e,this._items=[]}insert(e){this._items.push(e),this.moveUp(this._items.length-1)}remove(){if(this._items.length===0)return null;let e=this._items[0],r=this._items.pop();return this._items.length!==0&&(this._items[0]=r,this.moveDown(0)),e}clear(){this._items.splice(0,this._items.length)}moveUp(e){for(;e>0;){let r=Math.floor((e-1)/2);if(!this._compareFn(this._items[e],this._items[r])&&this._items[e]>=this._items[r])break;this.swap(e,r),e=r}}moveDown(e){for(;e<Math.floor(this._items.length/2);){let r=2*e+1;if(r<this._items.length-1&&!this._compareFn(this._items[r],this._items[r+1])&&++r,this._compareFn(this._items[e],this._items[r]))break;this.swap(e,r),e=r}}swap(e,r){[this._items[e],this._items[r]]=[this._items[r],this._items[e]]}get length(){return this._items.length}};y(Dd,"BinaryHeap");var Nd=class{constructor(){X(this,"dts",[]);X(this,"timer",0);X(this,"fps",0)}tick(e){this.dts.push(e),this.timer+=e,this.timer>=1&&(this.timer=0,this.fps=Math.round(1/(this.dts.reduce((r,i)=>r+i)/this.dts.length)),this.dts=[])}};y(Nd,"FPSCounter");var lu=class{constructor(e,r){X(this,"time");X(this,"action");X(this,"finished",!1);X(this,"paused",!1);this.time=e,this.action=r}tick(e){return this.finished||this.paused?!1:(this.time-=e,this.time<=0?(this.action(),this.finished=!0,this.time=0,!0):!1)}reset(e){this.time=e,this.finished=!1}};y(lu,"Timer");var Kh={"Joy-Con L+R (STANDARD GAMEPAD Vendor: 057e Product: 200e)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},"Joy-Con (L) (STANDARD GAMEPAD Vendor: 057e Product: 2006)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"select",10:"lstick",16:"start"},sticks:{left:{x:0,y:1}}},"Joy-Con (R) (STANDARD GAMEPAD Vendor: 057e Product: 2007)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"start",10:"lstick",16:"select"},sticks:{left:{x:0,y:1}}},"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},default:{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}}},P1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA1CAYAAADyMeOEAAAAAXNSR0IArs4c6QAAAoVJREFUaIHdm7txwkAQhheGAqACiCHzOKQDQrqgILpwSAeEDBnEUAF0gCMxZ7G72qce/mec2Lpf9+3unaS78wgSNZ8uX5729+d1FNWXUuGmXlBOUUEIMckEpeQJgBu6C+BSFngztBR2vd+ovY+7g+p6LbgaWgJrAeUkDYIUXgXdBBwNi6kpABJwMTQH3AZsXRR8GHTfgEth8E3gjdAUcNewpbTgY85sCMCUuOokozE0YM0YRzM9NGAAXd8+omAF5h4lnmBRvpSnZHyLoLEbaN+aKB9KWv/KWw0tAbbANnlG+UvB2dm77NxxdwgBpjrF/d7rW9cbmpvio2A5z8iAYpVU8pGZlo6/2+MSco2lHfd3rv9jAP038e1xef9o2mjvYb2OqpqKE81028/jeietlSEVO5FRWsxWsJit1G3aFpW8iWe5RwpiCZAk25QvV6nz6fIlynRGuTd5WqpJ4guAlDfVKBK87hXljflgv1ON6fV+4+5gVlA17SfeG0heKqQd4l4jI/wrmaA9N9R4ar+wpHJDZyrrfcH0nB66PqAzPi76pn+faSyJk/vzOorYhGurQrzj/P68jtBMawHaHBIR9xoD5O34dy0qQOSYHvqExq2TpT2nf76+w7y251OYF0CRaU+J920TwLUa6inx6OxE6g80lu2ux7Y2eJLF/rCXE6zEPdnenk9o+4ih9AEdnW2q81HXl5LuU6OTl2fXUhqganbXAGq3g6jJOWV/OnoesO6YqqEB/GdNsjf7uHtwj2DzmRNpp7iOZfm6D9oAxB6Yi1gC4oIYeo4MIPdopEQRB+cAko5J1tW386HpB2Kz1eop4Epdwls/kgZ1sh8gZsEjdcWkr//D8Qu3Z3l5Nl1NtAAAAABJRU5ErkJggg==",I1={};b1(I1,{default:()=>Ud});var Ud=R1("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L5QNSqT5iiySS9Ja2SV//5ME0ak//+4KgAAABgQBAADAMDgYCAEgCteQ0fZH6+ICXA357+MPfhR/+ywRf/U///LVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5JknQAFoWhGLm5gBClBmT3GiAAAAAGkHAAAIAAANIOAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),B1="data:image/png;base64,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",F1="data:image/png;base64,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",L1="3000.0.0-beta.2",Gh={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"," ":"space"},D1=new Set([" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab"]),Yh=["left","middle","right","back","forward"],Jh=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",su="topleft",jh=64,N1="monospace",ou="monospace",U1=36,Qh=64,Zh=256,Xh=2048,$h=2048,ed=2048,td=2048,nd=.1,k1=64,rd="nearest",z1=1,kd=[{name:"a_pos",size:2},{name:"a_uv",size:2},{name:"a_color",size:4}],fu=kd.reduce((e,r)=>e+r.size,0),zd=2048,id=zd*4*fu,sd=zd*6,q1=`
attribute vec2 a_pos;
attribute vec2 a_uv;
attribute vec4 a_color;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

vec4 def_vert() {
	return vec4(a_pos, 0.0, 1.0);
}

{{user}}

void main() {
	vec4 pos = vert(a_pos, a_uv, a_color);
	v_pos = a_pos;
	v_uv = a_uv;
	v_color = a_color;
	gl_Position = pos;
}
`,H1=`
precision mediump float;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

uniform sampler2D u_tex;

vec4 def_frag() {
	return v_color * texture2D(u_tex, v_uv);
}

{{user}}

void main() {
	gl_FragColor = frag(v_pos, v_uv, v_color, u_tex);
	if (gl_FragColor.a == 0.0) {
		discard;
	}
}
`,zl=`
vec4 vert(vec2 pos, vec2 uv, vec4 color) {
	return def_vert();
}
`,ql=`
vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
	return def_frag();
}
`,W1=new Set(["id","require"]),K1=new Set(["add","update","draw","destroy","inspect","drawInspect"]);function qd(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}y(qd,"enterFullscreen");function Hd(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullScreen&&document.webkitExitFullScreen()}y(Hd,"exitFullscreen");function Wd(){return document.fullscreenElement||document.webkitFullscreenElement}y(Wd,"getFullscreenElement");function ui(e){switch(e){case"topleft":return new J(-1,-1);case"top":return new J(0,-1);case"topright":return new J(1,-1);case"left":return new J(-1,0);case"center":return new J(0,0);case"right":return new J(1,0);case"botleft":return new J(-1,1);case"bot":return new J(0,1);case"botright":return new J(1,1);default:return e}}y(ui,"anchorPt");function Kd(e){switch(e){case"left":return 0;case"center":return .5;case"right":return 1;default:return 0}}y(Kd,"alignPt");function Gd(e){return e.createBuffer(1,1,44100)}y(Gd,"createEmptyAudioBuffer");var Tr=class{constructor(){X(this,"pressed",new Set([]));X(this,"pressedRepeat",new Set([]));X(this,"released",new Set([]));X(this,"down",new Set([]))}update(){this.pressed.clear(),this.released.clear(),this.pressedRepeat.clear()}press(e){this.pressed.add(e),this.pressedRepeat.add(e),this.down.add(e)}pressRepeat(e){this.pressedRepeat.add(e)}release(e){this.down.delete(e),this.pressed.delete(e),this.released.add(e)}};y(Tr,"ButtonState");var G1=y((e={})=>{let r=[],i=(()=>{var te,re,we;let s=(te=e.root)!=null?te:document.body;s===document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.margin="0px",document.documentElement.style.width="100%",document.documentElement.style.height="100%");let u=(re=e.canvas)!=null?re:(()=>{let Pe=document.createElement("canvas");return s.appendChild(Pe),Pe})(),c=(we=e.scale)!=null?we:1,w=e.width&&e.height&&!e.stretch&&!e.letterbox;w?(u.width=e.width*c,u.height=e.height*c):(u.width=u.parentElement.offsetWidth,u.height=u.parentElement.offsetHeight);let x=u.width,m=u.height,V=e.pixelDensity||window.devicePixelRatio;u.width*=V,u.height*=V;let I=["outline: none","cursor: default"];w?(I.push(`width: ${x}px`),I.push(`height: ${m}px`)):(I.push("width: 100%"),I.push("height: 100%")),e.crisp&&(I.push("image-rendering: pixelated"),I.push("image-rendering: crisp-edges")),u.style.cssText=I.join(";"),u.tabIndex=0;let _=document.createElement("canvas");_.width=Zh,_.height=Zh;let T=_.getContext("2d",{willReadFrequently:!0}),B=u.offsetWidth,K=u.offsetHeight;return new ResizeObserver(Pe=>{for(let Oe of Pe)if(Oe.target===u){if(B===u.offsetWidth&&K===u.offsetHeight)return;B=u.offsetWidth,K=u.offsetHeight,u.width=B*V,u.height=K*V,d.frameBuffer.free(),d.frameBuffer=new p(a.drawingBufferWidth,a.drawingBufferHeight),ws(),R.ev.onOnce("frameEnd",()=>{R.ev.trigger("resize")})}}).observe(u),{canvas:u,pixelDensity:V,fontCacheCanvas:_,fontCacheCtx:T,keyState:new Tr,mouseState:new Tr,virtualButtonState:new Tr,gamepadButtonState:new Tr,charInputted:[],isMouseMoved:!1,mouseStarted:!1,mousePos:new J(0,0),mouseDeltaPos:new J(0,0),time:0,realTime:0,skipTime:!1,dt:0,numFrames:0,isTouchScreen:"ontouchstart"in window||navigator.maxTouchPoints>0,loopID:null,stopped:!1,paused:!1,fpsCounter:new Nd}})(),a=i.canvas.getContext("webgl",{antialias:!0,depth:!0,stencil:!0,alpha:!0,preserveDrawingBuffer:!0});class l{constructor(u,c,w={}){X(this,"src",null);X(this,"glTex");X(this,"width");X(this,"height");this.glTex=a.createTexture(),r.push(()=>this.free()),this.bind(),u&&c&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,u,c,0,a.RGBA,a.UNSIGNED_BYTE,null),this.width=u,this.height=c;let x=(()=>{var V;switch((V=w.filter)!=null?V:e.texFilter){case"linear":return a.LINEAR;case"nearest":return a.NEAREST;default:return a.NEAREST}})(),m=(()=>{switch(w.wrap){case"repeat":return a.REPEAT;case"clampToEdge":return a.CLAMP_TO_EDGE;default:return a.CLAMP_TO_EDGE}})();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,x),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,x),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,m),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,m),this.unbind()}static fromImage(u,c={}){let w=new l(0,0,c);return w.bind(),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,u),w.width=u.width,w.height=u.height,w.unbind(),w.src=u,w}update(u,c=0,w=0){this.bind(),a.texSubImage2D(a.TEXTURE_2D,0,c,w,a.RGBA,a.UNSIGNED_BYTE,u),this.unbind()}bind(){a.bindTexture(a.TEXTURE_2D,this.glTex)}unbind(){a.bindTexture(a.TEXTURE_2D,null)}free(){a.deleteTexture(this.glTex)}}y(l,"Texture");class h{constructor(u,c){X(this,"tex");X(this,"canvas");X(this,"ctx");X(this,"x",0);X(this,"y",0);X(this,"curHeight",0);this.canvas=document.createElement("canvas"),this.canvas.width=u,this.canvas.height=c,this.tex=l.fromImage(this.canvas),this.ctx=this.canvas.getContext("2d")}add(u){if(u.width>this.canvas.width||u.height>this.canvas.height)throw new Error(`Texture size (${u.width} x ${u.height}) exceeds limit (${this.canvas.width} x ${this.canvas.height})`);this.x+u.width>this.canvas.width&&(this.x=0,this.y+=this.curHeight,this.curHeight=0),this.y+u.height>this.canvas.height&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.tex=l.fromImage(this.canvas),this.x=0,this.y=0,this.curHeight=0);let c=new J(this.x,this.y);return this.x+=u.width,u.height>this.curHeight&&(this.curHeight=u.height),u instanceof ImageData?this.ctx.putImageData(u,c.x,c.y):this.ctx.drawImage(u,c.x,c.y),this.tex.update(this.canvas),[this.tex,new lt(c.x/this.canvas.width,c.y/this.canvas.height,u.width/this.canvas.width,u.height/this.canvas.height)]}}y(h,"TexPacker");class p{constructor(u,c,w={}){X(this,"tex");X(this,"glFrameBuffer");X(this,"glRenderBuffer");this.tex=new l(u,c,w),this.glFrameBuffer=a.createFramebuffer(),this.glRenderBuffer=a.createRenderbuffer(),r.push(()=>this.free()),this.bind(),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,u,c),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.tex.glTex,0),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.glRenderBuffer),this.unbind()}bind(){a.bindFramebuffer(a.FRAMEBUFFER,this.glFrameBuffer),a.bindRenderbuffer(a.RENDERBUFFER,this.glRenderBuffer)}unbind(){a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindRenderbuffer(a.RENDERBUFFER,null)}free(){a.deleteFramebuffer(this.glFrameBuffer),a.deleteRenderbuffer(this.glRenderBuffer)}}y(p,"FrameBuffer");let d=(()=>{var _;let s=Nn(zl,ql),u=l.fromImage(new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1)),c=new p(a.drawingBufferWidth,a.drawingBufferHeight),w=null,x=1;e.background&&(w=Ve.fromArray(e.background),x=(_=e.background[3])!=null?_:1,a.clearColor(w.r/255,w.g/255,w.b/255,x)),a.enable(a.BLEND),a.enable(a.SCISSOR_TEST),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);let m=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,m),a.bufferData(a.ARRAY_BUFFER,id*4,a.DYNAMIC_DRAW),kd.reduce((T,B,K)=>(a.vertexAttribPointer(K,B.size,a.FLOAT,!1,fu*4,T),a.enableVertexAttribArray(K),T+B.size*4),0),a.bindBuffer(a.ARRAY_BUFFER,null);let V=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,V),a.bufferData(a.ELEMENT_ARRAY_BUFFER,sd*4,a.DYNAMIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);let I=l.fromImage(new ImageData(new Uint8ClampedArray([128,128,128,255,190,190,190,255,190,190,190,255,128,128,128,255]),2,2),{wrap:"repeat",filter:"nearest"});return{drawCalls:0,lastDrawCalls:0,defShader:s,curShader:s,frameBuffer:c,postShader:null,postShaderUniform:null,defTex:u,curTex:u,curUniform:{},vbuf:m,ibuf:V,vqueue:[],iqueue:[],transform:new ht,transformStack:[],bgTex:I,bgColor:w,bgAlpha:x,width:e.width,height:e.height,viewport:{x:0,y:0,width:a.drawingBufferWidth,height:a.drawingBufferHeight}}})();class E{constructor(u,c,w={},x=null){X(this,"tex");X(this,"frames",[new lt(0,0,1,1)]);X(this,"anims",{});X(this,"slice9",null);this.tex=u,c&&(this.frames=c),this.anims=w,this.slice9=x}static from(u,c={}){return typeof u=="string"?E.fromURL(u,c):Promise.resolve(E.fromImage(u,c))}static fromImage(u,c={}){let[w,x]=H.packer.add(u),m=c.frames?c.frames.map(V=>new lt(x.x+V.x*x.w,x.y+V.y*x.h,V.w*x.w,V.h*x.h)):ss(c.sliceX||1,c.sliceY||1,x.x,x.y,x.w,x.h);return new E(w,m,c.anims,c.slice9)}static fromURL(u,c={}){return Xe(u).then(w=>E.fromImage(w,c))}}y(E,"SpriteData");class S{constructor(u){X(this,"buf");this.buf=u}static fromArrayBuffer(u){return new Promise((c,w)=>C.ctx.decodeAudioData(u,c,w)).then(c=>new S(c))}static fromURL(u){return Wh(u)?S.fromArrayBuffer(Fd(u)):Ke(u).then(c=>S.fromArrayBuffer(c))}}y(S,"SoundData");let C=(()=>{let s=new(window.AudioContext||window.webkitAudioContext),u=s.createGain();u.connect(s.destination);let c=new S(Gd(s));return s.decodeAudioData(Ud.buffer.slice(0)).then(w=>{c.buf=w}).catch(w=>{console.error("Failed to load burp: ",w)}),{ctx:s,masterNode:u,burpSnd:c}})();class L{constructor(u){X(this,"loaded",!1);X(this,"data",null);X(this,"error",null);X(this,"onLoadEvents",new sn);X(this,"onErrorEvents",new sn);X(this,"onFinishEvents",new sn);u.then(c=>{this.data=c,this.onLoadEvents.trigger(c)}).catch(c=>{if(this.error=c,this.onErrorEvents.numListeners()>0)this.onErrorEvents.trigger(c);else throw c}).finally(()=>{this.onFinishEvents.trigger(),this.loaded=!0})}static loaded(u){let c=new L(Promise.resolve(u));return c.data=u,c.loaded=!0,c}onLoad(u){return this.onLoadEvents.add(u),this}onError(u){return this.onErrorEvents.add(u),this}onFinish(u){return this.onFinishEvents.add(u),this}then(u){return this.onLoad(u)}catch(u){return this.onError(u)}finally(u){return this.onFinish(u)}}y(L,"Asset");class z{constructor(){X(this,"assets",new Map);X(this,"lastUID",0)}add(u,c){let w=u!=null?u:this.lastUID+++"",x=new L(c);return this.assets.set(w,x),x}addLoaded(u,c){let w=u!=null?u:this.lastUID+++"",x=L.loaded(c);return this.assets.set(w,x),x}get(u){return this.assets.get(u)}progress(){if(this.assets.size===0)return 1;let u=0;return this.assets.forEach(c=>{c.loaded&&u++}),u/this.assets.size}}y(z,"AssetBucket");let H={urlPrefix:"",sprites:new z,fonts:new z,bitmapFonts:new z,sounds:new z,shaders:new z,custom:new z,packer:new h(ed,td),loaded:!1},R={ev:new ai,objEvents:new ai,root:Yr([]),gravity:0,scenes:{},logs:[],cam:{pos:null,scale:new J(1),angle:0,shake:0,transform:new ht}};function ue(s){return H.custom.add(null,s)}y(ue,"load");function Q(){let s=[H.sprites,H.sounds,H.shaders,H.fonts,H.bitmapFonts,H.custom];return s.reduce((u,c)=>u+c.progress(),0)/s.length}y(Q,"loadProgress");function le(s){return s!==void 0&&(H.urlPrefix=s),H.urlPrefix}y(le,"loadRoot");function _e(s){let u=H.urlPrefix+s;return fetch(u).then(c=>{if(!c.ok)throw new Error(`Failed to fetch ${u}`);return c})}y(_e,"fetchURL");function ye(s){return _e(s).then(u=>u.json())}y(ye,"fetchJSON");function He(s){return _e(s).then(u=>u.text())}y(He,"fetchText");function Ke(s){return _e(s).then(u=>u.arrayBuffer())}y(Ke,"fetchArrayBuffer");function Xe(s){let u=new Image;return u.crossOrigin="anonymous",u.src=Wh(s)?s:H.urlPrefix+s,new Promise((c,w)=>{u.onload=()=>c(u),u.onerror=()=>w(new Error(`Failed to load image from "${s}"`))})}y(Xe,"loadImg");class Vt{constructor(u,c={}){X(this,"fontface");X(this,"outline");X(this,"filter");var w,x;this.fontface=u,this.outline=(w=c.outline)!=null?w:0,this.filter=(x=c.filter)!=null?x:rd}}y(Vt,"FontData");function or(s,u,c={}){let w=new FontFace(s,typeof u=="string"?`url(${u})`:u);return document.fonts.add(w),H.fonts.add(s,w.load().catch(x=>{throw new Error(`Failed to load font from "${u}": ${x}`)}).then(x=>new Vt(x,c)))}y(or,"loadFont");function gi(s,u,c,w,x={}){return H.bitmapFonts.add(s,Xe(u).then(m=>{var V;return ds(l.fromImage(m,x),c,w,(V=x.chars)!=null?V:Jh)}))}y(gi,"loadBitmapFont");function ss(s=1,u=1,c=0,w=0,x=1,m=1){let V=[],I=x/s,_=m/u;for(let T=0;T<u;T++)for(let B=0;B<s;B++)V.push(new lt(c+B*I,w+T*_,I,_));return V}y(ss,"slice");function os(s,u){return ue(typeof u=="string"?new Promise((c,w)=>{ye(u).then(x=>{os(s,x).then(c).catch(w)})}):E.from(s).then(c=>{let w={};for(let x in u){let m=u[x],V=c.frames[0],I=ed*V.w,_=td*V.h,T=m.frames?m.frames.map(K=>new lt(V.x+(m.x+K.x)/I*V.w,V.y+(m.y+K.y)/_*V.h,K.w/I*V.w,K.h/_*V.h)):ss(m.sliceX||1,m.sliceY||1,V.x+m.x/I*V.w,V.y+m.y/_*V.h,m.width/I*V.w,m.height/_*V.h),B=new E(c.tex,T,m.anims);H.sprites.addLoaded(x,B),w[x]=B}return w}))}y(os,"loadSpriteAtlas");function as(s,u={}){let c=document.createElement("canvas"),w=s[0].width,x=s[0].height;c.width=w*s.length,c.height=x;let m=c.getContext("2d");s.forEach((I,_)=>{I instanceof ImageData?m.putImageData(I,_*w,0):m.drawImage(I,_*w,0)});let V=m.getImageData(0,0,s.length*w,x);return E.fromImage(V,{...u,sliceX:s.length,sliceY:1})}y(as,"createSpriteSheet");function ar(s,u,c={sliceX:1,sliceY:1,anims:{}}){return Array.isArray(u)?u.some(w=>typeof w=="string")?H.sprites.add(s,Promise.all(u.map(w=>typeof w=="string"?Xe(w):Promise.resolve(w))).then(w=>as(w,c))):H.sprites.addLoaded(s,as(u,c)):typeof u=="string"?H.sprites.add(s,E.from(u,c)):H.sprites.addLoaded(s,E.fromImage(u,c))}y(ar,"loadSprite");function us(s,u){return H.sprites.add(s,new Promise(async c=>{let w=typeof u=="string"?await ye(u):u,x=await Promise.all(w.frames.map(Xe)),m=document.createElement("canvas");m.width=w.width,m.height=w.height*w.frames.length;let V=m.getContext("2d");x.forEach((_,T)=>{V.drawImage(_,0,T*w.height)});let I=await ar(null,m,{sliceY:w.frames.length,anims:w.anims});c(I)}))}y(us,"loadPedit");function xo(s,u,c){typeof u=="string"&&!c&&(c=u.replace(new RegExp(`${C1(u)}$`),"json"));let w=typeof c=="string"?ye(c):Promise.resolve(c);return H.sprites.add(s,w.then(x=>{let m=x.meta.size,V=x.frames.map(_=>new lt(_.frame.x/m.w,_.frame.y/m.h,_.frame.w/m.w,_.frame.h/m.h)),I={};for(let _ of x.meta.frameTags)_.from===_.to?I[_.name]=_.from:I[_.name]={from:_.from,to:_.to,speed:10,loop:!0,pingpong:_.direction==="pingpong"};return E.from(u,{frames:V,anims:I})}))}y(xo,"loadAseprite");function _o(s,u,c){return H.shaders.addLoaded(s,Nn(u,c))}y(_o,"loadShader");function An(s,u,c){let w=y(m=>m?He(m):Promise.resolve(null),"resolveUrl"),x=Promise.all([w(u),w(c)]).then(([m,V])=>Nn(m,V));return H.shaders.add(s,x)}y(An,"loadShaderURL");function an(s,u){return H.sounds.add(s,typeof u=="string"?S.fromURL(u):S.fromArrayBuffer(u))}y(an,"loadSound");function Eo(s="bean"){return ar(s,P1)}y(Eo,"loadBean");function ur(s){return H.sprites.get(s)}y(ur,"getSprite");function Ft(s){return H.sounds.get(s)}y(Ft,"getSound");function ls(s){return H.fonts.get(s)}y(ls,"getFont");function fs(s){return H.bitmapFonts.get(s)}y(fs,"getBitmapFont");function cs(s){return H.shaders.get(s)}y(cs,"getShader");function yn(s){if(typeof s=="string"){let u=ur(s);if(u)return u;if(Q()<1)return null;throw new Error(`Sprite not found: ${s}`)}else{if(s instanceof E)return L.loaded(s);if(s instanceof L)return s;throw new Error(`Invalid sprite: ${s}`)}}y(yn,"resolveSprite");function Lr(s){var u;if(typeof s=="string"){let c=Ft(s);if(c)return(u=c.data)!=null?u:c;if(Q()<1)return null;throw new Error(`Sound not found: ${s}`)}else{if(s instanceof S)return s;if(s instanceof L)return s.data?s.data:s;throw new Error(`Invalid sound: ${s}`)}}y(Lr,"resolveSound");function So(s){var u;if(!s)return d.defShader;if(typeof s=="string"){let c=cs(s);if(c)return(u=c.data)!=null?u:c;if(Q()<1)return null;throw new Error(`Shader not found: ${s}`)}else if(s instanceof L)return s.data?s.data:s;return s}y(So,"resolveShader");function Dn(s){var u,c,w;if(!s)return Dn((u=e.font)!=null?u:N1);if(typeof s=="string"){let x=fs(s),m=ls(s);if(x)return(c=x.data)!=null?c:x;if(m)return(w=m.data)!=null?w:m;if(document.fonts.check(`${Qh}px ${s}`))return s;if(Q()<1)return null;throw new Error(`Font not found: ${s}`)}else if(s instanceof L)return s.data?s.data:s;return s}y(Dn,"resolveFont");function lr(s){return s!==void 0&&(C.masterNode.gain.value=s),C.masterNode.gain.value}y(lr,"volume");function hs(s,u={}){var Pe,Oe,it,Ue,je;let c=Lr(s),w=C.ctx,x=(Pe=u.paused)!=null?Pe:!1,m=w.createBufferSource(),V=new sn,I=w.createGain(),_=(Oe=u.seek)!=null?Oe:0,T=0,B=0,K=!1;m.loop=Boolean(u.loop),m.detune.value=(it=u.detune)!=null?it:0,m.playbackRate.value=(Ue=u.speed)!=null?Ue:1,m.connect(I),m.onended=()=>{var se;re()>=((se=m.buffer)==null?void 0:se.duration)&&V.trigger()},I.connect(C.masterNode),I.gain.value=(je=u.volume)!=null?je:1;let te=y(se=>{m.buffer=se.buf,x||(T=w.currentTime,m.start(0,_),K=!0)},"start");c instanceof L?c.onLoad(te):c instanceof S&&te(c);let re=y(()=>{if(!m.buffer)return 0;let se=x?B-T:w.currentTime-T,be=m.buffer.duration;return m.loop?se%be:Math.min(se,be)},"getTime"),we=y(se=>{let be=w.createBufferSource();return be.buffer=se.buffer,be.loop=se.loop,be.playbackRate.value=se.playbackRate.value,be.detune.value=se.detune.value,be.onended=se.onended,be.connect(I),be},"cloneNode");return{set paused(se){if(x!==se)if(x=se,se)K&&(m.stop(),K=!1),B=w.currentTime;else{m=we(m);let be=B-T;m.start(0,be),K=!0,T=w.currentTime-be,B=0}},get paused(){return x},play(se=0){this.seek(se),this.paused=!1},seek(se){var be;(be=m.buffer)!=null&&be.duration&&(se>m.buffer.duration||(x?(m=we(m),T=B-se):(m.stop(),m=we(m),T=w.currentTime-se,m.start(0,se),K=!0,B=0)))},set speed(se){m.playbackRate.value=se},get speed(){return m.playbackRate.value},set detune(se){m.detune.value=se},get detune(){return m.detune.value},set volume(se){I.gain.value=se},get volume(){return I.gain.value},set loop(se){m.loop=se},get loop(){return m.loop},duration(){var se,be;return(be=(se=m.buffer)==null?void 0:se.duration)!=null?be:0},time(){return re()%this.duration()},onEnd(se){return V.add(se)},then(se){return this.onEnd(se)}}}y(hs,"play");function fr(s){return hs(C.burpSnd,s)}y(fr,"burp");function Nn(s=zl,u=ql){let c=q1.replace("{{user}}",s!=null?s:zl),w=H1.replace("{{user}}",u!=null?u:ql),x=a.createShader(a.VERTEX_SHADER),m=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(x,c),a.shaderSource(m,w),a.compileShader(x),a.compileShader(m);let V=a.createProgram();if(r.push(()=>a.deleteProgram(V)),a.attachShader(V,x),a.attachShader(V,m),a.bindAttribLocation(V,0,"a_pos"),a.bindAttribLocation(V,1,"a_uv"),a.bindAttribLocation(V,2,"a_color"),a.linkProgram(V),!a.getProgramParameter(V,a.LINK_STATUS)){let I=y(K=>{let te=/^ERROR:\s0:(?<line>\d+):\s(?<msg>.+)/,re=K.match(te);return{line:Number(re.groups.line),msg:re.groups.msg.replace(/\n\0$/,"")}},"formatShaderError"),_=a.getShaderInfoLog(x),T=a.getShaderInfoLog(m),B="";if(_){let K=I(_);B+=`Vertex shader line ${K.line-14}: ${K.msg}`}if(T){let K=I(T);B+=`Fragment shader line ${K.line-14}: ${K.msg}`}throw new Error(B)}return a.deleteShader(x),a.deleteShader(m),{bind(){a.useProgram(V)},unbind(){a.useProgram(null)},free(){a.deleteProgram(V)},send(I){for(let _ in I){let T=I[_],B=a.getUniformLocation(V,_);typeof T=="number"?a.uniform1f(B,T):T instanceof ht?a.uniformMatrix4fv(B,!1,new Float32Array(T.m)):T instanceof Ve?a.uniform3f(B,T.r,T.g,T.b):T instanceof J&&a.uniform2f(B,T.x,T.y)}}}}y(Nn,"makeShader");function ds(s,u,c,w){let x=s.width/u,m={},V=w.split("").entries();for(let[I,_]of V)m[_]=new lt(I%x*u,Math.floor(I/x)*c,u,c);return{tex:s,map:m,size:c}}y(ds,"makeFont");function _t(s,u,c,w=d.defTex,x=d.defShader,m={}){let V=So(x);if(!V||V instanceof L)return;(w!==d.curTex||V!==d.curShader||!Mf(d.curUniform,m)||d.vqueue.length+s.length*fu>id||d.iqueue.length+u.length>sd)&&Et();let I=c?d.transform:R.cam.transform.mult(d.transform);for(let _ of s){let T=Ro(I.multVec2(_.pos));d.vqueue.push(T.x,T.y,_.uv.x,_.uv.y,_.color.r/255,_.color.g/255,_.color.b/255,_.opacity)}for(let _ of u)d.iqueue.push(_+d.vqueue.length/fu-s.length);d.curTex=w,d.curShader=V,d.curUniform=m}y(_t,"drawRaw");function Et(){!d.curTex||!d.curShader||d.vqueue.length===0||d.iqueue.length===0||(a.bindBuffer(a.ARRAY_BUFFER,d.vbuf),a.bufferSubData(a.ARRAY_BUFFER,0,new Float32Array(d.vqueue)),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d.ibuf),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(d.iqueue)),d.curShader.bind(),d.curShader.send(d.curUniform),d.curTex.bind(),a.drawElements(a.TRIANGLES,d.iqueue.length,a.UNSIGNED_SHORT,0),d.curTex.unbind(),d.curShader.unbind(),a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),d.vqueue.length=0,d.iqueue.length=0,d.drawCalls++)}y(Et,"flush");function bo(){a.clear(a.COLOR_BUFFER_BIT),d.frameBuffer.bind(),a.clear(a.COLOR_BUFFER_BIT),d.bgColor||Lt(()=>{Un({width:rt(),height:We(),quad:new lt(0,0,rt()/jh,We()/jh),tex:d.bgTex,fixed:!0})}),d.drawCalls=0,d.transformStack.length=0,d.transform=new ht}y(bo,"frameStart");function Jt(s,u){d.postShader=s,d.postShaderUniform=u!=null?u:null}y(Jt,"usePostEffect");function ps(){Et(),d.frameBuffer.unbind(),Lt(()=>{un({flipY:!0,tex:d.frameBuffer.tex,scale:new J(1/i.pixelDensity),shader:d.postShader,uniform:typeof d.postShaderUniform=="function"?d.postShaderUniform():d.postShaderUniform,fixed:!0})}),Et(),d.lastDrawCalls=d.drawCalls}y(ps,"frameEnd");function Ro(s){return new J(s.x/rt()*2-1,-s.y/We()*2+1)}y(Ro,"screen2ndc");function cr(s){d.transform=s.clone()}y(cr,"pushMatrix");function Te(...s){if(s[0]===void 0)return;let u=j(...s);u.x===0&&u.y===0||d.transform.translate(u)}y(Te,"pushTranslate");function Ht(...s){if(s[0]===void 0)return;let u=j(...s);u.x===1&&u.y===1||d.transform.scale(u)}y(Ht,"pushScale");function jt(s){s&&d.transform.rotate(s)}y(jt,"pushRotate");function Tt(){d.transformStack.push(d.transform.clone())}y(Tt,"pushTransform");function nt(){d.transformStack.length>0&&(d.transform=d.transformStack.pop())}y(nt,"popTransform");function Un(s){var re;if(s.width===void 0||s.height===void 0)throw new Error('drawUVQuad() requires property "width" and "height".');if(s.width<=0||s.height<=0)return;let u=s.width,c=s.height,w=ui(s.anchor||su).scale(new J(u,c).scale(-.5)),x=s.quad||new lt(0,0,1,1),m=s.color||De(255,255,255),V=(re=s.opacity)!=null?re:1,I=s.tex?nd/s.tex.width:0,_=s.tex?nd/s.tex.height:0,T=x.x+I,B=x.y+_,K=x.w-I*2,te=x.h-_*2;Tt(),Te(s.pos),jt(s.angle),Ht(s.scale),Te(w),_t([{pos:new J(-u/2,c/2),uv:new J(s.flipX?T+K:T,s.flipY?B:B+te),color:m,opacity:V},{pos:new J(-u/2,-c/2),uv:new J(s.flipX?T+K:T,s.flipY?B+te:B),color:m,opacity:V},{pos:new J(u/2,-c/2),uv:new J(s.flipX?T:T+K,s.flipY?B+te:B),color:m,opacity:V},{pos:new J(u/2,c/2),uv:new J(s.flipX?T:T+K,s.flipY?B:B+te),color:m,opacity:V}],[0,1,3,1,2,3],s.fixed,s.tex,s.shader,s.uniform),nt()}y(Un,"drawUVQuad");function un(s){var m;if(!s.tex)throw new Error('drawTexture() requires property "tex".');let u=(m=s.quad)!=null?m:new lt(0,0,1,1),c=s.tex.width*u.w,w=s.tex.height*u.h,x=new J(1);if(s.tiled){let V=Math.ceil((s.width||c)/c),I=Math.ceil((s.height||w)/w),_=ui(s.anchor||su).add(new J(1,1)).scale(.5).scale(V*c,I*w);for(let T=0;T<V;T++)for(let B=0;B<I;B++)Un(Object.assign(s,{pos:(s.pos||new J(0)).add(new J(c*T,w*B)).sub(_),scale:x.scale(s.scale||new J(1)),tex:s.tex,quad:u,width:c,height:w,anchor:"topleft"}))}else s.width&&s.height?(x.x=s.width/c,x.y=s.height/w):s.width?(x.x=s.width/c,x.y=x.x):s.height&&(x.y=s.height/w,x.x=x.y),Un(Object.assign(s,{scale:x.scale(s.scale||new J(1)),tex:s.tex,quad:u,width:c,height:w}))}y(un,"drawTexture");function kn(s){var w,x,m;if(!s.sprite)throw new Error('drawSprite() requires property "sprite"');let u=yn(s.sprite);if(!u||!u.data)return;let c=u.data.frames[(w=s.frame)!=null?w:0];if(!c)throw new Error(`Frame not found: ${(x=s.frame)!=null?x:0}`);un(Object.assign(s,{tex:u.data.tex,quad:c.scale((m=s.quad)!=null?m:new lt(0,0,1,1))}))}y(kn,"drawSprite");function xn(s,u,c,w,x,m=1){w=Fn(w%360),x=Fn(x%360),x<=w&&(x+=Math.PI*2);let V=[],I=Math.ceil((x-w)/Fn(8)*m),_=(x-w)/I;for(let T=w;T<x;T+=_)V.push(s.add(u*Math.cos(T),c*Math.sin(T)));return V.push(s.add(u*Math.cos(x),c*Math.sin(x))),V}y(xn,"getArcPts");function pt(s){if(s.width===void 0||s.height===void 0)throw new Error('drawRect() requires property "width" and "height".');if(s.width<=0||s.height<=0)return;let u=s.width,c=s.height,w=ui(s.anchor||su).add(1,1).scale(new J(u,c).scale(-.5)),x=[new J(0,0),new J(u,0),new J(u,c),new J(0,c)];if(s.radius){let m=Math.min(Math.min(u,c)/2,s.radius);x=[new J(m,0),new J(u-m,0),...xn(new J(u-m,m),m,m,270,360),new J(u,m),new J(u,c-m),...xn(new J(u-m,c-m),m,m,0,90),new J(u-m,c),new J(m,c),...xn(new J(m,c-m),m,m,90,180),new J(0,c-m),new J(0,m),...xn(new J(m,m),m,m,180,270)]}Zt(Object.assign(s,{offset:w,pts:x,...s.gradient?{colors:s.horizontal?[s.gradient[0],s.gradient[1],s.gradient[1],s.gradient[0]]:[s.gradient[0],s.gradient[0],s.gradient[1],s.gradient[1]]}:{}}))}y(pt,"drawRect");function _n(s){let{p1:u,p2:c}=s;if(!u||!c)throw new Error('drawLine() requires properties "p1" and "p2".');let w=s.width||1,x=c.sub(u).unit().normal().scale(w*.5),m=[u.sub(x),u.add(x),c.add(x),c.sub(x)].map(V=>{var I,_;return{pos:new J(V.x,V.y),uv:new J(0),color:(I=s.color)!=null?I:Ve.WHITE,opacity:(_=s.opacity)!=null?_:1}});_t(m,[0,1,3,1,2,3],s.fixed,d.defTex,s.shader,s.uniform)}y(_n,"drawLine");function Dr(s){let u=s.pts;if(!u)throw new Error('drawLines() requires property "pts".');if(!(u.length<2))if(s.radius&&u.length>=3){let c=u[0].sdist(u[1]);for(let w=1;w<u.length-1;w++)c=Math.min(u[w].sdist(u[w+1]),c);Math.min(s.radius,Math.sqrt(c)/2),_n(Object.assign(s,{p1:u[0],p2:u[1]}));for(let w=1;w<u.length-2;w++){let x=u[w],m=u[w+1];_n(Object.assign(s,{p1:x,p2:m}))}_n(Object.assign(s,{p1:u[u.length-2],p2:u[u.length-1]}))}else for(let c=0;c<u.length-1;c++)_n(Object.assign(s,{p1:u[c],p2:u[c+1]})),s.join!=="none"&&Qt(Object.assign(s,{pos:u[c],radius:s.width/2}))}y(Dr,"drawLines");function Nr(s){if(!s.p1||!s.p2||!s.p3)throw new Error('drawPolygon() requires properties "p1", "p2" and "p3".');return Zt(Object.assign(s,{pts:[s.p1,s.p2,s.p3]}))}y(Nr,"drawTriangle");function Qt(s){if(!s.radius)throw new Error('drawCircle() requires property "radius".');s.radius!==0&&Ur(Object.assign(s,{radiusX:s.radius,radiusY:s.radius,angle:0}))}y(Qt,"drawCircle");function Ur(s){var V,I,_;if(s.radiusX===void 0||s.radiusY===void 0)throw new Error('drawEllipse() requires properties "radiusX" and "radiusY".');if(s.radiusX===0||s.radiusY===0)return;let u=(V=s.start)!=null?V:0,c=(I=s.end)!=null?I:360,w=ui((_=s.anchor)!=null?_:"center").scale(new J(-s.radiusX,-s.radiusY)),x=xn(w,s.radiusX,s.radiusY,u,c,s.resolution);x.unshift(w);let m=Object.assign(s,{pts:x,radius:0,...s.gradient?{colors:[s.gradient[0],...Array(x.length-1).fill(s.gradient[1])]}:{}});if(c-u>=360&&s.outline){s.fill!==!1&&Zt(Object.assign(m,{outline:null})),Zt(Object.assign(m,{pts:x.slice(1),fill:!1}));return}Zt(m)}y(Ur,"drawEllipse");function Zt(s){var c,w;if(!s.pts)throw new Error('drawPolygon() requires property "pts".');let u=s.pts.length;if(!(u<3)){if(Tt(),Te(s.pos),Ht(s.scale),jt(s.angle),Te(s.offset),s.fill!==!1){let x=(c=s.color)!=null?c:Ve.WHITE,m=s.pts.map((I,_)=>{var T,B;return{pos:new J(I.x,I.y),uv:new J(0,0),color:s.colors&&(T=s.colors[_])!=null?T:x,opacity:(B=s.opacity)!=null?B:1}}),V=[...Array(u-2).keys()].map(I=>[0,I+1,I+2]).flat();_t(m,(w=s.indices)!=null?w:V,s.fixed,d.defTex,s.shader,s.uniform)}s.outline&&Dr({pts:[...s.pts,s.pts[0]],radius:s.radius,width:s.outline.width,color:s.outline.color,join:s.outline.join,uniform:s.uniform,fixed:s.fixed,opacity:s.opacity}),nt()}}y(Zt,"drawPolygon");function kr(s,u,c){Et(),a.clear(a.STENCIL_BUFFER_BIT),a.enable(a.STENCIL_TEST),a.stencilFunc(a.NEVER,1,255),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),u(),Et(),a.stencilFunc(c,1,255),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),s(),Et(),a.disable(a.STENCIL_TEST)}y(kr,"drawStenciled");function Vo(s,u){kr(s,u,a.EQUAL)}y(Vo,"drawMasked");function To(s,u){kr(s,u,a.NOTEQUAL)}y(To,"drawSubtracted");function gs(){return(d.viewport.width+d.viewport.height)/(d.width+d.height)}y(gs,"getViewportScale");function Lt(s){Et();let u=d.width,c=d.height;d.width=d.viewport.width,d.height=d.viewport.height,s(),Et(),d.width=u,d.height=c}y(Lt,"drawUnscaled");function mi(s,u){u.pos&&(s.pos=s.pos.add(u.pos)),u.scale&&(s.scale=s.scale.scale(j(u.scale))),u.angle&&(s.angle+=u.angle),u.color&&(s.color=s.color.mult(u.color)),u.opacity&&(s.opacity*=u.opacity)}y(mi,"applyCharTransform");let Mo=/\[(?<style>\w+)\](?<text>.*?)\[\/\k<style>\]/g;function Co(s){let u={},c=s.replace(Mo,"$2"),w=0;for(let x of s.matchAll(Mo)){let m=x.index-w;for(let V=0;V<x.groups.text.length;V++)u[V+m]=[x.groups.style];w+=x[0].length-x.groups.text.length}return{charStyleMap:u,text:c}}y(Co,"compileStyledText");let ms={};function En(s){var Ue,je,se,be,st,G,oe;if(s.text===void 0)throw new Error('formatText() requires property "text".');let u=Dn(s.font);if(s.text===""||u instanceof L||!u)return{width:0,height:0,chars:[],opt:s};let{charStyleMap:c,text:w}=Co(s.text+""),x=w.split("");if(u instanceof Vt||typeof u=="string"){let $=u instanceof Vt?u.fontface.family:u,ae=u instanceof Vt?{outline:u.outline,filter:u.filter}:{outline:0,filter:rd},ne=(Ue=ms[$])!=null?Ue:{font:{tex:new l(Xh,$h,{filter:ae.filter}),map:{},size:Qh},cursor:new J(0),outline:ae.outline};ms[$]||(ms[$]=ne),u=ne.font;for(let me of x)if(!ne.font.map[me]){let pe=i.fontCacheCtx;pe.clearRect(0,0,i.fontCacheCanvas.width,i.fontCacheCanvas.height),pe.font=`${u.size}px ${$}`,pe.textBaseline="top",pe.textAlign="left",pe.fillStyle="#ffffff";let ze=pe.measureText(me),Dt=Math.ceil(ze.width),bt=u.size;ne.outline&&(pe.lineJoin="round",pe.lineWidth=ne.outline*2,pe.strokeStyle="#000000",pe.strokeText(me,ne.outline,ne.outline),Dt+=ne.outline*2,bt+=ne.outline*3),pe.fillText(me,ne.outline,ne.outline);let yr=pe.getImageData(0,0,Dt,bt);if(ne.cursor.x+Dt>Xh&&(ne.cursor.x=0,ne.cursor.y+=bt,ne.cursor.y>$h))throw new Error("Font atlas exceeds character limit");u.tex.update(yr,ne.cursor.x,ne.cursor.y),u.map[me]=new lt(ne.cursor.x,ne.cursor.y,Dt,bt),ne.cursor.x+=Dt}}let m=s.size||u.size,V=j((je=s.scale)!=null?je:1).scale(m/u.size),I=(se=s.lineSpacing)!=null?se:0,_=(be=s.letterSpacing)!=null?be:0,T=0,B=0,K=0,te=[],re=[],we=0,Pe=null,Oe=null;for(;we<x.length;){let $=x[we];if($===`
`)K+=m+I,te.push({width:T-_,chars:re}),Pe=null,Oe=null,T=0,re=[];else{let ae=u.map[$];if(ae){let ne=ae.w*V.x;s.width&&T+ne>s.width&&(K+=m+I,Pe!=null&&(we-=re.length-Pe,$=x[we],ae=u.map[$],ne=ae.w*V.x,re=re.slice(0,Pe-1),T=Oe),Pe=null,Oe=null,te.push({width:T-_,chars:re}),T=0,re=[]),re.push({tex:u.tex,width:ae.w,height:ae.h,quad:new lt(ae.x/u.tex.width,ae.y/u.tex.height,ae.w/u.tex.width,ae.h/u.tex.height),ch:$,pos:new J(T,K),opacity:(st=s.opacity)!=null?st:1,color:(G=s.color)!=null?G:Ve.WHITE,scale:j(V),angle:0}),$===" "&&(Pe=re.length,Oe=T),T+=ne,B=Math.max(B,T),T+=_}}we++}te.push({width:T-_,chars:re}),K+=m,s.width&&(B=s.width);let it=[];for(let $ of te){let ae=(B-$.width)*Kd((oe=s.align)!=null?oe:"left");for(let ne of $.chars){let me=u.map[ne.ch],pe=it.length;if(ne.pos=ne.pos.add(ae,0).add(me.w*V.x*.5,me.h*V.y*.5),s.transform){let ze=typeof s.transform=="function"?s.transform(pe,ne.ch):s.transform;ze&&mi(ne,ze)}if(c[pe]){let ze=c[pe];for(let Dt of ze){let bt=s.styles[Dt],yr=typeof bt=="function"?bt(pe,ne.ch):bt;yr&&mi(ne,yr)}}it.push(ne)}}return{width:B,height:K,chars:it,opt:s}}y(En,"formatText");function hr(s){Sn(En(s))}y(hr,"drawText");function Sn(s){var u;Tt(),Te(s.opt.pos),jt(s.opt.angle),Te(ui((u=s.opt.anchor)!=null?u:"topleft").add(1,1).scale(s.width,s.height).scale(-.5)),s.chars.forEach(c=>{Un({tex:c.tex,width:c.width,height:c.height,pos:c.pos,scale:c.scale,angle:c.angle,color:c.color,opacity:c.opacity,quad:c.quad,anchor:"center",uniform:s.opt.uniform,shader:s.opt.shader,fixed:s.opt.fixed})}),nt()}y(Sn,"drawFormattedText");function ws(){var x;let s=i.pixelDensity,u=a.drawingBufferWidth/s,c=a.drawingBufferHeight/s;if(Ai()){let m=window.innerWidth,V=window.innerHeight,I=m/V,_=u/c;if(I>_){let T=window.innerHeight*_;d.viewport={x:(m-T)/2,y:0,width:T,height:V}}else{let T=window.innerWidth/_;d.viewport={x:0,y:(V-T)/2,width:m,height:T}}return}if(e.letterbox){if(!e.width||!e.height)throw new Error("Letterboxing requires width and height defined.");let m=u/c,V=e.width/e.height;if(m>V){e.stretch||(d.width=c*V,d.height=c);let I=c*V,_=c,T=(u-I)/2;a.scissor(T*s,0,I*s,_*s),a.viewport(T*s,0,I*s,c*s),d.viewport={x:T,y:0,width:I,height:c}}else{e.stretch||(d.width=u,d.height=u/V);let I=u,_=u/V,T=(c-_)/2;a.scissor(0,T*s,I*s,_*s),a.viewport(0,T*s,u*s,_*s),d.viewport={x:0,y:T,width:u,height:_}}return}if(e.stretch){if(!e.width||!e.height)throw new Error("Stretching requires width and height defined.");a.viewport(0,0,u*s,c*s),d.viewport={x:0,y:0,width:u,height:c};return}let w=(x=e.scale)!=null?x:1;d.width=u/w,d.height=c/w,a.viewport(0,0,u*s,c*s),d.viewport={x:0,y:0,width:u,height:c}}y(ws,"updateViewport");function rt(){return d.width}y(rt,"width");function We(){return d.height}y(We,"height");let vt={},zn={},bn={};function dr(s){return new J((s.x-d.viewport.x)*rt()/d.viewport.width,(s.y-d.viewport.y)*We()/d.viewport.height)}y(dr,"windowToContent");function Oo(s){return new J(s.x*d.viewport.width/d.width,s.y*d.viewport.height/d.height)}y(Oo,"contentToView");function wi(s,u){let c=dr(new J(s,u));i.mousePos=c,i.mouseStarted=!0,i.isMouseMoved=!0}y(wi,"setMousePos"),vt.mousemove=s=>{let[u,c]=[s.offsetX,s.offsetY],[w,x]=[s.movementX,s.movementY];R.ev.onOnce("input",()=>{wi(u,c),i.mouseDeltaPos=j(w,x),R.ev.trigger("mouseMove")})},vt.mousedown=s=>{R.ev.onOnce("input",()=>{let u=Yh[s.button];u&&i.mouseState.press(u),R.ev.trigger("mousePress",u)})},vt.mouseup=s=>{R.ev.onOnce("input",()=>{let u=Yh[s.button];u&&i.mouseState.release(u),R.ev.trigger("mouseRelease",u)})},vt.keydown=s=>{D1.has(s.key)&&s.preventDefault(),R.ev.onOnce("input",()=>{let u=Gh[s.key]||s.key.toLowerCase();u.length===1?(R.ev.trigger("charInput",u),i.charInputted.push(u)):u==="space"&&(R.ev.trigger("charInput"," "),i.charInputted.push(" ")),s.repeat?(i.keyState.pressRepeat(u),R.ev.trigger("keyPressRepeat",u)):(i.keyState.press(u),R.ev.trigger("keyPressRepeat",u),R.ev.trigger("keyPress",u))})},vt.keyup=s=>{R.ev.onOnce("input",()=>{let u=Gh[s.key]||s.key.toLowerCase();i.keyState.release(u),R.ev.trigger("keyRelease",u)})},vt.touchstart=s=>{s.preventDefault(),R.ev.onOnce("input",()=>{let u=[...s.changedTouches];u.forEach(c=>{R.ev.trigger("touchStart",dr(new J(c.clientX,c.clientY)),c)}),e.touchToMouse!==!1&&(wi(u[0].clientX,u[0].clientY),i.mouseState.press("left"),R.ev.trigger("mousePress","left"))})},vt.touchmove=s=>{s.preventDefault(),R.ev.onOnce("input",()=>{let u=[...s.changedTouches];u.forEach(c=>{R.ev.trigger("touchMove",dr(new J(c.clientX,c.clientY)),c)}),e.touchToMouse!==!1&&(R.ev.trigger("mouseMove"),wi(u[0].clientX,u[0].clientY))})},vt.touchend=s=>{R.ev.onOnce("input",()=>{[...s.changedTouches].forEach(u=>{R.ev.trigger("touchEnd",dr(new J(u.clientX,u.clientY)),u)}),e.touchToMouse!==!1&&(i.mouseState.release("left"),R.ev.trigger("mouseRelease","left"))})},vt.touchcancel=s=>{R.ev.onOnce("input",()=>{[...s.changedTouches].forEach(u=>{R.ev.trigger("touchEnd",dr(new J(u.clientX,u.clientY)),u)}),e.touchToMouse!==!1&&(i.mouseState.release("left"),R.ev.trigger("mouseRelease","left"))})},vt.wheel=s=>{s.preventDefault(),R.ev.onOnce("input",()=>{R.ev.trigger("scroll",new J(s.deltaX,s.deltaY))})},vt.contextmenu=s=>s.preventDefault(),zn.visibilitychange=()=>{switch(document.visibilityState){case"visible":i.skipTime=!0,ke.paused||C.ctx.resume();break;case"hidden":i.keyState=new Tr,i.mouseState=new Tr,i.virtualButtonState=new Tr,e.backgroundAudio||C.ctx.suspend();break}},bn.error=s=>{s.error?de(s.error):de(new Error(s.message))},bn.gamepadconnected=s=>{R.ev.onOnce("input",()=>{R.ev.trigger("gamepadConnect",s.gamepad)})},bn.gamepaddisconnected=s=>{R.ev.onOnce("input",()=>{R.ev.trigger("gamepadDisconnect",s.gamepad)})},bn.unhandledrejection=s=>de(s.reason);for(let s in vt)i.canvas.addEventListener(s,vt[s]);for(let s in zn)document.addEventListener(s,zn[s]);for(let s in bn)window.addEventListener(s,bn[s]);function qn(){return i.mousePos.clone()}y(qn,"mousePos");function vs(){return i.mouseDeltaPos.clone()}y(vs,"mouseDeltaPos");function zr(s="left"){return i.mouseState.pressed.has(s)}y(zr,"isMousePressed");function Po(s="left"){return i.mouseState.down.has(s)}y(Po,"isMouseDown");function qr(s="left"){return i.mouseState.released.has(s)}y(qr,"isMouseReleased");function Io(){return i.isMouseMoved}y(Io,"isMouseMoved");function Bo(s){return s===void 0?i.keyState.pressed.size>0:i.keyState.pressed.has(s)}y(Bo,"isKeyPressed");function Fo(s){return s===void 0?i.keyState.pressedRepeat.size>0:i.keyState.pressedRepeat.has(s)}y(Fo,"isKeyPressedRepeat");function Lo(s){return s===void 0?i.keyState.down.size>0:i.keyState.down.has(s)}y(Lo,"isKeyDown");function Do(s){return s===void 0?i.keyState.released.size>0:i.keyState.released.has(s)}y(Do,"isKeyReleased");function No(s){return i.virtualButtonState.pressed.has(s)}y(No,"isVirtualButtonPressed");function Hr(s){return i.virtualButtonState.down.has(s)}y(Hr,"isVirtualButtonDown");function Uo(s){return i.virtualButtonState.released.has(s)}y(Uo,"isVirtualButtonReleased");function Wr(s){return s===void 0?i.gamepadButtonState.pressed.size>0:i.gamepadButtonState.pressed.has(s)}y(Wr,"isGamepadButtonPressed");function ko(s){return s===void 0?i.gamepadButtonState.down.size>0:i.gamepadButtonState.down.has(s)}y(ko,"isGamepadButtonDown");function zo(s){return s===void 0?i.gamepadButtonState.released.size>0:i.gamepadButtonState.released.has(s)}y(zo,"isGamepadButtonReleased");function qo(){return[...i.charInputted]}y(qo,"charInputted");function Kr(){return i.time}y(Kr,"time");function As(){return i.canvas.toDataURL()}y(As,"screenshot");function vi(s){i.canvas.style.cursor=s}y(vi,"setCursor");function Ho(){return i.canvas.style.cursor}y(Ho,"getCursor");function Wo(s){if(s)try{let u=i.canvas.requestPointerLock();u.catch&&u.catch(c=>console.error(c))}catch(u){console.error(u)}else document.exitPointerLock()}y(Wo,"setCursorLocked");function Ko(){return!!document.pointerLockElement}y(Ko,"isCursorLocked");function Go(s=!0){s?qd(i.canvas):Hd()}y(Go,"setFullscreen");function Ai(){return Boolean(Wd())}y(Ai,"isFullscreen");function yi(){return i.isTouchScreen}y(yi,"isTouchScreen");let ke={inspect:!1,timeScale:1,showLog:!0,fps:()=>i.fpsCounter.fps,numFrames:()=>i.numFrames,stepFrame:Cn,drawCalls:()=>d.drawCalls,clearLog:()=>R.logs=[],log:s=>{var w;let u=(w=e.logMax)!=null?w:z1,c=s instanceof Error?"error":"info";R.logs.unshift(`${`[time]${Kr().toFixed(2)}[/time] `}[${c}]${s!=null&&s.toString?s.toString():s}[/${c}]`),R.logs.length>u&&(R.logs=R.logs.slice(0,u))},error:s=>ke.log(new Error(s.toString?s.toString():s)),curRecording:null,get paused(){return i.paused},set paused(s){i.paused=s,s?C.ctx.suspend():C.ctx.resume()}};function At(){return i.dt*ke.timeScale}y(At,"dt");function Yo(...s){return s.length>0&&(R.cam.pos=j(...s)),R.cam.pos?R.cam.pos.clone():dn()}y(Yo,"camPos");function ys(...s){return s.length>0&&(R.cam.scale=j(...s)),R.cam.scale.clone()}y(ys,"camScale");function Gr(s){return s!==void 0&&(R.cam.angle=s),R.cam.angle}y(Gr,"camRot");function xs(s=12){R.cam.shake=s}y(xs,"shake");function xi(s){return R.cam.transform.multVec2(s)}y(xi,"toScreen");function _i(s){return R.cam.transform.invert().multVec2(s)}y(_i,"toWorld");function pr(s){let u=new ht;return s.pos&&u.translate(s.pos),s.scale&&u.scale(s.scale),s.angle&&u.rotate(s.angle),s.parent?u.mult(s.parent.transform):u}y(pr,"calcTransform");function Yr(s){let u=new Map,c={},w=new ai,x={id:O1(),hidden:!1,paused:!1,transform:new ht,children:[],parent:null,add(m){let V=(()=>{if(Array.isArray(m))return Yr(m);if(m.parent)throw new Error("Cannot add a game obj that already has a parent.");return m})();return V.parent=this,V.transform=pr(V),this.children.push(V),V.trigger("add",V),R.ev.trigger("add",V),V},readd(m){let V=this.children.indexOf(m);return V!==-1&&(this.children.splice(V,1),this.children.push(m)),m},remove(m){let V=this.children.indexOf(m);V!==-1&&(m.trigger("destroy"),R.ev.trigger("destroy",m),m.parent=null,this.children.splice(V,1))},removeAll(m){this.get(m).forEach(V=>this.remove(V))},update(){this.paused||(this.children.sort((m,V)=>{var I,_;return((I=m.z)!=null?I:0)-((_=V.z)!=null?_:0)}).forEach(m=>m.update()),this.trigger("update"))},draw(){this.hidden||(Tt(),Te(this.pos),Ht(this.scale),jt(this.angle),this.trigger("draw"),this.children.sort((m,V)=>{var I,_;return((I=m.z)!=null?I:0)-((_=V.z)!=null?_:0)}).forEach(m=>m.draw()),nt())},drawInspect(){this.hidden||(Tt(),Te(this.pos),Ht(this.scale),jt(this.angle),this.children.sort((m,V)=>{var I,_;return((I=m.z)!=null?I:0)-((_=V.z)!=null?_:0)}).forEach(m=>m.drawInspect()),this.trigger("drawInspect"),nt())},use(m){if(!m)return;if(typeof m=="string")return this.use({id:m});let V=[];m.id&&(this.unuse(m.id),c[m.id]=[],V=c[m.id],u.set(m.id,m));for(let _ in m){if(W1.has(_))continue;let T=Object.getOwnPropertyDescriptor(m,_);if(typeof T.value=="function"&&(m[_]=m[_].bind(this)),T.set&&Object.defineProperty(m,_,{set:T.set.bind(this)}),T.get&&Object.defineProperty(m,_,{get:T.get.bind(this)}),K1.has(_))V.push(this.on(_,m[_]).cancel);else if(this[_]===void 0)Object.defineProperty(this,_,{get:()=>m[_],set:B=>m[_]=B,configurable:!0,enumerable:!0}),V.push(()=>delete this[_]);else throw new Error(`Duplicate component property: "${_}"`)}let I=y(()=>{if(m.require){for(let _ of m.require)if(!this.c(_))throw new Error(`Component "${m.id}" requires component "${_}"`)}},"checkDeps");m.destroy&&V.push(m.destroy.bind(this)),this.exists()?(I(),m.add&&m.add.call(this)):m.require&&V.push(this.on("add",I).cancel)},unuse(m){c[m]&&(c[m].forEach(V=>V()),delete c[m]),u.has(m)&&u.delete(m)},c(m){return u.get(m)},get(m,V={}){let I=V.recursive?this.children.flatMap(_=>[_,..._.children]):this.children;if(I=I.filter(_=>m?_.is(m):!0),V.liveUpdate){let _=y(T=>V.recursive?this.isAncestorOf(T):T.parent===this,"isChild");gr(T=>{_(T)&&T.is(m)&&I.push(T)}),Rn(T=>{if(_(T)&&T.is(m)){let B=I.findIndex(K=>K.id===T.id);B!==-1&&I.splice(B,1)}})}return I},isAncestorOf(m){return m.parent?m.parent===this||this.isAncestorOf(m.parent):!1},exists(){return R.root.isAncestorOf(this)},is(m){if(m==="*")return!0;if(Array.isArray(m)){for(let V of m)if(!this.c(V))return!1;return!0}else return this.c(m)!=null},on(m,V){return w.on(m,V.bind(this))},trigger(m,...V){w.trigger(m,...V),R.objEvents.trigger(m,this,...V)},destroy(){this.parent&&this.parent.remove(this)},inspect(){let m={};for(let[V,I]of u)m[V]=I.inspect?I.inspect():null;return m},onAdd(m){return this.on("add",m)},onUpdate(m){return this.on("update",m)},onDraw(m){return this.on("draw",m)},onDestroy(m){return this.on("destroy",m)},clearEvents(){w.clear()}};for(let m of s)x.use(m);return x}y(Yr,"make");function ln(s,u,c){return R.objEvents[s]||(R.objEvents[s]=new Au),R.objEvents.on(s,(w,...x)=>{w.is(u)&&c(w,...x)})}y(ln,"on");let Ei=y((s,u)=>{if(typeof s=="function"&&u===void 0){let c=Xt([{update:s}]);return{get paused(){return c.paused},set paused(w){c.paused=w},cancel:()=>c.destroy()}}else if(typeof s=="string")return ln("update",s,u)},"onUpdate"),_s=y((s,u)=>{if(typeof s=="function"&&u===void 0){let c=Xt([{draw:s}]);return{get paused(){return c.hidden},set paused(w){c.hidden=w},cancel:()=>c.destroy()}}else if(typeof s=="string")return ln("draw",s,u)},"onDraw");function gr(s,u){if(typeof s=="function"&&u===void 0)return R.ev.on("add",s);if(typeof s=="string")return ln("add",s,u)}y(gr,"onAdd");function Rn(s,u){if(typeof s=="function"&&u===void 0)return R.ev.on("destroy",s);if(typeof s=="string")return ln("destroy",s,u)}y(Rn,"onDestroy");function Es(s,u,c){return ln("collide",s,(w,x,m)=>x.is(u)&&c(w,x,m))}y(Es,"onCollide");function Ss(s,u,c){return ln("collideUpdate",s,(w,x,m)=>x.is(u)&&c(w,x,m))}y(Ss,"onCollideUpdate");function Jo(s,u,c){return ln("collideEnd",s,(w,x,m)=>x.is(u)&&c(w,x,m))}y(Jo,"onCollideEnd");function mr(s,u){Ii(s).forEach(u),gr(s,u)}y(mr,"forAllCurrentAndFuture");function bs(s,u){if(typeof s=="function")return jr(s);{let c=[];return mr(s,w=>{if(!w.area)throw new Error("onClick() requires the object to have area() component");c.push(w.onClick(()=>u(w)))}),Mr.join(c)}}y(bs,"onClick");function Rs(s,u){let c=[];return mr(s,w=>{if(!w.area)throw new Error("onHover() requires the object to have area() component");c.push(w.onHover(()=>u(w)))}),Mr.join(c)}y(Rs,"onHover");function Vs(s,u){let c=[];return mr(s,w=>{if(!w.area)throw new Error("onHoverUpdate() requires the object to have area() component");c.push(w.onHoverUpdate(()=>u(w)))}),Mr.join(c)}y(Vs,"onHoverUpdate");function jo(s,u){let c=[];return mr(s,w=>{if(!w.area)throw new Error("onHoverEnd() requires the object to have area() component");c.push(w.onHoverEnd(()=>u(w)))}),Mr.join(c)}y(jo,"onHoverEnd");function Jr(s,u){let c=0,w=[];u&&w.push(u);let x=Ei(()=>{c+=At(),c>=s&&(x.cancel(),w.forEach(m=>m()))});return{paused:x.paused,cancel:x.cancel,onEnd(m){w.push(m)},then(m){return this.onEnd(m),this}}}y(Jr,"wait");function Qo(s,u){let c=null,w=y(()=>{c=Jr(s,w),u()},"newAction");return c=Jr(0,w),{get paused(){return c.paused},set paused(x){c.paused=x},cancel:()=>c.cancel()}}y(Qo,"loop");let Zo=y((s,u)=>{if(typeof s=="function")return R.ev.on("keyDown",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("keyDown",c=>c===s&&u(s))},"onKeyDown"),Vn=y((s,u)=>{if(typeof s=="function")return R.ev.on("keyPress",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("keyPress",c=>c===s&&u(s))},"onKeyPress"),Wu=y((s,u)=>{if(typeof s=="function")return R.ev.on("keyPressRepeat",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("keyPressRepeat",c=>c===s&&u(s))},"onKeyPressRepeat"),Ku=y((s,u)=>{if(typeof s=="function")return R.ev.on("keyRelease",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("keyRelease",c=>c===s&&u(s))},"onKeyRelease");function Xo(s,u){return typeof s=="function"?R.ev.on("mouseDown",c=>s(c)):R.ev.on("mouseDown",c=>c===s&&u(c))}y(Xo,"onMouseDown");function jr(s,u){return typeof s=="function"?R.ev.on("mousePress",c=>s(c)):R.ev.on("mousePress",c=>c===s&&u(c))}y(jr,"onMousePress");function $o(s,u){return typeof s=="function"?R.ev.on("mouseRelease",c=>s(c)):R.ev.on("mouseRelease",c=>c===s&&u(c))}y($o,"onMouseRelease");function ea(s){return R.ev.on("mouseMove",()=>s(qn(),vs()))}y(ea,"onMouseMove");function ta(s){return R.ev.on("charInput",s)}y(ta,"onCharInput");function na(s){return R.ev.on("touchStart",s)}y(na,"onTouchStart");function ra(s){return R.ev.on("touchMove",s)}y(ra,"onTouchMove");function Ne(s){return R.ev.on("touchEnd",s)}y(Ne,"onTouchEnd");function Fe(s){return R.ev.on("scroll",s)}y(Fe,"onScroll");function ia(s,u){return R.ev.on("virtualButtonDown",c=>c===s&&u())}y(ia,"onVirtualButtonDown");function sa(s,u){return R.ev.on("virtualButtonPress",c=>c===s&&u())}y(sa,"onVirtualButtonPress");function oa(s,u){return R.ev.on("virtualButtonRelease",c=>c===s&&u())}y(oa,"onVirtualButtonRelease");function aa(s,u){if(typeof s=="function")return R.ev.on("gamepadButtonDown",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("gamepadButtonDown",c=>c===s&&u(s))}y(aa,"onGamepadButtonDown");function ua(s,u){if(typeof s=="function")return R.ev.on("gamepadButtonPress",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("gamepadButtonPress",c=>c===s&&u(s))}y(ua,"onGamepadButtonPress");function la(s,u){if(typeof s=="function")return R.ev.on("gamepadButtonRelease",s);if(typeof s=="string"&&typeof u=="function")return R.ev.on("gamepadButtonRelease",c=>c===s&&u(s))}y(la,"onGamepadButtonRelease");function Ts(s,u){return R.ev.on("gamepadStick",(c,w)=>c===s&&u(w))}y(Ts,"onGamepadStick");function Ms(){Vn("f1",()=>{ke.inspect=!ke.inspect}),Vn("f2",()=>{ke.clearLog()}),Vn("f8",()=>{ke.paused=!ke.paused}),Vn("f7",()=>{ke.timeScale=Hn(Or(ke.timeScale-.2,0,2),1)}),Vn("f9",()=>{ke.timeScale=Hn(Or(ke.timeScale+.2,0,2),1)}),Vn("f10",()=>{ke.stepFrame()})}y(Ms,"enterDebugMode");function $e(){Vn("b",()=>fr())}y($e,"enterBurpMode");function Si(s){R.gravity=s}y(Si,"setGravity");function Tn(){return R.gravity}y(Tn,"getGravity");function Cs(...s){s.length===1||s.length===2?(d.bgColor=De(s[0]),s[1]&&(d.bgAlpha=s[1])):(s.length===3||s.length===4)&&(d.bgColor=De(s[0],s[1],s[2]),s[3]&&(d.bgAlpha=s[3])),a.clearColor(d.bgColor.r/255,d.bgColor.g/255,d.bgColor.b/255,d.bgAlpha)}y(Cs,"setBackground");function bi(){return d.bgColor.clone()}y(bi,"getBackground");function Mt(){return navigator.getGamepads().filter(s=>s!==null)}y(Mt,"getGamepads");function wr(...s){return{id:"pos",pos:j(...s),moveBy(...u){this.pos=this.pos.add(j(...u))},move(...u){this.moveBy(j(...u).scale(At()))},moveTo(...u){if(typeof u[0]=="number"&&typeof u[1]=="number")return this.moveTo(j(u[0],u[1]),u[2]);let c=u[0],w=u[1];if(w===void 0){this.pos=j(c);return}let x=c.sub(this.pos);if(x.len()<=w*At()){this.pos=j(c);return}this.move(x.unit().scale(w))},worldPos(){return this.parent?this.parent.transform.multVec2(this.pos):this.pos},screenPos(){return this.fixed?this.pos:xi(this.pos)},inspect(){return`(${Math.round(this.pos.x)}, ${Math.round(this.pos.y)})`},drawInspect(){Qt({color:De(255,0,0),radius:4/gs()})}}}y(wr,"pos");function vr(...s){return s.length===0?vr(1):{id:"scale",scale:j(...s),scaleTo(...u){this.scale=j(...u)},scaleBy(...u){this.scale.scale(j(...u))},inspect(){return`(${Hn(this.scale.x,2)}, ${Hn(this.scale.y,2)})`}}}y(vr,"scale");function Os(s){return{id:"rotate",angle:s!=null?s:0,rotateBy(u){this.angle+=u},rotateTo(u){this.angle=u},inspect(){return`${Math.round(this.angle)}`}}}y(Os,"rotate");function Ps(...s){return{id:"color",color:De(...s),inspect(){return this.color.toString()}}}y(Ps,"color");function Hn(s,u){return Number(s.toFixed(u))}y(Hn,"toFixed");function Is(s){return{id:"opacity",opacity:s!=null?s:1,inspect(){return`${Hn(this.opacity,1)}`},fadeOut(u=1,c=iu.linear){return Ar(this.opacity,0,u,w=>this.opacity=w,c)}}}y(Is,"opacity");function gt(s){if(!s)throw new Error("Please define an anchor");return{id:"anchor",anchor:s,inspect(){return typeof this.anchor=="string"?this.anchor:this.anchor.toString()}}}y(gt,"anchor");function fa(s){return{id:"z",z:s,inspect(){return`${this.z}`}}}y(fa,"z");function Ct(s,u){return{id:"follow",require:["pos"],follow:{obj:s,offset:u!=null?u:j(0)},add(){s.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))},update(){s.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))}}}y(Ct,"follow");function ca(s,u){let c=typeof s=="number"?J.fromAngle(s):s.unit();return{id:"move",require:["pos"],update(){this.move(c.scale(u))}}}y(ca,"move");let ha=200;function fn(s={}){var w;let u=(w=s.distance)!=null?w:ha,c=!1;return{id:"offscreen",require:["pos"],isOffScreen(){let x=xi(this.pos),m=new ft(j(0),rt(),We());return!Ji(m,x)&&m.sdistToPoint(x)>u*u},onExitScreen(x){return this.on("exitView",x)},onEnterScreen(x){return this.on("enterView",x)},update(){this.isOffScreen()?(c||(this.trigger("exitView"),c=!0),s.hide&&(this.hidden=!0),s.pause&&(this.paused=!0),s.destroy&&this.destroy()):(c&&(this.trigger("enterView"),c=!1),s.hide&&(this.hidden=!1),s.pause&&(this.paused=!1))}}}y(fn,"offscreen");function Qr(s={}){var x,m,V,I;let u=[],c={},w=new Set;return{id:"area",collisionIgnore:(x=s.collisionIgnore)!=null?x:[],add(){this.area.cursor&&u.push(this.onHover(()=>vi(this.area.cursor))),u.push(this.onCollideUpdate((_,T)=>{c[_.id]||this.trigger("collide",_,T),c[_.id]=T,w.add(_.id)}))},update(){for(let _ in c)w.has(Number(_))||(this.trigger("collideEnd",c[_].target),delete c[_]);w.clear()},drawInspect(){let _=this.localArea();Tt(),Ht(this.area.scale),Te(this.area.offset);let T={outline:{width:4/gs(),color:De(0,0,255)},anchor:this.anchor,fill:!1,fixed:this.fixed};_ instanceof ft?pt({...T,pos:_.pos,width:_.width,height:_.height}):_ instanceof ci?Zt({...T,pts:_.pts}):_ instanceof so&&Qt({...T,pos:_.center,radius:_.radius}),nt()},destroy(){u.forEach(_=>_.cancel())},area:{shape:(m=s.shape)!=null?m:null,scale:s.scale?j(s.scale):j(1),offset:(V=s.offset)!=null?V:j(0),cursor:(I=s.cursor)!=null?I:null},isClicked(){return zr()&&this.isHovering()},isHovering(){let _=this.fixed?qn():_i(qn());return this.hasPoint(_)},checkCollision(_){var T;return(T=c[_.id])!=null?T:null},getCollisions(){return Object.values(c)},isColliding(_){return Boolean(c[_.id])},isOverlapping(_){let T=c[_.id];return T&&T.hasOverlap()},onClick(_){return this.onUpdate(()=>{this.isClicked()&&_()})},onHover(_){let T=!1;return this.onUpdate(()=>{T?T=this.isHovering():this.isHovering()&&(T=!0,_())})},onHoverUpdate(_){return this.onUpdate(()=>{this.isHovering()&&_()})},onHoverEnd(_){let T=!1;return this.onUpdate(()=>{T?this.isHovering()||(T=!1,_()):T=this.isHovering()})},onCollide(_,T){if(typeof _=="function"&&T===void 0)return this.on("collide",_);if(typeof _=="string")return this.onCollide((B,K)=>{B.is(_)&&T(B,K)})},onCollideUpdate(_,T){if(typeof _=="function"&&T===void 0)return this.on("collideUpdate",_);if(typeof _=="string")return this.on("collideUpdate",(B,K)=>B.is(_)&&T(B,K))},onCollideEnd(_,T){if(typeof _=="function"&&T===void 0)return this.on("collideEnd",_);if(typeof _=="string")return this.on("collideEnd",B=>B.is(_)&&T(B))},hasPoint(_){return Tf(this.worldArea(),_)},resolveCollision(_){let T=this.checkCollision(_);T&&!T.resolved&&(this.pos=this.pos.add(T.displacement),T.resolved=!0)},localArea(){return this.area.shape?this.area.shape:this.renderArea()},worldArea(){var B;let _=this.localArea();if(!(_ instanceof ci||_ instanceof ft))throw new Error("Only support polygon and rect shapes for now");let T=this.transform.clone().scale(j((B=this.area.scale)!=null?B:1)).translate(this.area.offset);if(_ instanceof ft){let K=ui(this.anchor||su).add(1,1).scale(-.5).scale(_.width,_.height);T.translate(K)}return _.transform(T)},screenArea(){let _=this.worldArea();return this.fixed?_:_.transform(R.cam.transform)}}}y(Qr,"area");function cn(s){return{color:s.color,opacity:s.opacity,anchor:s.anchor,outline:s.outline,fixed:s.fixed,shader:s.shader,uniform:s.uniform}}y(cn,"getRenderProps");function Le(s,u={}){var V,I,_;let c=null,w=null,x=new sn;if(!s)throw new Error("Please pass the resource name or data to sprite()");let m=y((T,B,K,te)=>{let re=j(1,1);return K&&te?(re.x=K/(T.width*B.w),re.y=te/(T.height*B.h)):K?(re.x=K/(T.width*B.w),re.y=re.x):te&&(re.y=te/(T.height*B.h),re.x=re.y),re},"calcTexScale");return{id:"sprite",width:0,height:0,frame:u.frame||0,quad:u.quad||new lt(0,0,1,1),animSpeed:(V=u.animSpeed)!=null?V:1,flipX:(I=u.flipX)!=null?I:!1,flipY:(_=u.flipY)!=null?_:!1,draw(){var B,K;if(!c)return;let T=c.frames[(B=this.frame)!=null?B:0];if(!T)throw new Error(`Frame not found: ${(K=this.frame)!=null?K:0}`);if(c.slice9){let{left:te,right:re,top:we,bottom:Pe}=c.slice9,Oe=c.tex.width*T.w,it=c.tex.height*T.h,Ue=this.width-te-re,je=this.height-we-Pe,se=te/Oe,be=re/Oe,st=1-se-be,G=we/it,oe=Pe/it,$=1-G-oe,ae=[ot(0,0,se,G),ot(se,0,st,G),ot(se+st,0,be,G),ot(0,G,se,$),ot(se,G,st,$),ot(se+st,G,be,$),ot(0,G+$,se,oe),ot(se,G+$,st,oe),ot(se+st,G+$,be,oe),ot(0,0,te,we),ot(te,0,Ue,we),ot(te+Ue,0,re,we),ot(0,we,te,je),ot(te,we,Ue,je),ot(te+Ue,we,re,je),ot(0,we+je,te,Pe),ot(te,we+je,Ue,Pe),ot(te+Ue,we+je,re,Pe)];for(let ne=0;ne<9;ne++){let me=ae[ne],pe=ae[ne+9];un(Object.assign(cn(this),{pos:pe.pos(),tex:c.tex,quad:T.scale(me),flipX:this.flipX,flipY:this.flipY,tiled:u.tiled,width:pe.w,height:pe.h}))}}else un(Object.assign(cn(this),{tex:c.tex,quad:T,flipX:this.flipX,flipY:this.flipY,tiled:u.tiled,width:this.width,height:this.height}))},update(){if(!c){let B=yn(s);if(!B||!B.data)return;let K=B.data.frames[0].clone();u.quad&&(K=K.scale(u.quad));let te=m(B.data.tex,K,u.width,u.height);this.width=B.data.tex.width*K.w*te.x,this.height=B.data.tex.height*K.h*te.y,u.anim&&this.play(u.anim),c=B.data,x.trigger(c)}if(!w)return;let T=c.anims[w.name];if(typeof T=="number"){this.frame=T;return}if(T.speed===0)throw new Error("Sprite anim speed cannot be 0");w.timer+=At()*this.animSpeed,w.timer>=1/w.speed&&(w.timer=0,T.from>T.to?(this.frame--,this.frame<T.to&&(w.loop?this.frame=T.from:(this.frame++,w.onEnd(),this.stop()))):(this.frame++,this.frame>T.to&&(w.loop?this.frame=T.from:(this.frame--,w.onEnd(),this.stop()))))},play(T,B={}){var te,re,we,Pe,Oe,it,Ue;if(!c){x.add(()=>this.play(T,B));return}let K=c.anims[T];if(!K)throw new Error(`Anim not found: ${T}`);w&&this.stop(),w=typeof K=="number"?{name:T,timer:0,loop:!1,pingpong:!1,speed:0,onEnd:()=>{}}:{name:T,timer:0,loop:(re=(te=B.loop)!=null?te:K.loop)!=null?re:!1,pingpong:(Pe=(we=B.pingpong)!=null?we:K.pingpong)!=null?Pe:!1,speed:(it=(Oe=B.speed)!=null?Oe:K.speed)!=null?it:10,onEnd:(Ue=B.onEnd)!=null?Ue:()=>{}},this.frame=typeof K=="number"?K:K.from,this.trigger("animStart",T)},stop(){if(!w)return;let T=w.name;w=null,this.trigger("animEnd",T)},numFrames(){var T;return(T=c==null?void 0:c.frames.length)!=null?T:0},curAnim(){return w==null?void 0:w.name},onAnimEnd(T){return this.on("animEnd",T)},onAnimStart(T){return this.on("animStart",T)},renderArea(){return new ft(j(0),this.width,this.height)},inspect(){if(typeof s=="string")return`"${s}"`}}}y(Le,"sprite");function hn(s,u={}){var w;function c(x){var V,I;let m=En(Object.assign(cn(x),{text:x.text+"",size:x.textSize,font:x.font,width:u.width&&x.width,align:x.align,letterSpacing:x.letterSpacing,lineSpacing:x.lineSpacing,transform:x.textTransform,styles:x.textStyles}));return u.width||(x.width=m.width/(((V=x.scale)==null?void 0:V.x)||1)),x.height=m.height/(((I=x.scale)==null?void 0:I.y)||1),m}return y(c,"update"),{id:"text",text:s,textSize:(w=u.size)!=null?w:U1,font:u.font,width:u.width,height:0,align:u.align,lineSpacing:u.lineSpacing,letterSpacing:u.letterSpacing,textTransform:u.transform,textStyles:u.styles,add(){Xr(()=>c(this))},draw(){Sn(c(this))},renderArea(){return new ft(j(0),this.width,this.height)}}}y(hn,"text");function Ri(s,u,c={}){return{id:"rect",width:s,height:u,radius:c.radius||0,draw(){pt(Object.assign(cn(this),{width:this.width,height:this.height,radius:this.radius}))},renderArea(){return new ft(j(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}y(Ri,"rect");function da(s,u){return{id:"rect",width:s,height:u,draw(){Un(Object.assign(cn(this),{width:this.width,height:this.height}))},renderArea(){return new ft(j(0),this.width,this.height)},inspect(){return`${Math.ceil(this.width)}, ${Math.ceil(this.height)}`}}}y(da,"uvquad");function Vi(s){return{id:"circle",radius:s,draw(){Qt(Object.assign(cn(this),{radius:this.radius}))},renderArea(){return new ft(new J(this.anchor?0:-this.radius),this.radius*2,this.radius*2)},inspect(){return`${Math.ceil(this.radius)}`}}}y(Vi,"circle");function pa(s=1,u=De(0,0,0)){return{id:"outline",outline:{width:s,color:u}}}y(pa,"outline");function Bs(s,u){let c=new Au;return s&&u&&c.pushd(new lu(s,u)),{id:"timer",wait(w,x){let m=[x],V=new lu(w,()=>m.forEach(_=>_())),I=c.pushd(V);return{get paused(){return V.paused},set paused(_){V.paused=_},cancel:I,onEnd(_){m.push(_)},then(_){return this.onEnd(_),this}}},update(){c.forEach((w,x)=>{w.tick(At())&&c.delete(x)})}}}y(Bs,"timer");let Gu=640,ga=65536;function Zr(s={}){var V,I,_,T;let u=j(0),c=null,w=null,x=!1,m=[];return{id:"body",require:["pos","area"],jumpForce:(V=s.jumpForce)!=null?V:Gu,gravityScale:(I=s.gravityScale)!=null?I:1,isStatic:(_=s.isStatic)!=null?_:!1,mass:(T=s.mass)!=null?T:1,add(){if(this.mass===0)throw new Error("Can't set body mass to 0");m.push(this.onCollideUpdate((B,K)=>{if(B.is("body")&&!K.resolved&&(this.trigger("beforePhysicsResolve",K),B.trigger("beforePhysicsResolve",K.reverse()),!K.resolved&&!(this.isStatic&&B.isStatic))){if(!this.isStatic&&!B.isStatic){let te=this.mass+B.mass;this.pos=this.pos.add(K.displacement.scale(B.mass/te)),B.pos=B.pos.add(K.displacement.scale(-this.mass/te)),this.transform=pr(this),B.transform=pr(B)}else{let te=!this.isStatic&&B.isStatic?K:K.reverse();te.source.pos=te.source.pos.add(te.displacement),te.source.transform=pr(te.source)}K.resolved=!0,this.trigger("physicsResolve",K),B.trigger("physicsResolve",K.reverse())}})),m.push(this.onPhysicsResolve(B=>{R.gravity&&(B.isBottom()&&this.isFalling()?(u.y=0,c=B.target,w=B.target.pos,x?x=!1:this.trigger("ground",c)):B.isTop()&&this.isJumping()&&(u.y=0,this.trigger("headbutt",B.target)))}))},update(){var K;if(!R.gravity||this.isStatic)return;if(x&&(c=null,w=null,this.trigger("fallOff"),x=!1),c)if(!this.isColliding(c)||!c.exists()||!c.is("body"))x=!0;else{!c.pos.eq(w)&&s.stickToPlatform!==!1&&this.moveBy(c.pos.sub(w)),w=c.pos;return}let B=u.y;u.y+=R.gravity*this.gravityScale*At(),u.y=Math.min(u.y,(K=s.maxVelocity)!=null?K:ga),B<0&&u.y>=0&&this.trigger("fall"),this.move(u)},destroy(){m.forEach(B=>B.cancel())},onPhysicsResolve(B){return this.on("physicsResolve",B)},onBeforePhysicsResolve(B){return this.on("beforePhysicsResolve",B)},curPlatform(){return c},isGrounded(){return c!==null},isFalling(){return u.y>0},isJumping(){return u.y<0},jump(B){c=null,w=null,u.y=-B||-this.jumpForce},onGround(B){return this.on("ground",B)},onFall(B){return this.on("fall",B)},onFallOff(B){return this.on("fallOff",B)},onHeadbutt(B){return this.on("headbutt",B)}}}y(Zr,"body");function Wn(s=2){let u=s,c=[];return{id:"doubleJump",require:["body"],numJumps:s,add(){c.push(this.onGround(()=>{u=this.numJumps}))},destroy(){c.forEach(w=>w.cancel())},doubleJump(w){u<=0||(u<this.numJumps&&this.trigger("doubleJump"),u--,this.jump(w))},onDoubleJump(w){return this.on("doubleJump",w)},inspect(){return`${u}`}}}y(Wn,"doubleJump");function ma(s,u){return{id:"shader",shader:s,...typeof u=="function"?{uniform:u(),update(){this.uniform=u()}}:{uniform:u}}}y(ma,"shader");function Fs(){return{id:"fixed",fixed:!0}}y(Fs,"fixed");function Ti(s){return{id:"stay",stay:!0,scenesToStay:s}}y(Ti,"stay");function Mi(s){if(s==null)throw new Error("health() requires the initial amount of hp");return{id:"health",hurt(u=1){this.setHP(s-u),this.trigger("hurt")},heal(u=1){this.setHP(s+u),this.trigger("heal")},hp(){return s},setHP(u){s=u,s<=0&&this.trigger("death")},onHurt(u){return this.on("hurt",u)},onHeal(u){return this.on("heal",u)},onDeath(u){return this.on("death",u)},inspect(){return`${s}`}}}y(Mi,"health");function Ci(s,u={}){var w;if(s==null)throw new Error("lifespan() requires time");let c=(w=u.fade)!=null?w:0;return{id:"lifespan",async add(){await Jr(s),c>0&&this.opacity&&await Ar(this.opacity,0,c,x=>this.opacity=x,iu.linear),this.destroy()}}}y(Ci,"lifespan");function Ls(s,u,c){if(!s)throw new Error("state() requires an initial state");let w={};function x(_){w[_]||(w[_]={enter:new sn,end:new sn,update:new sn,draw:new sn})}y(x,"initStateEvents");function m(_,T,B){return x(T),w[T][_].add(B)}y(m,"on");function V(_,T,...B){x(T),w[T][_].trigger(...B)}y(V,"trigger");let I=!1;return{id:"state",state:s,enterState(_,...T){if(I=!0,u&&!u.includes(_))throw new Error(`State not found: ${_}`);let B=this.state;if(c){if(!(c!=null&&c[B]))return;let K=typeof c[B]=="string"?[c[B]]:c[B];if(!K.includes(_))throw new Error(`Cannot transition state from "${B}" to "${_}". Available transitions: ${K.map(te=>`"${te}"`).join(", ")}`)}V("end",B,...T),this.state=_,V("enter",_,...T),V("enter",`${B} -> ${_}`,...T)},onStateTransition(_,T,B){return m("enter",`${_} -> ${T}`,B)},onStateEnter(_,T){return m("enter",_,T)},onStateUpdate(_,T){return m("update",_,T)},onStateDraw(_,T){return m("draw",_,T)},onStateEnd(_,T){return m("end",_,T)},update(){I||(V("enter",s),I=!0),V("update",this.state)},draw(){V("draw",this.state)},inspect(){return this.state}}}y(Ls,"state");function wa(s=1){let u=0,c=!1;return{require:["opacity"],add(){this.opacity=0},update(){c||(u+=At(),this.opacity=wu(u,0,s,0,1),u>=s&&(this.opacity=1,c=!0))}}}y(wa,"fadeIn");function Xr(s){H.loaded?s():R.ev.on("load",s)}y(Xr,"onLoad");function Oi(s,u){R.scenes[s]=u}y(Oi,"scene");function va(s,...u){if(!R.scenes[s])throw new Error(`Scene not found: ${s}`);R.ev.onOnce("frameEnd",()=>{R.ev=new ai,R.objEvents=new ai,[...R.root.children].forEach(c=>{(!c.stay||c.scenesToStay&&!c.scenesToStay.includes(s))&&R.root.remove(c)}),R.root.clearEvents(),R.cam={pos:null,scale:j(1),angle:0,shake:0,transform:new ht},R.scenes[s](...u),e.debug!==!1&&Ms(),e.burp&&$e()})}y(va,"go");function Ds(s,u){try{return JSON.parse(window.localStorage[s])}catch{return u?(yt(s,u),u):null}}y(Ds,"getData");function yt(s,u){window.localStorage[s]=JSON.stringify(u)}y(yt,"setData");function $r(s){let u=s(ut);for(let c in u)ut[c]=u[c],e.global!==!1&&(window[c]=u[c]);return ut}y($r,"plug");function dn(){return j(rt()/2,We()/2)}y(dn,"center");let Aa;(s=>(s[s.None=0]="None",s[s.Left=1]="Left",s[s.Top=2]="Top",s[s.LeftTop=3]="LeftTop",s[s.Right=4]="Right",s[s.Horizontal=5]="Horizontal",s[s.RightTop=6]="RightTop",s[s.HorizontalTop=7]="HorizontalTop",s[s.Bottom=8]="Bottom",s[s.LeftBottom=9]="LeftBottom",s[s.Vertical=10]="Vertical",s[s.LeftVertical=11]="LeftVertical",s[s.RightBottom=12]="RightBottom",s[s.HorizontalBottom=13]="HorizontalBottom",s[s.RightVertical=14]="RightVertical",s[s.All=15]="All"))(Aa||(Aa={}));function Pi(s={}){var I,_,T,B;let u=j(0),c=(I=s.isObstacle)!=null?I:!1,w=(_=s.cost)!=null?_:0,x=(T=s.edges)!=null?T:[],m=y(()=>{let K={left:1,top:2,right:4,bottom:8};return x.map(te=>K[te]||0).reduce((te,re)=>te|re,0)},"getEdgeMask"),V=m();return{id:"tile",tilePosOffset:(B=s.offset)!=null?B:j(0),set tilePos(K){let te=this.getLevel();u=K.clone(),this.pos=j(this.tilePos.x*te.tileWidth(),this.tilePos.y*te.tileHeight()).add(this.tilePosOffset)},get tilePos(){return u},set isObstacle(K){c!==K&&(c=K,this.getLevel().invalidateNavigationMap())},get isObstacle(){return c},set cost(K){w!==K&&(w=K,this.getLevel().invalidateNavigationMap())},get cost(){return w},set edges(K){x=K,V=m(),this.getLevel().invalidateNavigationMap()},get edges(){return x},get edgeMask(){return V},getLevel(){return this.parent},moveLeft(){this.tilePos=this.tilePos.add(j(-1,0))},moveRight(){this.tilePos=this.tilePos.add(j(1,0))},moveUp(){this.tilePos=this.tilePos.add(j(0,-1))},moveDown(){this.tilePos=this.tilePos.add(j(0,1))}}}y(Pi,"tile");function ya(s,u){var st;if(!u.tileWidth||!u.tileHeight)throw new Error("Must provide tileWidth and tileHeight.");let c=Xt([wr((st=u.pos)!=null?st:j(0))]),w=s.length,x=0,m=null,V=null,I=null,_=null,T=y(G=>G.x+G.y*x,"tile2Hash"),B=y(G=>j(Math.floor(G%x),Math.floor(G/x)),"hash2Tile"),K=y(()=>{m=[];for(let G of c.children)te(G)},"createSpatialMap"),te=y(G=>{let oe=T(G.tilePos);m[oe]?m[oe].push(G):m[oe]=[G]},"insertIntoSpatialMap"),re=y(G=>{let oe=T(G.tilePos);if(m[oe]){let $=m[oe].indexOf(G);$>=0&&m[oe].splice($,1)}},"removeFromSpatialMap"),we=y(()=>{let G=!1;for(let oe of c.children){let $=c.pos2Tile(oe.pos);(oe.tilePos.x!=$.x||oe.tilePos.y!=$.y)&&(G=!0,re(oe),oe.tilePos.x=$.x,oe.tilePos.y=$.y,te(oe))}G&&c.trigger("spatial_map_changed")},"updateSpatialMap"),Pe=y(()=>{let G=c.getSpatialMap(),oe=c.numRows()*c.numColumns();V?V.length=oe:V=new Array(oe),V.fill(1,0,oe);for(let $=0;$<G.length;$++){let ae=G[$];if(ae){let ne=0;for(let me of ae)if(me.isObstacle){ne=1/0;break}else ne+=me.cost;V[$]=ne||1}}},"createCostMap"),Oe=y(()=>{let G=c.getSpatialMap(),oe=c.numRows()*c.numColumns();I?I.length=oe:I=new Array(oe),I.fill(15,0,oe);for(let $=0;$<G.length;$++){let ae=G[$];if(ae){let ne=ae.length,me=15;for(let pe=0;pe<ne;pe++)me|=ae[pe].edgeMask;I[$]=me}}},"createEdgeMap"),it=y(()=>{let G=c.numRows()*c.numColumns(),oe=y((ae,ne)=>{let me=[];for(me.push(ae);me.length>0;){let pe=me.pop();se(pe).forEach(ze=>{_[ze]<0&&(_[ze]=ne,me.push(ze))})}},"traverse");_?_.length=G:_=new Array(G),_.fill(-1,0,G);let $=0;for(let ae=0;ae<V.length;ae++){if(_[ae]>=0){$++;continue}oe(ae,$),$++}},"createConnectivityMap"),Ue=y((G,oe)=>V[oe],"getCost"),je=y((G,oe)=>{let $=B(G),ae=B(oe);return $.dist(ae)},"getHeuristic"),se=y((G,oe)=>{let $=[],ae=Math.floor(G%x),ne=ae>0&&I[G]&1&&V[G-1]!==1/0,me=G>=x&&I[G]&2&&V[G-x]!==1/0,pe=ae<x-1&&I[G]&4&&V[G+1]!==1/0,ze=G<x*w-x-1&&I[G]&8&&V[G+x]!==1/0;return oe?(ne&&(me&&$.push(G-x-1),$.push(G-1),ze&&$.push(G+x-1)),me&&$.push(G-x),pe&&(me&&$.push(G-x+1),$.push(G+1),ze&&$.push(G+x+1)),ze&&$.push(G+x)):(ne&&$.push(G-1),me&&$.push(G-x),pe&&$.push(G+1),ze&&$.push(G+x)),$},"getNeighbours"),be={id:"level",tileWidth(){return u.tileWidth},tileHeight(){return u.tileHeight},spawn(G,...oe){let $=j(...oe),ae=(()=>{if(typeof G=="string"){if(u.tiles[G]){if(typeof u.tiles[G]!="function")throw new Error("Level symbol def must be a function returning a component list");return u.tiles[G]($)}else if(u.wildcardTile)return u.wildcardTile(G,$)}else{if(Array.isArray(G))return G;throw new Error("Expected a symbol or a component list")}})();if(!ae)return null;let ne=!1,me=!1;for(let ze of ae)ze.id==="tile"&&(me=!0),ze.id==="pos"&&(ne=!0);ne||ae.push(wr()),me||ae.push(Pi());let pe=c.add(ae);return ne&&(pe.tilePosOffset=pe.pos.clone()),pe.tilePos=$,m&&(te(pe),this.trigger("spatial_map_changed"),this.trigger("navigation_map_invalid")),pe},numColumns(){return x},numRows(){return w},levelWidth(){return x*this.tileWidth()},levelHeight(){return w*this.tileHeight()},tile2Pos(...G){return j(...G).scale(this.tileWidth(),this.tileHeight())},pos2Tile(...G){let oe=j(...G);return j(Math.floor(oe.x/this.tileWidth()),Math.floor(oe.y/this.tileHeight()))},getSpatialMap(){return m||K(),m},onSpatialMapChanged(G){return this.on("spatial_map_changed",G)},onNavigationMapInvalid(G){return this.on("navigation_map_invalid",G)},getAt(G){m||K();let oe=T(G);return m[oe]||[]},update(){m&&we()},invalidateNavigationMap(){V=null,I=null,_=null},onNavigationMapChanged(G){return this.on("navigation_map_changed",G)},getTilePath(G,oe,$={}){var Qe;if(V||Pe(),I||Oe(),_||it(),G.x<0||G.x>=x||G.y<0||G.y>=w||oe.x<0||oe.x>=x||oe.y<0||oe.y>=w)return null;let ae=T(G),ne=T(oe);if(V[ne]===1/0)return null;if(ae===ne)return[];if(_[ae]!=-1&&_[ae]!==_[ne])return null;let me=new Dd((qe,ks)=>qe.cost<ks.cost);me.insert({cost:0,node:ae});let pe=new Map;pe.set(ae,ae);let ze=new Map;for(ze.set(ae,0);me.length!==0;){let qe=(Qe=me.remove())==null?void 0:Qe.node;if(qe===ne)break;let ks=se(qe,$.allowDiagonals);for(let Gn of ks){let Di=(ze.get(qe)||0)+Ue(qe,Gn)+je(Gn,ne);(!ze.has(Gn)||Di<ze.get(Gn))&&(ze.set(Gn,Di),me.insert({cost:Di,node:Gn}),pe.set(Gn,qe))}}let Dt=[],bt=ne,yr=B(bt);for(Dt.push(yr);bt!==ae;){bt=pe.get(bt);let qe=B(bt);Dt.push(qe)}return Dt.reverse()},getPath(G,oe,$={}){let ae=this.tileWidth(),ne=this.tileHeight(),me=this.getTilePath(this.pos2Tile(G),this.pos2Tile(oe),$);return me?[G,...me.slice(1,-1).map(pe=>pe.scale(ae,ne).add(ae/2,ne/2)),oe]:null}};return c.use(be),c.onNavigationMapInvalid(()=>{c.invalidateNavigationMap(),c.trigger("navigation_map_changed")}),s.forEach((G,oe)=>{let $=G.split("");x=Math.max($.length,x),$.forEach((ae,ne)=>{c.spawn(ae,j(ne,oe))})}),c}y(ya,"addLevel");function xa(s={}){var m,V;let u=null,c=null,w=null,x=null;return{id:"agent",require:["pos","tile"],agentSpeed:(m=s.speed)!=null?m:100,allowDiagonals:(V=s.allowDiagonals)!=null?V:!0,getDistanceToTarget(){return u?this.pos.dist(u):0},getNextLocation(){return c&&w?c[w]:null},getPath(){return c?c.slice():null},getTarget(){return u},isNavigationFinished(){return c?w===null:!0},isTargetReachable(){return c!==null},isTargetReached(){return u?this.pos.eq(u):!0},setTarget(I){u=I,c=this.getLevel().getPath(this.pos,u,{allowDiagonals:this.allowDiagonals}),w=c?0:null,c?(x||(x=this.getLevel().onNavigationMapChanged(()=>{c&&w!==null&&(c=this.getLevel().getPath(this.pos,u,{allowDiagonals:this.allowDiagonals}),w=c?0:null,c?this.trigger("navigation-next",this,c[w]):this.trigger("navigation-ended",this))}),this.onDestroy(()=>x.cancel())),this.trigger("navigation-started",this),this.trigger("navigation-next",this,c[w])):this.trigger("navigation-ended",this)},update(){if(c&&w!==null){if(this.pos.sdist(c[w])<2)if(w===c.length-1){this.pos=u.clone(),w=null,this.trigger("navigation-ended",this),this.trigger("target-reached",this);return}else w++,this.trigger("navigation-next",this,c[w]);this.moveTo(c[w],this.agentSpeed)}},onNavigationStarted(I){return this.on("navigation-started",I)},onNavigationNext(I){return this.on("navigation-next",I)},onNavigationEnded(I){return this.on("navigation-ended",I)},onTargetReached(I){return this.on("target-reached",I)},inspect(){return JSON.stringify({target:JSON.stringify(u),path:JSON.stringify(c)})}}}y(xa,"agent");function _a(s){let u=i.canvas.captureStream(s),c=C.ctx.createMediaStreamDestination();C.masterNode.connect(c);let w=new MediaRecorder(u),x=[];return w.ondataavailable=m=>{m.data.size>0&&x.push(m.data)},w.onerror=()=>{C.masterNode.disconnect(c),u.getTracks().forEach(m=>m.stop())},w.start(),{resume(){w.resume()},pause(){w.pause()},stop(){return w.stop(),C.masterNode.disconnect(c),u.getTracks().forEach(m=>m.stop()),new Promise(m=>{w.onstop=()=>{m(new Blob(x,{type:"video/mp4"}))}})},download(m="kaboom.mp4"){this.stop().then(V=>tf(m,V))}}}y(_a,"record");function Ea(){return document.activeElement===i.canvas}y(Ea,"isFocused");function Sa(s){s.destroy()}y(Sa,"destroy");let Xt=R.root.add.bind(R.root),Yu=R.root.readd.bind(R.root),Ju=R.root.removeAll.bind(R.root),Ii=R.root.get.bind(R.root);function Bi(s=2,u=1){let c=0;return{id:"boom",require:["scale"],update(){let w=Math.sin(c*s)*u;w<0&&this.destroy(),this.scale=j(w),c+=At()}}}y(Bi,"boom");let Mn=ar(null,B1),Fi=ar(null,F1);function ba(s,u={}){var V,I;let c=Xt([wr(s),Ti()]),w=(u.speed||1)*5,x=u.scale||1;c.add([Le(Fi),vr(0),gt("center"),Bi(w,x),...(V=u.comps)!=null?V:[]]);let m=c.add([Le(Mn),vr(0),gt("center"),Bs(.4/w,()=>m.use(Bi(w,x))),...(I=u.comps)!=null?I:[]]);return m.onDestroy(()=>c.destroy()),c}y(ba,"addKaboom");function Ra(){var s,u,c;for(let w of navigator.getGamepads()){if(!w)continue;let x=(c=(u=((s=e.gamepads)!=null?s:{})[w.id])!=null?u:Kh[w.id])!=null?c:Kh.default;for(let m=0;m<w.buttons.length;m++)w.buttons[m].pressed?(i.gamepadButtonState.down.has(x.buttons[m])||(i.gamepadButtonState.press(x.buttons[m]),R.ev.trigger("gamepadButtonPress",x.buttons[m])),R.ev.trigger("gamepadButtonDown",x.buttons[m])):i.gamepadButtonState.down.has(x.buttons[m])&&(i.gamepadButtonState.release(x.buttons[m]),R.ev.trigger("gamepadButtonRelease",x.buttons[m]));for(let m in x.sticks){let V=x.sticks[m],I=w.axes[V.x],_=w.axes[V.y];R.ev.trigger("gamepadStick",m,new J(I,_))}}}y(Ra,"processGamepad");function Va(){R.ev.trigger("input"),i.keyState.down.forEach(s=>R.ev.trigger("keyDown",s)),i.mouseState.down.forEach(s=>R.ev.trigger("mouseDown",s)),i.virtualButtonState.down.forEach(s=>R.ev.trigger("virtualButtonDown",s)),Ra()}y(Va,"inputFrame");function Cn(){R.root.update()}y(Cn,"updateFrame");class St{constructor(u,c,w,x=!1){X(this,"source");X(this,"target");X(this,"displacement");X(this,"resolved",!1);this.source=u,this.target=c,this.displacement=w,this.resolved=x}reverse(){return new St(this.target,this.source,this.displacement.scale(-1),this.resolved)}hasOverlap(){return!this.displacement.isZero()}isLeft(){return this.displacement.x>0}isRight(){return this.displacement.x<0}isTop(){return this.displacement.y>0}isBottom(){return this.displacement.y<0}preventResolution(){this.resolved=!0}}y(St,"Collision");function Ns(){let s={},u=e.hashGridSize||k1,c=new ht,w=[];function x(m){if(w.push(c.clone()),m.pos&&c.translate(m.pos),m.scale&&c.scale(m.scale),m.angle&&c.rotate(m.angle),m.transform=c.clone(),m.c("area")&&!m.paused){let V=m,I=V.worldArea().bbox(),_=Math.floor(I.pos.x/u),T=Math.floor(I.pos.y/u),B=Math.ceil((I.pos.x+I.width)/u),K=Math.ceil((I.pos.y+I.height)/u),te=new Set;for(let re=_;re<=B;re++)for(let we=T;we<=K;we++)if(!s[re])s[re]={},s[re][we]=[V];else if(!s[re][we])s[re][we]=[V];else{let Pe=s[re][we];e:for(let Oe of Pe){if(!Oe.exists()||te.has(Oe.id))continue;for(let Ue of V.collisionIgnore)if(Oe.is(Ue))continue e;for(let Ue of Oe.collisionIgnore)if(V.is(Ue))continue e;let it=Id(V.worldArea(),Oe.worldArea());if(it){let Ue=new St(V,Oe,it);V.trigger("collideUpdate",Oe,Ue);let je=Ue.reverse();je.resolved=Ue.resolved,Oe.trigger("collideUpdate",V,je)}te.add(Oe.id)}Pe.push(V)}}m.children.forEach(x),c=w.pop()}y(x,"checkObj"),x(R.root)}y(Ns,"checkFrame");function Ta(){var c;let s=R.cam,u=J.fromAngle(fo(0,360)).scale(s.shake);s.shake=rr(s.shake,0,5*At()),s.transform=new ht().translate(dn()).scale(s.scale).rotate(s.angle).translate(((c=s.pos)!=null?c:dn()).scale(-1).add(u)),R.root.draw(),Et()}y(Ta,"drawFrame");function Ma(){let s=Q();R.ev.numListeners("loading")>0?R.ev.trigger("loading",s):Lt(()=>{let u=rt()/2,c=24,w=j(rt()/2,We()/2).sub(j(u/2,c/2));pt({pos:j(0),width:rt(),height:We(),color:De(0,0,0)}),pt({pos:w,width:u,height:c,fill:!1,outline:{width:4}}),pt({pos:w,width:u*s,height:c})})}y(Ma,"drawLoadScreen");function Us(s,u){Lt(()=>{let c=j(8);Tt(),Te(s);let w=En({text:u,font:ou,size:16,pos:c,color:De(255,255,255),fixed:!0}),x=w.width+c.x*2,m=w.height+c.x*2;s.x+x>=rt()&&Te(j(-x,0)),s.y+m>=We()&&Te(j(0,-m)),pt({width:x,height:m,color:De(0,0,0),radius:4,opacity:.8,fixed:!0}),Sn(w),nt()})}y(Us,"drawInspectText");function Ca(){if(ke.inspect){let s=null;for(let u of R.root.get("*",{recursive:!0}))if(u.c("area")&&u.isHovering()){s=u;break}if(R.root.drawInspect(),s){let u=[],c=s.inspect();for(let w in c)c[w]?u.push(`${w}: ${c[w]}`):u.push(`${w}`);Us(Oo(qn()),u.join(`
`))}Us(j(8),`FPS: ${ke.fps()}`)}ke.paused&&Lt(()=>{Tt(),Te(rt(),0),Te(-8,8);let s=32;pt({width:s,height:s,anchor:"topright",color:De(0,0,0),opacity:.8,radius:4,fixed:!0});for(let u=1;u<=2;u++)pt({width:4,height:s*.6,anchor:"center",pos:j(-s/3*u,s*.5),color:De(255,255,255),radius:2,fixed:!0});nt()}),ke.timeScale!==1&&Lt(()=>{Tt(),Te(rt(),We()),Te(-8,-8);let s=8,u=En({text:ke.timeScale.toFixed(1),font:ou,size:16,color:De(255,255,255),pos:j(-s),anchor:"botright",fixed:!0});pt({width:u.width+s*2+s*4,height:u.height+s*2,anchor:"botright",color:De(0,0,0),opacity:.8,radius:4,fixed:!0});for(let c=0;c<2;c++){let w=ke.timeScale<1;Nr({p1:j(-u.width-s*(w?2:3.5),-s),p2:j(-u.width-s*(w?2:3.5),-s-u.height),p3:j(-u.width-s*(w?3.5:2),-s-u.height/2),pos:j(-c*s*1+(w?-s*.5:0),0),color:De(255,255,255),fixed:!0})}Sn(u),nt()}),ke.curRecording&&Lt(()=>{Tt(),Te(0,We()),Te(24,-24),Qt({radius:12,color:De(255,0,0),opacity:$l(0,1,Kr()*4),fixed:!0}),nt()}),ke.showLog&&R.logs.length>0&&Lt(()=>{Tt(),Te(0,We()),Te(8,-8);let s=8,u=En({text:R.logs.join(`
`),font:ou,pos:j(s,-s),anchor:"botleft",size:16,width:rt()*.6,lineSpacing:s/2,fixed:!0,styles:{time:{color:De(127,127,127)},info:{color:De(255,255,255)},error:{color:De(255,0,127)}}});pt({width:u.width+s*2,height:u.height+s*2,anchor:"botleft",color:De(0,0,0),radius:4,opacity:.8,fixed:!0}),Sn(u),nt()})}y(Ca,"drawDebug");function Oa(){let s=qn(),u=y((w,x,m)=>{Qt({radius:80/2,pos:w,outline:{width:4,color:De(0,0,0)},opacity:.5,fixed:!0}),m&&hr({text:m,pos:w,color:De(0,0,0),size:40,anchor:"center",opacity:.5,fixed:!0}),zr("left")&&Ru(new so(w,80/2),s)&&R.ev.onOnce("input",()=>{i.virtualButtonState.press(x),R.ev.trigger("virtualButtonPress",x),i.keyState.press(x),R.ev.trigger("keyPress",x)}),qr("left")&&R.ev.onOnce("input",()=>{i.virtualButtonState.release(x),R.ev.trigger("virtualButtonRelease",x),i.keyState.release(x),R.ev.trigger("keyRelease",x)})},"drawCircleButton"),c=y((w,x,m)=>{pt({width:64,height:64,pos:w,outline:{width:4,color:De(0,0,0)},radius:4,anchor:"center",opacity:.5,fixed:!0}),m&&hr({text:m,pos:w,color:De(0,0,0),size:40,anchor:"center",opacity:.5,fixed:!0}),zr("left")&&Ji(new ft(w.add(-64/2,-64/2),64,64),s)&&R.ev.onOnce("input",()=>{i.virtualButtonState.press(x),R.ev.trigger("virtualButtonPress",x),i.keyState.press(x),R.ev.trigger("keyPress",x)}),qr("left")&&R.ev.onOnce("input",()=>{i.virtualButtonState.release(x),R.ev.trigger("virtualButtonRelease",x),i.keyState.release(x),R.ev.trigger("keyRelease",x)})},"drawSquareButton");Lt(()=>{u(j(rt()-80,We()-160),"a"),u(j(rt()-160,We()-80),"b"),c(j(60,We()-124),"left"),c(j(188,We()-124),"right"),c(j(124,We()-188),"up"),c(j(124,We()-60),"down")})}y(Oa,"drawVirtualControls"),e.debug!==!1&&Ms(),e.burp&&$e();function Kn(s){R.ev.on("loading",s)}y(Kn,"onLoading");function O(s){R.ev.on("resize",s)}y(O,"onResize");function D(s){R.ev.on("gamepadConnect",s)}y(D,"onGamepadConnect");function F(s){R.ev.on("gamepadDisconnect",s)}y(F,"onGamepadDisconnect");function ee(s){R.ev.on("error",s)}y(ee,"onError");function de(s){Ye(()=>{Lt(()=>{let u=rt(),c=We(),w={size:36,width:u-32*2,letterSpacing:4,lineSpacing:4,font:ou,fixed:!0};pt({width:u,height:c,color:De(0,0,255),fixed:!0});let x=En({...w,text:s.name,pos:j(32),color:De(255,128,0),fixed:!0});Sn(x),hr({...w,text:s.message,pos:j(32,32+x.height+16),fixed:!0}),nt(),R.ev.trigger("error",s)})})}y(de,"handleErr");function Me(){i.keyState.update(),i.mouseState.update(),i.virtualButtonState.update(),i.gamepadButtonState.update(),i.charInputted=[],i.isMouseMoved=!1}y(Me,"resetInputState");function Ye(s){i.loopID!==null&&cancelAnimationFrame(i.loopID);let u=y(c=>{if(i.stopped)return;if(document.visibilityState!=="visible"){i.loopID=requestAnimationFrame(u);return}let w=c/1e3,x=w-i.realTime;i.realTime=w,i.skipTime||(i.dt=x,i.time+=At(),i.fpsCounter.tick(i.dt)),i.skipTime=!1,i.numFrames++,bo(),s(),ps(),Me(),R.ev.trigger("frameEnd"),i.loopID=requestAnimationFrame(u)},"frame");u(0)}y(Ye,"run");function Ie(){R.ev.onOnce("frameEnd",()=>{i.stopped=!0,a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);let s=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(let u=0;u<s;u++)a.activeTexture(a.TEXTURE0+u),a.bindTexture(a.TEXTURE_2D,null),a.bindTexture(a.TEXTURE_CUBE_MAP,null);a.bindBuffer(a.ARRAY_BUFFER,null),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),a.bindRenderbuffer(a.RENDERBUFFER,null),a.bindFramebuffer(a.FRAMEBUFFER,null),r.forEach(u=>u()),a.deleteBuffer(d.vbuf),a.deleteBuffer(d.ibuf);for(let u in vt)i.canvas.removeEventListener(u,vt[u]);for(let u in zn)document.removeEventListener(u,zn[u]);for(let u in bn)window.removeEventListener(u,bn[u])})}y(Ie,"quit");function Ar(s,u,c,w,x=iu.linear){let m=0,V=[],I=Ei(()=>{m+=At();let _=Math.min(m/c,1);w(rr(s,u,x(_))),_===1&&(I.cancel(),w(u),V.forEach(T=>T()))});return{get paused(){return I.paused},set paused(_){I.paused=_},onEnd(_){V.push(_)},then(_){return this.onEnd(_),this},cancel(){I.cancel()},finish(){I.cancel(),w(u),V.forEach(_=>_())}}}y(Ar,"tween");let Li=!0;Ye(()=>{H.loaded||Q()===1&&!Li&&(H.loaded=!0,R.ev.trigger("load")),!H.loaded&&e.loadingScreen!==!1||Li?Ma():(Va(),ke.paused||Cn(),Ns(),Ta(),e.debug!==!1&&Ca(),e.virtualControls&&yi()&&Oa()),Li&&(Li=!1)}),ws();let ut={VERSION:L1,loadRoot:le,loadProgress:Q,loadSprite:ar,loadSpriteAtlas:os,loadSound:an,loadBitmapFont:gi,loadFont:or,loadShader:_o,loadShaderURL:An,loadAseprite:xo,loadPedit:us,loadBean:Eo,load:ue,getSprite:ur,getSound:Ft,getFont:ls,getBitmapFont:fs,getShader:cs,Asset:L,SpriteData:E,SoundData:S,width:rt,height:We,center:dn,dt:At,time:Kr,screenshot:As,record:_a,isFocused:Ea,setCursor:vi,getCursor:Ho,setCursorLocked:Wo,isCursorLocked:Ko,setFullscreen:Go,isFullscreen:Ai,isTouchScreen:yi,onLoad:Xr,onLoading:Kn,onResize:O,onGamepadConnect:D,onGamepadDisconnect:F,onError:ee,camPos:Yo,camScale:ys,camRot:Gr,shake:xs,toScreen:xi,toWorld:_i,setGravity:Si,getGravity:Tn,setBackground:Cs,getBackground:bi,getGamepads:Mt,add:Xt,destroy:Sa,destroyAll:Ju,get:Ii,readd:Yu,pos:wr,scale:vr,rotate:Os,color:Ps,opacity:Is,anchor:gt,area:Qr,sprite:Le,text:hn,rect:Ri,circle:Vi,uvquad:da,outline:pa,body:Zr,doubleJump:Wn,shader:ma,timer:Bs,fixed:Fs,stay:Ti,health:Mi,lifespan:Ci,z:fa,move:ca,offscreen:fn,follow:Ct,state:Ls,fadeIn:wa,tile:Pi,agent:xa,on:ln,onUpdate:Ei,onDraw:_s,onAdd:gr,onDestroy:Rn,onClick:bs,onCollide:Es,onCollideUpdate:Ss,onCollideEnd:Jo,onHover:Rs,onHoverUpdate:Vs,onHoverEnd:jo,onKeyDown:Zo,onKeyPress:Vn,onKeyPressRepeat:Wu,onKeyRelease:Ku,onMouseDown:Xo,onMousePress:jr,onMouseRelease:$o,onMouseMove:ea,onCharInput:ta,onTouchStart:na,onTouchMove:ra,onTouchEnd:Ne,onScroll:Fe,onVirtualButtonPress:sa,onVirtualButtonDown:ia,onVirtualButtonRelease:oa,onGamepadButtonDown:aa,onGamepadButtonPress:ua,onGamepadButtonRelease:la,onGamepadStick:Ts,mousePos:qn,mouseDeltaPos:vs,isKeyDown:Lo,isKeyPressed:Bo,isKeyPressedRepeat:Fo,isKeyReleased:Do,isMouseDown:Po,isMousePressed:zr,isMouseReleased:qr,isMouseMoved:Io,isVirtualButtonPressed:No,isVirtualButtonDown:Hr,isVirtualButtonReleased:Uo,isGamepadButtonPressed:Wr,isGamepadButtonDown:ko,isGamepadButtonReleased:zo,charInputted:qo,loop:Qo,wait:Jr,play:hs,volume:lr,burp:fr,audioCtx:C.ctx,Timer:lu,Line:nr,Rect:ft,Circle:so,Polygon:ci,Vec2:J,Color:Ve,Mat4:ht,Quad:lt,RNG:bf,rand:fo,randi:Rf,randSeed:bd,vec2:j,rgb:De,hsl2rgb:V1,quad:ot,choose:Vd,chance:Rd,lerp:rr,tween:Ar,easings:iu,map:wu,mapc:Sd,wave:$l,deg2rad:Fn,rad2deg:Qi,testLineLine:Yi,testRectRect:Td,testRectLine:Cd,testRectPoint:Ji,testCirclePolygon:Pd,testLinePoint:Od,testLineCircle:Vf,drawSprite:kn,drawText:hr,formatText:En,drawRect:pt,drawLine:_n,drawLines:Dr,drawTriangle:Nr,drawCircle:Qt,drawEllipse:Ur,drawUVQuad:Un,drawPolygon:Zt,drawFormattedText:Sn,drawMasked:Vo,drawSubtracted:To,pushTransform:Tt,popTransform:nt,pushTranslate:Te,pushScale:Ht,pushRotate:jt,pushMatrix:cr,usePostEffect:Jt,debug:ke,scene:Oi,go:va,addLevel:ya,getData:Ds,setData:yt,download:Vu,downloadJSON:Ld,downloadText:Cf,downloadBlob:tf,plug:$r,ASCII_CHARS:Jh,canvas:i.canvas,addKaboom:ba,LEFT:J.LEFT,RIGHT:J.RIGHT,UP:J.UP,DOWN:J.DOWN,RED:Ve.RED,GREEN:Ve.GREEN,BLUE:Ve.BLUE,YELLOW:Ve.YELLOW,MAGENTA:Ve.MAGENTA,CYAN:Ve.CYAN,WHITE:Ve.WHITE,BLACK:Ve.BLACK,quit:Ie,Event:sn,EventHandler:ai,EventController:Mr};if(e.plugins&&e.plugins.forEach($r),e.global!==!1)for(let s in ut)window[s]=ut[s];return i.canvas.focus(),ut},"default");const W=G1({canvas:document.querySelector("#app"),background:[100,91,80],pixelDensity:window.devicePixelRatio,font:"sinko"});W.loadSound("message-pop","assets/pop.wav");W.loadBitmapFont("sinko","assets/sinko.png",8,10);window.isTrackpad=!1;function Yd(e){e.wheelDeltaY?e.wheelDeltaY===e.deltaY*-3&&(window.isTrackpad=!0):e.deltaMode===0&&(window.isTrackpad=!0)}window.addEventListener("mousewheel",Yd,!1);window.addEventListener("DOMMouseScroll",Yd,!1);let Y1=location.hostname.indexOf("itch")!==-1,Hl=window.innerHeight,Wl=560;Y1&&window.addEventListener("resize",()=>{(Hl===Wl&&window.innerHeight!==Hl||Hl!==Wl&&window.innerHeight===Wl)&&setTimeout(()=>{window.location.reload()},500)});function Jd(e,r){return function(){return e.apply(r,arguments)}}const{toString:jd}=Object.prototype,{getPrototypeOf:Of}=Object,Pf=(e=>r=>{const i=jd.call(r);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),sr=e=>(e=e.toLowerCase(),r=>Pf(r)===e),Tu=e=>r=>typeof r===e,{isArray:ts}=Array,co=Tu("undefined");function J1(e){return e!==null&&!co(e)&&e.constructor!==null&&!co(e.constructor)&&Pr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qd=sr("ArrayBuffer");function j1(e){let r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Qd(e.buffer),r}const Q1=Tu("string"),Pr=Tu("function"),Zd=Tu("number"),If=e=>e!==null&&typeof e=="object",Z1=e=>e===!0||e===!1,cu=e=>{if(Pf(e)!=="object")return!1;const r=Of(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},X1=sr("Date"),$1=sr("File"),ey=sr("Blob"),ty=sr("FileList"),ny=e=>If(e)&&Pr(e.pipe),ry=e=>{const r="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||jd.call(e)===r||Pr(e.toString)&&e.toString()===r)},iy=sr("URLSearchParams"),sy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function po(e,r,{allOwnKeys:i=!1}={}){if(e===null||typeof e=="undefined")return;let a,l;if(typeof e!="object"&&(e=[e]),ts(e))for(a=0,l=e.length;a<l;a++)r.call(null,e[a],a,e);else{const h=i?Object.getOwnPropertyNames(e):Object.keys(e),p=h.length;let d;for(a=0;a<p;a++)d=h[a],r.call(null,e[d],d,e)}}function Xd(e,r){r=r.toLowerCase();const i=Object.keys(e);let a=i.length,l;for(;a-- >0;)if(l=i[a],r===l.toLowerCase())return l;return null}const $d=(()=>typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global)(),ep=e=>!co(e)&&e!==$d;function nf(){const{caseless:e}=ep(this)&&this||{},r={},i=(a,l)=>{const h=e&&Xd(r,l)||l;cu(r[h])&&cu(a)?r[h]=nf(r[h],a):cu(a)?r[h]=nf({},a):ts(a)?r[h]=a.slice():r[h]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&po(arguments[a],i);return r}const oy=(e,r,i,{allOwnKeys:a}={})=>(po(r,(l,h)=>{i&&Pr(l)?e[h]=Jd(l,i):e[h]=l},{allOwnKeys:a}),e),ay=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),uy=(e,r,i,a)=>{e.prototype=Object.create(r.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),i&&Object.assign(e.prototype,i)},ly=(e,r,i,a)=>{let l,h,p;const d={};if(r=r||{},e==null)return r;do{for(l=Object.getOwnPropertyNames(e),h=l.length;h-- >0;)p=l[h],(!a||a(p,e,r))&&!d[p]&&(r[p]=e[p],d[p]=!0);e=i!==!1&&Of(e)}while(e&&(!i||i(e,r))&&e!==Object.prototype);return r},fy=(e,r,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=r.length;const a=e.indexOf(r,i);return a!==-1&&a===i},cy=e=>{if(!e)return null;if(ts(e))return e;let r=e.length;if(!Zd(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=e[r];return i},hy=(e=>r=>e&&r instanceof e)(typeof Uint8Array!="undefined"&&Of(Uint8Array)),dy=(e,r)=>{const a=(e&&e[Symbol.iterator]).call(e);let l;for(;(l=a.next())&&!l.done;){const h=l.value;r.call(e,h[0],h[1])}},py=(e,r)=>{let i;const a=[];for(;(i=e.exec(r))!==null;)a.push(i);return a},gy=sr("HTMLFormElement"),my=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,a,l){return a.toUpperCase()+l}),od=(({hasOwnProperty:e})=>(r,i)=>e.call(r,i))(Object.prototype),wy=sr("RegExp"),tp=(e,r)=>{const i=Object.getOwnPropertyDescriptors(e),a={};po(i,(l,h)=>{r(l,h,e)!==!1&&(a[h]=l)}),Object.defineProperties(e,a)},vy=e=>{tp(e,(r,i)=>{if(Pr(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const a=e[i];if(!!Pr(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Ay=(e,r)=>{const i={},a=l=>{l.forEach(h=>{i[h]=!0})};return ts(e)?a(e):a(String(e).split(r)),i},yy=()=>{},xy=(e,r)=>(e=+e,Number.isFinite(e)?e:r),Kl="abcdefghijklmnopqrstuvwxyz",ad="0123456789",np={DIGIT:ad,ALPHA:Kl,ALPHA_DIGIT:Kl+Kl.toUpperCase()+ad},_y=(e=16,r=np.ALPHA_DIGIT)=>{let i="";const{length:a}=r;for(;e--;)i+=r[Math.random()*a|0];return i};function Ey(e){return!!(e&&Pr(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Sy=e=>{const r=new Array(10),i=(a,l)=>{if(If(a)){if(r.indexOf(a)>=0)return;if(!("toJSON"in a)){r[l]=a;const h=ts(a)?[]:{};return po(a,(p,d)=>{const E=i(p,l+1);!co(E)&&(h[d]=E)}),r[l]=void 0,h}}return a};return i(e,0)};var U={isArray:ts,isArrayBuffer:Qd,isBuffer:J1,isFormData:ry,isArrayBufferView:j1,isString:Q1,isNumber:Zd,isBoolean:Z1,isObject:If,isPlainObject:cu,isUndefined:co,isDate:X1,isFile:$1,isBlob:ey,isRegExp:wy,isFunction:Pr,isStream:ny,isURLSearchParams:iy,isTypedArray:hy,isFileList:ty,forEach:po,merge:nf,extend:oy,trim:sy,stripBOM:ay,inherits:uy,toFlatObject:ly,kindOf:Pf,kindOfTest:sr,endsWith:fy,toArray:cy,forEachEntry:dy,matchAll:py,isHTMLForm:gy,hasOwnProperty:od,hasOwnProp:od,reduceDescriptors:tp,freezeMethods:vy,toObjectSet:Ay,toCamelCase:my,noop:yy,toFiniteNumber:xy,findKey:Xd,global:$d,isContextDefined:ep,ALPHABET:np,generateString:_y,isSpecCompliantForm:Ey,toJSONObject:Sy};function Ce(e,r,i,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l)}U.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const rp=Ce.prototype,ip={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ip[e]={value:e}});Object.defineProperties(Ce,ip);Object.defineProperty(rp,"isAxiosError",{value:!0});Ce.from=(e,r,i,a,l,h)=>{const p=Object.create(rp);return U.toFlatObject(e,p,function(E){return E!==Error.prototype},d=>d!=="isAxiosError"),Ce.call(p,e.message,r,i,a,l),p.cause=e,p.name=e.name,h&&Object.assign(p,h),p};var by=null;function rf(e){return U.isPlainObject(e)||U.isArray(e)}function sp(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function ud(e,r,i){return e?e.concat(r).map(function(l,h){return l=sp(l),!i&&h?"["+l+"]":l}).join(i?".":""):r}function Ry(e){return U.isArray(e)&&!e.some(rf)}const Vy=U.toFlatObject(U,{},null,function(r){return/^is[A-Z]/.test(r)});function Mu(e,r,i){if(!U.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,i=U.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ue,Q){return!U.isUndefined(Q[ue])});const a=i.metaTokens,l=i.visitor||C,h=i.dots,p=i.indexes,E=(i.Blob||typeof Blob!="undefined"&&Blob)&&U.isSpecCompliantForm(r);if(!U.isFunction(l))throw new TypeError("visitor must be a function");function S(R){if(R===null)return"";if(U.isDate(R))return R.toISOString();if(!E&&U.isBlob(R))throw new Ce("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(R)||U.isTypedArray(R)?E&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function C(R,ue,Q){let le=R;if(R&&!Q&&typeof R=="object"){if(U.endsWith(ue,"{}"))ue=a?ue:ue.slice(0,-2),R=JSON.stringify(R);else if(U.isArray(R)&&Ry(R)||(U.isFileList(R)||U.endsWith(ue,"[]"))&&(le=U.toArray(R)))return ue=sp(ue),le.forEach(function(ye,He){!(U.isUndefined(ye)||ye===null)&&r.append(p===!0?ud([ue],He,h):p===null?ue:ue+"[]",S(ye))}),!1}return rf(R)?!0:(r.append(ud(Q,ue,h),S(R)),!1)}const L=[],z=Object.assign(Vy,{defaultVisitor:C,convertValue:S,isVisitable:rf});function H(R,ue){if(!U.isUndefined(R)){if(L.indexOf(R)!==-1)throw Error("Circular reference detected in "+ue.join("."));L.push(R),U.forEach(R,function(le,_e){(!(U.isUndefined(le)||le===null)&&l.call(r,le,U.isString(_e)?_e.trim():_e,ue,z))===!0&&H(le,ue?ue.concat(_e):[_e])}),L.pop()}}if(!U.isObject(e))throw new TypeError("data must be an object");return H(e),r}function ld(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function Bf(e,r){this._pairs=[],e&&Mu(e,this,r)}const op=Bf.prototype;op.append=function(r,i){this._pairs.push([r,i])};op.toString=function(r){const i=r?function(a){return r.call(this,a,ld)}:ld;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function Ty(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ap(e,r,i){if(!r)return e;const a=i&&i.encode||Ty,l=i&&i.serialize;let h;if(l?h=l(r,i):h=U.isURLSearchParams(r)?r.toString():new Bf(r,i).toString(a),h){const p=e.indexOf("#");p!==-1&&(e=e.slice(0,p)),e+=(e.indexOf("?")===-1?"?":"&")+h}return e}class My{constructor(){this.handlers=[]}use(r,i,a){return this.handlers.push({fulfilled:r,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){U.forEach(this.handlers,function(a){a!==null&&r(a)})}}var fd=My,up={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cy=typeof URLSearchParams!="undefined"?URLSearchParams:Bf,Oy=typeof FormData!="undefined"?FormData:null;const Py=(()=>{let e;return typeof navigator!="undefined"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})(),Iy=(()=>typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var Ln={isBrowser:!0,classes:{URLSearchParams:Cy,FormData:Oy,Blob},isStandardBrowserEnv:Py,isStandardBrowserWebWorkerEnv:Iy,protocols:["http","https","file","blob","url","data"]};function By(e,r){return Mu(e,new Ln.classes.URLSearchParams,Object.assign({visitor:function(i,a,l,h){return Ln.isNode&&U.isBuffer(i)?(this.append(a,i.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},r))}function Fy(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Ly(e){const r={},i=Object.keys(e);let a;const l=i.length;let h;for(a=0;a<l;a++)h=i[a],r[h]=e[h];return r}function lp(e){function r(i,a,l,h){let p=i[h++];const d=Number.isFinite(+p),E=h>=i.length;return p=!p&&U.isArray(l)?l.length:p,E?(U.hasOwnProp(l,p)?l[p]=[l[p],a]:l[p]=a,!d):((!l[p]||!U.isObject(l[p]))&&(l[p]=[]),r(i,a,l[p],h)&&U.isArray(l[p])&&(l[p]=Ly(l[p])),!d)}if(U.isFormData(e)&&U.isFunction(e.entries)){const i={};return U.forEachEntry(e,(a,l)=>{r(Fy(a),l,i,0)}),i}return null}const Dy={"Content-Type":void 0};function Ny(e,r,i){if(U.isString(e))try{return(r||JSON.parse)(e),U.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}const Cu={transitional:up,adapter:["xhr","http"],transformRequest:[function(r,i){const a=i.getContentType()||"",l=a.indexOf("application/json")>-1,h=U.isObject(r);if(h&&U.isHTMLForm(r)&&(r=new FormData(r)),U.isFormData(r))return l&&l?JSON.stringify(lp(r)):r;if(U.isArrayBuffer(r)||U.isBuffer(r)||U.isStream(r)||U.isFile(r)||U.isBlob(r))return r;if(U.isArrayBufferView(r))return r.buffer;if(U.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let d;if(h){if(a.indexOf("application/x-www-form-urlencoded")>-1)return By(r,this.formSerializer).toString();if((d=U.isFileList(r))||a.indexOf("multipart/form-data")>-1){const E=this.env&&this.env.FormData;return Mu(d?{"files[]":r}:r,E&&new E,this.formSerializer)}}return h||l?(i.setContentType("application/json",!1),Ny(r)):r}],transformResponse:[function(r){const i=this.transitional||Cu.transitional,a=i&&i.forcedJSONParsing,l=this.responseType==="json";if(r&&U.isString(r)&&(a&&!this.responseType||l)){const p=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(r)}catch(d){if(p)throw d.name==="SyntaxError"?Ce.from(d,Ce.ERR_BAD_RESPONSE,this,null,this.response):d}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};U.forEach(["delete","get","head"],function(r){Cu.headers[r]={}});U.forEach(["post","put","patch"],function(r){Cu.headers[r]=U.merge(Dy)});var Ff=Cu;const Uy=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var ky=e=>{const r={};let i,a,l;return e&&e.split(`
`).forEach(function(p){l=p.indexOf(":"),i=p.substring(0,l).trim().toLowerCase(),a=p.substring(l+1).trim(),!(!i||r[i]&&Uy[i])&&(i==="set-cookie"?r[i]?r[i].push(a):r[i]=[a]:r[i]=r[i]?r[i]+", "+a:a)}),r};const cd=Symbol("internals");function eo(e){return e&&String(e).trim().toLowerCase()}function hu(e){return e===!1||e==null?e:U.isArray(e)?e.map(hu):String(e)}function zy(e){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=i.exec(e);)r[a[1]]=a[2];return r}function qy(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function Gl(e,r,i,a,l){if(U.isFunction(a))return a.call(this,r,i);if(l&&(r=i),!!U.isString(r)){if(U.isString(a))return r.indexOf(a)!==-1;if(U.isRegExp(a))return a.test(r)}}function Hy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,a)=>i.toUpperCase()+a)}function Wy(e,r){const i=U.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+i,{value:function(l,h,p){return this[a].call(this,r,l,h,p)},configurable:!0})})}class Ou{constructor(r){r&&this.set(r)}set(r,i,a){const l=this;function h(d,E,S){const C=eo(E);if(!C)throw new Error("header name must be a non-empty string");const L=U.findKey(l,C);(!L||l[L]===void 0||S===!0||S===void 0&&l[L]!==!1)&&(l[L||E]=hu(d))}const p=(d,E)=>U.forEach(d,(S,C)=>h(S,C,E));return U.isPlainObject(r)||r instanceof this.constructor?p(r,i):U.isString(r)&&(r=r.trim())&&!qy(r)?p(ky(r),i):r!=null&&h(i,r,a),this}get(r,i){if(r=eo(r),r){const a=U.findKey(this,r);if(a){const l=this[a];if(!i)return l;if(i===!0)return zy(l);if(U.isFunction(i))return i.call(this,l,a);if(U.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=eo(r),r){const a=U.findKey(this,r);return!!(a&&this[a]!==void 0&&(!i||Gl(this,this[a],a,i)))}return!1}delete(r,i){const a=this;let l=!1;function h(p){if(p=eo(p),p){const d=U.findKey(a,p);d&&(!i||Gl(a,a[d],d,i))&&(delete a[d],l=!0)}}return U.isArray(r)?r.forEach(h):h(r),l}clear(r){const i=Object.keys(this);let a=i.length,l=!1;for(;a--;){const h=i[a];(!r||Gl(this,this[h],h,r,!0))&&(delete this[h],l=!0)}return l}normalize(r){const i=this,a={};return U.forEach(this,(l,h)=>{const p=U.findKey(a,h);if(p){i[p]=hu(l),delete i[h];return}const d=r?Hy(h):String(h).trim();d!==h&&delete i[h],i[d]=hu(l),a[d]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return U.forEach(this,(a,l)=>{a!=null&&a!==!1&&(i[l]=r&&U.isArray(a)?a.join(", "):a)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const a=new this(r);return i.forEach(l=>a.set(l)),a}static accessor(r){const a=(this[cd]=this[cd]={accessors:{}}).accessors,l=this.prototype;function h(p){const d=eo(p);a[d]||(Wy(l,p),a[d]=!0)}return U.isArray(r)?r.forEach(h):h(r),this}}Ou.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.freezeMethods(Ou.prototype);U.freezeMethods(Ou);var ir=Ou;function Yl(e,r){const i=this||Ff,a=r||i,l=ir.from(a.headers);let h=a.data;return U.forEach(e,function(d){h=d.call(i,h,l.normalize(),r?r.status:void 0)}),l.normalize(),h}function fp(e){return!!(e&&e.__CANCEL__)}function go(e,r,i){Ce.call(this,e==null?"canceled":e,Ce.ERR_CANCELED,r,i),this.name="CanceledError"}U.inherits(go,Ce,{__CANCEL__:!0});function Ky(e,r,i){const a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):r(new Ce("Request failed with status code "+i.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}var Gy=Ln.isStandardBrowserEnv?function(){return{write:function(i,a,l,h,p,d){const E=[];E.push(i+"="+encodeURIComponent(a)),U.isNumber(l)&&E.push("expires="+new Date(l).toGMTString()),U.isString(h)&&E.push("path="+h),U.isString(p)&&E.push("domain="+p),d===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(i){const a=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Yy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Jy(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}function cp(e,r){return e&&!Yy(r)?Jy(e,r):r}var jy=Ln.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let a;function l(h){let p=h;return r&&(i.setAttribute("href",p),p=i.href),i.setAttribute("href",p),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return a=l(window.location.href),function(p){const d=U.isString(p)?l(p):p;return d.protocol===a.protocol&&d.host===a.host}}():function(){return function(){return!0}}();function Qy(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function Zy(e,r){e=e||10;const i=new Array(e),a=new Array(e);let l=0,h=0,p;return r=r!==void 0?r:1e3,function(E){const S=Date.now(),C=a[h];p||(p=S),i[l]=E,a[l]=S;let L=h,z=0;for(;L!==l;)z+=i[L++],L=L%e;if(l=(l+1)%e,l===h&&(h=(h+1)%e),S-p<r)return;const H=C&&S-C;return H?Math.round(z*1e3/H):void 0}}function hd(e,r){let i=0;const a=Zy(50,250);return l=>{const h=l.loaded,p=l.lengthComputable?l.total:void 0,d=h-i,E=a(d),S=h<=p;i=h;const C={loaded:h,total:p,progress:p?h/p:void 0,bytes:d,rate:E||void 0,estimated:E&&p&&S?(p-h)/E:void 0,event:l};C[r?"download":"upload"]=!0,e(C)}}const Xy=typeof XMLHttpRequest!="undefined";var $y=Xy&&function(e){return new Promise(function(i,a){let l=e.data;const h=ir.from(e.headers).normalize(),p=e.responseType;let d;function E(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}U.isFormData(l)&&(Ln.isStandardBrowserEnv||Ln.isStandardBrowserWebWorkerEnv)&&h.setContentType(!1);let S=new XMLHttpRequest;if(e.auth){const H=e.auth.username||"",R=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.set("Authorization","Basic "+btoa(H+":"+R))}const C=cp(e.baseURL,e.url);S.open(e.method.toUpperCase(),ap(C,e.params,e.paramsSerializer),!0),S.timeout=e.timeout;function L(){if(!S)return;const H=ir.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),ue={data:!p||p==="text"||p==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:H,config:e,request:S};Ky(function(le){i(le),E()},function(le){a(le),E()},ue),S=null}if("onloadend"in S?S.onloadend=L:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(L)},S.onabort=function(){!S||(a(new Ce("Request aborted",Ce.ECONNABORTED,e,S)),S=null)},S.onerror=function(){a(new Ce("Network Error",Ce.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let R=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const ue=e.transitional||up;e.timeoutErrorMessage&&(R=e.timeoutErrorMessage),a(new Ce(R,ue.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,e,S)),S=null},Ln.isStandardBrowserEnv){const H=(e.withCredentials||jy(C))&&e.xsrfCookieName&&Gy.read(e.xsrfCookieName);H&&h.set(e.xsrfHeaderName,H)}l===void 0&&h.setContentType(null),"setRequestHeader"in S&&U.forEach(h.toJSON(),function(R,ue){S.setRequestHeader(ue,R)}),U.isUndefined(e.withCredentials)||(S.withCredentials=!!e.withCredentials),p&&p!=="json"&&(S.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&S.addEventListener("progress",hd(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",hd(e.onUploadProgress)),(e.cancelToken||e.signal)&&(d=H=>{!S||(a(!H||H.type?new go(null,e,S):H),S.abort(),S=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d)));const z=Qy(C);if(z&&Ln.protocols.indexOf(z)===-1){a(new Ce("Unsupported protocol "+z+":",Ce.ERR_BAD_REQUEST,e));return}S.send(l||null)})};const du={http:by,xhr:$y};U.forEach(du,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});var ex={getAdapter:e=>{e=U.isArray(e)?e:[e];const{length:r}=e;let i,a;for(let l=0;l<r&&(i=e[l],!(a=U.isString(i)?du[i.toLowerCase()]:i));l++);if(!a)throw a===!1?new Ce(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(U.hasOwnProp(du,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!U.isFunction(a))throw new TypeError("adapter is not a function");return a},adapters:du};function Jl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new go(null,e)}function dd(e){return Jl(e),e.headers=ir.from(e.headers),e.data=Yl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ex.getAdapter(e.adapter||Ff.adapter)(e).then(function(a){return Jl(e),a.data=Yl.call(e,e.transformResponse,a),a.headers=ir.from(a.headers),a},function(a){return fp(a)||(Jl(e),a&&a.response&&(a.response.data=Yl.call(e,e.transformResponse,a.response),a.response.headers=ir.from(a.response.headers))),Promise.reject(a)})}const pd=e=>e instanceof ir?e.toJSON():e;function Zi(e,r){r=r||{};const i={};function a(S,C,L){return U.isPlainObject(S)&&U.isPlainObject(C)?U.merge.call({caseless:L},S,C):U.isPlainObject(C)?U.merge({},C):U.isArray(C)?C.slice():C}function l(S,C,L){if(U.isUndefined(C)){if(!U.isUndefined(S))return a(void 0,S,L)}else return a(S,C,L)}function h(S,C){if(!U.isUndefined(C))return a(void 0,C)}function p(S,C){if(U.isUndefined(C)){if(!U.isUndefined(S))return a(void 0,S)}else return a(void 0,C)}function d(S,C,L){if(L in r)return a(S,C);if(L in e)return a(void 0,S)}const E={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:d,headers:(S,C)=>l(pd(S),pd(C),!0)};return U.forEach(Object.keys(e).concat(Object.keys(r)),function(C){const L=E[C]||l,z=L(e[C],r[C],C);U.isUndefined(z)&&L!==d||(i[C]=z)}),i}const hp="1.3.3",Lf={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Lf[e]=function(a){return typeof a===e||"a"+(r<1?"n ":" ")+e}});const gd={};Lf.transitional=function(r,i,a){function l(h,p){return"[Axios v"+hp+"] Transitional option '"+h+"'"+p+(a?". "+a:"")}return(h,p,d)=>{if(r===!1)throw new Ce(l(p," has been removed"+(i?" in "+i:"")),Ce.ERR_DEPRECATED);return i&&!gd[p]&&(gd[p]=!0,console.warn(l(p," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(h,p,d):!0}};function tx(e,r,i){if(typeof e!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let l=a.length;for(;l-- >0;){const h=a[l],p=r[h];if(p){const d=e[h],E=d===void 0||p(d,h,e);if(E!==!0)throw new Ce("option "+h+" must be "+E,Ce.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ce("Unknown option "+h,Ce.ERR_BAD_OPTION)}}var sf={assertOptions:tx,validators:Lf};const Rr=sf.validators;class yu{constructor(r){this.defaults=r,this.interceptors={request:new fd,response:new fd}}request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=Zi(this.defaults,i);const{transitional:a,paramsSerializer:l,headers:h}=i;a!==void 0&&sf.assertOptions(a,{silentJSONParsing:Rr.transitional(Rr.boolean),forcedJSONParsing:Rr.transitional(Rr.boolean),clarifyTimeoutError:Rr.transitional(Rr.boolean)},!1),l!==void 0&&sf.assertOptions(l,{encode:Rr.function,serialize:Rr.function},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let p;p=h&&U.merge(h.common,h[i.method]),p&&U.forEach(["delete","get","head","post","put","patch","common"],R=>{delete h[R]}),i.headers=ir.concat(p,h);const d=[];let E=!0;this.interceptors.request.forEach(function(ue){typeof ue.runWhen=="function"&&ue.runWhen(i)===!1||(E=E&&ue.synchronous,d.unshift(ue.fulfilled,ue.rejected))});const S=[];this.interceptors.response.forEach(function(ue){S.push(ue.fulfilled,ue.rejected)});let C,L=0,z;if(!E){const R=[dd.bind(this),void 0];for(R.unshift.apply(R,d),R.push.apply(R,S),z=R.length,C=Promise.resolve(i);L<z;)C=C.then(R[L++],R[L++]);return C}z=d.length;let H=i;for(L=0;L<z;){const R=d[L++],ue=d[L++];try{H=R(H)}catch(Q){ue.call(this,Q);break}}try{C=dd.call(this,H)}catch(R){return Promise.reject(R)}for(L=0,z=S.length;L<z;)C=C.then(S[L++],S[L++]);return C}getUri(r){r=Zi(this.defaults,r);const i=cp(r.baseURL,r.url);return ap(i,r.params,r.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(r){yu.prototype[r]=function(i,a){return this.request(Zi(a||{},{method:r,url:i,data:(a||{}).data}))}});U.forEach(["post","put","patch"],function(r){function i(a){return function(h,p,d){return this.request(Zi(d||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:h,data:p}))}}yu.prototype[r]=i(),yu.prototype[r+"Form"]=i(!0)});var pu=yu;class Df{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(h){i=h});const a=this;this.promise.then(l=>{if(!a._listeners)return;let h=a._listeners.length;for(;h-- >0;)a._listeners[h](l);a._listeners=null}),this.promise.then=l=>{let h;const p=new Promise(d=>{a.subscribe(d),h=d}).then(l);return p.cancel=function(){a.unsubscribe(h)},p},r(function(h,p,d){a.reason||(a.reason=new go(h,p,d),i(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}static source(){let r;return{token:new Df(function(l){r=l}),cancel:r}}}var nx=Df;function rx(e){return function(i){return e.apply(null,i)}}function ix(e){return U.isObject(e)&&e.isAxiosError===!0}const of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(of).forEach(([e,r])=>{of[r]=e});var sx=of;function dp(e){const r=new pu(e),i=Jd(pu.prototype.request,r);return U.extend(i,pu.prototype,r,{allOwnKeys:!0}),U.extend(i,r,null,{allOwnKeys:!0}),i.create=function(l){return dp(Zi(e,l))},i}const dt=dp(Ff);dt.Axios=pu;dt.CanceledError=go;dt.CancelToken=nx;dt.isCancel=fp;dt.VERSION=hp;dt.toFormData=Mu;dt.AxiosError=Ce;dt.Cancel=dt.CanceledError;dt.all=function(r){return Promise.all(r)};dt.spread=rx;dt.isAxiosError=ix;dt.mergeConfig=Zi;dt.AxiosHeaders=ir;dt.formToJSON=e=>lp(U.isHTMLForm(e)?new FormData(e):e);dt.HttpStatusCode=sx;dt.default=dt;var ox=dt,af=!1,uf=!1,hi=[];function ax(e){ux(e)}function ux(e){hi.includes(e)||hi.push(e),lx()}function pp(e){let r=hi.indexOf(e);r!==-1&&hi.splice(r,1)}function lx(){!uf&&!af&&(af=!0,queueMicrotask(fx))}function fx(){af=!1,uf=!0;for(let e=0;e<hi.length;e++)hi[e]();hi.length=0,uf=!1}var ns,rs,mo,gp,lf=!0;function cx(e){lf=!1,e(),lf=!0}function hx(e){ns=e.reactive,mo=e.release,rs=r=>e.effect(r,{scheduler:i=>{lf?ax(i):i()}}),gp=e.raw}function md(e){rs=e}function dx(e){let r=()=>{};return[a=>{let l=rs(a);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(h=>h())}),e._x_effects.add(l),r=()=>{l!==void 0&&(e._x_effects.delete(l),mo(l))},l},()=>{r()}]}var mp=[],wp=[],vp=[];function px(e){vp.push(e)}function Ap(e,r){typeof r=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(r)):(r=e,wp.push(r))}function gx(e){mp.push(e)}function mx(e,r,i){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[r]||(e._x_attributeCleanups[r]=[]),e._x_attributeCleanups[r].push(i)}function yp(e,r){!e._x_attributeCleanups||Object.entries(e._x_attributeCleanups).forEach(([i,a])=>{(r===void 0||r.includes(i))&&(a.forEach(l=>l()),delete e._x_attributeCleanups[i])})}var Nf=new MutationObserver(qf),Uf=!1;function kf(){Nf.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Uf=!0}function xp(){wx(),Nf.disconnect(),Uf=!1}var oo=[],jl=!1;function wx(){oo=oo.concat(Nf.takeRecords()),oo.length&&!jl&&(jl=!0,queueMicrotask(()=>{vx(),jl=!1}))}function vx(){qf(oo),oo.length=0}function wt(e){if(!Uf)return e();xp();let r=e();return kf(),r}var zf=!1,xu=[];function Ax(){zf=!0}function yx(){zf=!1,qf(xu),xu=[]}function qf(e){if(zf){xu=xu.concat(e);return}let r=[],i=[],a=new Map,l=new Map;for(let h=0;h<e.length;h++)if(!e[h].target._x_ignoreMutationObserver&&(e[h].type==="childList"&&(e[h].addedNodes.forEach(p=>p.nodeType===1&&r.push(p)),e[h].removedNodes.forEach(p=>p.nodeType===1&&i.push(p))),e[h].type==="attributes")){let p=e[h].target,d=e[h].attributeName,E=e[h].oldValue,S=()=>{a.has(p)||a.set(p,[]),a.get(p).push({name:d,value:p.getAttribute(d)})},C=()=>{l.has(p)||l.set(p,[]),l.get(p).push(d)};p.hasAttribute(d)&&E===null?S():p.hasAttribute(d)?(C(),S()):C()}l.forEach((h,p)=>{yp(p,h)}),a.forEach((h,p)=>{mp.forEach(d=>d(p,h))});for(let h of i)if(!r.includes(h)&&(wp.forEach(p=>p(h)),h._x_cleanups))for(;h._x_cleanups.length;)h._x_cleanups.pop()();r.forEach(h=>{h._x_ignoreSelf=!0,h._x_ignore=!0});for(let h of r)i.includes(h)||!h.isConnected||(delete h._x_ignoreSelf,delete h._x_ignore,vp.forEach(p=>p(h)),h._x_ignore=!0,h._x_ignoreSelf=!0);r.forEach(h=>{delete h._x_ignoreSelf,delete h._x_ignore}),r=null,i=null,a=null,l=null}function _p(e){return vo(Xi(e))}function wo(e,r,i){return e._x_dataStack=[r,...Xi(i||e)],()=>{e._x_dataStack=e._x_dataStack.filter(a=>a!==r)}}function wd(e,r){let i=e._x_dataStack[0];Object.entries(r).forEach(([a,l])=>{i[a]=l})}function Xi(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Xi(e.host):e.parentNode?Xi(e.parentNode):[]}function vo(e){let r=new Proxy({},{ownKeys:()=>Array.from(new Set(e.flatMap(i=>Object.keys(i)))),has:(i,a)=>e.some(l=>l.hasOwnProperty(a)),get:(i,a)=>(e.find(l=>{if(l.hasOwnProperty(a)){let h=Object.getOwnPropertyDescriptor(l,a);if(h.get&&h.get._x_alreadyBound||h.set&&h.set._x_alreadyBound)return!0;if((h.get||h.set)&&h.enumerable){let p=h.get,d=h.set,E=h;p=p&&p.bind(r),d=d&&d.bind(r),p&&(p._x_alreadyBound=!0),d&&(d._x_alreadyBound=!0),Object.defineProperty(l,a,{...E,get:p,set:d})}return!0}return!1})||{})[a],set:(i,a,l)=>{let h=e.find(p=>p.hasOwnProperty(a));return h?h[a]=l:e[e.length-1][a]=l,!0}});return r}function Ep(e){let r=a=>typeof a=="object"&&!Array.isArray(a)&&a!==null,i=(a,l="")=>{Object.entries(Object.getOwnPropertyDescriptors(a)).forEach(([h,{value:p,enumerable:d}])=>{if(d===!1||p===void 0)return;let E=l===""?h:`${l}.${h}`;typeof p=="object"&&p!==null&&p._x_interceptor?a[h]=p.initialize(e,E,h):r(p)&&p!==a&&!(p instanceof Element)&&i(p,E)})};return i(e)}function Sp(e,r=()=>{}){let i={initialValue:void 0,_x_interceptor:!0,initialize(a,l,h){return e(this.initialValue,()=>xx(a,l),p=>ff(a,l,p),l,h)}};return r(i),a=>{if(typeof a=="object"&&a!==null&&a._x_interceptor){let l=i.initialize.bind(i);i.initialize=(h,p,d)=>{let E=a.initialize(h,p,d);return i.initialValue=E,l(h,p,d)}}else i.initialValue=a;return i}}function xx(e,r){return r.split(".").reduce((i,a)=>i[a],e)}function ff(e,r,i){if(typeof r=="string"&&(r=r.split(".")),r.length===1)e[r[0]]=i;else{if(r.length===0)throw error;return e[r[0]]||(e[r[0]]={}),ff(e[r[0]],r.slice(1),i)}}var bp={};function vn(e,r){bp[e]=r}function cf(e,r){return Object.entries(bp).forEach(([i,a])=>{Object.defineProperty(e,`$${i}`,{get(){let[l,h]=Cp(r);return l={interceptor:Sp,...l},Ap(r,h),a(r,l)},enumerable:!1})}),e}function _x(e,r,i,...a){try{return i(...a)}catch(l){ho(l,e,r)}}function ho(e,r,i=void 0){Object.assign(e,{el:r,expression:i}),console.warn(`Alpine Expression Error: ${e.message}

${i?'Expression: "'+i+`"

`:""}`,r),setTimeout(()=>{throw e},0)}var gu=!0;function Ex(e){let r=gu;gu=!1,e(),gu=r}function ji(e,r,i={}){let a;return Bt(e,r)(l=>a=l,i),a}function Bt(...e){return Rp(...e)}var Rp=Vp;function Sx(e){Rp=e}function Vp(e,r){let i={};cf(i,e);let a=[i,...Xi(e)];if(typeof r=="function")return bx(a,r);let l=Vx(a,r,e);return _x.bind(null,e,r,l)}function bx(e,r){return(i=()=>{},{scope:a={},params:l=[]}={})=>{let h=r.apply(vo([a,...e]),l);_u(i,h)}}var Ql={};function Rx(e,r){if(Ql[e])return Ql[e];let i=Object.getPrototypeOf(async function(){}).constructor,a=/^[\n\s]*if.*\(.*\)/.test(e)||/^(let|const)\s/.test(e)?`(async()=>{ ${e} })()`:e,h=(()=>{try{return new i(["__self","scope"],`with (scope) { __self.result = ${a} }; __self.finished = true; return __self.result;`)}catch(p){return ho(p,r,e),Promise.resolve()}})();return Ql[e]=h,h}function Vx(e,r,i){let a=Rx(r,i);return(l=()=>{},{scope:h={},params:p=[]}={})=>{a.result=void 0,a.finished=!1;let d=vo([h,...e]);if(typeof a=="function"){let E=a(a,d).catch(S=>ho(S,i,r));a.finished?(_u(l,a.result,d,p,i),a.result=void 0):E.then(S=>{_u(l,S,d,p,i)}).catch(S=>ho(S,i,r)).finally(()=>a.result=void 0)}}}function _u(e,r,i,a,l){if(gu&&typeof r=="function"){let h=r.apply(i,a);h instanceof Promise?h.then(p=>_u(e,p,i,a)).catch(p=>ho(p,l,r)):e(h)}else typeof r=="object"&&r instanceof Promise?r.then(h=>e(h)):e(r)}var Hf="x-";function is(e=""){return Hf+e}function Tx(e){Hf=e}var hf={};function at(e,r){return hf[e]=r,{before(i){var l;if(!hf[i]){console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");return}const a=(l=fi.indexOf(i))!=null?l:fi.indexOf("DEFAULT");a>=0&&fi.splice(a,0,e)}}}function Wf(e,r,i){if(r=Array.from(r),e._x_virtualDirectives){let h=Object.entries(e._x_virtualDirectives).map(([d,E])=>({name:d,value:E})),p=Tp(h);h=h.map(d=>p.find(E=>E.name===d.name)?{name:`x-bind:${d.name}`,value:`"${d.value}"`}:d),r=r.concat(h)}let a={};return r.map(Ip((h,p)=>a[h]=p)).filter(Fp).map(Ox(a,i)).sort(Px).map(h=>Cx(e,h))}function Tp(e){return Array.from(e).map(Ip()).filter(r=>!Fp(r))}var df=!1,io=new Map,Mp=Symbol();function Mx(e){df=!0;let r=Symbol();Mp=r,io.set(r,[]);let i=()=>{for(;io.get(r).length;)io.get(r).shift()();io.delete(r)},a=()=>{df=!1,i()};e(i),a()}function Cp(e){let r=[],i=d=>r.push(d),[a,l]=dx(e);return r.push(l),[{Alpine:yo,effect:a,cleanup:i,evaluateLater:Bt.bind(Bt,e),evaluate:ji.bind(ji,e)},()=>r.forEach(d=>d())]}function Cx(e,r){let i=()=>{},a=hf[r.type]||i,[l,h]=Cp(e);mx(e,r.original,h);let p=()=>{e._x_ignore||e._x_ignoreSelf||(a.inline&&a.inline(e,r,l),a=a.bind(a,e,r,l),df?io.get(Mp).push(a):a())};return p.runCleanups=h,p}var Op=(e,r)=>({name:i,value:a})=>(i.startsWith(e)&&(i=i.replace(e,r)),{name:i,value:a}),Pp=e=>e;function Ip(e=()=>{}){return({name:r,value:i})=>{let{name:a,value:l}=Bp.reduce((h,p)=>p(h),{name:r,value:i});return a!==r&&e(a,r),{name:a,value:l}}}var Bp=[];function Kf(e){Bp.push(e)}function Fp({name:e}){return Lp().test(e)}var Lp=()=>new RegExp(`^${Hf}([^:^.]+)\\b`);function Ox(e,r){return({name:i,value:a})=>{let l=i.match(Lp()),h=i.match(/:([a-zA-Z0-9\-:]+)/),p=i.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],d=r||e[i]||i;return{type:l?l[1]:null,value:h?h[1]:null,modifiers:p.map(E=>E.replace(".","")),expression:a,original:d}}}var pf="DEFAULT",fi=["ignore","ref","data","id","radio","tabs","switch","disclosure","menu","listbox","combobox","bind","init","for","mask","model","modelable","transition","show","if",pf,"teleport"];function Px(e,r){let i=fi.indexOf(e.type)===-1?pf:e.type,a=fi.indexOf(r.type)===-1?pf:r.type;return fi.indexOf(i)-fi.indexOf(a)}function ao(e,r,i={}){e.dispatchEvent(new CustomEvent(r,{detail:i,bubbles:!0,composed:!0,cancelable:!0}))}function Ir(e,r){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(l=>Ir(l,r));return}let i=!1;if(r(e,()=>i=!0),i)return;let a=e.firstElementChild;for(;a;)Ir(a,r),a=a.nextElementSibling}function $i(e,...r){console.warn(`Alpine Warning: ${e}`,...r)}function Ix(){document.body||$i("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ao(document,"alpine:init"),ao(document,"alpine:initializing"),kf(),px(r=>Br(r,Ir)),Ap(r=>Hp(r)),gx((r,i)=>{Wf(r,i).forEach(a=>a())});let e=r=>!Pu(r.parentElement,!0);Array.from(document.querySelectorAll(Up())).filter(e).forEach(r=>{Br(r)}),ao(document,"alpine:initialized")}var Gf=[],Dp=[];function Np(){return Gf.map(e=>e())}function Up(){return Gf.concat(Dp).map(e=>e())}function kp(e){Gf.push(e)}function zp(e){Dp.push(e)}function Pu(e,r=!1){return Iu(e,i=>{if((r?Up():Np()).some(l=>i.matches(l)))return!0})}function Iu(e,r){if(!!e){if(r(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return Iu(e.parentElement,r)}}function Bx(e){return Np().some(r=>e.matches(r))}var qp=[];function Fx(e){qp.push(e)}function Br(e,r=Ir,i=()=>{}){Mx(()=>{r(e,(a,l)=>{i(a,l),qp.forEach(h=>h(a,l)),Wf(a,a.attributes).forEach(h=>h()),a._x_ignore&&l()})})}function Hp(e){Ir(e,r=>yp(r))}var gf=[],Yf=!1;function Jf(e=()=>{}){return queueMicrotask(()=>{Yf||setTimeout(()=>{mf()})}),new Promise(r=>{gf.push(()=>{e(),r()})})}function mf(){for(Yf=!1;gf.length;)gf.shift()()}function Lx(){Yf=!0}function jf(e,r){return Array.isArray(r)?vd(e,r.join(" ")):typeof r=="object"&&r!==null?Dx(e,r):typeof r=="function"?jf(e,r()):vd(e,r)}function vd(e,r){let i=l=>l.split(" ").filter(h=>!e.classList.contains(h)).filter(Boolean),a=l=>(e.classList.add(...l),()=>{e.classList.remove(...l)});return r=r===!0?r="":r||"",a(i(r))}function Dx(e,r){let i=d=>d.split(" ").filter(Boolean),a=Object.entries(r).flatMap(([d,E])=>E?i(d):!1).filter(Boolean),l=Object.entries(r).flatMap(([d,E])=>E?!1:i(d)).filter(Boolean),h=[],p=[];return l.forEach(d=>{e.classList.contains(d)&&(e.classList.remove(d),p.push(d))}),a.forEach(d=>{e.classList.contains(d)||(e.classList.add(d),h.push(d))}),()=>{p.forEach(d=>e.classList.add(d)),h.forEach(d=>e.classList.remove(d))}}function Bu(e,r){return typeof r=="object"&&r!==null?Nx(e,r):Ux(e,r)}function Nx(e,r){let i={};return Object.entries(r).forEach(([a,l])=>{i[a]=e.style[a],a.startsWith("--")||(a=kx(a)),e.style.setProperty(a,l)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{Bu(e,i)}}function Ux(e,r){let i=e.getAttribute("style",r);return e.setAttribute("style",r),()=>{e.setAttribute("style",i||"")}}function kx(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wf(e,r=()=>{}){let i=!1;return function(){i?r.apply(this,arguments):(i=!0,e.apply(this,arguments))}}at("transition",(e,{value:r,modifiers:i,expression:a},{evaluate:l})=>{typeof a=="function"&&(a=l(a)),a?zx(e,a,r):qx(e,i,r)});function zx(e,r,i){Wp(e,jf,""),{enter:l=>{e._x_transition.enter.during=l},"enter-start":l=>{e._x_transition.enter.start=l},"enter-end":l=>{e._x_transition.enter.end=l},leave:l=>{e._x_transition.leave.during=l},"leave-start":l=>{e._x_transition.leave.start=l},"leave-end":l=>{e._x_transition.leave.end=l}}[i](r)}function qx(e,r,i){Wp(e,Bu);let a=!r.includes("in")&&!r.includes("out")&&!i,l=a||r.includes("in")||["enter"].includes(i),h=a||r.includes("out")||["leave"].includes(i);r.includes("in")&&!a&&(r=r.filter((le,_e)=>_e<r.indexOf("out"))),r.includes("out")&&!a&&(r=r.filter((le,_e)=>_e>r.indexOf("out")));let p=!r.includes("opacity")&&!r.includes("scale"),d=p||r.includes("opacity"),E=p||r.includes("scale"),S=d?0:1,C=E?to(r,"scale",95)/100:1,L=to(r,"delay",0),z=to(r,"origin","center"),H="opacity, transform",R=to(r,"duration",150)/1e3,ue=to(r,"duration",75)/1e3,Q="cubic-bezier(0.4, 0.0, 0.2, 1)";l&&(e._x_transition.enter.during={transformOrigin:z,transitionDelay:L,transitionProperty:H,transitionDuration:`${R}s`,transitionTimingFunction:Q},e._x_transition.enter.start={opacity:S,transform:`scale(${C})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),h&&(e._x_transition.leave.during={transformOrigin:z,transitionDelay:L,transitionProperty:H,transitionDuration:`${ue}s`,transitionTimingFunction:Q},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:S,transform:`scale(${C})`})}function Wp(e,r,i={}){e._x_transition||(e._x_transition={enter:{during:i,start:i,end:i},leave:{during:i,start:i,end:i},in(a=()=>{},l=()=>{}){vf(e,r,{during:this.enter.during,start:this.enter.start,end:this.enter.end},a,l)},out(a=()=>{},l=()=>{}){vf(e,r,{during:this.leave.during,start:this.leave.start,end:this.leave.end},a,l)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,r,i,a){const l=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let h=()=>l(i);if(r){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(i):h():e._x_transition?e._x_transition.in(i):h();return}e._x_hidePromise=e._x_transition?new Promise((p,d)=>{e._x_transition.out(()=>{},()=>p(a)),e._x_transitioning.beforeCancel(()=>d({isFromCancelledTransition:!0}))}):Promise.resolve(a),queueMicrotask(()=>{let p=Kp(e);p?(p._x_hideChildren||(p._x_hideChildren=[]),p._x_hideChildren.push(e)):l(()=>{let d=E=>{let S=Promise.all([E._x_hidePromise,...(E._x_hideChildren||[]).map(d)]).then(([C])=>C());return delete E._x_hidePromise,delete E._x_hideChildren,S};d(e).catch(E=>{if(!E.isFromCancelledTransition)throw E})})})};function Kp(e){let r=e.parentNode;if(!!r)return r._x_hidePromise?r:Kp(r)}function vf(e,r,{during:i,start:a,end:l}={},h=()=>{},p=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(i).length===0&&Object.keys(a).length===0&&Object.keys(l).length===0){h(),p();return}let d,E,S;Hx(e,{start(){d=r(e,a)},during(){E=r(e,i)},before:h,end(){d(),S=r(e,l)},after:p,cleanup(){E(),S()}})}function Hx(e,r){let i,a,l,h=wf(()=>{wt(()=>{i=!0,a||r.before(),l||(r.end(),mf()),r.after(),e.isConnected&&r.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(p){this.beforeCancels.push(p)},cancel:wf(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();h()}),finish:h},wt(()=>{r.start(),r.during()}),Lx(),requestAnimationFrame(()=>{if(i)return;let p=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,d=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;p===0&&(p=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),wt(()=>{r.before()}),a=!0,requestAnimationFrame(()=>{i||(wt(()=>{r.end()}),mf(),setTimeout(e._x_transitioning.finish,p+d),l=!0)})})}function to(e,r,i){if(e.indexOf(r)===-1)return i;const a=e[e.indexOf(r)+1];if(!a||r==="scale"&&isNaN(a))return i;if(r==="duration"){let l=a.match(/([0-9]+)ms/);if(l)return l[1]}return r==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(r)+2])?[a,e[e.indexOf(r)+2]].join(" "):a}var Eu=!1;function Ao(e,r=()=>{}){return(...i)=>Eu?r(...i):e(...i)}function Wx(e){return(...r)=>Eu&&e(...r)}function Kx(e,r){r._x_dataStack||(r._x_dataStack=e._x_dataStack),Eu=!0,Yx(()=>{Gx(r)}),Eu=!1}function Gx(e){let r=!1;Br(e,(a,l)=>{Ir(a,(h,p)=>{if(r&&Bx(h))return p();r=!0,l(h,p)})})}function Yx(e){let r=rs;md((i,a)=>{let l=r(i);return mo(l),()=>{}}),e(),md(r)}function Gp(e,r,i,a=[]){switch(e._x_bindings||(e._x_bindings=ns({})),e._x_bindings[r]=i,r=a.includes("camel")?e_(r):r,r){case"value":Jx(e,i);break;case"style":Qx(e,i);break;case"class":jx(e,i);break;default:Zx(e,r,i);break}}function Jx(e,r){if(e.type==="radio")e.attributes.value===void 0&&(e.value=r),window.fromModel&&(e.checked=Ad(e.value,r));else if(e.type==="checkbox")Number.isInteger(r)?e.value=r:!Number.isInteger(r)&&!Array.isArray(r)&&typeof r!="boolean"&&![null,void 0].includes(r)?e.value=String(r):Array.isArray(r)?e.checked=r.some(i=>Ad(i,e.value)):e.checked=!!r;else if(e.tagName==="SELECT")$x(e,r);else{if(e.value===r)return;e.value=r}}function jx(e,r){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=jf(e,r)}function Qx(e,r){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=Bu(e,r)}function Zx(e,r,i){[null,void 0,!1].includes(i)&&t_(r)?e.removeAttribute(r):(Yp(r)&&(i=r),Xx(e,r,i))}function Xx(e,r,i){e.getAttribute(r)!=i&&e.setAttribute(r,i)}function $x(e,r){const i=[].concat(r).map(a=>a+"");Array.from(e.options).forEach(a=>{a.selected=i.includes(a.value)})}function e_(e){return e.toLowerCase().replace(/-(\w)/g,(r,i)=>i.toUpperCase())}function Ad(e,r){return e==r}function Yp(e){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(e)}function t_(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function n_(e,r,i){if(e._x_bindings&&e._x_bindings[r]!==void 0)return e._x_bindings[r];let a=e.getAttribute(r);return a===null?typeof i=="function"?i():i:a===""?!0:Yp(r)?!![r,"true"].includes(a):a}function Jp(e,r){var i;return function(){var a=this,l=arguments,h=function(){i=null,e.apply(a,l)};clearTimeout(i),i=setTimeout(h,r)}}function jp(e,r){let i;return function(){let a=this,l=arguments;i||(e.apply(a,l),i=!0,setTimeout(()=>i=!1,r))}}function r_(e){e(yo)}var li={},yd=!1;function i_(e,r){if(yd||(li=ns(li),yd=!0),r===void 0)return li[e];li[e]=r,typeof r=="object"&&r!==null&&r.hasOwnProperty("init")&&typeof r.init=="function"&&li[e].init(),Ep(li[e])}function s_(){return li}var Qp={};function o_(e,r){let i=typeof r!="function"?()=>r:r;e instanceof Element?Zp(e,i()):Qp[e]=i}function a_(e){return Object.entries(Qp).forEach(([r,i])=>{Object.defineProperty(e,r,{get(){return(...a)=>i(...a)}})}),e}function Zp(e,r,i){let a=[];for(;a.length;)a.pop()();let l=Object.entries(r).map(([p,d])=>({name:p,value:d})),h=Tp(l);l=l.map(p=>h.find(d=>d.name===p.name)?{name:`x-bind:${p.name}`,value:`"${p.value}"`}:p),Wf(e,l,i).map(p=>{a.push(p.runCleanups),p()})}var Xp={};function u_(e,r){Xp[e]=r}function l_(e,r){return Object.entries(Xp).forEach(([i,a])=>{Object.defineProperty(e,i,{get(){return(...l)=>a.bind(r)(...l)},enumerable:!1})}),e}var f_={get reactive(){return ns},get release(){return mo},get effect(){return rs},get raw(){return gp},version:"3.11.1",flushAndStopDeferringMutations:yx,dontAutoEvaluateFunctions:Ex,disableEffectScheduling:cx,startObservingMutations:kf,stopObservingMutations:xp,setReactivityEngine:hx,closestDataStack:Xi,skipDuringClone:Ao,onlyDuringClone:Wx,addRootSelector:kp,addInitSelector:zp,addScopeToNode:wo,deferMutations:Ax,mapAttributes:Kf,evaluateLater:Bt,interceptInit:Fx,setEvaluator:Sx,mergeProxies:vo,findClosest:Iu,closestRoot:Pu,destroyTree:Hp,interceptor:Sp,transition:vf,setStyles:Bu,mutateDom:wt,directive:at,throttle:jp,debounce:Jp,evaluate:ji,initTree:Br,nextTick:Jf,prefixed:is,prefix:Tx,plugin:r_,magic:vn,store:i_,start:Ix,clone:Kx,bound:n_,$data:_p,walk:Ir,data:u_,bind:o_},yo=f_;function c_(e,r){const i=Object.create(null),a=e.split(",");for(let l=0;l<a.length;l++)i[a[l]]=!0;return r?l=>!!i[l.toLowerCase()]:l=>!!i[l]}var h_=Object.freeze({});Object.freeze([]);var $p=Object.assign,d_=Object.prototype.hasOwnProperty,Fu=(e,r)=>d_.call(e,r),di=Array.isArray,uo=e=>eg(e)==="[object Map]",p_=e=>typeof e=="string",Qf=e=>typeof e=="symbol",Lu=e=>e!==null&&typeof e=="object",g_=Object.prototype.toString,eg=e=>g_.call(e),tg=e=>eg(e).slice(8,-1),Zf=e=>p_(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,m_=e=>{const r=Object.create(null);return i=>r[i]||(r[i]=e(i))},w_=m_(e=>e.charAt(0).toUpperCase()+e.slice(1)),ng=(e,r)=>e!==r&&(e===e||r===r),Af=new WeakMap,no=[],Bn,pi=Symbol("iterate"),yf=Symbol("Map key iterate");function v_(e){return e&&e._isEffect===!0}function A_(e,r=h_){v_(e)&&(e=e.raw);const i=__(e,r);return r.lazy||i(),i}function y_(e){e.active&&(rg(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var x_=0;function __(e,r){const i=function(){if(!i.active)return e();if(!no.includes(i)){rg(i);try{return S_(),no.push(i),Bn=i,e()}finally{no.pop(),ig(),Bn=no[no.length-1]}}};return i.id=x_++,i.allowRecurse=!!r.allowRecurse,i._isEffect=!0,i.active=!0,i.raw=e,i.deps=[],i.options=r,i}function rg(e){const{deps:r}=e;if(r.length){for(let i=0;i<r.length;i++)r[i].delete(e);r.length=0}}var es=!0,Xf=[];function E_(){Xf.push(es),es=!1}function S_(){Xf.push(es),es=!0}function ig(){const e=Xf.pop();es=e===void 0?!0:e}function wn(e,r,i){if(!es||Bn===void 0)return;let a=Af.get(e);a||Af.set(e,a=new Map);let l=a.get(i);l||a.set(i,l=new Set),l.has(Bn)||(l.add(Bn),Bn.deps.push(l),Bn.options.onTrack&&Bn.options.onTrack({effect:Bn,target:e,type:r,key:i}))}function Fr(e,r,i,a,l,h){const p=Af.get(e);if(!p)return;const d=new Set,E=C=>{C&&C.forEach(L=>{(L!==Bn||L.allowRecurse)&&d.add(L)})};if(r==="clear")p.forEach(E);else if(i==="length"&&di(e))p.forEach((C,L)=>{(L==="length"||L>=a)&&E(C)});else switch(i!==void 0&&E(p.get(i)),r){case"add":di(e)?Zf(i)&&E(p.get("length")):(E(p.get(pi)),uo(e)&&E(p.get(yf)));break;case"delete":di(e)||(E(p.get(pi)),uo(e)&&E(p.get(yf)));break;case"set":uo(e)&&E(p.get(pi));break}const S=C=>{C.options.onTrigger&&C.options.onTrigger({effect:C,target:e,key:i,type:r,newValue:a,oldValue:l,oldTarget:h}),C.options.scheduler?C.options.scheduler(C):C()};d.forEach(S)}var b_=c_("__proto__,__v_isRef,__isVue"),sg=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Qf)),R_=Du(),V_=Du(!1,!0),T_=Du(!0),M_=Du(!0,!0),Su={};["includes","indexOf","lastIndexOf"].forEach(e=>{const r=Array.prototype[e];Su[e]=function(...i){const a=Ge(this);for(let h=0,p=this.length;h<p;h++)wn(a,"get",h+"");const l=r.apply(a,i);return l===-1||l===!1?r.apply(a,i.map(Ge)):l}});["push","pop","shift","unshift","splice"].forEach(e=>{const r=Array.prototype[e];Su[e]=function(...i){E_();const a=r.apply(this,i);return ig(),a}});function Du(e=!1,r=!1){return function(a,l,h){if(l==="__v_isReactive")return!e;if(l==="__v_isReadonly")return e;if(l==="__v_raw"&&h===(e?r?U_:yg:r?N_:Ag).get(a))return a;const p=di(a);if(!e&&p&&Fu(Su,l))return Reflect.get(Su,l,h);const d=Reflect.get(a,l,h);return(Qf(l)?sg.has(l):b_(l))||(e||wn(a,"get",l),r)?d:xf(d)?!p||!Zf(l)?d.value:d:Lu(d)?e?xg(d):nc(d):d}}var C_=og(),O_=og(!0);function og(e=!1){return function(i,a,l,h){let p=i[a];if(!e&&(l=Ge(l),p=Ge(p),!di(i)&&xf(p)&&!xf(l)))return p.value=l,!0;const d=di(i)&&Zf(a)?Number(a)<i.length:Fu(i,a),E=Reflect.set(i,a,l,h);return i===Ge(h)&&(d?ng(l,p)&&Fr(i,"set",a,l,p):Fr(i,"add",a,l)),E}}function P_(e,r){const i=Fu(e,r),a=e[r],l=Reflect.deleteProperty(e,r);return l&&i&&Fr(e,"delete",r,void 0,a),l}function I_(e,r){const i=Reflect.has(e,r);return(!Qf(r)||!sg.has(r))&&wn(e,"has",r),i}function B_(e){return wn(e,"iterate",di(e)?"length":pi),Reflect.ownKeys(e)}var ag={get:R_,set:C_,deleteProperty:P_,has:I_,ownKeys:B_},ug={get:T_,set(e,r){return console.warn(`Set operation on key "${String(r)}" failed: target is readonly.`,e),!0},deleteProperty(e,r){return console.warn(`Delete operation on key "${String(r)}" failed: target is readonly.`,e),!0}};$p({},ag,{get:V_,set:O_});$p({},ug,{get:M_});var $f=e=>Lu(e)?nc(e):e,ec=e=>Lu(e)?xg(e):e,tc=e=>e,Nu=e=>Reflect.getPrototypeOf(e);function Uu(e,r,i=!1,a=!1){e=e.__v_raw;const l=Ge(e),h=Ge(r);r!==h&&!i&&wn(l,"get",r),!i&&wn(l,"get",h);const{has:p}=Nu(l),d=a?tc:i?ec:$f;if(p.call(l,r))return d(e.get(r));if(p.call(l,h))return d(e.get(h));e!==l&&e.get(r)}function ku(e,r=!1){const i=this.__v_raw,a=Ge(i),l=Ge(e);return e!==l&&!r&&wn(a,"has",e),!r&&wn(a,"has",l),e===l?i.has(e):i.has(e)||i.has(l)}function zu(e,r=!1){return e=e.__v_raw,!r&&wn(Ge(e),"iterate",pi),Reflect.get(e,"size",e)}function lg(e){e=Ge(e);const r=Ge(this);return Nu(r).has.call(r,e)||(r.add(e),Fr(r,"add",e,e)),this}function fg(e,r){r=Ge(r);const i=Ge(this),{has:a,get:l}=Nu(i);let h=a.call(i,e);h?vg(i,a,e):(e=Ge(e),h=a.call(i,e));const p=l.call(i,e);return i.set(e,r),h?ng(r,p)&&Fr(i,"set",e,r,p):Fr(i,"add",e,r),this}function cg(e){const r=Ge(this),{has:i,get:a}=Nu(r);let l=i.call(r,e);l?vg(r,i,e):(e=Ge(e),l=i.call(r,e));const h=a?a.call(r,e):void 0,p=r.delete(e);return l&&Fr(r,"delete",e,void 0,h),p}function hg(){const e=Ge(this),r=e.size!==0,i=uo(e)?new Map(e):new Set(e),a=e.clear();return r&&Fr(e,"clear",void 0,void 0,i),a}function qu(e,r){return function(a,l){const h=this,p=h.__v_raw,d=Ge(p),E=r?tc:e?ec:$f;return!e&&wn(d,"iterate",pi),p.forEach((S,C)=>a.call(l,E(S),E(C),h))}}function au(e,r,i){return function(...a){const l=this.__v_raw,h=Ge(l),p=uo(h),d=e==="entries"||e===Symbol.iterator&&p,E=e==="keys"&&p,S=l[e](...a),C=i?tc:r?ec:$f;return!r&&wn(h,"iterate",E?yf:pi),{next(){const{value:L,done:z}=S.next();return z?{value:L,done:z}:{value:d?[C(L[0]),C(L[1])]:C(L),done:z}},[Symbol.iterator](){return this}}}}function Cr(e){return function(...r){{const i=r[0]?`on key "${r[0]}" `:"";console.warn(`${w_(e)} operation ${i}failed: target is readonly.`,Ge(this))}return e==="delete"?!1:this}}var dg={get(e){return Uu(this,e)},get size(){return zu(this)},has:ku,add:lg,set:fg,delete:cg,clear:hg,forEach:qu(!1,!1)},pg={get(e){return Uu(this,e,!1,!0)},get size(){return zu(this)},has:ku,add:lg,set:fg,delete:cg,clear:hg,forEach:qu(!1,!0)},gg={get(e){return Uu(this,e,!0)},get size(){return zu(this,!0)},has(e){return ku.call(this,e,!0)},add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear"),forEach:qu(!0,!1)},mg={get(e){return Uu(this,e,!0,!0)},get size(){return zu(this,!0)},has(e){return ku.call(this,e,!0)},add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear"),forEach:qu(!0,!0)},F_=["keys","values","entries",Symbol.iterator];F_.forEach(e=>{dg[e]=au(e,!1,!1),gg[e]=au(e,!0,!1),pg[e]=au(e,!1,!0),mg[e]=au(e,!0,!0)});function wg(e,r){const i=r?e?mg:pg:e?gg:dg;return(a,l,h)=>l==="__v_isReactive"?!e:l==="__v_isReadonly"?e:l==="__v_raw"?a:Reflect.get(Fu(i,l)&&l in a?i:a,l,h)}var L_={get:wg(!1,!1)},D_={get:wg(!0,!1)};function vg(e,r,i){const a=Ge(i);if(a!==i&&r.call(e,a)){const l=tg(e);console.warn(`Reactive ${l} contains both the raw and reactive versions of the same object${l==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Ag=new WeakMap,N_=new WeakMap,yg=new WeakMap,U_=new WeakMap;function k_(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function z_(e){return e.__v_skip||!Object.isExtensible(e)?0:k_(tg(e))}function nc(e){return e&&e.__v_isReadonly?e:_g(e,!1,ag,L_,Ag)}function xg(e){return _g(e,!0,ug,D_,yg)}function _g(e,r,i,a,l){if(!Lu(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(r&&e.__v_isReactive))return e;const h=l.get(e);if(h)return h;const p=z_(e);if(p===0)return e;const d=new Proxy(e,p===2?a:i);return l.set(e,d),d}function Ge(e){return e&&Ge(e.__v_raw)||e}function xf(e){return Boolean(e&&e.__v_isRef===!0)}vn("nextTick",()=>Jf);vn("dispatch",e=>ao.bind(ao,e));vn("watch",(e,{evaluateLater:r,effect:i})=>(a,l)=>{let h=r(a),p=!0,d,E=i(()=>h(S=>{JSON.stringify(S),p?d=S:queueMicrotask(()=>{l(S,d),d=S}),p=!1}));e._x_effects.delete(E)});vn("store",s_);vn("data",e=>_p(e));vn("root",e=>Pu(e));vn("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=vo(q_(e))),e._x_refs_proxy));function q_(e){let r=[],i=e;for(;i;)i._x_refs&&r.push(i._x_refs),i=i.parentNode;return r}var Zl={};function Eg(e){return Zl[e]||(Zl[e]=0),++Zl[e]}function H_(e,r){return Iu(e,i=>{if(i._x_ids&&i._x_ids[r])return!0})}function W_(e,r){e._x_ids||(e._x_ids={}),e._x_ids[r]||(e._x_ids[r]=Eg(r))}vn("id",e=>(r,i=null)=>{let a=H_(e,r),l=a?a._x_ids[r]:Eg(r);return i?`${r}-${l}-${i}`:`${r}-${l}`});vn("el",e=>e);Sg("Focus","focus","focus");Sg("Persist","persist","persist");function Sg(e,r,i){vn(r,a=>$i(`You can't use [$${directiveName}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${i}`,a))}function K_({get:e,set:r},{get:i,set:a}){let l=!0,h,p,d=rs(()=>{let E,S;l?(E=e(),a(E),S=i(),l=!1):(E=e(),S=i(),p=JSON.stringify(E),JSON.stringify(S),p!==h?(S=i(),a(E),S=E):(r(S),E=S)),h=JSON.stringify(E),JSON.stringify(S)});return()=>{mo(d)}}at("modelable",(e,{expression:r},{effect:i,evaluateLater:a,cleanup:l})=>{let h=a(r),p=()=>{let C;return h(L=>C=L),C},d=a(`${r} = __placeholder`),E=C=>d(()=>{},{scope:{__placeholder:C}}),S=p();E(S),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let C=e._x_model.get,L=e._x_model.set,z=K_({get(){return C()},set(H){L(H)}},{get(){return p()},set(H){E(H)}});l(z)})});var G_=document.createElement("div");at("teleport",(e,{modifiers:r,expression:i},{cleanup:a})=>{e.tagName.toLowerCase()!=="template"&&$i("x-teleport can only be used on a <template> tag",e);let l=Ao(()=>document.querySelector(i),()=>G_)();l||$i(`Cannot find x-teleport element for selector: "${i}"`);let h=e.content.cloneNode(!0).firstElementChild;e._x_teleport=h,h._x_teleportBack=e,e._x_forwardEvents&&e._x_forwardEvents.forEach(p=>{h.addEventListener(p,d=>{d.stopPropagation(),e.dispatchEvent(new d.constructor(d.type,d))})}),wo(h,{},e),wt(()=>{r.includes("prepend")?l.parentNode.insertBefore(h,l):r.includes("append")?l.parentNode.insertBefore(h,l.nextSibling):l.appendChild(h),Br(h),h._x_ignore=!0}),a(()=>h.remove())});var bg=()=>{};bg.inline=(e,{modifiers:r},{cleanup:i})=>{r.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,i(()=>{r.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};at("ignore",bg);at("effect",(e,{expression:r},{effect:i})=>i(Bt(e,r)));function _f(e,r,i,a){let l=e,h=E=>a(E),p={},d=(E,S)=>C=>S(E,C);if(i.includes("dot")&&(r=Y_(r)),i.includes("camel")&&(r=J_(r)),i.includes("passive")&&(p.passive=!0),i.includes("capture")&&(p.capture=!0),i.includes("window")&&(l=window),i.includes("document")&&(l=document),i.includes("prevent")&&(h=d(h,(E,S)=>{S.preventDefault(),E(S)})),i.includes("stop")&&(h=d(h,(E,S)=>{S.stopPropagation(),E(S)})),i.includes("self")&&(h=d(h,(E,S)=>{S.target===e&&E(S)})),(i.includes("away")||i.includes("outside"))&&(l=document,h=d(h,(E,S)=>{e.contains(S.target)||S.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&E(S))})),i.includes("once")&&(h=d(h,(E,S)=>{E(S),l.removeEventListener(r,h,p)})),h=d(h,(E,S)=>{Q_(r)&&Z_(S,i)||E(S)}),i.includes("debounce")){let E=i[i.indexOf("debounce")+1]||"invalid-wait",S=bu(E.split("ms")[0])?Number(E.split("ms")[0]):250;h=Jp(h,S)}if(i.includes("throttle")){let E=i[i.indexOf("throttle")+1]||"invalid-wait",S=bu(E.split("ms")[0])?Number(E.split("ms")[0]):250;h=jp(h,S)}return l.addEventListener(r,h,p),()=>{l.removeEventListener(r,h,p)}}function Y_(e){return e.replace(/-/g,".")}function J_(e){return e.toLowerCase().replace(/-(\w)/g,(r,i)=>i.toUpperCase())}function bu(e){return!Array.isArray(e)&&!isNaN(e)}function j_(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Q_(e){return["keydown","keyup"].includes(e)}function Z_(e,r){let i=r.filter(h=>!["window","document","prevent","stop","once"].includes(h));if(i.includes("debounce")){let h=i.indexOf("debounce");i.splice(h,bu((i[h+1]||"invalid-wait").split("ms")[0])?2:1)}if(i.includes("throttle")){let h=i.indexOf("throttle");i.splice(h,bu((i[h+1]||"invalid-wait").split("ms")[0])?2:1)}if(i.length===0||i.length===1&&xd(e.key).includes(i[0]))return!1;const l=["ctrl","shift","alt","meta","cmd","super"].filter(h=>i.includes(h));return i=i.filter(h=>!l.includes(h)),!(l.length>0&&l.filter(p=>((p==="cmd"||p==="super")&&(p="meta"),e[`${p}Key`])).length===l.length&&xd(e.key).includes(i[0]))}function xd(e){if(!e)return[];e=j_(e);let r={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return r[e]=e,Object.keys(r).map(i=>{if(r[i]===e)return i}).filter(i=>i)}at("model",(e,{modifiers:r,expression:i},{effect:a,cleanup:l})=>{let h=e;r.includes("parent")&&(h=e.parentNode);let p=Bt(h,i),d;typeof i=="string"?d=Bt(h,`${i} = __placeholder`):typeof i=="function"&&typeof i()=="string"?d=Bt(h,`${i()} = __placeholder`):d=()=>{};let E=()=>{let z;return p(H=>z=H),_d(z)?z.get():z},S=z=>{let H;p(R=>H=R),_d(H)?H.set(z):d(()=>{},{scope:{__placeholder:z}})};typeof i=="string"&&e.type==="radio"&&wt(()=>{e.hasAttribute("name")||e.setAttribute("name",i)});var C=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||r.includes("lazy")?"change":"input";let L=_f(e,C,r,z=>{S(X_(e,r,z,E()))});if(e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=L,l(()=>e._x_removeModelListeners.default()),e.form){let z=_f(e.form,"reset",[],H=>{Jf(()=>e._x_model&&e._x_model.set(e.value))});l(()=>z())}e._x_model={get(){return E()},set(z){S(z)}},e._x_forceModelUpdate=z=>{z=z===void 0?E():z,z===void 0&&typeof i=="string"&&i.match(/\./)&&(z=""),window.fromModel=!0,wt(()=>Gp(e,"value",z)),delete window.fromModel},a(()=>{let z=E();r.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(z)})});function X_(e,r,i,a){return wt(()=>{if(i instanceof CustomEvent&&i.detail!==void 0)return typeof i.detail!="undefined"?i.detail:i.target.value;if(e.type==="checkbox")if(Array.isArray(a)){let l=r.includes("number")?Xl(i.target.value):i.target.value;return i.target.checked?a.concat([l]):a.filter(h=>!$_(h,l))}else return i.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return r.includes("number")?Array.from(i.target.selectedOptions).map(l=>{let h=l.value||l.text;return Xl(h)}):Array.from(i.target.selectedOptions).map(l=>l.value||l.text);{let l=i.target.value;return r.includes("number")?Xl(l):r.includes("trim")?l.trim():l}}})}function Xl(e){let r=e?parseFloat(e):null;return eE(r)?r:e}function $_(e,r){return e==r}function eE(e){return!Array.isArray(e)&&!isNaN(e)}function _d(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}at("cloak",e=>queueMicrotask(()=>wt(()=>e.removeAttribute(is("cloak")))));zp(()=>`[${is("init")}]`);at("init",Ao((e,{expression:r},{evaluate:i})=>typeof r=="string"?!!r.trim()&&i(r,{},!1):i(r,{},!1)));at("text",(e,{expression:r},{effect:i,evaluateLater:a})=>{let l=a(r);i(()=>{l(h=>{wt(()=>{e.textContent=h})})})});at("html",(e,{expression:r},{effect:i,evaluateLater:a})=>{let l=a(r);i(()=>{l(h=>{wt(()=>{e.innerHTML=h,e._x_ignoreSelf=!0,Br(e),delete e._x_ignoreSelf})})})});Kf(Op(":",Pp(is("bind:"))));at("bind",(e,{value:r,modifiers:i,expression:a,original:l},{effect:h})=>{if(!r){let d={};a_(d),Bt(e,a)(S=>{Zp(e,S,l)},{scope:d});return}if(r==="key")return tE(e,a);let p=Bt(e,a);h(()=>p(d=>{d===void 0&&typeof a=="string"&&a.match(/\./)&&(d=""),wt(()=>Gp(e,r,d,i))}))});function tE(e,r){e._x_keyExpression=r}kp(()=>`[${is("data")}]`);at("data",Ao((e,{expression:r},{cleanup:i})=>{r=r===""?"{}":r;let a={};cf(a,e);let l={};l_(l,a);let h=ji(e,r,{scope:l});h===void 0&&(h={}),cf(h,e);let p=ns(h);Ep(p);let d=wo(e,p);p.init&&ji(e,p.init),i(()=>{p.destroy&&ji(e,p.destroy),d()})}));at("show",(e,{modifiers:r,expression:i},{effect:a})=>{let l=Bt(e,i);e._x_doHide||(e._x_doHide=()=>{wt(()=>{e.style.setProperty("display","none",r.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{wt(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let h=()=>{e._x_doHide(),e._x_isShown=!1},p=()=>{e._x_doShow(),e._x_isShown=!0},d=()=>setTimeout(p),E=wf(L=>L?p():h(),L=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,L,p,h):L?d():h()}),S,C=!0;a(()=>l(L=>{!C&&L===S||(r.includes("immediate")&&(L?d():h()),E(L),S=L,C=!1)}))});at("for",(e,{expression:r},{effect:i,cleanup:a})=>{let l=rE(r),h=Bt(e,l.items),p=Bt(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},i(()=>nE(e,l,h,p)),a(()=>{Object.values(e._x_lookup).forEach(d=>d.remove()),delete e._x_prevKeys,delete e._x_lookup})});function nE(e,r,i,a){let l=p=>typeof p=="object"&&!Array.isArray(p),h=e;i(p=>{iE(p)&&p>=0&&(p=Array.from(Array(p).keys(),Q=>Q+1)),p===void 0&&(p=[]);let d=e._x_lookup,E=e._x_prevKeys,S=[],C=[];if(l(p))p=Object.entries(p).map(([Q,le])=>{let _e=Ed(r,le,Q,p);a(ye=>C.push(ye),{scope:{index:Q,..._e}}),S.push(_e)});else for(let Q=0;Q<p.length;Q++){let le=Ed(r,p[Q],Q,p);a(_e=>C.push(_e),{scope:{index:Q,...le}}),S.push(le)}let L=[],z=[],H=[],R=[];for(let Q=0;Q<E.length;Q++){let le=E[Q];C.indexOf(le)===-1&&H.push(le)}E=E.filter(Q=>!H.includes(Q));let ue="template";for(let Q=0;Q<C.length;Q++){let le=C[Q],_e=E.indexOf(le);if(_e===-1)E.splice(Q,0,le),L.push([ue,Q]);else if(_e!==Q){let ye=E.splice(Q,1)[0],He=E.splice(_e-1,1)[0];E.splice(Q,0,He),E.splice(_e,0,ye),z.push([ye,He])}else R.push(le);ue=le}for(let Q=0;Q<H.length;Q++){let le=H[Q];d[le]._x_effects&&d[le]._x_effects.forEach(pp),d[le].remove(),d[le]=null,delete d[le]}for(let Q=0;Q<z.length;Q++){let[le,_e]=z[Q],ye=d[le],He=d[_e],Ke=document.createElement("div");wt(()=>{He.after(Ke),ye.after(He),He._x_currentIfEl&&He.after(He._x_currentIfEl),Ke.before(ye),ye._x_currentIfEl&&ye.after(ye._x_currentIfEl),Ke.remove()}),wd(He,S[C.indexOf(_e)])}for(let Q=0;Q<L.length;Q++){let[le,_e]=L[Q],ye=le==="template"?h:d[le];ye._x_currentIfEl&&(ye=ye._x_currentIfEl);let He=S[_e],Ke=C[_e],Xe=document.importNode(h.content,!0).firstElementChild;wo(Xe,ns(He),h),wt(()=>{ye.after(Xe),Br(Xe)}),typeof Ke=="object"&&$i("x-for key cannot be an object, it must be a string or an integer",h),d[Ke]=Xe}for(let Q=0;Q<R.length;Q++)wd(d[R[Q]],S[C.indexOf(R[Q])]);h._x_prevKeys=C})}function rE(e){let r=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,i=/^\s*\(|\)\s*$/g,a=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,l=e.match(a);if(!l)return;let h={};h.items=l[2].trim();let p=l[1].replace(i,"").trim(),d=p.match(r);return d?(h.item=p.replace(r,"").trim(),h.index=d[1].trim(),d[2]&&(h.collection=d[2].trim())):h.item=p,h}function Ed(e,r,i,a){let l={};return/^\[.*\]$/.test(e.item)&&Array.isArray(r)?e.item.replace("[","").replace("]","").split(",").map(p=>p.trim()).forEach((p,d)=>{l[p]=r[d]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(r)&&typeof r=="object"?e.item.replace("{","").replace("}","").split(",").map(p=>p.trim()).forEach(p=>{l[p]=r[p]}):l[e.item]=r,e.index&&(l[e.index]=i),e.collection&&(l[e.collection]=a),l}function iE(e){return!Array.isArray(e)&&!isNaN(e)}function Rg(){}Rg.inline=(e,{expression:r},{cleanup:i})=>{let a=Pu(e);a._x_refs||(a._x_refs={}),a._x_refs[r]=e,i(()=>delete a._x_refs[r])};at("ref",Rg);at("if",(e,{expression:r},{effect:i,cleanup:a})=>{let l=Bt(e,r),h=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let d=e.content.cloneNode(!0).firstElementChild;return wo(d,{},e),wt(()=>{e.after(d),Br(d)}),e._x_currentIfEl=d,e._x_undoIf=()=>{Ir(d,E=>{E._x_effects&&E._x_effects.forEach(pp)}),d.remove(),delete e._x_currentIfEl},d},p=()=>{!e._x_undoIf||(e._x_undoIf(),delete e._x_undoIf)};i(()=>l(d=>{d?h():p()})),a(()=>e._x_undoIf&&e._x_undoIf())});at("id",(e,{expression:r},{evaluate:i})=>{i(r).forEach(l=>W_(e,l))});Kf(Op("@",Pp(is("on:"))));at("on",Ao((e,{value:r,modifiers:i,expression:a},{cleanup:l})=>{let h=a?Bt(e,a):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(r)||e._x_forwardEvents.push(r));let p=_f(e,r,i,d=>{h(()=>{},{scope:{$event:d},params:[d]})});l(()=>p())}));Hu("Collapse","collapse","collapse");Hu("Intersect","intersect","intersect");Hu("Focus","trap","focus");Hu("Mask","mask","mask");function Hu(e,r,i){at(r,a=>$i(`You can't use [x-${r}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${i}`,a))}yo.setEvaluator(Vp);yo.setReactivityEngine({reactive:nc,effect:A_,release:y_,raw:Ge});var sE=yo,rc=sE;class oE{constructor(r,i){this.width=Math.floor(r/2),this.height=Math.floor(i/2),this.cols=2*this.width+1,this.rows=2*this.height+1,this.maze=this.initArray([]),this.maze.forEach((a,l)=>{if(a.forEach((h,p)=>{switch(l){case 0:case this.rows-1:this.maze[l][p]=["wall"];break;default:l%2==1?(p==0||p==this.cols-1)&&(this.maze[l][p]=["wall"]):p%2==0&&(this.maze[l][p]=["wall"])}}),l==0){let h=this.posToSpace(this.rand(1,this.width));this.maze[l][h]=["door","exit"]}if(l==this.rows-1){let h=this.posToSpace(this.rand(1,this.width));this.maze[l][h]=["door","entrance"]}}),this.partition(1,this.height-1,1,this.width-1)}initArray(r){return new Array(this.rows).fill().map(()=>new Array(this.cols).fill(r))}rand(r,i){return r+Math.floor(Math.random()*(1+i-r))}posToSpace(r){return 2*(r-1)+1}posToWall(r){return 2*r}inBounds(r,i){return!(typeof this.maze[r]=="undefined"||typeof this.maze[r][i]=="undefined")}shuffle(r){for(let i=r.length-1;i>0;i--){const a=Math.floor(Math.random()*(i+1));[r[i],r[a]]=[r[a],r[i]]}return r}partition(r,i,a,l){let h,p,d,E,S,C;if(i<r||l<a)return!1;r==i?h=r:(d=r+1,E=i-1,S=Math.round(d+(E-d)/4),C=Math.round(d+3*(E-d)/4),h=this.rand(S,C)),a==l?p=a:(d=a+1,E=l-1,S=Math.round(d+(E-d)/3),C=Math.round(d+2*(E-d)/3),p=this.rand(S,C));for(let z=this.posToWall(r)-1;z<=this.posToWall(i)+1;z++)for(let H=this.posToWall(a)-1;H<=this.posToWall(l)+1;H++)(z==this.posToWall(h)||H==this.posToWall(p))&&(this.maze[z][H]=["wall"]);let L=this.shuffle([!0,!0,!0,!1]);if(L[0]){let z=this.rand(a,p);this.maze[this.posToWall(h)][this.posToSpace(z)]=[]}if(L[1]){let z=this.rand(p+1,l+1);this.maze[this.posToWall(h)][this.posToSpace(z)]=[]}if(L[2]){let z=this.rand(r,h);this.maze[this.posToSpace(z)][this.posToWall(p)]=[]}if(L[3]){let z=this.rand(h+1,i+1);this.maze[this.posToSpace(z)][this.posToWall(p)]=[]}this.partition(r,h-1,a,p-1),this.partition(h+1,i,a,p-1),this.partition(r,h-1,p+1,l),this.partition(h+1,i,p+1,l)}isGap(...r){return r.every(i=>{let a,l;return[a,l]=i,!(this.maze[a][l].length>0&&!this.maze[a][l].includes("door"))})}countSteps(r,i,a,l,h){if(!this.inBounds(i,a)||r[i][a]<=l||!this.isGap([i,a]))return!1;if(r[i][a]=l,this.maze[i][a].includes(h))return!0;this.countSteps(r,i-1,a,l+1,h),this.countSteps(r,i,a+1,l+1,h),this.countSteps(r,i+1,a,l+1,h),this.countSteps(r,i,a-1,l+1,h)}getKeyLocation(){let r=this.initArray(),i=this.initArray();this.totalSteps=-1;for(let h=1;h<this.cols-1;h++)this.maze[this.rows-1][h].includes("entrance")&&this.countSteps(r,this.rows-1,h,0,"exit"),this.maze[0][h].includes("exit")&&this.countSteps(i,0,h,0,"entrance");let a=-1,l=-1;return this.maze.forEach((h,p)=>{h.forEach((d,E)=>{if(typeof r[p][E]=="undefined")return;let S=r[p][E]+i[p][E];S>this.totalSteps&&(l=p,a=E,this.totalSteps=S)})}),[l,a]}placeKey(){let r,i;[r,i]=this.getKeyLocation(),this.maze[r][i]=["key"]}display(r){if(this.parentDiv=document.getElementById(r),!this.parentDiv)return alert('Cannot initialise maze - no element found with id "'+r+'"'),!1;for(;this.parentDiv.firstChild;)this.parentDiv.removeChild(this.parentDiv.firstChild);const i=document.createElement("div");return i.id="maze",i.dataset.steps=this.totalSteps,this.maze.forEach(a=>{let l=document.createElement("div");a.forEach(h=>{let p=document.createElement("div");h&&(p.className=h.join(" ")),l.appendChild(p)}),i.appendChild(l)}),this.parentDiv.appendChild(i),!0}}const Gi="VERTICAL",Vg="HORIZONTAL",mu=(e,r)=>Math.floor(Math.random()*(r-e+1)+e);function aE(e=[Gi,Vg]){if(e.length===0)return"";const r=e.length-1;return e[mu(0,r)]}function uE(e){const r=e.length-1,i=e[0].length-1;return e.map((a,l)=>a.map((h,p)=>l===0||l===r||p===0||p===i?1:h))}const lE=e=>(console.log("logging settings",e),e?{width:e.width||50,height:e.height||50,minRoomSize:e.minRoomSize||5,maxRoomSize:e.maxRoomSize||20}:{width:50,height:50,minRoomSize:5,maxRoomSize:20}),fE=e=>{const i=Object.create({init(d,E,S,C){this.minRoomSize=S,this.maxRoomSize=C,this.counter=1,this.tree={level:Array.apply(null,{length:E}).map(()=>Array.apply(null,{length:d}))},this.split(this.tree),this.connectRooms(this.tree)},split(d){if(d.level.length>this.maxRoomSize||d.level[0].length>this.maxRoomSize){const E=aE(this.getSplitOptions(d.level.length,d.level[0].length)),S=this.getIndexToSplit(E,d.level[0].length,d.level.length);let C=d.leftNode={},L=d.rightNode={};d.splitDirection=E,d.splitIndex=S,E===Gi?(C.level=d.level.map(z=>z.slice(0,S)),L.level=d.level.map(z=>z.slice(S,z.length))):(C.level=d.level.slice(0,S),L.level=d.level.slice(S,d.level.length)),this.split(C),this.split(L)}else this.counter+=1,d.level=d.level.map(E=>E.map(()=>this.counter)),d.level=uE(d.level)},getSplitOptions(d,E){const S=[];return d>this.maxRoomSize&&S.push(Vg),E>this.maxRoomSize&&S.push(Gi),S},getIndexToSplit(d,E,S){const C=this.minRoomSize,L=d===Gi?E-C:S-C;return mu(C,L)},connectRooms(d){if(d.leftNode)this.connectRooms(d.leftNode);else return;if(d.rightNode)this.connectRooms(d.rightNode);else return;const E=d.leftNode.level,S=d.rightNode.level;if(d.splitDirection===Gi){const C=mu(1,E.length-2);d.corridorIndex=C,E[C][E[0].length-1]=0,E[C][E[0].length-2]=0,S[C][0]=0,S[C][1]=0}else{const C=mu(1,E[0].length-2);d.corridorIndex=C,E[E.length-1][C]=0,E[E.length-2][C]=0,S[0][C]=0,S[1][C]=0}d.level=[],d.splitDirection===Gi?d.level=E.reduce((C,L,z)=>{const H=[];return H.push(...E[z]),H.push(...S[z]),C.push(H),C},[]):(d.level.push(...E),d.level.push(...S))}}),{width:a,height:l,minRoomSize:h,maxRoomSize:p}=lE(e);return i.init(a,l,h,p),i.tree.level};var ro=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ef={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,r){(function(){var i,a="4.17.21",l=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",d="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",S=500,C="__lodash_placeholder__",L=1,z=2,H=4,R=1,ue=2,Q=1,le=2,_e=4,ye=8,He=16,Ke=32,Xe=64,Vt=128,or=256,gi=512,ss=30,os="...",as=800,ar=16,us=1,xo=2,_o=3,An=1/0,an=9007199254740991,Eo=17976931348623157e292,ur=0/0,Ft=4294967295,ls=Ft-1,fs=Ft>>>1,cs=[["ary",Vt],["bind",Q],["bindKey",le],["curry",ye],["curryRight",He],["flip",gi],["partial",Ke],["partialRight",Xe],["rearg",or]],yn="[object Arguments]",Lr="[object Array]",So="[object AsyncFunction]",Dn="[object Boolean]",lr="[object Date]",hs="[object DOMException]",fr="[object Error]",Nn="[object Function]",ds="[object GeneratorFunction]",_t="[object Map]",Et="[object Number]",bo="[object Null]",Jt="[object Object]",ps="[object Promise]",Ro="[object Proxy]",cr="[object RegExp]",Te="[object Set]",Ht="[object String]",jt="[object Symbol]",Tt="[object Undefined]",nt="[object WeakMap]",Un="[object WeakSet]",un="[object ArrayBuffer]",kn="[object DataView]",xn="[object Float32Array]",pt="[object Float64Array]",_n="[object Int8Array]",Dr="[object Int16Array]",Nr="[object Int32Array]",Qt="[object Uint8Array]",Ur="[object Uint8ClampedArray]",Zt="[object Uint16Array]",kr="[object Uint32Array]",Vo=/\b__p \+= '';/g,To=/\b(__p \+=) '' \+/g,gs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lt=/&(?:amp|lt|gt|quot|#39);/g,mi=/[&<>"']/g,Mo=RegExp(Lt.source),Co=RegExp(mi.source),ms=/<%-([\s\S]+?)%>/g,En=/<%([\s\S]+?)%>/g,hr=/<%=([\s\S]+?)%>/g,Sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ws=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,vt=RegExp(We.source),zn=/^\s+/,bn=/\s/,dr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oo=/\{\n\/\* \[wrapped with (.+)\] \*/,wi=/,? & /,qn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vs=/[()=,{}\[\]\/\s]/,zr=/\\(\\)?/g,Po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qr=/\w*$/,Io=/^[-+]0x[0-9a-f]+$/i,Bo=/^0b[01]+$/i,Fo=/^\[object .+?Constructor\]$/,Lo=/^0o[0-7]+$/i,Do=/^(?:0|[1-9]\d*)$/,No=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hr=/($^)/,Uo=/['\n\r\u2028\u2029\\]/g,Wr="\\ud800-\\udfff",ko="\\u0300-\\u036f",zo="\\ufe20-\\ufe2f",qo="\\u20d0-\\u20ff",Kr=ko+zo+qo,As="\\u2700-\\u27bf",vi="a-z\\xdf-\\xf6\\xf8-\\xff",Ho="\\xac\\xb1\\xd7\\xf7",Wo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ko="\\u2000-\\u206f",Go=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",yi="\\ufe0e\\ufe0f",ke=Ho+Wo+Ko+Go,At="['\u2019]",Yo="["+Wr+"]",ys="["+ke+"]",Gr="["+Kr+"]",xs="\\d+",xi="["+As+"]",_i="["+vi+"]",pr="[^"+Wr+ke+xs+As+vi+Ai+"]",Yr="\\ud83c[\\udffb-\\udfff]",ln="(?:"+Gr+"|"+Yr+")",Ei="[^"+Wr+"]",_s="(?:\\ud83c[\\udde6-\\uddff]){2}",gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Rn="["+Ai+"]",Es="\\u200d",Ss="(?:"+_i+"|"+pr+")",Jo="(?:"+Rn+"|"+pr+")",mr="(?:"+At+"(?:d|ll|m|re|s|t|ve))?",bs="(?:"+At+"(?:D|LL|M|RE|S|T|VE))?",Rs=ln+"?",Vs="["+yi+"]?",jo="(?:"+Es+"(?:"+[Ei,_s,gr].join("|")+")"+Vs+Rs+")*",Jr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zo=Vs+Rs+jo,Vn="(?:"+[xi,_s,gr].join("|")+")"+Zo,Wu="(?:"+[Ei+Gr+"?",Gr,_s,gr,Yo].join("|")+")",Ku=RegExp(At,"g"),Xo=RegExp(Gr,"g"),jr=RegExp(Yr+"(?="+Yr+")|"+Wu+Zo,"g"),$o=RegExp([Rn+"?"+_i+"+"+mr+"(?="+[ys,Rn,"$"].join("|")+")",Jo+"+"+bs+"(?="+[ys,Rn+Ss,"$"].join("|")+")",Rn+"?"+Ss+"+"+mr,Rn+"+"+bs,Qo,Jr,xs,Vn].join("|"),"g"),ea=RegExp("["+Es+Wr+Kr+yi+"]"),ta=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ra=-1,Ne={};Ne[xn]=Ne[pt]=Ne[_n]=Ne[Dr]=Ne[Nr]=Ne[Qt]=Ne[Ur]=Ne[Zt]=Ne[kr]=!0,Ne[yn]=Ne[Lr]=Ne[un]=Ne[Dn]=Ne[kn]=Ne[lr]=Ne[fr]=Ne[Nn]=Ne[_t]=Ne[Et]=Ne[Jt]=Ne[cr]=Ne[Te]=Ne[Ht]=Ne[nt]=!1;var Fe={};Fe[yn]=Fe[Lr]=Fe[un]=Fe[kn]=Fe[Dn]=Fe[lr]=Fe[xn]=Fe[pt]=Fe[_n]=Fe[Dr]=Fe[Nr]=Fe[_t]=Fe[Et]=Fe[Jt]=Fe[cr]=Fe[Te]=Fe[Ht]=Fe[jt]=Fe[Qt]=Fe[Ur]=Fe[Zt]=Fe[kr]=!0,Fe[fr]=Fe[Nn]=Fe[nt]=!1;var ia={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},sa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},aa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ua=parseFloat,la=parseInt,Ts=typeof ro=="object"&&ro&&ro.Object===Object&&ro,Ms=typeof self=="object"&&self&&self.Object===Object&&self,$e=Ts||Ms||Function("return this")(),Si=r&&!r.nodeType&&r,Tn=Si&&!0&&e&&!e.nodeType&&e,Cs=Tn&&Tn.exports===Si,bi=Cs&&Ts.process,Mt=function(){try{var O=Tn&&Tn.require&&Tn.require("util").types;return O||bi&&bi.binding&&bi.binding("util")}catch{}}(),wr=Mt&&Mt.isArrayBuffer,vr=Mt&&Mt.isDate,Os=Mt&&Mt.isMap,Ps=Mt&&Mt.isRegExp,Hn=Mt&&Mt.isSet,Is=Mt&&Mt.isTypedArray;function gt(O,D,F){switch(F.length){case 0:return O.call(D);case 1:return O.call(D,F[0]);case 2:return O.call(D,F[0],F[1]);case 3:return O.call(D,F[0],F[1],F[2])}return O.apply(D,F)}function fa(O,D,F,ee){for(var de=-1,Me=O==null?0:O.length;++de<Me;){var Ye=O[de];D(ee,Ye,F(Ye),O)}return ee}function Ct(O,D){for(var F=-1,ee=O==null?0:O.length;++F<ee&&D(O[F],F,O)!==!1;);return O}function ca(O,D){for(var F=O==null?0:O.length;F--&&D(O[F],F,O)!==!1;);return O}function ha(O,D){for(var F=-1,ee=O==null?0:O.length;++F<ee;)if(!D(O[F],F,O))return!1;return!0}function fn(O,D){for(var F=-1,ee=O==null?0:O.length,de=0,Me=[];++F<ee;){var Ye=O[F];D(Ye,F,O)&&(Me[de++]=Ye)}return Me}function Qr(O,D){var F=O==null?0:O.length;return!!F&&Wn(O,D,0)>-1}function cn(O,D,F){for(var ee=-1,de=O==null?0:O.length;++ee<de;)if(F(D,O[ee]))return!0;return!1}function Le(O,D){for(var F=-1,ee=O==null?0:O.length,de=Array(ee);++F<ee;)de[F]=D(O[F],F,O);return de}function hn(O,D){for(var F=-1,ee=D.length,de=O.length;++F<ee;)O[de+F]=D[F];return O}function Ri(O,D,F,ee){var de=-1,Me=O==null?0:O.length;for(ee&&Me&&(F=O[++de]);++de<Me;)F=D(F,O[de],de,O);return F}function da(O,D,F,ee){var de=O==null?0:O.length;for(ee&&de&&(F=O[--de]);de--;)F=D(F,O[de],de,O);return F}function Vi(O,D){for(var F=-1,ee=O==null?0:O.length;++F<ee;)if(D(O[F],F,O))return!0;return!1}var pa=Mi("length");function Bs(O){return O.split("")}function Gu(O){return O.match(qn)||[]}function ga(O,D,F){var ee;return F(O,function(de,Me,Ye){if(D(de,Me,Ye))return ee=Me,!1}),ee}function Zr(O,D,F,ee){for(var de=O.length,Me=F+(ee?1:-1);ee?Me--:++Me<de;)if(D(O[Me],Me,O))return Me;return-1}function Wn(O,D,F){return D===D?Ra(O,D,F):Zr(O,Fs,F)}function ma(O,D,F,ee){for(var de=F-1,Me=O.length;++de<Me;)if(ee(O[de],D))return de;return-1}function Fs(O){return O!==O}function Ti(O,D){var F=O==null?0:O.length;return F?Xr(O,D)/F:ur}function Mi(O){return function(D){return D==null?i:D[O]}}function Ci(O){return function(D){return O==null?i:O[D]}}function Ls(O,D,F,ee,de){return de(O,function(Me,Ye,Ie){F=ee?(ee=!1,Me):D(F,Me,Ye,Ie)}),F}function wa(O,D){var F=O.length;for(O.sort(D);F--;)O[F]=O[F].value;return O}function Xr(O,D){for(var F,ee=-1,de=O.length;++ee<de;){var Me=D(O[ee]);Me!==i&&(F=F===i?Me:F+Me)}return F}function Oi(O,D){for(var F=-1,ee=Array(O);++F<O;)ee[F]=D(F);return ee}function va(O,D){return Le(D,function(F){return[F,O[F]]})}function Ds(O){return O&&O.slice(0,Ns(O)+1).replace(zn,"")}function yt(O){return function(D){return O(D)}}function $r(O,D){return Le(D,function(F){return O[F]})}function dn(O,D){return O.has(D)}function Aa(O,D){for(var F=-1,ee=O.length;++F<ee&&Wn(D,O[F],0)>-1;);return F}function Pi(O,D){for(var F=O.length;F--&&Wn(D,O[F],0)>-1;);return F}function ya(O,D){for(var F=O.length,ee=0;F--;)O[F]===D&&++ee;return ee}var xa=Ci(ia),_a=Ci(sa);function Ea(O){return"\\"+aa[O]}function Sa(O,D){return O==null?i:O[D]}function Xt(O){return ea.test(O)}function Yu(O){return ta.test(O)}function Ju(O){for(var D,F=[];!(D=O.next()).done;)F.push(D.value);return F}function Ii(O){var D=-1,F=Array(O.size);return O.forEach(function(ee,de){F[++D]=[de,ee]}),F}function Bi(O,D){return function(F){return O(D(F))}}function Mn(O,D){for(var F=-1,ee=O.length,de=0,Me=[];++F<ee;){var Ye=O[F];(Ye===D||Ye===C)&&(O[F]=C,Me[de++]=F)}return Me}function Fi(O){var D=-1,F=Array(O.size);return O.forEach(function(ee){F[++D]=ee}),F}function ba(O){var D=-1,F=Array(O.size);return O.forEach(function(ee){F[++D]=[ee,ee]}),F}function Ra(O,D,F){for(var ee=F-1,de=O.length;++ee<de;)if(O[ee]===D)return ee;return-1}function Va(O,D,F){for(var ee=F+1;ee--;)if(O[ee]===D)return ee;return ee}function Cn(O){return Xt(O)?Ma(O):pa(O)}function St(O){return Xt(O)?Us(O):Bs(O)}function Ns(O){for(var D=O.length;D--&&bn.test(O.charAt(D)););return D}var Ta=Ci(oa);function Ma(O){for(var D=jr.lastIndex=0;jr.test(O);)++D;return D}function Us(O){return O.match(jr)||[]}function Ca(O){return O.match($o)||[]}var Oa=function O(D){D=D==null?$e:Kn.defaults($e.Object(),D,Kn.pick($e,na));var F=D.Array,ee=D.Date,de=D.Error,Me=D.Function,Ye=D.Math,Ie=D.Object,Ar=D.RegExp,Li=D.String,ut=D.TypeError,s=F.prototype,u=Me.prototype,c=Ie.prototype,w=D["__core-js_shared__"],x=u.toString,m=c.hasOwnProperty,V=0,I=function(){var t=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_=c.toString,T=x.call(Ie),B=$e._,K=Ar("^"+x.call(m).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Cs?D.Buffer:i,re=D.Symbol,we=D.Uint8Array,Pe=te?te.allocUnsafe:i,Oe=Bi(Ie.getPrototypeOf,Ie),it=Ie.create,Ue=c.propertyIsEnumerable,je=s.splice,se=re?re.isConcatSpreadable:i,be=re?re.iterator:i,st=re?re.toStringTag:i,G=function(){try{var t=ii(Ie,"defineProperty");return t({},"",{}),t}catch{}}(),oe=D.clearTimeout!==$e.clearTimeout&&D.clearTimeout,$=ee&&ee.now!==$e.Date.now&&ee.now,ae=D.setTimeout!==$e.setTimeout&&D.setTimeout,ne=Ye.ceil,me=Ye.floor,pe=Ie.getOwnPropertySymbols,ze=te?te.isBuffer:i,Dt=D.isFinite,bt=s.join,yr=Bi(Ie.keys,Ie),Qe=Ye.max,qe=Ye.min,ks=ee.now,Gn=D.parseInt,Di=Ye.random,Tg=s.reverse,ju=ii(D,"DataView"),zs=ii(D,"Map"),Qu=ii(D,"Promise"),Ni=ii(D,"Set"),qs=ii(D,"WeakMap"),Hs=ii(Ie,"create"),Pa=qs&&new qs,Ui={},Mg=si(ju),Cg=si(zs),Og=si(Qu),Pg=si(Ni),Ig=si(qs),Ia=re?re.prototype:i,Ws=Ia?Ia.valueOf:i,ic=Ia?Ia.toString:i;function v(t){if(Ze(t)&&!ge(t)&&!(t instanceof Se)){if(t instanceof $t)return t;if(m.call(t,"__wrapped__"))return sh(t)}return new $t(t)}var ki=function(){function t(){}return function(n){if(!Je(n))return{};if(it)return it(n);t.prototype=n;var o=new t;return t.prototype=i,o}}();function Ba(){}function $t(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}v.templateSettings={escape:ms,evaluate:En,interpolate:hr,variable:"",imports:{_:v}},v.prototype=Ba.prototype,v.prototype.constructor=v,$t.prototype=ki(Ba.prototype),$t.prototype.constructor=$t;function Se(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ft,this.__views__=[]}function Bg(){var t=new Se(this.__wrapped__);return t.__actions__=Nt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Nt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Nt(this.__views__),t}function Fg(){if(this.__filtered__){var t=new Se(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Lg(){var t=this.__wrapped__.value(),n=this.__dir__,o=ge(t),f=n<0,g=o?t.length:0,A=Jm(0,g,this.__views__),b=A.start,M=A.end,P=M-b,k=f?M:b-1,q=this.__iteratees__,Y=q.length,Z=0,ie=qe(P,this.__takeCount__);if(!o||!f&&g==P&&ie==P)return Tc(t,this.__actions__);var ce=[];e:for(;P--&&Z<ie;){k+=n;for(var Ae=-1,he=t[k];++Ae<Y;){var Ee=q[Ae],Re=Ee.iteratee,Gt=Ee.type,It=Re(he);if(Gt==xo)he=It;else if(!It){if(Gt==us)continue e;break e}}ce[Z++]=he}return ce}Se.prototype=ki(Ba.prototype),Se.prototype.constructor=Se;function ei(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function Dg(){this.__data__=Hs?Hs(null):{},this.size=0}function Ng(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Ug(t){var n=this.__data__;if(Hs){var o=n[t];return o===E?i:o}return m.call(n,t)?n[t]:i}function kg(t){var n=this.__data__;return Hs?n[t]!==i:m.call(n,t)}function zg(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Hs&&n===i?E:n,this}ei.prototype.clear=Dg,ei.prototype.delete=Ng,ei.prototype.get=Ug,ei.prototype.has=kg,ei.prototype.set=zg;function Yn(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function qg(){this.__data__=[],this.size=0}function Hg(t){var n=this.__data__,o=Fa(n,t);if(o<0)return!1;var f=n.length-1;return o==f?n.pop():je.call(n,o,1),--this.size,!0}function Wg(t){var n=this.__data__,o=Fa(n,t);return o<0?i:n[o][1]}function Kg(t){return Fa(this.__data__,t)>-1}function Gg(t,n){var o=this.__data__,f=Fa(o,t);return f<0?(++this.size,o.push([t,n])):o[f][1]=n,this}Yn.prototype.clear=qg,Yn.prototype.delete=Hg,Yn.prototype.get=Wg,Yn.prototype.has=Kg,Yn.prototype.set=Gg;function Jn(t){var n=-1,o=t==null?0:t.length;for(this.clear();++n<o;){var f=t[n];this.set(f[0],f[1])}}function Yg(){this.size=0,this.__data__={hash:new ei,map:new(zs||Yn),string:new ei}}function Jg(t){var n=Ya(this,t).delete(t);return this.size-=n?1:0,n}function jg(t){return Ya(this,t).get(t)}function Qg(t){return Ya(this,t).has(t)}function Zg(t,n){var o=Ya(this,t),f=o.size;return o.set(t,n),this.size+=o.size==f?0:1,this}Jn.prototype.clear=Yg,Jn.prototype.delete=Jg,Jn.prototype.get=jg,Jn.prototype.has=Qg,Jn.prototype.set=Zg;function ti(t){var n=-1,o=t==null?0:t.length;for(this.__data__=new Jn;++n<o;)this.add(t[n])}function Xg(t){return this.__data__.set(t,E),this}function $g(t){return this.__data__.has(t)}ti.prototype.add=ti.prototype.push=Xg,ti.prototype.has=$g;function pn(t){var n=this.__data__=new Yn(t);this.size=n.size}function em(){this.__data__=new Yn,this.size=0}function tm(t){var n=this.__data__,o=n.delete(t);return this.size=n.size,o}function nm(t){return this.__data__.get(t)}function rm(t){return this.__data__.has(t)}function im(t,n){var o=this.__data__;if(o instanceof Yn){var f=o.__data__;if(!zs||f.length<l-1)return f.push([t,n]),this.size=++o.size,this;o=this.__data__=new Jn(f)}return o.set(t,n),this.size=o.size,this}pn.prototype.clear=em,pn.prototype.delete=tm,pn.prototype.get=nm,pn.prototype.has=rm,pn.prototype.set=im;function sc(t,n){var o=ge(t),f=!o&&oi(t),g=!o&&!f&&br(t),A=!o&&!f&&!g&&Wi(t),b=o||f||g||A,M=b?Oi(t.length,Li):[],P=M.length;for(var k in t)(n||m.call(t,k))&&!(b&&(k=="length"||g&&(k=="offset"||k=="parent")||A&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||Xn(k,P)))&&M.push(k);return M}function oc(t){var n=t.length;return n?t[al(0,n-1)]:i}function sm(t,n){return Ja(Nt(t),ni(n,0,t.length))}function om(t){return Ja(Nt(t))}function Zu(t,n,o){(o!==i&&!gn(t[n],o)||o===i&&!(n in t))&&jn(t,n,o)}function Ks(t,n,o){var f=t[n];(!(m.call(t,n)&&gn(f,o))||o===i&&!(n in t))&&jn(t,n,o)}function Fa(t,n){for(var o=t.length;o--;)if(gn(t[o][0],n))return o;return-1}function am(t,n,o,f){return xr(t,function(g,A,b){n(f,g,o(g),b)}),f}function ac(t,n){return t&&Pn(n,mt(n),t)}function um(t,n){return t&&Pn(n,kt(n),t)}function jn(t,n,o){n=="__proto__"&&G?G(t,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[n]=o}function Xu(t,n){for(var o=-1,f=n.length,g=F(f),A=t==null;++o<f;)g[o]=A?i:Pl(t,n[o]);return g}function ni(t,n,o){return t===t&&(o!==i&&(t=t<=o?t:o),n!==i&&(t=t>=n?t:n)),t}function en(t,n,o,f,g,A){var b,M=n&L,P=n&z,k=n&H;if(o&&(b=g?o(t,f,g,A):o(t)),b!==i)return b;if(!Je(t))return t;var q=ge(t);if(q){if(b=Qm(t),!M)return Nt(t,b)}else{var Y=Rt(t),Z=Y==Nn||Y==ds;if(br(t))return Oc(t,M);if(Y==Jt||Y==yn||Z&&!g){if(b=P||Z?{}:Qc(t),!M)return P?Um(t,um(b,t)):Nm(t,ac(b,t))}else{if(!Fe[Y])return g?t:{};b=Zm(t,Y,M)}}A||(A=new pn);var ie=A.get(t);if(ie)return ie;A.set(t,b),bh(t)?t.forEach(function(he){b.add(en(he,n,o,he,t,A))}):Eh(t)&&t.forEach(function(he,Ee){b.set(Ee,en(he,n,o,Ee,t,A))});var ce=k?P?vl:wl:P?kt:mt,Ae=q?i:ce(t);return Ct(Ae||t,function(he,Ee){Ae&&(Ee=he,he=t[Ee]),Ks(b,Ee,en(he,n,o,Ee,t,A))}),b}function lm(t){var n=mt(t);return function(o){return uc(o,t,n)}}function uc(t,n,o){var f=o.length;if(t==null)return!f;for(t=Ie(t);f--;){var g=o[f],A=n[g],b=t[g];if(b===i&&!(g in t)||!A(b))return!1}return!0}function lc(t,n,o){if(typeof t!="function")throw new ut(p);return Xs(function(){t.apply(i,o)},n)}function Gs(t,n,o,f){var g=-1,A=Qr,b=!0,M=t.length,P=[],k=n.length;if(!M)return P;o&&(n=Le(n,yt(o))),f?(A=cn,b=!1):n.length>=l&&(A=dn,b=!1,n=new ti(n));e:for(;++g<M;){var q=t[g],Y=o==null?q:o(q);if(q=f||q!==0?q:0,b&&Y===Y){for(var Z=k;Z--;)if(n[Z]===Y)continue e;P.push(q)}else A(n,Y,f)||P.push(q)}return P}var xr=Lc(On),fc=Lc(el,!0);function fm(t,n){var o=!0;return xr(t,function(f,g,A){return o=!!n(f,g,A),o}),o}function La(t,n,o){for(var f=-1,g=t.length;++f<g;){var A=t[f],b=n(A);if(b!=null&&(M===i?b===b&&!Kt(b):o(b,M)))var M=b,P=A}return P}function cm(t,n,o,f){var g=t.length;for(o=ve(o),o<0&&(o=-o>g?0:g+o),f=f===i||f>g?g:ve(f),f<0&&(f+=g),f=o>f?0:Vh(f);o<f;)t[o++]=n;return t}function cc(t,n){var o=[];return xr(t,function(f,g,A){n(f,g,A)&&o.push(f)}),o}function xt(t,n,o,f,g){var A=-1,b=t.length;for(o||(o=$m),g||(g=[]);++A<b;){var M=t[A];n>0&&o(M)?n>1?xt(M,n-1,o,f,g):hn(g,M):f||(g[g.length]=M)}return g}var $u=Dc(),hc=Dc(!0);function On(t,n){return t&&$u(t,n,mt)}function el(t,n){return t&&hc(t,n,mt)}function Da(t,n){return fn(n,function(o){return $n(t[o])})}function ri(t,n){n=Er(n,t);for(var o=0,f=n.length;t!=null&&o<f;)t=t[In(n[o++])];return o&&o==f?t:i}function dc(t,n,o){var f=n(t);return ge(t)?f:hn(f,o(t))}function Ot(t){return t==null?t===i?Tt:bo:st&&st in Ie(t)?Ym(t):o0(t)}function tl(t,n){return t>n}function hm(t,n){return t!=null&&m.call(t,n)}function dm(t,n){return t!=null&&n in Ie(t)}function pm(t,n,o){return t>=qe(n,o)&&t<Qe(n,o)}function nl(t,n,o){for(var f=o?cn:Qr,g=t[0].length,A=t.length,b=A,M=F(A),P=1/0,k=[];b--;){var q=t[b];b&&n&&(q=Le(q,yt(n))),P=qe(q.length,P),M[b]=!o&&(n||g>=120&&q.length>=120)?new ti(b&&q):i}q=t[0];var Y=-1,Z=M[0];e:for(;++Y<g&&k.length<P;){var ie=q[Y],ce=n?n(ie):ie;if(ie=o||ie!==0?ie:0,!(Z?dn(Z,ce):f(k,ce,o))){for(b=A;--b;){var Ae=M[b];if(!(Ae?dn(Ae,ce):f(t[b],ce,o)))continue e}Z&&Z.push(ce),k.push(ie)}}return k}function gm(t,n,o,f){return On(t,function(g,A,b){n(f,o(g),A,b)}),f}function Ys(t,n,o){n=Er(n,t),t=eh(t,n);var f=t==null?t:t[In(nn(n))];return f==null?i:gt(f,t,o)}function pc(t){return Ze(t)&&Ot(t)==yn}function mm(t){return Ze(t)&&Ot(t)==un}function wm(t){return Ze(t)&&Ot(t)==lr}function Js(t,n,o,f,g){return t===n?!0:t==null||n==null||!Ze(t)&&!Ze(n)?t!==t&&n!==n:vm(t,n,o,f,Js,g)}function vm(t,n,o,f,g,A){var b=ge(t),M=ge(n),P=b?Lr:Rt(t),k=M?Lr:Rt(n);P=P==yn?Jt:P,k=k==yn?Jt:k;var q=P==Jt,Y=k==Jt,Z=P==k;if(Z&&br(t)){if(!br(n))return!1;b=!0,q=!1}if(Z&&!q)return A||(A=new pn),b||Wi(t)?Yc(t,n,o,f,g,A):Km(t,n,P,o,f,g,A);if(!(o&R)){var ie=q&&m.call(t,"__wrapped__"),ce=Y&&m.call(n,"__wrapped__");if(ie||ce){var Ae=ie?t.value():t,he=ce?n.value():n;return A||(A=new pn),g(Ae,he,o,f,A)}}return Z?(A||(A=new pn),Gm(t,n,o,f,g,A)):!1}function Am(t){return Ze(t)&&Rt(t)==_t}function rl(t,n,o,f){var g=o.length,A=g,b=!f;if(t==null)return!A;for(t=Ie(t);g--;){var M=o[g];if(b&&M[2]?M[1]!==t[M[0]]:!(M[0]in t))return!1}for(;++g<A;){M=o[g];var P=M[0],k=t[P],q=M[1];if(b&&M[2]){if(k===i&&!(P in t))return!1}else{var Y=new pn;if(f)var Z=f(k,q,P,t,n,Y);if(!(Z===i?Js(q,k,R|ue,f,Y):Z))return!1}}return!0}function gc(t){if(!Je(t)||t0(t))return!1;var n=$n(t)?K:Fo;return n.test(si(t))}function ym(t){return Ze(t)&&Ot(t)==cr}function xm(t){return Ze(t)&&Rt(t)==Te}function _m(t){return Ze(t)&&eu(t.length)&&!!Ne[Ot(t)]}function mc(t){return typeof t=="function"?t:t==null?zt:typeof t=="object"?ge(t)?Ac(t[0],t[1]):vc(t):Nh(t)}function il(t){if(!Zs(t))return yr(t);var n=[];for(var o in Ie(t))m.call(t,o)&&o!="constructor"&&n.push(o);return n}function Em(t){if(!Je(t))return s0(t);var n=Zs(t),o=[];for(var f in t)f=="constructor"&&(n||!m.call(t,f))||o.push(f);return o}function sl(t,n){return t<n}function wc(t,n){var o=-1,f=Ut(t)?F(t.length):[];return xr(t,function(g,A,b){f[++o]=n(g,A,b)}),f}function vc(t){var n=yl(t);return n.length==1&&n[0][2]?Xc(n[0][0],n[0][1]):function(o){return o===t||rl(o,t,n)}}function Ac(t,n){return _l(t)&&Zc(n)?Xc(In(t),n):function(o){var f=Pl(o,t);return f===i&&f===n?Il(o,t):Js(n,f,R|ue)}}function Na(t,n,o,f,g){t!==n&&$u(n,function(A,b){if(g||(g=new pn),Je(A))Sm(t,n,b,o,Na,f,g);else{var M=f?f(Sl(t,b),A,b+"",t,n,g):i;M===i&&(M=A),Zu(t,b,M)}},kt)}function Sm(t,n,o,f,g,A,b){var M=Sl(t,o),P=Sl(n,o),k=b.get(P);if(k){Zu(t,o,k);return}var q=A?A(M,P,o+"",t,n,b):i,Y=q===i;if(Y){var Z=ge(P),ie=!Z&&br(P),ce=!Z&&!ie&&Wi(P);q=P,Z||ie||ce?ge(M)?q=M:et(M)?q=Nt(M):ie?(Y=!1,q=Oc(P,!0)):ce?(Y=!1,q=Pc(P,!0)):q=[]:$s(P)||oi(P)?(q=M,oi(M)?q=Th(M):(!Je(M)||$n(M))&&(q=Qc(P))):Y=!1}Y&&(b.set(P,q),g(q,P,f,A,b),b.delete(P)),Zu(t,o,q)}function yc(t,n){var o=t.length;if(!!o)return n+=n<0?o:0,Xn(n,o)?t[n]:i}function xc(t,n,o){n.length?n=Le(n,function(A){return ge(A)?function(b){return ri(b,A.length===1?A[0]:A)}:A}):n=[zt];var f=-1;n=Le(n,yt(fe()));var g=wc(t,function(A,b,M){var P=Le(n,function(k){return k(A)});return{criteria:P,index:++f,value:A}});return wa(g,function(A,b){return Dm(A,b,o)})}function bm(t,n){return _c(t,n,function(o,f){return Il(t,f)})}function _c(t,n,o){for(var f=-1,g=n.length,A={};++f<g;){var b=n[f],M=ri(t,b);o(M,b)&&js(A,Er(b,t),M)}return A}function Rm(t){return function(n){return ri(n,t)}}function ol(t,n,o,f){var g=f?ma:Wn,A=-1,b=n.length,M=t;for(t===n&&(n=Nt(n)),o&&(M=Le(t,yt(o)));++A<b;)for(var P=0,k=n[A],q=o?o(k):k;(P=g(M,q,P,f))>-1;)M!==t&&je.call(M,P,1),je.call(t,P,1);return t}function Ec(t,n){for(var o=t?n.length:0,f=o-1;o--;){var g=n[o];if(o==f||g!==A){var A=g;Xn(g)?je.call(t,g,1):fl(t,g)}}return t}function al(t,n){return t+me(Di()*(n-t+1))}function Vm(t,n,o,f){for(var g=-1,A=Qe(ne((n-t)/(o||1)),0),b=F(A);A--;)b[f?A:++g]=t,t+=o;return b}function ul(t,n){var o="";if(!t||n<1||n>an)return o;do n%2&&(o+=t),n=me(n/2),n&&(t+=t);while(n);return o}function xe(t,n){return bl($c(t,n,zt),t+"")}function Tm(t){return oc(Ki(t))}function Mm(t,n){var o=Ki(t);return Ja(o,ni(n,0,o.length))}function js(t,n,o,f){if(!Je(t))return t;n=Er(n,t);for(var g=-1,A=n.length,b=A-1,M=t;M!=null&&++g<A;){var P=In(n[g]),k=o;if(P==="__proto__"||P==="constructor"||P==="prototype")return t;if(g!=b){var q=M[P];k=f?f(q,P,M):i,k===i&&(k=Je(q)?q:Xn(n[g+1])?[]:{})}Ks(M,P,k),M=M[P]}return t}var Sc=Pa?function(t,n){return Pa.set(t,n),t}:zt,Cm=G?function(t,n){return G(t,"toString",{configurable:!0,enumerable:!1,value:Fl(n),writable:!0})}:zt;function Om(t){return Ja(Ki(t))}function tn(t,n,o){var f=-1,g=t.length;n<0&&(n=-n>g?0:g+n),o=o>g?g:o,o<0&&(o+=g),g=n>o?0:o-n>>>0,n>>>=0;for(var A=F(g);++f<g;)A[f]=t[f+n];return A}function Pm(t,n){var o;return xr(t,function(f,g,A){return o=n(f,g,A),!o}),!!o}function Ua(t,n,o){var f=0,g=t==null?f:t.length;if(typeof n=="number"&&n===n&&g<=fs){for(;f<g;){var A=f+g>>>1,b=t[A];b!==null&&!Kt(b)&&(o?b<=n:b<n)?f=A+1:g=A}return g}return ll(t,n,zt,o)}function ll(t,n,o,f){var g=0,A=t==null?0:t.length;if(A===0)return 0;n=o(n);for(var b=n!==n,M=n===null,P=Kt(n),k=n===i;g<A;){var q=me((g+A)/2),Y=o(t[q]),Z=Y!==i,ie=Y===null,ce=Y===Y,Ae=Kt(Y);if(b)var he=f||ce;else k?he=ce&&(f||Z):M?he=ce&&Z&&(f||!ie):P?he=ce&&Z&&!ie&&(f||!Ae):ie||Ae?he=!1:he=f?Y<=n:Y<n;he?g=q+1:A=q}return qe(A,ls)}function bc(t,n){for(var o=-1,f=t.length,g=0,A=[];++o<f;){var b=t[o],M=n?n(b):b;if(!o||!gn(M,P)){var P=M;A[g++]=b===0?0:b}}return A}function Rc(t){return typeof t=="number"?t:Kt(t)?ur:+t}function Wt(t){if(typeof t=="string")return t;if(ge(t))return Le(t,Wt)+"";if(Kt(t))return ic?ic.call(t):"";var n=t+"";return n=="0"&&1/t==-An?"-0":n}function _r(t,n,o){var f=-1,g=Qr,A=t.length,b=!0,M=[],P=M;if(o)b=!1,g=cn;else if(A>=l){var k=n?null:Hm(t);if(k)return Fi(k);b=!1,g=dn,P=new ti}else P=n?[]:M;e:for(;++f<A;){var q=t[f],Y=n?n(q):q;if(q=o||q!==0?q:0,b&&Y===Y){for(var Z=P.length;Z--;)if(P[Z]===Y)continue e;n&&P.push(Y),M.push(q)}else g(P,Y,o)||(P!==M&&P.push(Y),M.push(q))}return M}function fl(t,n){return n=Er(n,t),t=eh(t,n),t==null||delete t[In(nn(n))]}function Vc(t,n,o,f){return js(t,n,o(ri(t,n)),f)}function ka(t,n,o,f){for(var g=t.length,A=f?g:-1;(f?A--:++A<g)&&n(t[A],A,t););return o?tn(t,f?0:A,f?A+1:g):tn(t,f?A+1:0,f?g:A)}function Tc(t,n){var o=t;return o instanceof Se&&(o=o.value()),Ri(n,function(f,g){return g.func.apply(g.thisArg,hn([f],g.args))},o)}function cl(t,n,o){var f=t.length;if(f<2)return f?_r(t[0]):[];for(var g=-1,A=F(f);++g<f;)for(var b=t[g],M=-1;++M<f;)M!=g&&(A[g]=Gs(A[g]||b,t[M],n,o));return _r(xt(A,1),n,o)}function Mc(t,n,o){for(var f=-1,g=t.length,A=n.length,b={};++f<g;){var M=f<A?n[f]:i;o(b,t[f],M)}return b}function hl(t){return et(t)?t:[]}function dl(t){return typeof t=="function"?t:zt}function Er(t,n){return ge(t)?t:_l(t,n)?[t]:ih(Be(t))}var Im=xe;function Sr(t,n,o){var f=t.length;return o=o===i?f:o,!n&&o>=f?t:tn(t,n,o)}var Cc=oe||function(t){return $e.clearTimeout(t)};function Oc(t,n){if(n)return t.slice();var o=t.length,f=Pe?Pe(o):new t.constructor(o);return t.copy(f),f}function pl(t){var n=new t.constructor(t.byteLength);return new we(n).set(new we(t)),n}function Bm(t,n){var o=n?pl(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}function Fm(t){var n=new t.constructor(t.source,qr.exec(t));return n.lastIndex=t.lastIndex,n}function Lm(t){return Ws?Ie(Ws.call(t)):{}}function Pc(t,n){var o=n?pl(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Ic(t,n){if(t!==n){var o=t!==i,f=t===null,g=t===t,A=Kt(t),b=n!==i,M=n===null,P=n===n,k=Kt(n);if(!M&&!k&&!A&&t>n||A&&b&&P&&!M&&!k||f&&b&&P||!o&&P||!g)return 1;if(!f&&!A&&!k&&t<n||k&&o&&g&&!f&&!A||M&&o&&g||!b&&g||!P)return-1}return 0}function Dm(t,n,o){for(var f=-1,g=t.criteria,A=n.criteria,b=g.length,M=o.length;++f<b;){var P=Ic(g[f],A[f]);if(P){if(f>=M)return P;var k=o[f];return P*(k=="desc"?-1:1)}}return t.index-n.index}function Bc(t,n,o,f){for(var g=-1,A=t.length,b=o.length,M=-1,P=n.length,k=Qe(A-b,0),q=F(P+k),Y=!f;++M<P;)q[M]=n[M];for(;++g<b;)(Y||g<A)&&(q[o[g]]=t[g]);for(;k--;)q[M++]=t[g++];return q}function Fc(t,n,o,f){for(var g=-1,A=t.length,b=-1,M=o.length,P=-1,k=n.length,q=Qe(A-M,0),Y=F(q+k),Z=!f;++g<q;)Y[g]=t[g];for(var ie=g;++P<k;)Y[ie+P]=n[P];for(;++b<M;)(Z||g<A)&&(Y[ie+o[b]]=t[g++]);return Y}function Nt(t,n){var o=-1,f=t.length;for(n||(n=F(f));++o<f;)n[o]=t[o];return n}function Pn(t,n,o,f){var g=!o;o||(o={});for(var A=-1,b=n.length;++A<b;){var M=n[A],P=f?f(o[M],t[M],M,o,t):i;P===i&&(P=t[M]),g?jn(o,M,P):Ks(o,M,P)}return o}function Nm(t,n){return Pn(t,xl(t),n)}function Um(t,n){return Pn(t,Jc(t),n)}function za(t,n){return function(o,f){var g=ge(o)?fa:am,A=n?n():{};return g(o,t,fe(f,2),A)}}function zi(t){return xe(function(n,o){var f=-1,g=o.length,A=g>1?o[g-1]:i,b=g>2?o[2]:i;for(A=t.length>3&&typeof A=="function"?(g--,A):i,b&&Pt(o[0],o[1],b)&&(A=g<3?i:A,g=1),n=Ie(n);++f<g;){var M=o[f];M&&t(n,M,f,A)}return n})}function Lc(t,n){return function(o,f){if(o==null)return o;if(!Ut(o))return t(o,f);for(var g=o.length,A=n?g:-1,b=Ie(o);(n?A--:++A<g)&&f(b[A],A,b)!==!1;);return o}}function Dc(t){return function(n,o,f){for(var g=-1,A=Ie(n),b=f(n),M=b.length;M--;){var P=b[t?M:++g];if(o(A[P],P,A)===!1)break}return n}}function km(t,n,o){var f=n&Q,g=Qs(t);function A(){var b=this&&this!==$e&&this instanceof A?g:t;return b.apply(f?o:this,arguments)}return A}function Nc(t){return function(n){n=Be(n);var o=Xt(n)?St(n):i,f=o?o[0]:n.charAt(0),g=o?Sr(o,1).join(""):n.slice(1);return f[t]()+g}}function qi(t){return function(n){return Ri(Lh(Fh(n).replace(Ku,"")),t,"")}}function Qs(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=ki(t.prototype),f=t.apply(o,n);return Je(f)?f:o}}function zm(t,n,o){var f=Qs(t);function g(){for(var A=arguments.length,b=F(A),M=A,P=Hi(g);M--;)b[M]=arguments[M];var k=A<3&&b[0]!==P&&b[A-1]!==P?[]:Mn(b,P);if(A-=k.length,A<o)return Hc(t,n,qa,g.placeholder,i,b,k,i,i,o-A);var q=this&&this!==$e&&this instanceof g?f:t;return gt(q,this,b)}return g}function Uc(t){return function(n,o,f){var g=Ie(n);if(!Ut(n)){var A=fe(o,3);n=mt(n),o=function(M){return A(g[M],M,g)}}var b=t(n,o,f);return b>-1?g[A?n[b]:b]:i}}function kc(t){return Zn(function(n){var o=n.length,f=o,g=$t.prototype.thru;for(t&&n.reverse();f--;){var A=n[f];if(typeof A!="function")throw new ut(p);if(g&&!b&&Ga(A)=="wrapper")var b=new $t([],!0)}for(f=b?f:o;++f<o;){A=n[f];var M=Ga(A),P=M=="wrapper"?Al(A):i;P&&El(P[0])&&P[1]==(Vt|ye|Ke|or)&&!P[4].length&&P[9]==1?b=b[Ga(P[0])].apply(b,P[3]):b=A.length==1&&El(A)?b[M]():b.thru(A)}return function(){var k=arguments,q=k[0];if(b&&k.length==1&&ge(q))return b.plant(q).value();for(var Y=0,Z=o?n[Y].apply(this,k):q;++Y<o;)Z=n[Y].call(this,Z);return Z}})}function qa(t,n,o,f,g,A,b,M,P,k){var q=n&Vt,Y=n&Q,Z=n&le,ie=n&(ye|He),ce=n&gi,Ae=Z?i:Qs(t);function he(){for(var Ee=arguments.length,Re=F(Ee),Gt=Ee;Gt--;)Re[Gt]=arguments[Gt];if(ie)var It=Hi(he),Yt=ya(Re,It);if(f&&(Re=Bc(Re,f,g,ie)),A&&(Re=Fc(Re,A,b,ie)),Ee-=Yt,ie&&Ee<k){var tt=Mn(Re,It);return Hc(t,n,qa,he.placeholder,o,Re,tt,M,P,k-Ee)}var mn=Y?o:this,tr=Z?mn[t]:t;return Ee=Re.length,M?Re=a0(Re,M):ce&&Ee>1&&Re.reverse(),q&&P<Ee&&(Re.length=P),this&&this!==$e&&this instanceof he&&(tr=Ae||Qs(tr)),tr.apply(mn,Re)}return he}function zc(t,n){return function(o,f){return gm(o,t,n(f),{})}}function Ha(t,n){return function(o,f){var g;if(o===i&&f===i)return n;if(o!==i&&(g=o),f!==i){if(g===i)return f;typeof o=="string"||typeof f=="string"?(o=Wt(o),f=Wt(f)):(o=Rc(o),f=Rc(f)),g=t(o,f)}return g}}function gl(t){return Zn(function(n){return n=Le(n,yt(fe())),xe(function(o){var f=this;return t(n,function(g){return gt(g,f,o)})})})}function Wa(t,n){n=n===i?" ":Wt(n);var o=n.length;if(o<2)return o?ul(n,t):n;var f=ul(n,ne(t/Cn(n)));return Xt(n)?Sr(St(f),0,t).join(""):f.slice(0,t)}function qm(t,n,o,f){var g=n&Q,A=Qs(t);function b(){for(var M=-1,P=arguments.length,k=-1,q=f.length,Y=F(q+P),Z=this&&this!==$e&&this instanceof b?A:t;++k<q;)Y[k]=f[k];for(;P--;)Y[k++]=arguments[++M];return gt(Z,g?o:this,Y)}return b}function qc(t){return function(n,o,f){return f&&typeof f!="number"&&Pt(n,o,f)&&(o=f=i),n=er(n),o===i?(o=n,n=0):o=er(o),f=f===i?n<o?1:-1:er(f),Vm(n,o,f,t)}}function Ka(t){return function(n,o){return typeof n=="string"&&typeof o=="string"||(n=rn(n),o=rn(o)),t(n,o)}}function Hc(t,n,o,f,g,A,b,M,P,k){var q=n&ye,Y=q?b:i,Z=q?i:b,ie=q?A:i,ce=q?i:A;n|=q?Ke:Xe,n&=~(q?Xe:Ke),n&_e||(n&=~(Q|le));var Ae=[t,n,g,ie,Y,ce,Z,M,P,k],he=o.apply(i,Ae);return El(t)&&th(he,Ae),he.placeholder=f,nh(he,t,n)}function ml(t){var n=Ye[t];return function(o,f){if(o=rn(o),f=f==null?0:qe(ve(f),292),f&&Dt(o)){var g=(Be(o)+"e").split("e"),A=n(g[0]+"e"+(+g[1]+f));return g=(Be(A)+"e").split("e"),+(g[0]+"e"+(+g[1]-f))}return n(o)}}var Hm=Ni&&1/Fi(new Ni([,-0]))[1]==An?function(t){return new Ni(t)}:Nl;function Wc(t){return function(n){var o=Rt(n);return o==_t?Ii(n):o==Te?ba(n):va(n,t(n))}}function Qn(t,n,o,f,g,A,b,M){var P=n&le;if(!P&&typeof t!="function")throw new ut(p);var k=f?f.length:0;if(k||(n&=~(Ke|Xe),f=g=i),b=b===i?b:Qe(ve(b),0),M=M===i?M:ve(M),k-=g?g.length:0,n&Xe){var q=f,Y=g;f=g=i}var Z=P?i:Al(t),ie=[t,n,o,f,g,q,Y,A,b,M];if(Z&&i0(ie,Z),t=ie[0],n=ie[1],o=ie[2],f=ie[3],g=ie[4],M=ie[9]=ie[9]===i?P?0:t.length:Qe(ie[9]-k,0),!M&&n&(ye|He)&&(n&=~(ye|He)),!n||n==Q)var ce=km(t,n,o);else n==ye||n==He?ce=zm(t,n,M):(n==Ke||n==(Q|Ke))&&!g.length?ce=qm(t,n,o,f):ce=qa.apply(i,ie);var Ae=Z?Sc:th;return nh(Ae(ce,ie),t,n)}function Kc(t,n,o,f){return t===i||gn(t,c[o])&&!m.call(f,o)?n:t}function Gc(t,n,o,f,g,A){return Je(t)&&Je(n)&&(A.set(n,t),Na(t,n,i,Gc,A),A.delete(n)),t}function Wm(t){return $s(t)?i:t}function Yc(t,n,o,f,g,A){var b=o&R,M=t.length,P=n.length;if(M!=P&&!(b&&P>M))return!1;var k=A.get(t),q=A.get(n);if(k&&q)return k==n&&q==t;var Y=-1,Z=!0,ie=o&ue?new ti:i;for(A.set(t,n),A.set(n,t);++Y<M;){var ce=t[Y],Ae=n[Y];if(f)var he=b?f(Ae,ce,Y,n,t,A):f(ce,Ae,Y,t,n,A);if(he!==i){if(he)continue;Z=!1;break}if(ie){if(!Vi(n,function(Ee,Re){if(!dn(ie,Re)&&(ce===Ee||g(ce,Ee,o,f,A)))return ie.push(Re)})){Z=!1;break}}else if(!(ce===Ae||g(ce,Ae,o,f,A))){Z=!1;break}}return A.delete(t),A.delete(n),Z}function Km(t,n,o,f,g,A,b){switch(o){case kn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case un:return!(t.byteLength!=n.byteLength||!A(new we(t),new we(n)));case Dn:case lr:case Et:return gn(+t,+n);case fr:return t.name==n.name&&t.message==n.message;case cr:case Ht:return t==n+"";case _t:var M=Ii;case Te:var P=f&R;if(M||(M=Fi),t.size!=n.size&&!P)return!1;var k=b.get(t);if(k)return k==n;f|=ue,b.set(t,n);var q=Yc(M(t),M(n),f,g,A,b);return b.delete(t),q;case jt:if(Ws)return Ws.call(t)==Ws.call(n)}return!1}function Gm(t,n,o,f,g,A){var b=o&R,M=wl(t),P=M.length,k=wl(n),q=k.length;if(P!=q&&!b)return!1;for(var Y=P;Y--;){var Z=M[Y];if(!(b?Z in n:m.call(n,Z)))return!1}var ie=A.get(t),ce=A.get(n);if(ie&&ce)return ie==n&&ce==t;var Ae=!0;A.set(t,n),A.set(n,t);for(var he=b;++Y<P;){Z=M[Y];var Ee=t[Z],Re=n[Z];if(f)var Gt=b?f(Re,Ee,Z,n,t,A):f(Ee,Re,Z,t,n,A);if(!(Gt===i?Ee===Re||g(Ee,Re,o,f,A):Gt)){Ae=!1;break}he||(he=Z=="constructor")}if(Ae&&!he){var It=t.constructor,Yt=n.constructor;It!=Yt&&"constructor"in t&&"constructor"in n&&!(typeof It=="function"&&It instanceof It&&typeof Yt=="function"&&Yt instanceof Yt)&&(Ae=!1)}return A.delete(t),A.delete(n),Ae}function Zn(t){return bl($c(t,i,uh),t+"")}function wl(t){return dc(t,mt,xl)}function vl(t){return dc(t,kt,Jc)}var Al=Pa?function(t){return Pa.get(t)}:Nl;function Ga(t){for(var n=t.name+"",o=Ui[n],f=m.call(Ui,n)?o.length:0;f--;){var g=o[f],A=g.func;if(A==null||A==t)return g.name}return n}function Hi(t){var n=m.call(v,"placeholder")?v:t;return n.placeholder}function fe(){var t=v.iteratee||Ll;return t=t===Ll?mc:t,arguments.length?t(arguments[0],arguments[1]):t}function Ya(t,n){var o=t.__data__;return e0(n)?o[typeof n=="string"?"string":"hash"]:o.map}function yl(t){for(var n=mt(t),o=n.length;o--;){var f=n[o],g=t[f];n[o]=[f,g,Zc(g)]}return n}function ii(t,n){var o=Sa(t,n);return gc(o)?o:i}function Ym(t){var n=m.call(t,st),o=t[st];try{t[st]=i;var f=!0}catch{}var g=_.call(t);return f&&(n?t[st]=o:delete t[st]),g}var xl=pe?function(t){return t==null?[]:(t=Ie(t),fn(pe(t),function(n){return Ue.call(t,n)}))}:Ul,Jc=pe?function(t){for(var n=[];t;)hn(n,xl(t)),t=Oe(t);return n}:Ul,Rt=Ot;(ju&&Rt(new ju(new ArrayBuffer(1)))!=kn||zs&&Rt(new zs)!=_t||Qu&&Rt(Qu.resolve())!=ps||Ni&&Rt(new Ni)!=Te||qs&&Rt(new qs)!=nt)&&(Rt=function(t){var n=Ot(t),o=n==Jt?t.constructor:i,f=o?si(o):"";if(f)switch(f){case Mg:return kn;case Cg:return _t;case Og:return ps;case Pg:return Te;case Ig:return nt}return n});function Jm(t,n,o){for(var f=-1,g=o.length;++f<g;){var A=o[f],b=A.size;switch(A.type){case"drop":t+=b;break;case"dropRight":n-=b;break;case"take":n=qe(n,t+b);break;case"takeRight":t=Qe(t,n-b);break}}return{start:t,end:n}}function jm(t){var n=t.match(Oo);return n?n[1].split(wi):[]}function jc(t,n,o){n=Er(n,t);for(var f=-1,g=n.length,A=!1;++f<g;){var b=In(n[f]);if(!(A=t!=null&&o(t,b)))break;t=t[b]}return A||++f!=g?A:(g=t==null?0:t.length,!!g&&eu(g)&&Xn(b,g)&&(ge(t)||oi(t)))}function Qm(t){var n=t.length,o=new t.constructor(n);return n&&typeof t[0]=="string"&&m.call(t,"index")&&(o.index=t.index,o.input=t.input),o}function Qc(t){return typeof t.constructor=="function"&&!Zs(t)?ki(Oe(t)):{}}function Zm(t,n,o){var f=t.constructor;switch(n){case un:return pl(t);case Dn:case lr:return new f(+t);case kn:return Bm(t,o);case xn:case pt:case _n:case Dr:case Nr:case Qt:case Ur:case Zt:case kr:return Pc(t,o);case _t:return new f;case Et:case Ht:return new f(t);case cr:return Fm(t);case Te:return new f;case jt:return Lm(t)}}function Xm(t,n){var o=n.length;if(!o)return t;var f=o-1;return n[f]=(o>1?"& ":"")+n[f],n=n.join(o>2?", ":" "),t.replace(dr,`{
/* [wrapped with `+n+`] */
`)}function $m(t){return ge(t)||oi(t)||!!(se&&t&&t[se])}function Xn(t,n){var o=typeof t;return n=n==null?an:n,!!n&&(o=="number"||o!="symbol"&&Do.test(t))&&t>-1&&t%1==0&&t<n}function Pt(t,n,o){if(!Je(o))return!1;var f=typeof n;return(f=="number"?Ut(o)&&Xn(n,o.length):f=="string"&&n in o)?gn(o[n],t):!1}function _l(t,n){if(ge(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Kt(t)?!0:ws.test(t)||!Sn.test(t)||n!=null&&t in Ie(n)}function e0(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function El(t){var n=Ga(t),o=v[n];if(typeof o!="function"||!(n in Se.prototype))return!1;if(t===o)return!0;var f=Al(o);return!!f&&t===f[0]}function t0(t){return!!I&&I in t}var n0=w?$n:kl;function Zs(t){var n=t&&t.constructor,o=typeof n=="function"&&n.prototype||c;return t===o}function Zc(t){return t===t&&!Je(t)}function Xc(t,n){return function(o){return o==null?!1:o[t]===n&&(n!==i||t in Ie(o))}}function r0(t){var n=Xa(t,function(f){return o.size===S&&o.clear(),f}),o=n.cache;return n}function i0(t,n){var o=t[1],f=n[1],g=o|f,A=g<(Q|le|Vt),b=f==Vt&&o==ye||f==Vt&&o==or&&t[7].length<=n[8]||f==(Vt|or)&&n[7].length<=n[8]&&o==ye;if(!(A||b))return t;f&Q&&(t[2]=n[2],g|=o&Q?0:_e);var M=n[3];if(M){var P=t[3];t[3]=P?Bc(P,M,n[4]):M,t[4]=P?Mn(t[3],C):n[4]}return M=n[5],M&&(P=t[5],t[5]=P?Fc(P,M,n[6]):M,t[6]=P?Mn(t[5],C):n[6]),M=n[7],M&&(t[7]=M),f&Vt&&(t[8]=t[8]==null?n[8]:qe(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=g,t}function s0(t){var n=[];if(t!=null)for(var o in Ie(t))n.push(o);return n}function o0(t){return _.call(t)}function $c(t,n,o){return n=Qe(n===i?t.length-1:n,0),function(){for(var f=arguments,g=-1,A=Qe(f.length-n,0),b=F(A);++g<A;)b[g]=f[n+g];g=-1;for(var M=F(n+1);++g<n;)M[g]=f[g];return M[n]=o(b),gt(t,this,M)}}function eh(t,n){return n.length<2?t:ri(t,tn(n,0,-1))}function a0(t,n){for(var o=t.length,f=qe(n.length,o),g=Nt(t);f--;){var A=n[f];t[f]=Xn(A,o)?g[A]:i}return t}function Sl(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var th=rh(Sc),Xs=ae||function(t,n){return $e.setTimeout(t,n)},bl=rh(Cm);function nh(t,n,o){var f=n+"";return bl(t,Xm(f,u0(jm(f),o)))}function rh(t){var n=0,o=0;return function(){var f=ks(),g=ar-(f-o);if(o=f,g>0){if(++n>=as)return arguments[0]}else n=0;return t.apply(i,arguments)}}function Ja(t,n){var o=-1,f=t.length,g=f-1;for(n=n===i?f:n;++o<n;){var A=al(o,g),b=t[A];t[A]=t[o],t[o]=b}return t.length=n,t}var ih=r0(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(rt,function(o,f,g,A){n.push(g?A.replace(zr,"$1"):f||o)}),n});function In(t){if(typeof t=="string"||Kt(t))return t;var n=t+"";return n=="0"&&1/t==-An?"-0":n}function si(t){if(t!=null){try{return x.call(t)}catch{}try{return t+""}catch{}}return""}function u0(t,n){return Ct(cs,function(o){var f="_."+o[0];n&o[1]&&!Qr(t,f)&&t.push(f)}),t.sort()}function sh(t){if(t instanceof Se)return t.clone();var n=new $t(t.__wrapped__,t.__chain__);return n.__actions__=Nt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function l0(t,n,o){(o?Pt(t,n,o):n===i)?n=1:n=Qe(ve(n),0);var f=t==null?0:t.length;if(!f||n<1)return[];for(var g=0,A=0,b=F(ne(f/n));g<f;)b[A++]=tn(t,g,g+=n);return b}function f0(t){for(var n=-1,o=t==null?0:t.length,f=0,g=[];++n<o;){var A=t[n];A&&(g[f++]=A)}return g}function c0(){var t=arguments.length;if(!t)return[];for(var n=F(t-1),o=arguments[0],f=t;f--;)n[f-1]=arguments[f];return hn(ge(o)?Nt(o):[o],xt(n,1))}var h0=xe(function(t,n){return et(t)?Gs(t,xt(n,1,et,!0)):[]}),d0=xe(function(t,n){var o=nn(n);return et(o)&&(o=i),et(t)?Gs(t,xt(n,1,et,!0),fe(o,2)):[]}),p0=xe(function(t,n){var o=nn(n);return et(o)&&(o=i),et(t)?Gs(t,xt(n,1,et,!0),i,o):[]});function g0(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===i?1:ve(n),tn(t,n<0?0:n,f)):[]}function m0(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===i?1:ve(n),n=f-n,tn(t,0,n<0?0:n)):[]}function w0(t,n){return t&&t.length?ka(t,fe(n,3),!0,!0):[]}function v0(t,n){return t&&t.length?ka(t,fe(n,3),!0):[]}function A0(t,n,o,f){var g=t==null?0:t.length;return g?(o&&typeof o!="number"&&Pt(t,n,o)&&(o=0,f=g),cm(t,n,o,f)):[]}function oh(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var g=o==null?0:ve(o);return g<0&&(g=Qe(f+g,0)),Zr(t,fe(n,3),g)}function ah(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var g=f-1;return o!==i&&(g=ve(o),g=o<0?Qe(f+g,0):qe(g,f-1)),Zr(t,fe(n,3),g,!0)}function uh(t){var n=t==null?0:t.length;return n?xt(t,1):[]}function y0(t){var n=t==null?0:t.length;return n?xt(t,An):[]}function x0(t,n){var o=t==null?0:t.length;return o?(n=n===i?1:ve(n),xt(t,n)):[]}function _0(t){for(var n=-1,o=t==null?0:t.length,f={};++n<o;){var g=t[n];f[g[0]]=g[1]}return f}function lh(t){return t&&t.length?t[0]:i}function E0(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var g=o==null?0:ve(o);return g<0&&(g=Qe(f+g,0)),Wn(t,n,g)}function S0(t){var n=t==null?0:t.length;return n?tn(t,0,-1):[]}var b0=xe(function(t){var n=Le(t,hl);return n.length&&n[0]===t[0]?nl(n):[]}),R0=xe(function(t){var n=nn(t),o=Le(t,hl);return n===nn(o)?n=i:o.pop(),o.length&&o[0]===t[0]?nl(o,fe(n,2)):[]}),V0=xe(function(t){var n=nn(t),o=Le(t,hl);return n=typeof n=="function"?n:i,n&&o.pop(),o.length&&o[0]===t[0]?nl(o,i,n):[]});function T0(t,n){return t==null?"":bt.call(t,n)}function nn(t){var n=t==null?0:t.length;return n?t[n-1]:i}function M0(t,n,o){var f=t==null?0:t.length;if(!f)return-1;var g=f;return o!==i&&(g=ve(o),g=g<0?Qe(f+g,0):qe(g,f-1)),n===n?Va(t,n,g):Zr(t,Fs,g,!0)}function C0(t,n){return t&&t.length?yc(t,ve(n)):i}var O0=xe(fh);function fh(t,n){return t&&t.length&&n&&n.length?ol(t,n):t}function P0(t,n,o){return t&&t.length&&n&&n.length?ol(t,n,fe(o,2)):t}function I0(t,n,o){return t&&t.length&&n&&n.length?ol(t,n,i,o):t}var B0=Zn(function(t,n){var o=t==null?0:t.length,f=Xu(t,n);return Ec(t,Le(n,function(g){return Xn(g,o)?+g:g}).sort(Ic)),f});function F0(t,n){var o=[];if(!(t&&t.length))return o;var f=-1,g=[],A=t.length;for(n=fe(n,3);++f<A;){var b=t[f];n(b,f,t)&&(o.push(b),g.push(f))}return Ec(t,g),o}function Rl(t){return t==null?t:Tg.call(t)}function L0(t,n,o){var f=t==null?0:t.length;return f?(o&&typeof o!="number"&&Pt(t,n,o)?(n=0,o=f):(n=n==null?0:ve(n),o=o===i?f:ve(o)),tn(t,n,o)):[]}function D0(t,n){return Ua(t,n)}function N0(t,n,o){return ll(t,n,fe(o,2))}function U0(t,n){var o=t==null?0:t.length;if(o){var f=Ua(t,n);if(f<o&&gn(t[f],n))return f}return-1}function k0(t,n){return Ua(t,n,!0)}function z0(t,n,o){return ll(t,n,fe(o,2),!0)}function q0(t,n){var o=t==null?0:t.length;if(o){var f=Ua(t,n,!0)-1;if(gn(t[f],n))return f}return-1}function H0(t){return t&&t.length?bc(t):[]}function W0(t,n){return t&&t.length?bc(t,fe(n,2)):[]}function K0(t){var n=t==null?0:t.length;return n?tn(t,1,n):[]}function G0(t,n,o){return t&&t.length?(n=o||n===i?1:ve(n),tn(t,0,n<0?0:n)):[]}function Y0(t,n,o){var f=t==null?0:t.length;return f?(n=o||n===i?1:ve(n),n=f-n,tn(t,n<0?0:n,f)):[]}function J0(t,n){return t&&t.length?ka(t,fe(n,3),!1,!0):[]}function j0(t,n){return t&&t.length?ka(t,fe(n,3)):[]}var Q0=xe(function(t){return _r(xt(t,1,et,!0))}),Z0=xe(function(t){var n=nn(t);return et(n)&&(n=i),_r(xt(t,1,et,!0),fe(n,2))}),X0=xe(function(t){var n=nn(t);return n=typeof n=="function"?n:i,_r(xt(t,1,et,!0),i,n)});function $0(t){return t&&t.length?_r(t):[]}function ew(t,n){return t&&t.length?_r(t,fe(n,2)):[]}function tw(t,n){return n=typeof n=="function"?n:i,t&&t.length?_r(t,i,n):[]}function Vl(t){if(!(t&&t.length))return[];var n=0;return t=fn(t,function(o){if(et(o))return n=Qe(o.length,n),!0}),Oi(n,function(o){return Le(t,Mi(o))})}function ch(t,n){if(!(t&&t.length))return[];var o=Vl(t);return n==null?o:Le(o,function(f){return gt(n,i,f)})}var nw=xe(function(t,n){return et(t)?Gs(t,n):[]}),rw=xe(function(t){return cl(fn(t,et))}),iw=xe(function(t){var n=nn(t);return et(n)&&(n=i),cl(fn(t,et),fe(n,2))}),sw=xe(function(t){var n=nn(t);return n=typeof n=="function"?n:i,cl(fn(t,et),i,n)}),ow=xe(Vl);function aw(t,n){return Mc(t||[],n||[],Ks)}function uw(t,n){return Mc(t||[],n||[],js)}var lw=xe(function(t){var n=t.length,o=n>1?t[n-1]:i;return o=typeof o=="function"?(t.pop(),o):i,ch(t,o)});function hh(t){var n=v(t);return n.__chain__=!0,n}function fw(t,n){return n(t),t}function ja(t,n){return n(t)}var cw=Zn(function(t){var n=t.length,o=n?t[0]:0,f=this.__wrapped__,g=function(A){return Xu(A,t)};return n>1||this.__actions__.length||!(f instanceof Se)||!Xn(o)?this.thru(g):(f=f.slice(o,+o+(n?1:0)),f.__actions__.push({func:ja,args:[g],thisArg:i}),new $t(f,this.__chain__).thru(function(A){return n&&!A.length&&A.push(i),A}))});function hw(){return hh(this)}function dw(){return new $t(this.value(),this.__chain__)}function pw(){this.__values__===i&&(this.__values__=Rh(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function gw(){return this}function mw(t){for(var n,o=this;o instanceof Ba;){var f=sh(o);f.__index__=0,f.__values__=i,n?g.__wrapped__=f:n=f;var g=f;o=o.__wrapped__}return g.__wrapped__=t,n}function ww(){var t=this.__wrapped__;if(t instanceof Se){var n=t;return this.__actions__.length&&(n=new Se(this)),n=n.reverse(),n.__actions__.push({func:ja,args:[Rl],thisArg:i}),new $t(n,this.__chain__)}return this.thru(Rl)}function vw(){return Tc(this.__wrapped__,this.__actions__)}var Aw=za(function(t,n,o){m.call(t,o)?++t[o]:jn(t,o,1)});function yw(t,n,o){var f=ge(t)?ha:fm;return o&&Pt(t,n,o)&&(n=i),f(t,fe(n,3))}function xw(t,n){var o=ge(t)?fn:cc;return o(t,fe(n,3))}var _w=Uc(oh),Ew=Uc(ah);function Sw(t,n){return xt(Qa(t,n),1)}function bw(t,n){return xt(Qa(t,n),An)}function Rw(t,n,o){return o=o===i?1:ve(o),xt(Qa(t,n),o)}function dh(t,n){var o=ge(t)?Ct:xr;return o(t,fe(n,3))}function ph(t,n){var o=ge(t)?ca:fc;return o(t,fe(n,3))}var Vw=za(function(t,n,o){m.call(t,o)?t[o].push(n):jn(t,o,[n])});function Tw(t,n,o,f){t=Ut(t)?t:Ki(t),o=o&&!f?ve(o):0;var g=t.length;return o<0&&(o=Qe(g+o,0)),tu(t)?o<=g&&t.indexOf(n,o)>-1:!!g&&Wn(t,n,o)>-1}var Mw=xe(function(t,n,o){var f=-1,g=typeof n=="function",A=Ut(t)?F(t.length):[];return xr(t,function(b){A[++f]=g?gt(n,b,o):Ys(b,n,o)}),A}),Cw=za(function(t,n,o){jn(t,o,n)});function Qa(t,n){var o=ge(t)?Le:wc;return o(t,fe(n,3))}function Ow(t,n,o,f){return t==null?[]:(ge(n)||(n=n==null?[]:[n]),o=f?i:o,ge(o)||(o=o==null?[]:[o]),xc(t,n,o))}var Pw=za(function(t,n,o){t[o?0:1].push(n)},function(){return[[],[]]});function Iw(t,n,o){var f=ge(t)?Ri:Ls,g=arguments.length<3;return f(t,fe(n,4),o,g,xr)}function Bw(t,n,o){var f=ge(t)?da:Ls,g=arguments.length<3;return f(t,fe(n,4),o,g,fc)}function Fw(t,n){var o=ge(t)?fn:cc;return o(t,$a(fe(n,3)))}function Lw(t){var n=ge(t)?oc:Tm;return n(t)}function Dw(t,n,o){(o?Pt(t,n,o):n===i)?n=1:n=ve(n);var f=ge(t)?sm:Mm;return f(t,n)}function Nw(t){var n=ge(t)?om:Om;return n(t)}function Uw(t){if(t==null)return 0;if(Ut(t))return tu(t)?Cn(t):t.length;var n=Rt(t);return n==_t||n==Te?t.size:il(t).length}function kw(t,n,o){var f=ge(t)?Vi:Pm;return o&&Pt(t,n,o)&&(n=i),f(t,fe(n,3))}var zw=xe(function(t,n){if(t==null)return[];var o=n.length;return o>1&&Pt(t,n[0],n[1])?n=[]:o>2&&Pt(n[0],n[1],n[2])&&(n=[n[0]]),xc(t,xt(n,1),[])}),Za=$||function(){return $e.Date.now()};function qw(t,n){if(typeof n!="function")throw new ut(p);return t=ve(t),function(){if(--t<1)return n.apply(this,arguments)}}function gh(t,n,o){return n=o?i:n,n=t&&n==null?t.length:n,Qn(t,Vt,i,i,i,i,n)}function mh(t,n){var o;if(typeof n!="function")throw new ut(p);return t=ve(t),function(){return--t>0&&(o=n.apply(this,arguments)),t<=1&&(n=i),o}}var Tl=xe(function(t,n,o){var f=Q;if(o.length){var g=Mn(o,Hi(Tl));f|=Ke}return Qn(t,f,n,o,g)}),wh=xe(function(t,n,o){var f=Q|le;if(o.length){var g=Mn(o,Hi(wh));f|=Ke}return Qn(n,f,t,o,g)});function vh(t,n,o){n=o?i:n;var f=Qn(t,ye,i,i,i,i,i,n);return f.placeholder=vh.placeholder,f}function Ah(t,n,o){n=o?i:n;var f=Qn(t,He,i,i,i,i,i,n);return f.placeholder=Ah.placeholder,f}function yh(t,n,o){var f,g,A,b,M,P,k=0,q=!1,Y=!1,Z=!0;if(typeof t!="function")throw new ut(p);n=rn(n)||0,Je(o)&&(q=!!o.leading,Y="maxWait"in o,A=Y?Qe(rn(o.maxWait)||0,n):A,Z="trailing"in o?!!o.trailing:Z);function ie(tt){var mn=f,tr=g;return f=g=i,k=tt,b=t.apply(tr,mn),b}function ce(tt){return k=tt,M=Xs(Ee,n),q?ie(tt):b}function Ae(tt){var mn=tt-P,tr=tt-k,Uh=n-mn;return Y?qe(Uh,A-tr):Uh}function he(tt){var mn=tt-P,tr=tt-k;return P===i||mn>=n||mn<0||Y&&tr>=A}function Ee(){var tt=Za();if(he(tt))return Re(tt);M=Xs(Ee,Ae(tt))}function Re(tt){return M=i,Z&&f?ie(tt):(f=g=i,b)}function Gt(){M!==i&&Cc(M),k=0,f=P=g=M=i}function It(){return M===i?b:Re(Za())}function Yt(){var tt=Za(),mn=he(tt);if(f=arguments,g=this,P=tt,mn){if(M===i)return ce(P);if(Y)return Cc(M),M=Xs(Ee,n),ie(P)}return M===i&&(M=Xs(Ee,n)),b}return Yt.cancel=Gt,Yt.flush=It,Yt}var Hw=xe(function(t,n){return lc(t,1,n)}),Ww=xe(function(t,n,o){return lc(t,rn(n)||0,o)});function Kw(t){return Qn(t,gi)}function Xa(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new ut(p);var o=function(){var f=arguments,g=n?n.apply(this,f):f[0],A=o.cache;if(A.has(g))return A.get(g);var b=t.apply(this,f);return o.cache=A.set(g,b)||A,b};return o.cache=new(Xa.Cache||Jn),o}Xa.Cache=Jn;function $a(t){if(typeof t!="function")throw new ut(p);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Gw(t){return mh(2,t)}var Yw=Im(function(t,n){n=n.length==1&&ge(n[0])?Le(n[0],yt(fe())):Le(xt(n,1),yt(fe()));var o=n.length;return xe(function(f){for(var g=-1,A=qe(f.length,o);++g<A;)f[g]=n[g].call(this,f[g]);return gt(t,this,f)})}),Ml=xe(function(t,n){var o=Mn(n,Hi(Ml));return Qn(t,Ke,i,n,o)}),xh=xe(function(t,n){var o=Mn(n,Hi(xh));return Qn(t,Xe,i,n,o)}),Jw=Zn(function(t,n){return Qn(t,or,i,i,i,n)});function jw(t,n){if(typeof t!="function")throw new ut(p);return n=n===i?n:ve(n),xe(t,n)}function Qw(t,n){if(typeof t!="function")throw new ut(p);return n=n==null?0:Qe(ve(n),0),xe(function(o){var f=o[n],g=Sr(o,0,n);return f&&hn(g,f),gt(t,this,g)})}function Zw(t,n,o){var f=!0,g=!0;if(typeof t!="function")throw new ut(p);return Je(o)&&(f="leading"in o?!!o.leading:f,g="trailing"in o?!!o.trailing:g),yh(t,n,{leading:f,maxWait:n,trailing:g})}function Xw(t){return gh(t,1)}function $w(t,n){return Ml(dl(n),t)}function ev(){if(!arguments.length)return[];var t=arguments[0];return ge(t)?t:[t]}function tv(t){return en(t,H)}function nv(t,n){return n=typeof n=="function"?n:i,en(t,H,n)}function rv(t){return en(t,L|H)}function iv(t,n){return n=typeof n=="function"?n:i,en(t,L|H,n)}function sv(t,n){return n==null||uc(t,n,mt(n))}function gn(t,n){return t===n||t!==t&&n!==n}var ov=Ka(tl),av=Ka(function(t,n){return t>=n}),oi=pc(function(){return arguments}())?pc:function(t){return Ze(t)&&m.call(t,"callee")&&!Ue.call(t,"callee")},ge=F.isArray,uv=wr?yt(wr):mm;function Ut(t){return t!=null&&eu(t.length)&&!$n(t)}function et(t){return Ze(t)&&Ut(t)}function lv(t){return t===!0||t===!1||Ze(t)&&Ot(t)==Dn}var br=ze||kl,fv=vr?yt(vr):wm;function cv(t){return Ze(t)&&t.nodeType===1&&!$s(t)}function hv(t){if(t==null)return!0;if(Ut(t)&&(ge(t)||typeof t=="string"||typeof t.splice=="function"||br(t)||Wi(t)||oi(t)))return!t.length;var n=Rt(t);if(n==_t||n==Te)return!t.size;if(Zs(t))return!il(t).length;for(var o in t)if(m.call(t,o))return!1;return!0}function dv(t,n){return Js(t,n)}function pv(t,n,o){o=typeof o=="function"?o:i;var f=o?o(t,n):i;return f===i?Js(t,n,i,o):!!f}function Cl(t){if(!Ze(t))return!1;var n=Ot(t);return n==fr||n==hs||typeof t.message=="string"&&typeof t.name=="string"&&!$s(t)}function gv(t){return typeof t=="number"&&Dt(t)}function $n(t){if(!Je(t))return!1;var n=Ot(t);return n==Nn||n==ds||n==So||n==Ro}function _h(t){return typeof t=="number"&&t==ve(t)}function eu(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=an}function Je(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Ze(t){return t!=null&&typeof t=="object"}var Eh=Os?yt(Os):Am;function mv(t,n){return t===n||rl(t,n,yl(n))}function wv(t,n,o){return o=typeof o=="function"?o:i,rl(t,n,yl(n),o)}function vv(t){return Sh(t)&&t!=+t}function Av(t){if(n0(t))throw new de(h);return gc(t)}function yv(t){return t===null}function xv(t){return t==null}function Sh(t){return typeof t=="number"||Ze(t)&&Ot(t)==Et}function $s(t){if(!Ze(t)||Ot(t)!=Jt)return!1;var n=Oe(t);if(n===null)return!0;var o=m.call(n,"constructor")&&n.constructor;return typeof o=="function"&&o instanceof o&&x.call(o)==T}var Ol=Ps?yt(Ps):ym;function _v(t){return _h(t)&&t>=-an&&t<=an}var bh=Hn?yt(Hn):xm;function tu(t){return typeof t=="string"||!ge(t)&&Ze(t)&&Ot(t)==Ht}function Kt(t){return typeof t=="symbol"||Ze(t)&&Ot(t)==jt}var Wi=Is?yt(Is):_m;function Ev(t){return t===i}function Sv(t){return Ze(t)&&Rt(t)==nt}function bv(t){return Ze(t)&&Ot(t)==Un}var Rv=Ka(sl),Vv=Ka(function(t,n){return t<=n});function Rh(t){if(!t)return[];if(Ut(t))return tu(t)?St(t):Nt(t);if(be&&t[be])return Ju(t[be]());var n=Rt(t),o=n==_t?Ii:n==Te?Fi:Ki;return o(t)}function er(t){if(!t)return t===0?t:0;if(t=rn(t),t===An||t===-An){var n=t<0?-1:1;return n*Eo}return t===t?t:0}function ve(t){var n=er(t),o=n%1;return n===n?o?n-o:n:0}function Vh(t){return t?ni(ve(t),0,Ft):0}function rn(t){if(typeof t=="number")return t;if(Kt(t))return ur;if(Je(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Je(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Ds(t);var o=Bo.test(t);return o||Lo.test(t)?la(t.slice(2),o?2:8):Io.test(t)?ur:+t}function Th(t){return Pn(t,kt(t))}function Tv(t){return t?ni(ve(t),-an,an):t===0?t:0}function Be(t){return t==null?"":Wt(t)}var Mv=zi(function(t,n){if(Zs(n)||Ut(n)){Pn(n,mt(n),t);return}for(var o in n)m.call(n,o)&&Ks(t,o,n[o])}),Mh=zi(function(t,n){Pn(n,kt(n),t)}),nu=zi(function(t,n,o,f){Pn(n,kt(n),t,f)}),Cv=zi(function(t,n,o,f){Pn(n,mt(n),t,f)}),Ov=Zn(Xu);function Pv(t,n){var o=ki(t);return n==null?o:ac(o,n)}var Iv=xe(function(t,n){t=Ie(t);var o=-1,f=n.length,g=f>2?n[2]:i;for(g&&Pt(n[0],n[1],g)&&(f=1);++o<f;)for(var A=n[o],b=kt(A),M=-1,P=b.length;++M<P;){var k=b[M],q=t[k];(q===i||gn(q,c[k])&&!m.call(t,k))&&(t[k]=A[k])}return t}),Bv=xe(function(t){return t.push(i,Gc),gt(Ch,i,t)});function Fv(t,n){return ga(t,fe(n,3),On)}function Lv(t,n){return ga(t,fe(n,3),el)}function Dv(t,n){return t==null?t:$u(t,fe(n,3),kt)}function Nv(t,n){return t==null?t:hc(t,fe(n,3),kt)}function Uv(t,n){return t&&On(t,fe(n,3))}function kv(t,n){return t&&el(t,fe(n,3))}function zv(t){return t==null?[]:Da(t,mt(t))}function qv(t){return t==null?[]:Da(t,kt(t))}function Pl(t,n,o){var f=t==null?i:ri(t,n);return f===i?o:f}function Hv(t,n){return t!=null&&jc(t,n,hm)}function Il(t,n){return t!=null&&jc(t,n,dm)}var Wv=zc(function(t,n,o){n!=null&&typeof n.toString!="function"&&(n=_.call(n)),t[n]=o},Fl(zt)),Kv=zc(function(t,n,o){n!=null&&typeof n.toString!="function"&&(n=_.call(n)),m.call(t,n)?t[n].push(o):t[n]=[o]},fe),Gv=xe(Ys);function mt(t){return Ut(t)?sc(t):il(t)}function kt(t){return Ut(t)?sc(t,!0):Em(t)}function Yv(t,n){var o={};return n=fe(n,3),On(t,function(f,g,A){jn(o,n(f,g,A),f)}),o}function Jv(t,n){var o={};return n=fe(n,3),On(t,function(f,g,A){jn(o,g,n(f,g,A))}),o}var jv=zi(function(t,n,o){Na(t,n,o)}),Ch=zi(function(t,n,o,f){Na(t,n,o,f)}),Qv=Zn(function(t,n){var o={};if(t==null)return o;var f=!1;n=Le(n,function(A){return A=Er(A,t),f||(f=A.length>1),A}),Pn(t,vl(t),o),f&&(o=en(o,L|z|H,Wm));for(var g=n.length;g--;)fl(o,n[g]);return o});function Zv(t,n){return Oh(t,$a(fe(n)))}var Xv=Zn(function(t,n){return t==null?{}:bm(t,n)});function Oh(t,n){if(t==null)return{};var o=Le(vl(t),function(f){return[f]});return n=fe(n),_c(t,o,function(f,g){return n(f,g[0])})}function $v(t,n,o){n=Er(n,t);var f=-1,g=n.length;for(g||(g=1,t=i);++f<g;){var A=t==null?i:t[In(n[f])];A===i&&(f=g,A=o),t=$n(A)?A.call(t):A}return t}function eA(t,n,o){return t==null?t:js(t,n,o)}function tA(t,n,o,f){return f=typeof f=="function"?f:i,t==null?t:js(t,n,o,f)}var Ph=Wc(mt),Ih=Wc(kt);function nA(t,n,o){var f=ge(t),g=f||br(t)||Wi(t);if(n=fe(n,4),o==null){var A=t&&t.constructor;g?o=f?new A:[]:Je(t)?o=$n(A)?ki(Oe(t)):{}:o={}}return(g?Ct:On)(t,function(b,M,P){return n(o,b,M,P)}),o}function rA(t,n){return t==null?!0:fl(t,n)}function iA(t,n,o){return t==null?t:Vc(t,n,dl(o))}function sA(t,n,o,f){return f=typeof f=="function"?f:i,t==null?t:Vc(t,n,dl(o),f)}function Ki(t){return t==null?[]:$r(t,mt(t))}function oA(t){return t==null?[]:$r(t,kt(t))}function aA(t,n,o){return o===i&&(o=n,n=i),o!==i&&(o=rn(o),o=o===o?o:0),n!==i&&(n=rn(n),n=n===n?n:0),ni(rn(t),n,o)}function uA(t,n,o){return n=er(n),o===i?(o=n,n=0):o=er(o),t=rn(t),pm(t,n,o)}function lA(t,n,o){if(o&&typeof o!="boolean"&&Pt(t,n,o)&&(n=o=i),o===i&&(typeof n=="boolean"?(o=n,n=i):typeof t=="boolean"&&(o=t,t=i)),t===i&&n===i?(t=0,n=1):(t=er(t),n===i?(n=t,t=0):n=er(n)),t>n){var f=t;t=n,n=f}if(o||t%1||n%1){var g=Di();return qe(t+g*(n-t+ua("1e-"+((g+"").length-1))),n)}return al(t,n)}var fA=qi(function(t,n,o){return n=n.toLowerCase(),t+(o?Bh(n):n)});function Bh(t){return Bl(Be(t).toLowerCase())}function Fh(t){return t=Be(t),t&&t.replace(No,xa).replace(Xo,"")}function cA(t,n,o){t=Be(t),n=Wt(n);var f=t.length;o=o===i?f:ni(ve(o),0,f);var g=o;return o-=n.length,o>=0&&t.slice(o,g)==n}function hA(t){return t=Be(t),t&&Co.test(t)?t.replace(mi,_a):t}function dA(t){return t=Be(t),t&&vt.test(t)?t.replace(We,"\\$&"):t}var pA=qi(function(t,n,o){return t+(o?"-":"")+n.toLowerCase()}),gA=qi(function(t,n,o){return t+(o?" ":"")+n.toLowerCase()}),mA=Nc("toLowerCase");function wA(t,n,o){t=Be(t),n=ve(n);var f=n?Cn(t):0;if(!n||f>=n)return t;var g=(n-f)/2;return Wa(me(g),o)+t+Wa(ne(g),o)}function vA(t,n,o){t=Be(t),n=ve(n);var f=n?Cn(t):0;return n&&f<n?t+Wa(n-f,o):t}function AA(t,n,o){t=Be(t),n=ve(n);var f=n?Cn(t):0;return n&&f<n?Wa(n-f,o)+t:t}function yA(t,n,o){return o||n==null?n=0:n&&(n=+n),Gn(Be(t).replace(zn,""),n||0)}function xA(t,n,o){return(o?Pt(t,n,o):n===i)?n=1:n=ve(n),ul(Be(t),n)}function _A(){var t=arguments,n=Be(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var EA=qi(function(t,n,o){return t+(o?"_":"")+n.toLowerCase()});function SA(t,n,o){return o&&typeof o!="number"&&Pt(t,n,o)&&(n=o=i),o=o===i?Ft:o>>>0,o?(t=Be(t),t&&(typeof n=="string"||n!=null&&!Ol(n))&&(n=Wt(n),!n&&Xt(t))?Sr(St(t),0,o):t.split(n,o)):[]}var bA=qi(function(t,n,o){return t+(o?" ":"")+Bl(n)});function RA(t,n,o){return t=Be(t),o=o==null?0:ni(ve(o),0,t.length),n=Wt(n),t.slice(o,o+n.length)==n}function VA(t,n,o){var f=v.templateSettings;o&&Pt(t,n,o)&&(n=i),t=Be(t),n=nu({},n,f,Kc);var g=nu({},n.imports,f.imports,Kc),A=mt(g),b=$r(g,A),M,P,k=0,q=n.interpolate||Hr,Y="__p += '",Z=Ar((n.escape||Hr).source+"|"+q.source+"|"+(q===hr?Po:Hr).source+"|"+(n.evaluate||Hr).source+"|$","g"),ie="//# sourceURL="+(m.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ra+"]")+`
`;t.replace(Z,function(he,Ee,Re,Gt,It,Yt){return Re||(Re=Gt),Y+=t.slice(k,Yt).replace(Uo,Ea),Ee&&(M=!0,Y+=`' +
__e(`+Ee+`) +
'`),It&&(P=!0,Y+=`';
`+It+`;
__p += '`),Re&&(Y+=`' +
((__t = (`+Re+`)) == null ? '' : __t) +
'`),k=Yt+he.length,he}),Y+=`';
`;var ce=m.call(n,"variable")&&n.variable;if(!ce)Y=`with (obj) {
`+Y+`
}
`;else if(vs.test(ce))throw new de(d);Y=(P?Y.replace(Vo,""):Y).replace(To,"$1").replace(gs,"$1;"),Y="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Y+`return __p
}`;var Ae=Dh(function(){return Me(A,ie+"return "+Y).apply(i,b)});if(Ae.source=Y,Cl(Ae))throw Ae;return Ae}function TA(t){return Be(t).toLowerCase()}function MA(t){return Be(t).toUpperCase()}function CA(t,n,o){if(t=Be(t),t&&(o||n===i))return Ds(t);if(!t||!(n=Wt(n)))return t;var f=St(t),g=St(n),A=Aa(f,g),b=Pi(f,g)+1;return Sr(f,A,b).join("")}function OA(t,n,o){if(t=Be(t),t&&(o||n===i))return t.slice(0,Ns(t)+1);if(!t||!(n=Wt(n)))return t;var f=St(t),g=Pi(f,St(n))+1;return Sr(f,0,g).join("")}function PA(t,n,o){if(t=Be(t),t&&(o||n===i))return t.replace(zn,"");if(!t||!(n=Wt(n)))return t;var f=St(t),g=Aa(f,St(n));return Sr(f,g).join("")}function IA(t,n){var o=ss,f=os;if(Je(n)){var g="separator"in n?n.separator:g;o="length"in n?ve(n.length):o,f="omission"in n?Wt(n.omission):f}t=Be(t);var A=t.length;if(Xt(t)){var b=St(t);A=b.length}if(o>=A)return t;var M=o-Cn(f);if(M<1)return f;var P=b?Sr(b,0,M).join(""):t.slice(0,M);if(g===i)return P+f;if(b&&(M+=P.length-M),Ol(g)){if(t.slice(M).search(g)){var k,q=P;for(g.global||(g=Ar(g.source,Be(qr.exec(g))+"g")),g.lastIndex=0;k=g.exec(q);)var Y=k.index;P=P.slice(0,Y===i?M:Y)}}else if(t.indexOf(Wt(g),M)!=M){var Z=P.lastIndexOf(g);Z>-1&&(P=P.slice(0,Z))}return P+f}function BA(t){return t=Be(t),t&&Mo.test(t)?t.replace(Lt,Ta):t}var FA=qi(function(t,n,o){return t+(o?" ":"")+n.toUpperCase()}),Bl=Nc("toUpperCase");function Lh(t,n,o){return t=Be(t),n=o?i:n,n===i?Yu(t)?Ca(t):Gu(t):t.match(n)||[]}var Dh=xe(function(t,n){try{return gt(t,i,n)}catch(o){return Cl(o)?o:new de(o)}}),LA=Zn(function(t,n){return Ct(n,function(o){o=In(o),jn(t,o,Tl(t[o],t))}),t});function DA(t){var n=t==null?0:t.length,o=fe();return t=n?Le(t,function(f){if(typeof f[1]!="function")throw new ut(p);return[o(f[0]),f[1]]}):[],xe(function(f){for(var g=-1;++g<n;){var A=t[g];if(gt(A[0],this,f))return gt(A[1],this,f)}})}function NA(t){return lm(en(t,L))}function Fl(t){return function(){return t}}function UA(t,n){return t==null||t!==t?n:t}var kA=kc(),zA=kc(!0);function zt(t){return t}function Ll(t){return mc(typeof t=="function"?t:en(t,L))}function qA(t){return vc(en(t,L))}function HA(t,n){return Ac(t,en(n,L))}var WA=xe(function(t,n){return function(o){return Ys(o,t,n)}}),KA=xe(function(t,n){return function(o){return Ys(t,o,n)}});function Dl(t,n,o){var f=mt(n),g=Da(n,f);o==null&&!(Je(n)&&(g.length||!f.length))&&(o=n,n=t,t=this,g=Da(n,mt(n)));var A=!(Je(o)&&"chain"in o)||!!o.chain,b=$n(t);return Ct(g,function(M){var P=n[M];t[M]=P,b&&(t.prototype[M]=function(){var k=this.__chain__;if(A||k){var q=t(this.__wrapped__),Y=q.__actions__=Nt(this.__actions__);return Y.push({func:P,args:arguments,thisArg:t}),q.__chain__=k,q}return P.apply(t,hn([this.value()],arguments))})}),t}function GA(){return $e._===this&&($e._=B),this}function Nl(){}function YA(t){return t=ve(t),xe(function(n){return yc(n,t)})}var JA=gl(Le),jA=gl(ha),QA=gl(Vi);function Nh(t){return _l(t)?Mi(In(t)):Rm(t)}function ZA(t){return function(n){return t==null?i:ri(t,n)}}var XA=qc(),$A=qc(!0);function Ul(){return[]}function kl(){return!1}function e1(){return{}}function t1(){return""}function n1(){return!0}function r1(t,n){if(t=ve(t),t<1||t>an)return[];var o=Ft,f=qe(t,Ft);n=fe(n),t-=Ft;for(var g=Oi(f,n);++o<t;)n(o);return g}function i1(t){return ge(t)?Le(t,In):Kt(t)?[t]:Nt(ih(Be(t)))}function s1(t){var n=++V;return Be(t)+n}var o1=Ha(function(t,n){return t+n},0),a1=ml("ceil"),u1=Ha(function(t,n){return t/n},1),l1=ml("floor");function f1(t){return t&&t.length?La(t,zt,tl):i}function c1(t,n){return t&&t.length?La(t,fe(n,2),tl):i}function h1(t){return Ti(t,zt)}function d1(t,n){return Ti(t,fe(n,2))}function p1(t){return t&&t.length?La(t,zt,sl):i}function g1(t,n){return t&&t.length?La(t,fe(n,2),sl):i}var m1=Ha(function(t,n){return t*n},1),w1=ml("round"),v1=Ha(function(t,n){return t-n},0);function A1(t){return t&&t.length?Xr(t,zt):0}function y1(t,n){return t&&t.length?Xr(t,fe(n,2)):0}return v.after=qw,v.ary=gh,v.assign=Mv,v.assignIn=Mh,v.assignInWith=nu,v.assignWith=Cv,v.at=Ov,v.before=mh,v.bind=Tl,v.bindAll=LA,v.bindKey=wh,v.castArray=ev,v.chain=hh,v.chunk=l0,v.compact=f0,v.concat=c0,v.cond=DA,v.conforms=NA,v.constant=Fl,v.countBy=Aw,v.create=Pv,v.curry=vh,v.curryRight=Ah,v.debounce=yh,v.defaults=Iv,v.defaultsDeep=Bv,v.defer=Hw,v.delay=Ww,v.difference=h0,v.differenceBy=d0,v.differenceWith=p0,v.drop=g0,v.dropRight=m0,v.dropRightWhile=w0,v.dropWhile=v0,v.fill=A0,v.filter=xw,v.flatMap=Sw,v.flatMapDeep=bw,v.flatMapDepth=Rw,v.flatten=uh,v.flattenDeep=y0,v.flattenDepth=x0,v.flip=Kw,v.flow=kA,v.flowRight=zA,v.fromPairs=_0,v.functions=zv,v.functionsIn=qv,v.groupBy=Vw,v.initial=S0,v.intersection=b0,v.intersectionBy=R0,v.intersectionWith=V0,v.invert=Wv,v.invertBy=Kv,v.invokeMap=Mw,v.iteratee=Ll,v.keyBy=Cw,v.keys=mt,v.keysIn=kt,v.map=Qa,v.mapKeys=Yv,v.mapValues=Jv,v.matches=qA,v.matchesProperty=HA,v.memoize=Xa,v.merge=jv,v.mergeWith=Ch,v.method=WA,v.methodOf=KA,v.mixin=Dl,v.negate=$a,v.nthArg=YA,v.omit=Qv,v.omitBy=Zv,v.once=Gw,v.orderBy=Ow,v.over=JA,v.overArgs=Yw,v.overEvery=jA,v.overSome=QA,v.partial=Ml,v.partialRight=xh,v.partition=Pw,v.pick=Xv,v.pickBy=Oh,v.property=Nh,v.propertyOf=ZA,v.pull=O0,v.pullAll=fh,v.pullAllBy=P0,v.pullAllWith=I0,v.pullAt=B0,v.range=XA,v.rangeRight=$A,v.rearg=Jw,v.reject=Fw,v.remove=F0,v.rest=jw,v.reverse=Rl,v.sampleSize=Dw,v.set=eA,v.setWith=tA,v.shuffle=Nw,v.slice=L0,v.sortBy=zw,v.sortedUniq=H0,v.sortedUniqBy=W0,v.split=SA,v.spread=Qw,v.tail=K0,v.take=G0,v.takeRight=Y0,v.takeRightWhile=J0,v.takeWhile=j0,v.tap=fw,v.throttle=Zw,v.thru=ja,v.toArray=Rh,v.toPairs=Ph,v.toPairsIn=Ih,v.toPath=i1,v.toPlainObject=Th,v.transform=nA,v.unary=Xw,v.union=Q0,v.unionBy=Z0,v.unionWith=X0,v.uniq=$0,v.uniqBy=ew,v.uniqWith=tw,v.unset=rA,v.unzip=Vl,v.unzipWith=ch,v.update=iA,v.updateWith=sA,v.values=Ki,v.valuesIn=oA,v.without=nw,v.words=Lh,v.wrap=$w,v.xor=rw,v.xorBy=iw,v.xorWith=sw,v.zip=ow,v.zipObject=aw,v.zipObjectDeep=uw,v.zipWith=lw,v.entries=Ph,v.entriesIn=Ih,v.extend=Mh,v.extendWith=nu,Dl(v,v),v.add=o1,v.attempt=Dh,v.camelCase=fA,v.capitalize=Bh,v.ceil=a1,v.clamp=aA,v.clone=tv,v.cloneDeep=rv,v.cloneDeepWith=iv,v.cloneWith=nv,v.conformsTo=sv,v.deburr=Fh,v.defaultTo=UA,v.divide=u1,v.endsWith=cA,v.eq=gn,v.escape=hA,v.escapeRegExp=dA,v.every=yw,v.find=_w,v.findIndex=oh,v.findKey=Fv,v.findLast=Ew,v.findLastIndex=ah,v.findLastKey=Lv,v.floor=l1,v.forEach=dh,v.forEachRight=ph,v.forIn=Dv,v.forInRight=Nv,v.forOwn=Uv,v.forOwnRight=kv,v.get=Pl,v.gt=ov,v.gte=av,v.has=Hv,v.hasIn=Il,v.head=lh,v.identity=zt,v.includes=Tw,v.indexOf=E0,v.inRange=uA,v.invoke=Gv,v.isArguments=oi,v.isArray=ge,v.isArrayBuffer=uv,v.isArrayLike=Ut,v.isArrayLikeObject=et,v.isBoolean=lv,v.isBuffer=br,v.isDate=fv,v.isElement=cv,v.isEmpty=hv,v.isEqual=dv,v.isEqualWith=pv,v.isError=Cl,v.isFinite=gv,v.isFunction=$n,v.isInteger=_h,v.isLength=eu,v.isMap=Eh,v.isMatch=mv,v.isMatchWith=wv,v.isNaN=vv,v.isNative=Av,v.isNil=xv,v.isNull=yv,v.isNumber=Sh,v.isObject=Je,v.isObjectLike=Ze,v.isPlainObject=$s,v.isRegExp=Ol,v.isSafeInteger=_v,v.isSet=bh,v.isString=tu,v.isSymbol=Kt,v.isTypedArray=Wi,v.isUndefined=Ev,v.isWeakMap=Sv,v.isWeakSet=bv,v.join=T0,v.kebabCase=pA,v.last=nn,v.lastIndexOf=M0,v.lowerCase=gA,v.lowerFirst=mA,v.lt=Rv,v.lte=Vv,v.max=f1,v.maxBy=c1,v.mean=h1,v.meanBy=d1,v.min=p1,v.minBy=g1,v.stubArray=Ul,v.stubFalse=kl,v.stubObject=e1,v.stubString=t1,v.stubTrue=n1,v.multiply=m1,v.nth=C0,v.noConflict=GA,v.noop=Nl,v.now=Za,v.pad=wA,v.padEnd=vA,v.padStart=AA,v.parseInt=yA,v.random=lA,v.reduce=Iw,v.reduceRight=Bw,v.repeat=xA,v.replace=_A,v.result=$v,v.round=w1,v.runInContext=O,v.sample=Lw,v.size=Uw,v.snakeCase=EA,v.some=kw,v.sortedIndex=D0,v.sortedIndexBy=N0,v.sortedIndexOf=U0,v.sortedLastIndex=k0,v.sortedLastIndexBy=z0,v.sortedLastIndexOf=q0,v.startCase=bA,v.startsWith=RA,v.subtract=v1,v.sum=A1,v.sumBy=y1,v.template=VA,v.times=r1,v.toFinite=er,v.toInteger=ve,v.toLength=Vh,v.toLower=TA,v.toNumber=rn,v.toSafeInteger=Tv,v.toString=Be,v.toUpper=MA,v.trim=CA,v.trimEnd=OA,v.trimStart=PA,v.truncate=IA,v.unescape=BA,v.uniqueId=s1,v.upperCase=FA,v.upperFirst=Bl,v.each=dh,v.eachRight=ph,v.first=lh,Dl(v,function(){var t={};return On(v,function(n,o){m.call(v.prototype,o)||(t[o]=n)}),t}(),{chain:!1}),v.VERSION=a,Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){v[t].placeholder=v}),Ct(["drop","take"],function(t,n){Se.prototype[t]=function(o){o=o===i?1:Qe(ve(o),0);var f=this.__filtered__&&!n?new Se(this):this.clone();return f.__filtered__?f.__takeCount__=qe(o,f.__takeCount__):f.__views__.push({size:qe(o,Ft),type:t+(f.__dir__<0?"Right":"")}),f},Se.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Ct(["filter","map","takeWhile"],function(t,n){var o=n+1,f=o==us||o==_o;Se.prototype[t]=function(g){var A=this.clone();return A.__iteratees__.push({iteratee:fe(g,3),type:o}),A.__filtered__=A.__filtered__||f,A}}),Ct(["head","last"],function(t,n){var o="take"+(n?"Right":"");Se.prototype[t]=function(){return this[o](1).value()[0]}}),Ct(["initial","tail"],function(t,n){var o="drop"+(n?"":"Right");Se.prototype[t]=function(){return this.__filtered__?new Se(this):this[o](1)}}),Se.prototype.compact=function(){return this.filter(zt)},Se.prototype.find=function(t){return this.filter(t).head()},Se.prototype.findLast=function(t){return this.reverse().find(t)},Se.prototype.invokeMap=xe(function(t,n){return typeof t=="function"?new Se(this):this.map(function(o){return Ys(o,t,n)})}),Se.prototype.reject=function(t){return this.filter($a(fe(t)))},Se.prototype.slice=function(t,n){t=ve(t);var o=this;return o.__filtered__&&(t>0||n<0)?new Se(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),n!==i&&(n=ve(n),o=n<0?o.dropRight(-n):o.take(n-t)),o)},Se.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Se.prototype.toArray=function(){return this.take(Ft)},On(Se.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),f=/^(?:head|last)$/.test(n),g=v[f?"take"+(n=="last"?"Right":""):n],A=f||/^find/.test(n);!g||(v.prototype[n]=function(){var b=this.__wrapped__,M=f?[1]:arguments,P=b instanceof Se,k=M[0],q=P||ge(b),Y=function(Ee){var Re=g.apply(v,hn([Ee],M));return f&&Z?Re[0]:Re};q&&o&&typeof k=="function"&&k.length!=1&&(P=q=!1);var Z=this.__chain__,ie=!!this.__actions__.length,ce=A&&!Z,Ae=P&&!ie;if(!A&&q){b=Ae?b:new Se(this);var he=t.apply(b,M);return he.__actions__.push({func:ja,args:[Y],thisArg:i}),new $t(he,Z)}return ce&&Ae?t.apply(this,M):(he=this.thru(Y),ce?f?he.value()[0]:he.value():he)})}),Ct(["pop","push","shift","sort","splice","unshift"],function(t){var n=s[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",f=/^(?:pop|shift)$/.test(t);v.prototype[t]=function(){var g=arguments;if(f&&!this.__chain__){var A=this.value();return n.apply(ge(A)?A:[],g)}return this[o](function(b){return n.apply(ge(b)?b:[],g)})}}),On(Se.prototype,function(t,n){var o=v[n];if(o){var f=o.name+"";m.call(Ui,f)||(Ui[f]=[]),Ui[f].push({name:n,func:o})}}),Ui[qa(i,le).name]=[{name:"wrapper",func:i}],Se.prototype.clone=Bg,Se.prototype.reverse=Fg,Se.prototype.value=Lg,v.prototype.at=cw,v.prototype.chain=hw,v.prototype.commit=dw,v.prototype.next=pw,v.prototype.plant=mw,v.prototype.reverse=ww,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=vw,v.prototype.first=v.prototype.head,be&&(v.prototype[be]=gw),v},Kn=Oa();Tn?((Tn.exports=Kn)._=Kn,Si._=Kn):$e._=Kn}).call(ro)})(Ef,Ef.exports);var cE=Ef.exports;function lo(e=W.mousePos()){return{x:Math.floor(W.toWorld(e).x/N().tileSize),y:Math.floor(W.toWorld(e).y/N().tileSize)}}function hE(e){return(e.length/1024).toFixed(2)}function N(e="map",r){return rc.store(e,r)}const dE=cE.debounce(function(){try{const e=N().mapToString(!1),r=hE(e);console.info(`Saving map...
Map size: ${r}kb`),r<5e3?localStorage.setItem("mapString",e):console.error(`Map size is too big to save! (${r}kb)`)}catch(e){console.error(e)}},500);rc.store("map",{width:16,height:12,tileSize:32,character:"X",format:"array-text",grid_enabled:!0,colors_enabled:!0,features_enabled:!1,colors:{},map:[],mapString:"",empty:" ",info:"",extra:{minRoomSize:4,maxRoomSize:8},initialized:!1,init(){N().initialized||(N().initialized=!0,N().load(localStorage.getItem("mapString")?localStorage.getItem("mapString"):"[]",!0,!1),N().width=Math.max(3,N().width),N().height=Math.max(3,N().height),N().format=localStorage.getItem("format")?localStorage.getItem("format"):"array-text",N().updateMapString(!1))},save(){dE()},setMap(e,r,i){let a=N().map;a[r]||(a[r]=[]),a[r][e]=i,N().save()},switchFormat(){N().format==="text"?N().format="array-text":N().format==="array-text"?N().format="array-array":N().format="text",localStorage.setItem("format",N().format),N().updateMapString()},clear(){N().map=[],N().updateMapString(),W.play("message-pop")},load(e=!1,r=!0,i=!0){function a(l){let h=0,p=0;return l.forEach(d=>{d&&d.length>h&&(h=d.length),p++}),{width:h,height:p}}if(typeof e!="object"){const l=e||N().mapString,h=N().detectMapFormat(l);N().map=N().convertToArrayArray(h,l),N().centerCamera()}else N().map=e;if(r){const{width:l,height:h}=a(N().map);N().width=l,N().height=h,i&&N().save()}},centerCamera(){var e;(e=W.get("map")[0])==null||e.centerCamera(),W.play("message-pop")},toClipboard(){try{const e=document.createElement("textarea");e.value=N().mapString,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),W.play("message-pop")}catch(e){console.error(e)}},mapToString(e=!0){var p,d,E;const{width:r,height:i,format:a,map:l,empty:h}=N();if(e&&r*i>5e4)return"Map has been hidden due to its size but you can still export it. Current format is "+a+".";if(a==="array-array"){let S=[];for(let C=0;C<i;C++){let L=[];for(let z=0;z<r;z++)L.push(((p=l==null?void 0:l[C])==null?void 0:p[z])||h);S.push(L)}return JSON.stringify(S)}else if(a==="array-text"){let S=[];for(let C=0;C<i;C++){let L="";for(let z=0;z<r;z++)L+=((d=l==null?void 0:l[C])==null?void 0:d[z])||h;S.push(L)}return JSON.stringify(S,null,"  ")}else{let S="";for(let C=0;C<i;C++){for(let L=0;L<r;L++)S+=((E=l==null?void 0:l[C])==null?void 0:E[L])||h;S+=C<i?`
`:""}return S}},updateMapString(e=!0){N().mapString=N().mapToString(),e&&N().save()},getColor(e){return this.colors_enabled?(this.colors[e]||(this.colors[e]=[W.randi(255),W.randi(255),W.randi(255)]),this.colors[e]):[120,120,120]},detectMapFormat(e){try{let r=JSON.parse(e);if(typeof r=="object"&&r.length>0&&typeof r[0]=="object")return"array-array";if(typeof r=="object"&&r.length>0&&typeof r[0]=="string")return"array-text"}catch{return"text"}},convertToArrayArray(e,r){if(e==="array-text"){let i=[],a=JSON.parse(r);for(let l of a)i.push(l.split(""));return i}else if(e==="text"){let i=[],a=r.split(`
`);for(let l of a)i.push(l.split(""));return i[i.length-1].length===0&&i.pop(),i}return JSON.parse(r)},generateDungeon(){try{const{width:e,height:r,character:i,extra:a,empty:l}=N();let h=[];const p=fE({width:e,height:r,minRoomSize:parseInt(a.minRoomSize),maxRoomSize:parseInt(a.maxRoomSize)});for(let d=0;d<p.length;d++){let E=[];for(let S=0;S<p[d].length;S++)p[d][S]===1?E.push(i):E.push(l);h.push(E)}W.play("message-pop"),N().load(h),N().updateMapString()}catch(e){console.error(e)}},generateMaze(){try{const{width:e,height:r,character:i,empty:a}=N();let l=[],p=new oE(e,r).maze;for(let d=0;d<p.length;d++){let E=[];for(let S=0;S<p[d].length;S++)p[d][S].includes("door")?E.push("D"):p[d][S].includes("wall")?E.push(i):E.push(a);l[d]=E}W.play("message-pop"),N().load(l),N().updateMapString()}catch(e){console.error(e)}}});rc.start();function Vr(e){return[W.text(e.text,{size:40}),W.area(),W.anchor("center"),{update(){this.isClicked()&&N("resizer")[e.action](),!N().info&&this.isHovering()?N().info=e.info:N().info===e.info&&!this.isHovering()&&(N().info=""),this.color=this.isHovering()?W.rgb(120,120,120):W.rgb(255,255,255)}}]}function pE(e){N("resizer",{extendFromTop(){const r=N().map;r.unshift([]),N().map=r,N().height+=1,N().updateMapString()},extendFromBottom(){const r=N().map;r.push([]),N().map=r,N().height+=1,N().updateMapString(),W.camPos(W.camPos().x,W.camPos().y+N().tileSize)},extendFromLeft(){const r=N().map;for(let i=0;i<r.length;i++)r[i]&&r[i].unshift(" ");N().map=r,N().width+=1,N().updateMapString()},extendFromRight(){const r=N().map;for(let i=0;i<r.length;i++)r[i]&&r[i].push(" ");N().map=r,N().width+=1,N().updateMapString(),W.camPos(W.camPos().x+N().tileSize,W.camPos().y)},shortenFromTop(){if(N().height<=3)return;const r=N().map;r.shift(),N().map=r,N().height-=1,N().updateMapString()},shortenFromBottom(){if(N().height<=3)return;N().map.pop(),N().height-=1,N().updateMapString(),W.camPos(W.camPos().x,W.camPos().y-N().tileSize)},shortenFromLeft(){var i;if(N().width<=3)return;const r=N().map;for(let a=0;a<r.length;a++)(i=r[a])==null||i.shift();N().map=r,N().width-=1,N().updateMapString()},shortenFromRight(){var i;if(N().width<=3)return;const r=N().map;for(let a=0;a<r.length;a++)(i=r[a])==null||i.pop();N().width-=1,N().updateMapString(),W.camPos(W.camPos().x-N().tileSize,W.camPos().y)}}),e.add([...Vr({text:"+",info:"Extend your map from top",action:"extendFromTop"}),{update(){const{x:r,y:i}=e.worldPos();this.pos=W.vec2(r+N().width*N().tileSize/2-25,i-35)}}]),e.add([...Vr({text:"-",info:"Shorten your map from top",action:"shortenFromTop"}),{update(){const{x:r,y:i}=e.worldPos();this.pos=W.vec2(r+N().width*N().tileSize/2+25,i-35)}}]),e.add([...Vr({text:"+",info:"Extend your map from left",action:"extendFromLeft"}),{update(){const{x:r,y:i}=e.worldPos();this.pos=W.vec2(r-40,i+N().height*N().tileSize/2-15)}}]),e.add([...Vr({text:"-",info:"Shorten your map from left",action:"shortenFromLeft"}),{update(){const{x:r,y:i}=e.worldPos();this.pos=W.vec2(r-40,i+N().height*N().tileSize/2+25)}}]),e.add([...Vr({text:"+",info:"Extend your map from bottom",action:"extendFromBottom"}),{update(){const{x:r}=e.worldPos();this.pos=W.vec2(r+N().width*N().tileSize/2-25,N().height*N().tileSize+40)}}]),e.add([...Vr({text:"-",info:"Shorten your map from bottom",action:"shortenFromBottom"}),{update(){const{x:r}=e.worldPos();this.pos=W.vec2(r+N().width*N().tileSize/2+25,N().height*N().tileSize+40)}}]),e.add([...Vr({text:"+",info:"Extend your map from right",action:"extendFromRight"}),{update(){const{y:r}=e.worldPos();this.pos=W.vec2(N().width*N().tileSize+50,r+N().height*N().tileSize/2-15)}}]),e.add([...Vr({text:"-",info:"Shorten your map from right",action:"shortenFromRight"}),{update(){const{y:r}=e.worldPos();this.pos=W.vec2(N().width*N().tileSize+50,r+N().height*N().tileSize/2+25)}}])}function gE(){let e={x:-1,y:-1};W.onMouseDown(a=>{if(a==="left"){const{x:l,y:h}=lo(),{width:p,height:d,map:E,character:S}=N();if(e.x===l&&e.y===h)return;if(l>=p||h>=d||l<0||h<0)return;E[h]||(E[h]=[]),N().setMap(l,h,W.isKeyDown("alt")||W.isKeyDown("control")||W.isKeyDown("meta")?" ":S),e={x:l,y:h}}}),W.onMouseRelease(a=>{a==="left"&&N().updateMapString()}),document.addEventListener("keydown",a=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;const l=a.key;l.length===1&&(N().character=l)}),W.onScroll(({x:a,y:l})=>{if(window.isTrackpad&&parseInt(a)===a&&parseInt(l)===l&&window.isTrackpad){W.camPos(W.camPos().x+a*.3,W.camPos().y+l*.3);return}const p=l<0?1:-1,d=.1;W.camScale(Math.min(2,Math.max(.7,W.camScale().x+p*d)),Math.min(2,Math.max(.7,W.camScale().y+p*d)))});let r={x:0,y:0};W.onMouseMove(({x:a,y:l})=>{W.isMouseDown("right")&&W.camPos(W.camPos().x+(r.x-a),W.camPos().y+(r.y-l)),r={x:a,y:l}});const i=5;W.onUpdate(()=>{if(W.isKeyDown("right")||W.isKeyDown("left")||W.isKeyDown("up")||W.isKeyDown("down")){let a=W.camPos();W.isKeyDown("right")&&(a.x+=i*(W.isKeyDown("shift")?3:1)),W.isKeyDown("left")&&(a.x-=i*(W.isKeyDown("shift")?3:1)),W.isKeyDown("up")&&(a.y-=i*(W.isKeyDown("shift")?3:1)),W.isKeyDown("down")&&(a.y+=i*(W.isKeyDown("shift")?3:1)),W.camPos(a.x,a.y)}})}window.axios=ox;gE();W.add(["map",W.pos(0,0),W.rect(0,0),W.outline(4),W.color(240,234,210),{centerCamera(){W.camPos(this.worldPos().x+N().width*N().tileSize/2+140,this.worldPos().y+N().height*N().tileSize/2)},add(){this.centerCamera(),pE(this)},update(){const{width:e,height:r,tileSize:i}=N();this.width=e*i,this.height=r*i},draw(){const{map:e,tileSize:r,height:i,width:a,grid_enabled:l,empty:h}=N(),{x:p,y:d}=lo(),S=new Rect(W.vec2(0),W.width(),W.height()).bbox(),C=lo(S.pos),L=lo({x:S.pos.x+S.width,y:S.pos.y+S.height});for(let z=C.y+1;z<Math.min(i,L.y+0);z++){const H=e[z];if(!!H)for(let R=C.x+1;R<Math.min(a,L.x+0);R++){const ue=H[R];if(ue&&ue!==h){const Q=N().getColor(ue);W.drawText({text:ue,size:r/1.2,width:r,height:r,pos:W.vec2(R*r+5,z*r+3),color:W.rgb(Q[0],Q[1],Q[2])})}}}if(l){for(let z=Math.max(1,C.x+1);z<Math.min(a,L.x+1);z++)W.drawLine({p1:W.vec2(z*r,Math.max(4,C.y*r+4)),p2:W.vec2(z*r,this.height-4),color:W.rgb(173,193,120),width:2});for(let z=Math.max(1,C.y+1);z<Math.min(i,L.y+1);z++)W.drawLine({p1:W.vec2(Math.max(4,C.x*r-r+4),z*r),p2:W.vec2(this.width-4,z*r),color:W.rgb(173,193,120),width:2})}p>=0&&p<a&&d>=0&&d<i&&W.drawRect({width:r,height:r,pos:W.vec2(p*r,d*r),color:W.isKeyDown("alt")||W.isKeyDown("control")||W.isKeyDown("meta")?W.rgb(250,50,50):W.rgb(173,193,120),opacity:.5})}}]);W.add(["info",W.text("",{size:20}),W.fixed(),W.color(190,190,190),W.pos(10,10),{update(){this.text=N().info}}]);W.add(["coords",W.text("",{size:20}),W.fixed(),W.color(190,190,190),W.pos(10,W.height()-30),{update(){const{x:e,y:r}=lo();e>=0&&r>=0&&e<N().width&&r<N().height?this.text=e+"x"+r:this.text=""}}]);
